{"version":3,"sources":["icons/OutOfResults.png","components/common/Title.jsx","misc/style.js","components/common/Surface.jsx","misc/api.js","data/post.js","data/tag.js","misc/prepare.js","components/common/Button.jsx","components/tagSelector/TagInput.jsx","components/tag/tagUtils.js","misc/formatting.js","components/tag/Tag.jsx","icons/Icons.jsx","icons/TypeIcon.jsx","components/tagSelector/DropdownList.jsx","components/tagSelector/TagSelector.jsx","components/common/Toggle.jsx","components/common/LabeledToggle.jsx","components/features/Options.jsx","components/tag/TagList.jsx","pages/Help.jsx","components/features/Config.jsx","components/post/Details.jsx","components/player/Overlay.jsx","data/constants.js","components/player/Video.jsx","components/player/utils.js","components/player/Gif.jsx","components/player/Picture.jsx","components/player/Player.jsx","components/post/Post.jsx","components/post/PostList.jsx","components/features/Results.jsx","pages/Search.jsx","icons/R34Icon.jsx","components/features/Header.jsx","hooks/reducer.js","hooks/useAppState.js","hooks/useLocalStorage.js","components/features/Footer.jsx","pages/Settings.jsx","redux/reducers/index.js","redux/store.js","App.jsx","serviceWorker.js","index.js"],"names":["module","exports","Title","styled","h2","BigTitle","h1","layer","shadow","dropShadow","Surface","div","Line","activeApi","fetch","catch","getTags","searchTerm","res","json","getPosts","tags","pageNumber","minScore","buildPostUrl","getAliases","tag","page","tagString","map","t","modifier","encodeURIComponent","name","join","url","Post","constructor","id","score","rating","source","media_type","media_src","file_url","thumbnail_src","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","this","small_src","big_src","Tag","types","count","obj","Number","prepareTag","post","type","sample_url","preview_url","preparePost","BasicButton","button","InvisibleButton","MenuButton","active","TopLeftButton","BottomLeftButton","CenterButton","RedButton","BlockButton","AddButton","ModifierButton","Button","children","onClick","disabled","label","TypedButton","getButtonByType","aria-label","Input","input","TagInput","value","setValue","onChange","e","target","placeholder","prettifyTagname","tagname","replace","formatCount","numberString","number","toFixed","TagWrapper","collapsed","fg","bg","IconWrapper","span","left","right","activeTags","loadAliases","dispatch","useState","aliases","setAliases","setCollapsed","useEffect","some","api","then","newAliases","sort","a","b","posts","filter","alias","showAliases","length","onMouseLeave","tabIndex","TagText","ArrowIcon","className","Alias","key","text","onKeyDown","keyCode","defaultProps","StyledIcon","i","color","size","Icon","icon","CharacterIcon","attrs","ArtistIcon","CopyrightIcon","ExpandIcon","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","PlayIcon","PauseIcon","TypeIcon","find","match","ListWrapper","inputRef","offsetTop","clientHeight","offsetLeft","clientWidth","EntryWrapper","TypeWrapper","Entry","style","flexGrow","paddingRight","DropdownList","entries","entry","TagSelectorWrapper","closed","TagSelector","setInputRef","setModifier","suggestions","setSuggestions","addTag","useCallback","suggestion","prepare","handle","setTimeout","toLowerCase","newSuggestions","clearTimeout","ref","trim","s","Wrapper","Thumb","motion","variants","enabled","x","background","Toggle","props","initialValue","onToggle","initial","animate","ToggleWrapper","Label","LabeledToggle","OptionsWrapper","StyledInput","String","Options","options","localRated","setLocalRated","infinite","Boolean","rated","undefined","display","event","onBlur","originals","TagListWrapper","padding","TagList","onItemClick","onItemItemClick","Help","ConfigWrapper","section","Config","search","htmlFor","DetailsWrapper","Bar","Details","exit","open","opacity","Rating","Score","Source","toUpperCase","startsWith","href","rel","sourceString","includes","semiSanitized","substring","indexOf","formatSource","ProgressBar","visible","hidden","Overlay","onFullscreen","togglePlay","isPaused","isPlayable","currentTime","duration","whileHover","FlexVideo","video","Video","src","toggleOverlay","toggleDetails","paused","play","pause","videoRef","setVideoRef","Date","now","time","setTime","intervalId","setIntervalId","controls","loop","alt","poster","preload","elem","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","stopPropagation","setInterval","console","log","clearInterval","FlexImage","img","Gif","setPaused","usedSource","Picture","isOverlayVisible","areDetailsVisible","isVisible","Player","Media","getMediaType","getMediaByType","setOverlayVisible","PostWrapper","loadOriginal","getCorrectSource","PostListWrapper","PostList","ResultsWrapper","scrollLock","Results","results","isOutOfResults","setOutOfResults","loadMore","window","onscroll","innerHeight","document","documentElement","scrollTop","scrollHeight","outOfResultsPicture","textAlign","Search","R34Icon","xmlns","viewBox","transform","cx","cy","fill","stroke","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","y","fontVariant","fontStretch","HeaderWrapper","header","Divider","TitleBar","MenuBar","nav","Header","activeMenu","marginTop","menu","initialState","context","focusedPost","findTag","tagToFind","findIndex","state","newTag","produce","draft","tagIndex","removeTag","tagToRemove","splice","setFocusedPost","action","tagToToggle","toggleTag","addPosts","postCount","setPosts","setOption","setActiveMenu","Object","assign","reset","Error","useAppState","stateString","localStorage","getItem","JSON","parse","newState","setItem","stringify","useLocalStorage","cache","setCache","useReducer","reducer","FotterWrapper","footer","Footer","Settings","combineReducers","createStore","rootReducer","Main","main","AppWrapper","App","activePage","getActivePage","store","location","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b95e0237.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/OutOfResults.00a98fae.png\";","import styled from \"styled-components\";\r\n\r\nconst Title = styled.h2`\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\nexport default Title;\r\n\r\nexport const BigTitle = styled.h1`\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  margin: 0;\r\n`;\r\n","export const borderRadius = \"3px\";\r\nexport const borderWidth = \"2px\";\r\nexport const accentColor = \"crimson\";\r\nexport const hoverAccent = \"crimson\";\r\nexport const spacing = \"4px\";\r\nexport const bigSpacing = \"8px\";\r\nexport const backgroundColor = \"#121212\";\r\nexport const layer =\r\n  \"#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.4s ease-in-out\";\r\nexport const backgroundColor2 = \"white\";\r\nexport const shadow = \"box-shadow: 0 0 8px #000\";\r\nexport const dropShadow = \"drop-shadow(0 0 4px rgba(0, 0, 0, 1))\";\r\n\r\nexport const appMargin = \"16px\";\r\nexport const gutter = \"8px\";\r\n","import styled from \"styled-components\";\r\nimport { gutter, layer, shadow, borderRadius } from \"../../misc/style\";\r\n\r\nconst Surface = styled.div`\r\n  padding: ${gutter};\r\n  background: ${layer};\r\n  ${shadow};\r\n  border-radius: ${borderRadius};\r\n\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nexport default Surface;\r\n\r\nexport const Line = styled.div`\r\n  width: 100%;\r\n  height: 1px;\r\n  background: ${layer};\r\n`;\r\n","const pageSize = 20,\r\n  apiUrl1 = \"https://r34-json.herokuapp.com\",\r\n  apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\n// Failover to apiUrl2\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm) {\r\n    const res = await fetch(\r\n      `${activeApi}/tags?limit=${pageSize}&name=${searchTerm}*&order_by=posts`\r\n    );\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tag) {\r\n    const res = await fetch(`${activeApi}/alias/\"${tag}`);\r\n\r\n    return await res.json();\r\n  },\r\n};\r\n\r\nfunction buildPostUrl(page, tags, minScore) {\r\n  const tagString = tags\r\n    .map((t) => (t.modifier === \"-\" ? \"-\" : \"\") + encodeURIComponent(t.name))\r\n    .join(\"+\");\r\n\r\n  let url = `${activeApi}/posts?pid=${page}&limit=${pageSize}&tags=${tagString}`;\r\n\r\n  if (minScore > 0) {\r\n    url += `+${encodeURIComponent(\"score:>=\" + minScore)}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n","export default class Post {\r\n  /**\r\n   *\r\n   * @param {*} id\r\n   * @param {*} type\r\n   * @param {*} score\r\n   * @param {*} rating\r\n   * @param {*} source\r\n   * @param {*} tags\r\n   * @param {*} file_url\r\n   * @param {*} width\r\n   * @param {*} height\r\n   * @param {*} creator_id\r\n   * @param {*} creator_url\r\n   * @param {*} preview_url\r\n   * @param {*} preview_width\r\n   * @param {*} preview_height\r\n   * @param {*} sample_url\r\n   * @param {*} sample_width\r\n   * @param {*} sample_height\r\n   * @param {*} status\r\n   * @param {*} parent_id\r\n   * @param {*} has_children\r\n   * @param {*} has_comments\r\n   * @param {*} comments_url\r\n   * @param {*} has_notes\r\n   * @param {*} created_at\r\n   * @param {*} change\r\n   * @param {*} md5\r\n   */\r\n  constructor(\r\n    id,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    media_type,\r\n    media_src,\r\n    file_url,\r\n    thumbnail_src,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","export default class Tag {\r\n  /**\r\n   * @param {String} name\r\n   * @param {String[]} types\r\n   * @param {Number} count\r\n   * @param {\"+\" | \"-\"} modifier\r\n   */\r\n  constructor(name, types = [], count, modifier = \"+\") {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import Post from \"../data/post\";\r\nimport Tag from \"../data/tag\";\r\n\r\nexport default function(obj) {\r\n  return obj.name ? prepareTag(obj) : preparePost(obj);\r\n}\r\n\r\nfunction prepareTag({ name, types, count, modifier }) {\r\n  return new Tag(name, types, Number(count), modifier);\r\n}\r\n\r\nfunction preparePost(post) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  } = post;\r\n  return new Post(\r\n    Number(id),\r\n    Number(score),\r\n    rating,\r\n    source,\r\n    tags ? tags.map(t => new Tag(t)) : [],\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { node, object, string } from \"prop-types\";\r\nimport {\r\n  accentColor,\r\n  backgroundColor,\r\n  borderRadius,\r\n  spacing,\r\n  backgroundColor2,\r\n  borderWidth,\r\n  dropShadow,\r\n} from \"../../misc/style\";\r\n\r\nconst BasicButton = styled.button`\r\n  font-size: 14px;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst InvisibleButton = styled(BasicButton)`\r\n  background: none;\r\n  border: none;\r\n  padding: ${spacing};\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst MenuButton = styled(InvisibleButton)`\r\n  color: ${({ active }) => (active ? accentColor : backgroundColor2)};\r\n`;\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  margin: 10px;\r\n  padding: 5px 5px;\r\n  filter: ${dropShadow};\r\n`;\r\n\r\nconst BottomLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  margin: 10px;\r\n  padding: 5px 5px;\r\n  filter: ${dropShadow};\r\n`;\r\n\r\nconst CenterButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  filter: ${dropShadow};\r\n`;\r\n\r\nconst RedButton = styled(BasicButton)`\r\n  height: 32px;\r\n  font-size: 14px;\r\n  color: ${accentColor};\r\n  background: ${backgroundColor};\r\n  border: ${accentColor} ${borderWidth} solid;\r\n\r\n  transition: border-color 0.4s ease-in-out;\r\n  transition: color 0.4s ease-in-out;\r\n  transition: background-color 0.4s ease-in-out;\r\n\r\n  :hover {\r\n    background-color: ${accentColor};\r\n    color: ${backgroundColor};\r\n  }\r\n\r\n  :active,\r\n  :focus {\r\n    color: ${backgroundColor2};\r\n\r\n    border-color: ${backgroundColor2};\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const BlockButton = styled(RedButton)`\r\n  width: 100%;\r\n  border-radius: ${borderRadius};\r\n`;\r\n\r\nexport const AddButton = styled(RedButton)`\r\n  border-left-width: 0;\r\n  border-radius: 0 ${borderRadius} ${borderRadius} 0;\r\n`;\r\n\r\nexport const ModifierButton = styled(InvisibleButton)`\r\n  min-width: 48px;\r\n  border: ${accentColor} ${borderWidth} solid;\r\n  border-right-width: 0;\r\n  border-radius: ${borderRadius} 0 0 ${borderRadius};\r\n`;\r\n\r\n/**\r\n * @param {String} type\r\n */\r\nconst getButtonByType = (type) => {\r\n  switch (type) {\r\n    case \"invisible\":\r\n      return InvisibleButton;\r\n    case \"block\":\r\n      return BlockButton;\r\n    case \"topLeft\":\r\n      return TopLeftButton;\r\n    case \"bottomLeft\":\r\n      return BottomLeftButton;\r\n    case \"center\":\r\n      return CenterButton;\r\n    case \"modifier\":\r\n      return ModifierButton;\r\n    case \"add\":\r\n      return AddButton;\r\n    case \"menu\":\r\n      return MenuButton;\r\n    default:\r\n      return RedButton;\r\n  }\r\n};\r\n\r\nexport default function Button({\r\n  type,\r\n  children,\r\n  onClick,\r\n  active,\r\n  disabled,\r\n  label,\r\n}) {\r\n  const TypedButton = getButtonByType(type);\r\n\r\n  return (\r\n    <TypedButton\r\n      onClick={onClick}\r\n      active={active}\r\n      disabled={disabled}\r\n      aria-label={label}\r\n    >\r\n      {children}\r\n    </TypedButton>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  type: string,\r\n  children: node.isRequired,\r\n  btnProps: object,\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { string, func } from \"prop-types\";\r\nimport { accentColor, borderWidth } from \"../../misc/style\";\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  border: none;\r\n  outline: none;\r\n  background: none;\r\n  font-size: 14px;\r\n  border-top: ${accentColor} ${borderWidth} solid;\r\n  border-bottom: ${accentColor} ${borderWidth} solid;\r\n`;\r\n\r\nexport default function TagInput({ value, setValue }) {\r\n  return (\r\n    <Input\r\n      id=\"tag-input\"\r\n      value={value}\r\n      onChange={e => setValue(e.target.value)}\r\n      placeholder=\"Search for tags\"\r\n      aria-label=\"Search\"\r\n    />\r\n  );\r\n}\r\n\r\nTagInput.propTypes = {\r\n  value: string,\r\n  setValue: func\r\n};\r\n","export function prettifyTagname(tagname) {\r\n  return tagname.replace(/_/g, \" \");\r\n}\r\n\r\nexport function normalizeTagname(tagname) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n","export const formatCount = (numberString) => {\r\n  const number = Number(numberString);\r\n\r\n  if (number >= 1e6) {\r\n    return `${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n};\r\n\r\n/**\r\n * @param {String} sourceString\r\n */\r\nexport const formatSource = (sourceString) => {\r\n  if (\r\n    sourceString.includes(\"http:\") ||\r\n    sourceString.includes(\"https:\") ||\r\n    sourceString.includes(\"www.\") ||\r\n    sourceString.includes(\".com\")\r\n  ) {\r\n    let semiSanitized = sourceString\r\n      .replace(/https?:\\/\\//, \"\")\r\n      .replace(/ww[w\\d]\\./, \"\")\r\n      .replace(\".com\", \"\")\r\n      .replace(\".org\", \"\")\r\n      .replace(\".net\", \"\");\r\n\r\n    return semiSanitized.substring(0, semiSanitized.indexOf(\"/\"));\r\n  } else {\r\n    return sourceString;\r\n  }\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { arrayOf, bool, func, number, object, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport {\r\n  backgroundColor,\r\n  accentColor,\r\n  borderRadius,\r\n  backgroundColor2,\r\n  spacing,\r\n  borderWidth,\r\n} from \"../../misc/style\";\r\nimport { ArrowIcon } from \"../../icons/Icons\";\r\nimport { prettifyTagname } from \"./tagUtils\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\n\r\nconst dropdownBorderRadius = ({ collapsed }) =>\r\n  collapsed ? borderRadius : `${borderRadius} ${borderRadius} 0 0`;\r\n\r\nconst switchingColors = ({ active }) => {\r\n  const fg = active ? backgroundColor : accentColor;\r\n  const bg = active ? accentColor : backgroundColor;\r\n\r\n  return `\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${accentColor} ${borderWidth} solid;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    cursor: pointer;\r\n\r\n    :hover {\r\n      background-color: ${fg};\r\n      color: ${bg};\r\n      \r\n      i {\r\n        color: ${bg};\r\n      }\r\n    }\r\n\r\n    :focus, :active {\r\n      color: ${backgroundColor2};\r\n      border-color: ${backgroundColor2}\r\n    }\r\n  `;\r\n};\r\n\r\nexport const TagWrapper = styled.div`\r\n  display: inline-block;\r\n  padding: 0.25rem;\r\n  border-radius: ${dropdownBorderRadius}\r\n  font-size: 14px;\r\n  line-height: 1.2;\r\n  vertical-align: baseline;\r\n  margin: ${() => spacing};\r\n  ${switchingColors}\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  ${({ left }) => (left ? \"margin-right: 5px;\" : \"\")}\r\n  ${({ right }) => (right ? \"margin-left: 5px;\" : \"\")}\r\n`;\r\n\r\nfunction Tag({\r\n  name,\r\n  count,\r\n  modifier,\r\n  types,\r\n  activeTags,\r\n  loadAliases,\r\n  dispatch,\r\n}) {\r\n  const [aliases, setAliases] = useState();\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (activeTags.some((t) => t.name === name))\r\n      api.getAliases(name).then((newAliases) => {\r\n        newAliases.sort((a, b) => Number(b.posts) - Number(a.posts));\r\n        setAliases(\r\n          newAliases.filter(\r\n            (alias) => !activeTags.some((tag) => tag.name === alias.name)\r\n          )\r\n        );\r\n      });\r\n  }, [name, activeTags]);\r\n\r\n  const active = activeTags.some((t) => t.name === name);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={active}\r\n      collapsed={collapsed}\r\n      onMouseLeave={() => setCollapsed(true)}\r\n      tabIndex=\"0\"\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText\r\n        name={name}\r\n        count={count}\r\n        modifier={modifier}\r\n        types={types}\r\n        activeTags={activeTags}\r\n        dispatch={dispatch}\r\n      />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={() => setCollapsed(!collapsed)}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, posts }) => (\r\n              <Alias\r\n                key={\"t_\" + name}\r\n                name={name}\r\n                count={posts}\r\n                dispatch={dispatch}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nTag.propTypes = {\r\n  name: string,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  active: bool,\r\n  onClick: func,\r\n};\r\n\r\nTag.defaultProps = {\r\n  types: [],\r\n  onClick: () => {},\r\n};\r\n\r\nfunction TagText({ name, count, types, modifier, dispatch }) {\r\n  const tagname = prettifyTagname(name);\r\n  const text = count ? `${tagname} (${formatCount(count)})` : tagname;\r\n\r\n  return (\r\n    <span\r\n      onClick={() =>\r\n        dispatch({ type: \"TOGGLE_TAG\", tag: { name, count, types, modifier } })\r\n      }\r\n      onKeyDown={(e) =>\r\n        e.keyCode === 32 &&\r\n        dispatch({ type: \"TOGGLE_TAG\", tag: { name, count, types, modifier } })\r\n      }\r\n    >\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias({ name, count, dispatch }) {\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} dispatch={dispatch} />\r\n    </div>\r\n  );\r\n}\r\n\r\nTagText.propTypes = {\r\n  name: string.isRequired,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  activeTags: arrayOf(object),\r\n  onClick: func,\r\n};\r\n\r\nTagText.defaultProps = {\r\n  modifier: \"+\",\r\n  types: [],\r\n  activeTags: [],\r\n  onClick: () => {},\r\n};\r\n\r\nexport default Tag;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TagWrapper } from \"../components/tag/Tag\";\r\nimport { accentColor, backgroundColor2 } from \"../misc/style\";\r\n\r\nexport const StyledIcon = styled.i`\r\n  ${({ color, size }) => `\r\n    color: ${color};\r\n    min-width: ${size}px;\r\n    height: ${size}px;\r\n\r\n    ${TagWrapper}:hover & {\r\n      color: ${accentColor};\r\n    }\r\n\r\n    ${TagWrapper}:active & ,  ${TagWrapper}:focus & {\r\n      color: ${backgroundColor2};\r\n    }\r\n  `}\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  line-height: 16px;\r\n  ${({ left }) => (left ? \"margin-right: 5px;\" : \"\")}\r\n  ${({ right }) => (right ? \"margin-left: 5px;\" : \"\")}\r\n`;\r\n\r\nconst Icon = ({ className, icon, color, size, onClick, left, right }) => (\r\n  <IconWrapper onClick={onClick} left={left} right={right}>\r\n    <StyledIcon\r\n      className={`fas ${icon} ${className}`}\r\n      color={color}\r\n      size={size}\r\n    />\r\n  </IconWrapper>\r\n);\r\n\r\nIcon.defaultProps = {\r\n  color: \"black\",\r\n  size: 14,\r\n};\r\n\r\nexport const CharacterIcon = styled(Icon).attrs({\r\n  icon: \"fa-user\",\r\n})``;\r\n\r\nexport const ArtistIcon = styled(Icon).attrs({\r\n  icon: \"fa-pen\",\r\n})``;\r\n\r\nexport const CopyrightIcon = styled(Icon).attrs({\r\n  icon: \"fa-copyright\",\r\n})``;\r\n\r\nexport const PlusIcon = styled(Icon).attrs({\r\n  icon: \"fa-plus-circle\",\r\n})``;\r\n\r\nexport const MinusIcon = styled(Icon).attrs({\r\n  icon: \"fa-minus-circle\",\r\n})``;\r\n\r\nexport const CloseIcon = styled(Icon).attrs({\r\n  icon: \"fa-times\",\r\n})``;\r\n\r\nexport const ExpandIcon = styled(Icon).attrs({\r\n  icon: \"fa-expand\",\r\n})``;\r\n\r\nexport const ArrowIcon = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ExternalLinkIcon = styled(Icon).attrs({\r\n  icon: \"fa-external-link-alt\",\r\n})``;\r\n\r\nexport const SourceIcon = styled(Icon).attrs({\r\n  icon: \"fa-hashtag\",\r\n})``;\r\n\r\nexport const RatingIcon = styled(Icon).attrs({\r\n  icon: \"fa-registered\",\r\n})``;\r\n\r\nexport const HeartIcon = styled(Icon).attrs({\r\n  icon: \"fa-heart\",\r\n})``;\r\n\r\nexport const PlayIcon = styled(Icon).attrs({\r\n  icon: \"fa-play\",\r\n})``;\r\n\r\nexport const PauseIcon = styled(Icon).attrs({\r\n  icon: \"fa-pause\",\r\n})``;\r\n\r\nexport const ArrowUp = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ArrowDown = styled(Icon).attrs({\r\n  icon: \"fa-caret-up\",\r\n})``;\r\n","import React from \"react\";\r\nimport { array, string } from \"prop-types\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\n\r\nfunction TypeIcon({ types, className, onClick }) {\r\n  const interestingType = types.find(t => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon className={className} onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon className={className} onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon className={className} onClick={onClick} left />;\r\n    default:\r\n      return <div className={className}></div>;\r\n  }\r\n}\r\n\r\nTypeIcon.propTypes = {\r\n  types: array,\r\n  className: string\r\n};\r\n\r\nTypeIcon.defaultProps = {\r\n  types: []\r\n};\r\n\r\nexport default TypeIcon;\r\n","import React from \"react\";\r\nimport { array, object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { prettifyTagname } from \"../tag/tagUtils\";\r\nimport { accentColor, borderWidth } from \"../../misc/style\";\r\n\r\nfunction sizeAndPosition({ inputRef }) {\r\n  return inputRef\r\n    ? `\r\n      position: absolute;\r\n      top: ${inputRef.offsetTop + inputRef.clientHeight - 2}px;\r\n      left: ${inputRef.offsetLeft}px;\r\n      width: ${inputRef.clientWidth}px;`\r\n    : \"\";\r\n}\r\n\r\nexport const ListWrapper = styled.div`\r\n  ${sizeAndPosition};\r\n  display: none;\r\n  background: white;\r\n  box-sizing: border-box;\r\n  border: ${borderWidth} ${accentColor} solid;\r\n  border-radius: 0 0 3px 3px;\r\n  color: black;\r\n  z-index: 1;\r\n`;\r\n\r\nfunction DropdownList({ inputRef, entries, onClick }) {\r\n  return entries && entries.length > 0 ? (\r\n    <ListWrapper inputRef={inputRef}>\r\n      {entries.map((entry) => (\r\n        <Entry\r\n          key={entry.name}\r\n          {...entry}\r\n          onClick={() => onClick(entry)}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  ) : null;\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  height: 28px;\r\n\r\n  > * {\r\n    margin: auto;\r\n  }\r\n\r\n  &:not(:last-child) {\r\n    border-bottom: 1px grey solid;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TypeWrapper = styled.span`\r\n  flex: 0 0 48px;\r\n  text-align: center;\r\n`;\r\n\r\nfunction Entry({ name, posts, types, onClick }) {\r\n  return (\r\n    <EntryWrapper\r\n      onClick={onClick}\r\n      onKeyDown={(e) => e.keyCode === 32 && onClick(e)}\r\n      tabIndex=\"0\"\r\n    >\r\n      <TypeWrapper>\r\n        <TypeIcon types={types} />\r\n      </TypeWrapper>\r\n\r\n      <span style={{ flexGrow: 1 }}>{prettifyTagname(name)}</span>\r\n      <span style={{ paddingRight: 5 }}>{formatCount(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n}\r\n\r\nDropdownList.propTypes = {\r\n  inputRef: object,\r\n  entries: array,\r\n};\r\n\r\nexport default DropdownList;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { func } from \"prop-types\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport Button, { AddButton, ModifierButton } from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList, { ListWrapper } from \"./DropdownList\";\r\nimport { borderRadius } from \"../../misc/style\";\r\nimport { normalizeTagname } from \"../tag/tagUtils\";\r\n\r\nexport const TagSelectorWrapper = styled.div`\r\n  display: flex;\r\n  background: white;\r\n  ${({ closed }) =>\r\n    closed\r\n      ? `border-radius: ${borderRadius};`\r\n      : `\r\n        border-radius: ${borderRadius} ${borderRadius} 0 0;\r\n\r\n        > ${AddButton} {\r\n          border-radius: 0 ${borderRadius} 0 0;\r\n        }\r\n\r\n        > ${ModifierButton} {\r\n          border-radius: ${borderRadius} 0 0 0;\r\n        }\r\n      `}\r\n  :focus-within {\r\n    ${ListWrapper} {\r\n      display: block;\r\n    }\r\n  }\r\n`;\r\n\r\nfunction TagSelector({ dispatch }) {\r\n  const [inputRef, setInputRef] = useState();\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const addTag = useCallback(\r\n    (suggestion) => {\r\n      dispatch({\r\n        type: \"ADD_TAG\",\r\n        tag: prepare({\r\n          name: suggestion.name,\r\n          modifier: modifier,\r\n          count: suggestion.posts,\r\n          types: suggestion.types,\r\n        }),\r\n      });\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (value && value !== \"\")\r\n        api.getTags(normalizeTagname(value)).then((newSuggestions) => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 400);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [value]);\r\n\r\n  return (\r\n    <TagSelectorWrapper ref={setInputRef} closed={suggestions.length === 0}>\r\n      <Button\r\n        type=\"modifier\"\r\n        onClick={() => setModifier(modifier === \"+\" ? \"-\" : \"+\")}\r\n      >\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button\r\n        type=\"add\"\r\n        onClick={() => {\r\n          if (value && value.trim() !== \"\") {\r\n            const suggestion = suggestions.find((s) => s.name === value) || {};\r\n            addTag({ ...suggestion, name: value });\r\n          }\r\n        }}\r\n      >\r\n        Add\r\n      </Button>\r\n      <DropdownList\r\n        inputRef={inputRef}\r\n        entries={suggestions}\r\n        onClick={(entry) => {\r\n          addTag(entry);\r\n        }}\r\n      ></DropdownList>\r\n    </TagSelectorWrapper>\r\n  );\r\n}\r\n\r\nTagSelector.propTypes = {\r\n  onSubmitTag: func,\r\n};\r\n\r\nexport default TagSelector;\r\n","import React from \"react\";\r\nimport { bool, func } from \"prop-types\";\r\nimport { motion } from \"framer-motion\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  accentColor,\r\n  borderWidth,\r\n  backgroundColor2,\r\n  backgroundColor,\r\n} from \"../../misc/style\";\r\n\r\nconst Wrapper = styled.div`\r\n  border-radius: 30px;\r\n  width: 50px;\r\n  border: ${borderWidth} solid ${accentColor};\r\n  background-color: ${backgroundColor};\r\n`;\r\n\r\nconst Thumb = styled(motion.div)`\r\n  width: 20px;\r\n  height: 20px;\r\n  background-color: ${backgroundColor2};\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst variants = {\r\n  enabled: { x: 30, background: accentColor },\r\n  disabled: { x: 0, background: backgroundColor2 },\r\n};\r\n\r\nfunction Toggle(props) {\r\n  const { initialValue, value, onToggle } = props;\r\n\r\n  return (\r\n    <Wrapper onClick={onToggle}>\r\n      <Thumb\r\n        initial={initialValue ? \"enabled\" : \"disabled\"}\r\n        animate={value ? \"enabled\" : \"disabled\"}\r\n        variants={variants}\r\n      />\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nToggle.propTypes = {\r\n  initialValue: bool,\r\n  value: bool.isRequired,\r\n  onToggle: func.isRequired,\r\n};\r\n\r\nToggle.defaultProps = {\r\n  initialValue: false,\r\n};\r\n\r\nexport default Toggle;\r\n","import React from \"react\";\r\nimport { bool, func, node } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport { gutter } from \"../../misc/style\";\r\nimport Toggle from \"./Toggle\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n`;\r\n\r\nconst Label = styled.span`\r\n  margin: auto;\r\n  margin-left: ${gutter};\r\n`;\r\n\r\nexport default function LabeledToggle(props) {\r\n  const { children, value, onToggle } = props;\r\n\r\n  return (\r\n    <ToggleWrapper>\r\n      <Toggle value={value} onToggle={onToggle} />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n\r\nLabeledToggle.propTypes = {\r\n  children: node.isRequired,\r\n  value: bool.isRequired,\r\n  onToggle: func.isRequired,\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { shape, bool, number, func } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport LabeledToggle from \"../common/LabeledToggle\";\r\nimport { accentColor, gutter } from \"../../misc/style\";\r\n\r\nconst OptionsWrapper = styled.div`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  color: ${accentColor};\r\n  max-height: 16px;\r\n  width: ${({ value }) => 0.57 * String(value).length}em;\r\n  text-align: right;\r\n  font-size: 14px;\r\n  margin: -1px 0.2em 0 0.2em;\r\n\r\n  ::-webkit-inner-spin-button,\r\n  ::-webkit-outer-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n  }\r\n  -moz-appearance: textfield;\r\n`;\r\n\r\nexport default function Options({ options, dispatch }) {\r\n  const [localRated, setLocalRated] = useState(1);\r\n\r\n  return (\r\n    <OptionsWrapper>\r\n      <LabeledToggle\r\n        value={options.infinite}\r\n        onToggle={() =>\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"infinite\",\r\n            value: !options.infinite,\r\n          })\r\n        }\r\n      >\r\n        Infinite Scroll\r\n      </LabeledToggle>\r\n      <LabeledToggle\r\n        value={Boolean(options.rated)}\r\n        onToggle={() => {\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"rated\",\r\n            value: options.rated ? undefined : localRated,\r\n          });\r\n        }}\r\n      >\r\n        {options.rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            Above\r\n            <StyledInput\r\n              type=\"number\"\r\n              value={localRated}\r\n              onChange={(event) => setLocalRated(Number(event.target.value))}\r\n              onBlur={(event) =>\r\n                dispatch({\r\n                  type: \"SET_OPTION\",\r\n                  key: \"rated\",\r\n                  value: Number(event.target.value),\r\n                })\r\n              }\r\n            />\r\n            likes\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </LabeledToggle>\r\n\r\n      <LabeledToggle\r\n        value={options.originals}\r\n        onToggle={() =>\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"originals\",\r\n            value: !options.originals,\r\n          })\r\n        }\r\n      >\r\n        Load Original Sizes\r\n      </LabeledToggle>\r\n    </OptionsWrapper>\r\n  );\r\n}\r\n\r\nOptions.propTypes = {\r\n  options: shape({\r\n    infinite: bool,\r\n    rated: number,\r\n    originals: bool,\r\n  }).isRequired,\r\n  dispatch: func.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport { arrayOf, shape, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Tag from \"../tag/Tag\";\r\nimport { spacing } from \"../../misc/style\";\r\n\r\nexport const TagListWrapper = styled.div`\r\n  display: inline-flex;\r\n  flex-wrap: wrap;\r\n  margin: ${({ padding }) => `calc(${padding} - ${spacing})`};\r\n`;\r\n\r\nexport function TagList({ tags, activeTags, loadAliases, dispatch, padding }) {\r\n  return (\r\n    <div>\r\n      <TagListWrapper padding={padding}>\r\n        {tags.map(tag => (\r\n          <Tag\r\n            key={\"t_\" + tag.name}\r\n            {...tag}\r\n            activeTags={activeTags}\r\n            loadAliases={loadAliases}\r\n            dispatch={dispatch}\r\n          />\r\n        ))}\r\n      </TagListWrapper>\r\n    </div>\r\n  );\r\n}\r\n\r\nTagList.propTypes = {\r\n  tags: arrayOf(\r\n    shape({\r\n      name: string\r\n    })\r\n  ).isRequired,\r\n  activeTags: arrayOf(\r\n    shape({\r\n      name: string\r\n    })\r\n  )\r\n};\r\n\r\nTagList.defaultProps = {\r\n  activeTags: [],\r\n  onItemClick: () => {},\r\n  onItemItemClick: () => {},\r\n  padding: \"0px\"\r\n};\r\n\r\nexport default TagList;\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport Options from \"../components/features/Options\";\r\nimport TagList from \"../components/tag/TagList\";\r\n\r\nfunction Help() {\r\n  return (\r\n    <>\r\n      <Title>Help</Title>\r\n      <Surface>\r\n        <Title>Searching for Tags</Title>\r\n        <Line />\r\n        <TagSelector dispatch={() => {}} />\r\n        <Line />\r\n        <p>\r\n          You can use the Tag Selector to look for tags you like.The Tag\r\n          Selector has 4 parts.\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            The modifier (left) determines wether posts must match a tag or not.\r\n            Putting \"-\" will hide all posts with this tag\r\n          </li>\r\n          <li>\r\n            The Search Box (center) allows you to search for tags. As soon as\r\n            you start typing the Tag Selector will show you relevant tags to\r\n            choose from (4).\r\n          </li>\r\n          <li>\r\n            The Add Button (right) Allows you to add any tag to the current\r\n            filter. Usefull when using wildcards.\r\n          </li>\r\n          <li>\r\n            The Tag Dropdown (left) automatically shows tags that start with\r\n            your input. It also includes The number of posts tagged, to allow\r\n            you to weigh tags against each other.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Options</Title>\r\n        <Line />\r\n        <Options options={{}} dispatch={() => {}} />\r\n        <Line />\r\n        <p>\r\n          Options allow you to customize your experience in various ways. There\r\n          are 3 options available\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            Infinite Scrolling automatically loads new posts when you get close\r\n            to the bottom of the page.\r\n          </li>\r\n          <li>\r\n            Only show Rated posts filters out posts below the specified amount\r\n            of posts.\r\n          </li>\r\n          <li>\r\n            Load original sizes always loads the highest quality of an image.\r\n            This can easily cause extreme data consumption. Don't use with\r\n            mobile data.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Tags</Title>\r\n        <Line />\r\n        <TagList\r\n          tags={[\r\n            { name: \"Tag 1\" },\r\n            { name: \"Tag 2\", types: [\"character\"] },\r\n            {\r\n              name: \"Tag 3\",\r\n              modifier: \"-\",\r\n              types: [\"copyright\"],\r\n              count: 1020,\r\n            },\r\n          ]}\r\n          activeTags={[{ name: \"Tag 2\" }, { name: \"Tag 3\" }]}\r\n        />\r\n        <Line />\r\n        <p>\r\n          This whole application is based on tags. Every Post has multiple tags.\r\n          Usually you can enable/disable a tag just by tapping it. If a tag is\r\n          red it means its active. The icons next to the name show what type of\r\n          tag it is. Not every tag has a type. The number on the right shows how\r\n          many posts there are with that tag.\r\n        </p>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Help;\r\n","import React, { useCallback } from \"react\";\r\nimport { object, array, func } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport TagList from \"../tag/TagList\";\r\nimport Options from \"./Options\";\r\nimport Button from \"../common/Button\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport { gutter } from \"../../misc/style\";\r\nimport Title from \"../common/Title\";\r\nimport Surface from \"../common/Surface\";\r\n\r\nconst ConfigWrapper = styled.section`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nfunction Config({ options, tags, dispatch }) {\r\n  const search = useCallback(() => {\r\n    api.getPosts(tags, 0, options.rated).then((res) => {\r\n      dispatch({\r\n        type: \"SET_POSTS\",\r\n        posts: res.posts.map(prepare),\r\n        count: Number(res.count),\r\n      });\r\n    });\r\n  }, [dispatch, options.rated, tags]);\r\n\r\n  return (\r\n    <ConfigWrapper>\r\n      <Title>\r\n        <label htmlFor=\"tag-input\">Search</label>\r\n      </Title>\r\n      <Surface>\r\n        <TagSelector dispatch={dispatch} />\r\n\r\n        {tags.length > 0 && (\r\n          <TagList\r\n            tags={tags}\r\n            activeTags={tags}\r\n            dispatch={dispatch}\r\n            loadAliases\r\n          />\r\n        )}\r\n        <Options options={options} dispatch={dispatch} />\r\n        <Button type=\"block\" onClick={search}>\r\n          Search\r\n        </Button>\r\n      </Surface>\r\n    </ConfigWrapper>\r\n  );\r\n}\r\n\r\nConfig.propTypes = {\r\n  options: object,\r\n  tags: array,\r\n  dispatch: func,\r\n};\r\n\r\nexport default Config;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { number, string, array, func } from \"prop-types\";\r\nimport TagList, { TagListWrapper } from \"../tag/TagList\";\r\nimport {\r\n  HeartIcon,\r\n  ExternalLinkIcon,\r\n  SourceIcon,\r\n  RatingIcon,\r\n} from \"../../icons/Icons\";\r\nimport { spacing, layer, shadow, gutter } from \"../../misc/style\";\r\nimport { formatSource } from \"../../misc/formatting\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst DetailsWrapper = styled(motion.div)`\r\n  > ${TagListWrapper} {\r\n    padding: ${spacing};\r\n  }\r\n\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Bar = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  background: ${layer};\r\n  padding: ${spacing};\r\n  ${shadow};\r\n\r\n  > span,\r\n  > a {\r\n    margin: ${spacing};\r\n    line-height: 1rem;\r\n    height: 1rem;\r\n  }\r\n`;\r\n\r\nfunction Details({ rating, score, source, tags, activeTags, dispatch }) {\r\n  return (\r\n    <DetailsWrapper\r\n      initial=\"collapsed\"\r\n      animate=\"open\"\r\n      exit=\"collapsed\"\r\n      variants={{\r\n        open: { opacity: 1, height: \"auto\" },\r\n        collapsed: { opacity: 0, height: 0 },\r\n      }}\r\n    >\r\n      <Bar>\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList\r\n        tags={tags}\r\n        activeTags={activeTags}\r\n        dispatch={dispatch}\r\n        padding={gutter}\r\n      />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n\r\nDetails.propTypes = {\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: array,\r\n  activeTags: array,\r\n  dispatch: func,\r\n};\r\n\r\nexport default Details;\r\n\r\n/**\r\n * @param {Object} props\r\n * @param {String} props.value\r\n */\r\nconst Rating = ({ value }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {value[0].toUpperCase()}\r\n  </span>\r\n);\r\n\r\n/**\r\n * @param {Object} props\r\n * @param {String} props.value\r\n */\r\nconst Score = ({ value }) => (\r\n  <span>\r\n    {value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n\r\n/**\r\n * @param {Object} props\r\n * @param {String} props.value\r\n */\r\nconst Source = ({ value }) =>\r\n  value.startsWith(\"http\") ? (\r\n    <a\r\n      href={value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      {formatSource(value)}\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {value}\r\n    </span>\r\n  );\r\n","import React from \"react\";\r\nimport { bool, func, number } from \"prop-types\";\r\n\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, PlayIcon, PauseIcon } from \"../../icons/Icons\";\r\nimport styled from \"styled-components\";\r\nimport { accentColor } from \"../../misc/style\";\r\nimport { NO_OP } from \"../../data/constants\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst ProgressBar = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  height: 5px;\r\n  background-color: ${accentColor};\r\n`;\r\n\r\nconst variants = {\r\n  visible: {\r\n    opacity: 1,\r\n  },\r\n  hidden: {\r\n    opacity: 0,\r\n  },\r\n};\r\n\r\nfunction Overlay(props) {\r\n  const {\r\n    onFullscreen,\r\n    togglePlay,\r\n    isPaused,\r\n    isPlayable,\r\n    currentTime,\r\n    duration,\r\n  } = props;\r\n\r\n  return (\r\n    <motion.div\r\n      initial=\"visible\"\r\n      animate={isPaused ? \"visible\" : \"hidden\"}\r\n      whileHover={\"visible\"}\r\n      variants={variants}\r\n    >\r\n      {onFullscreen && (\r\n        <Button type=\"topLeft\" onClick={onFullscreen} label=\"Open Fullscreen\">\r\n          <ExpandIcon color=\"white\" />\r\n        </Button>\r\n      )}\r\n\r\n      {isPlayable && (\r\n        <>\r\n          <Button type=\"center\" onClick={togglePlay} label=\"Play/Pause\">\r\n            {isPaused ? (\r\n              <PlayIcon color=\"white\" size={50} />\r\n            ) : (\r\n              <PauseIcon color=\"white\" size={50} />\r\n            )}\r\n          </Button>\r\n          {!!duration && (\r\n            <ProgressBar\r\n              currentTime={currentTime}\r\n              duration={duration}\r\n              style={{ width: `${(currentTime / duration) * 100}%` }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nOverlay.propTypes = {\r\n  onFullscreen: func,\r\n  togglePlay: func,\r\n  isPaused: bool,\r\n  isPlayable: bool,\r\n  currentTime: number,\r\n  duration: number,\r\n};\r\n\r\nOverlay.defaultProps = {\r\n  onFullscreen: null,\r\n  togglePlay: NO_OP,\r\n  isPaused: true,\r\n  isPlayable: false,\r\n  currentTime: 0,\r\n  duration: null,\r\n};\r\n\r\nexport default Overlay;\r\n","export const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport const VIDEO = \"video\";\r\n\r\nexport const NO_OP = () => {};\r\n","import React, { useState } from \"react\";\r\nimport { bool, string, func } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Overlay from \"./Overlay\";\r\nimport { openFullscreen } from \"./utils\";\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\nexport default function Video(props) {\r\n  const { src, thumbnail_src, toggleOverlay, toggleDetails } = props;\r\n\r\n  /** @type [HTMLVideoElement, Function] */\r\n  const [videoRef, setVideoRef] = useState({\r\n    paused: true,\r\n    play: () => {},\r\n    pause: () => {},\r\n    currentTime: 0,\r\n    duration: 1,\r\n  });\r\n\r\n  const [time, setTime] = useState(Date.now());\r\n  const [intervalId, setIntervalId] = useState(0);\r\n\r\n  const play = () => {\r\n    videoRef.play();\r\n\r\n    // ~30 fps\r\n    const id = setInterval(() => {\r\n      setTime(Date.now());\r\n      console.log(time);\r\n    }, 34);\r\n\r\n    setIntervalId(id);\r\n  };\r\n\r\n  const pause = () => {\r\n    videoRef.pause();\r\n    clearInterval(intervalId);\r\n    setIntervalId(-1);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <FlexVideo\r\n        controls={false}\r\n        loop\r\n        src={src}\r\n        alt={src}\r\n        poster={thumbnail_src}\r\n        preload=\"metadata\"\r\n        onClick={toggleOverlay}\r\n        ref={setVideoRef}\r\n      />\r\n      <Overlay\r\n        isPaused={videoRef.paused}\r\n        currentTime={videoRef.currentTime}\r\n        duration={videoRef.duration}\r\n        onFullscreen={() => openFullscreen(videoRef)}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          videoRef.paused ? play() : pause();\r\n        }}\r\n        toggleDetails={toggleDetails}\r\n        isPlayable\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nVideo.propTypes = {\r\n  src: string.isRequired,\r\n  thumbnail_src: string.isRequired,\r\n  toggleDetails: func.isRequired,\r\n  isOverlayVisible: bool.isRequired,\r\n  toggleOverlay: func.isRequired,\r\n  areDetailsVisible: bool.isRequired,\r\n};\r\n","import { VIDEO, GIF, PICTURE } from \"../../data/constants\";\r\n\r\n/**\r\n * Fullscreens a given videoElement\r\n * @param {HTMLVideoElement} elem\r\n */\r\nexport const openFullscreen = (elem) => {\r\n  if (elem.requestFullscreen) {\r\n    elem.requestFullscreen();\r\n  } else if (elem.mozRequestFullScreen) {\r\n    elem.mozRequestFullScreen();\r\n  } else if (elem.webkitRequestFullscreen) {\r\n    elem.webkitRequestFullscreen();\r\n  } else if (elem.msRequestFullscreen) {\r\n    elem.msRequestFullscreen();\r\n  }\r\n};\r\n\r\n/**\r\n * Calculates which type of media should be displayed for this type and source\r\n * @param {\"video\" | \"image\"} type\r\n * @param {String} src\r\n */\r\nexport const getMediaType = (type, src) => {\r\n  if (type === \"video\") {\r\n    return VIDEO;\r\n  }\r\n\r\n  // can't use .endsWith because of queryString\r\n  if (src.includes(\".gif\")) {\r\n    return GIF;\r\n  }\r\n\r\n  return PICTURE;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { bool, func, string } from \"prop-types\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\nfunction Gif(props) {\r\n  const { src, thumbnail_src, toggleOverlay, toggleDetails } = props;\r\n\r\n  const [isPaused, setPaused] = useState(true);\r\n  const usedSource = isPaused ? thumbnail_src : src;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={usedSource} alt={usedSource} onClick={toggleOverlay} />\r\n      <Overlay\r\n        isPlayable\r\n        toggleDetails={toggleDetails}\r\n        isPaused={isPaused}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          setPaused(!isPaused);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nGif.propTypes = {\r\n  src: string.isRequired,\r\n  thumbnail_src: string.isRequired,\r\n  toggleDetails: func.isRequired,\r\n  isOverlayVisible: bool.isRequired,\r\n  toggleOverlay: func.isRequired,\r\n  areDetailsVisible: bool.isRequired,\r\n};\r\n\r\nexport default Gif;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { bool, func, string } from \"prop-types\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\nfunction Picture(props) {\r\n  const {\r\n    src,\r\n    isOverlayVisible,\r\n    toggleOverlay,\r\n    toggleDetails,\r\n    areDetailsVisible,\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={src} alt={src} onClick={toggleOverlay} />\r\n      <Overlay\r\n        isVisible={isOverlayVisible}\r\n        isPlayable={false}\r\n        toggleDetails={toggleDetails}\r\n        isOverlayVisible={isOverlayVisible}\r\n        areDetailsVisible={areDetailsVisible}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nPicture.propTypes = {\r\n  src: string.isRequired,\r\n  toggleDetails: func.isRequired,\r\n  isOverlayVisible: bool.isRequired,\r\n  toggleOverlay: func.isRequired,\r\n  areDetailsVisible: bool.isRequired,\r\n};\r\n\r\nexport default Picture;\r\n","import React, { useState } from \"react\";\r\nimport { bool, func, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Video from \"./Video\";\r\nimport Gif from \"./Gif\";\r\nimport Picture from \"./Picture\";\r\nimport { VIDEO, GIF } from \"../../data/constants\";\r\nimport { getMediaType } from \"./utils\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\nconst getMediaByType = (type, src) => {\r\n  switch (getMediaType(type, src)) {\r\n    case VIDEO:\r\n      return Video;\r\n    case GIF:\r\n      return Gif;\r\n    default:\r\n      return Picture;\r\n  }\r\n};\r\n\r\nconst Player = (props) => {\r\n  const { type, src, toggleDetails } = props;\r\n  const Media = getMediaByType(type, src);\r\n\r\n  const [isOverlayVisible, setOverlayVisible] = useState(true);\r\n\r\n  return (\r\n    <Wrapper onClick={toggleDetails}>\r\n      <Media\r\n        isOverlayVisible={isOverlayVisible}\r\n        toggleOverlay={() => setOverlayVisible(!isOverlayVisible)}\r\n        {...props}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nPlayer.propTypes = {\r\n  type: string.isRequired,\r\n  src: string.isRequired,\r\n  thumbnail_src: string.isRequired,\r\n  toggleDetails: func.isRequired,\r\n  areDetailsVisible: bool.isRequired,\r\n};\r\n\r\nexport default Player;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { arrayOf, func, number, object, string } from \"prop-types\";\r\nimport Details from \"./Details\";\r\nimport { borderRadius, layer, bigSpacing, shadow } from \"../../misc/style\";\r\nimport Player from \"../player/Player\";\r\nimport { AnimatePresence } from \"framer-motion\";\r\n\r\nconst PostWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: ${layer};\r\n  ${shadow};\r\n  border-radius: ${borderRadius};\r\n  overflow: hidden;\r\n  margin-bottom: ${bigSpacing};\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport function getCorrectSource(loadOriginal, big_src, small_src, id) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post({\r\n  id,\r\n  media_type,\r\n  small_src,\r\n  big_src,\r\n  thumbnail_src,\r\n  rating,\r\n  score,\r\n  source,\r\n  tags,\r\n  loadOriginal,\r\n  activeTags,\r\n  dispatch,\r\n}) {\r\n  const media_src = getCorrectSource(loadOriginal, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  return (\r\n    <PostWrapper>\r\n      <Player\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        areDetailsVisible={!collapsed}\r\n        toggleDetails={() => setCollapsed(!collapsed)}\r\n      />\r\n      <AnimatePresence initial={false}>\r\n        {!collapsed && (\r\n          <Details\r\n            rating={rating}\r\n            score={score}\r\n            source={source}\r\n            tags={tags}\r\n            activeTags={activeTags}\r\n            dispatch={dispatch}\r\n          />\r\n        )}\r\n      </AnimatePresence>\r\n    </PostWrapper>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  id: number,\r\n  media_type: string,\r\n  media_src: string,\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: arrayOf(object),\r\n  onTagClick: func,\r\n};\r\n","import React from \"react\";\r\nimport { arrayOf, object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Post from \"./Post\";\r\n\r\nconst PostListWrapper = styled.div``;\r\n\r\nfunction PostList({ posts, activeTags, loadOriginal, dispatch }) {\r\n  return (\r\n    <PostListWrapper>\r\n      {posts.map(post => {\r\n        return (\r\n          <Post\r\n            key={`p_${post.id}`}\r\n            {...post}\r\n            loadOriginal={loadOriginal}\r\n            activeTags={activeTags}\r\n            dispatch={dispatch}\r\n          />\r\n        );\r\n      })}\r\n    </PostListWrapper>\r\n  );\r\n}\r\n\r\nPostList.propTypes = {\r\n  posts: arrayOf(object)\r\n};\r\n\r\nexport default PostList;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { object, func, array } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport PostList from \"../post/PostList\";\r\nimport Button from \"../common/Button\";\r\nimport Title from \"../common/Title\";\r\nimport Surface, { Line } from \"../common/Surface\";\r\nimport { gutter } from \"../../misc/style\";\r\n\r\nimport outOfResultsPicture from \"../../icons/OutOfResults.png\";\r\n\r\nconst ResultsWrapper = styled.section`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nlet scrollLock = true;\r\n\r\nfunction hasReachedEndOfPage() {\r\n  return (\r\n    window.innerHeight + document.documentElement.scrollTop >=\r\n    document.documentElement.scrollHeight - window.innerHeight\r\n  );\r\n}\r\n\r\nfunction Results({ options, dispatch, tags, results }) {\r\n  const [isOutOfResults, setOutOfResults] = useState(false);\r\n  const loadMore = useCallback(() => {\r\n    api.getPosts(tags, results.page + 1, options.rated).then((res) => {\r\n      setOutOfResults(res.posts.length === 0);\r\n      dispatch({ type: \"ADD_POSTS\", posts: res.posts.map(prepare) });\r\n      scrollLock = true;\r\n    });\r\n  }, [dispatch, options.rated, results.page, tags]);\r\n\r\n  window.onscroll = useCallback(() => {\r\n    if (options.infinite && scrollLock && hasReachedEndOfPage()) {\r\n      scrollLock = false;\r\n      loadMore();\r\n    }\r\n  }, [loadMore, options.infinite]);\r\n\r\n  return (\r\n    <ResultsWrapper className=\"results\">\r\n      <Title>{formatCount(results.count)} results</Title>\r\n      <PostList\r\n        posts={results.posts}\r\n        activeTags={tags}\r\n        loadOriginal={options.originals}\r\n        dispatch={dispatch}\r\n      />\r\n\r\n      {!options.infinite && !isOutOfResults && (\r\n        <Button type={\"block\"} onClick={loadMore}>\r\n          Load More\r\n        </Button>\r\n      )}\r\n\r\n      {isOutOfResults && (\r\n        <Surface>\r\n          <img src={outOfResultsPicture} alt={outOfResultsPicture} />\r\n          <Line />\r\n          <Title>You have reached the end!</Title>\r\n          <p style={{ textAlign: \"center\" }}>Go look for something else...</p>\r\n        </Surface>\r\n      )}\r\n    </ResultsWrapper>\r\n  );\r\n}\r\n\r\nResults.propTypes = {\r\n  options: object,\r\n  dispatch: func,\r\n  tags: array,\r\n  results: object,\r\n};\r\n\r\nexport default Results;\r\n","import React from \"react\";\r\nimport Config from \"../components/features/Config\";\r\nimport Results from \"../components/features/Results\";\r\n\r\nexport default function Search({ tags, options, results, dispatch }) {\r\n  return (\r\n    <>\r\n      <Config options={options} tags={tags} dispatch={dispatch} />\r\n      {results.posts.length > 0 && (\r\n        <Results\r\n          options={options}\r\n          dispatch={dispatch}\r\n          tags={tags}\r\n          results={results}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { accentColor } from \"../misc/style\";\r\n\r\nfunction R34Icon({ size }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 12.7 12.7\"\r\n    >\r\n      <g transform=\"translate(0,-284.3)\">\r\n        <circle\r\n          id=\"path18\"\r\n          cx=\"6.3499999\"\r\n          cy=\"290.65002\"\r\n          fill=\"none\"\r\n          stroke={accentColor}\r\n          strokeWidth=\"0.50848764\"\r\n          strokeMiterlimit=\"4\"\r\n          strokeDasharray=\"none\"\r\n          strokeOpacity=\"1\"\r\n          r=\"6.0957561\"\r\n        />\r\n        <text\r\n          fontStyle=\"normal\"\r\n          fontWeight=\"normal\"\r\n          fontSize=\"8.3113203px\"\r\n          fontFamily=\"sansSerif\"\r\n          letterSpacing=\"0px\"\r\n          wordSpacing=\"0px\"\r\n          fill={accentColor}\r\n          fillOpacity=\"1\"\r\n          x=\"2.1363549\"\r\n          y=\"289.02704\"\r\n          id=\"text4533\"\r\n          transform=\"scale(0.98538224,1.0148346)\"\r\n        >\r\n          <tspan\r\n            id=\"tspan4531\"\r\n            x=\"2.1363549\"\r\n            y=\"289.02704\"\r\n            fontStyle=\"normal\"\r\n            fontVariant=\"normal\"\r\n            fontWeight=\"300\"\r\n            fontStretch=\"normal\"\r\n            fontFamily=\"Calibri\"\r\n            fill={accentColor}\r\n            fillOpacity=\"1\"\r\n          >\r\n            34\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default R34Icon;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"../common/Button\";\r\nimport {\r\n  layer,\r\n  backgroundColor2,\r\n  bigSpacing,\r\n  shadow,\r\n  gutter,\r\n} from \"../../misc/style\";\r\nimport { BigTitle } from \"../common/Title\";\r\nimport R34Icon from \"../../icons/R34Icon\";\r\n\r\nconst HeaderWrapper = styled.header`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nconst Divider = styled.div`\r\n  width: 1px;\r\n  height: 32px;\r\n  margin: 0 ${gutter};\r\n  background: ${backgroundColor2};\r\n`;\r\n\r\nconst TitleBar = styled.div`\r\n  background: ${layer};\r\n  ${shadow};\r\n  padding: ${gutter} 0;\r\n  margin-bottom: ${bigSpacing};\r\n`;\r\n\r\nconst MenuBar = styled.nav`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nfunction Header({ activeMenu, dispatch }) {\r\n  return (\r\n    <HeaderWrapper>\r\n      <TitleBar>\r\n        <BigTitle>\r\n          <R34Icon size={32} />\r\n          <Divider />\r\n          <span style={{ marginTop: 2 }}>\r\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\r\n          </span>\r\n        </BigTitle>\r\n      </TitleBar>\r\n\r\n      <MenuBar>\r\n        <Button\r\n          type=\"menu\"\r\n          active={activeMenu === \"search\"}\r\n          onClick={() => dispatch({ type: \"SET_ACTIVE_MENU\", menu: \"search\" })}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          type=\"menu\"\r\n          active={activeMenu === \"help\"}\r\n          onClick={() => dispatch({ type: \"SET_ACTIVE_MENU\", menu: \"help\" })}\r\n        >\r\n          Help\r\n        </Button>\r\n        <Button\r\n          type=\"menu\"\r\n          active={activeMenu === \"settings\"}\r\n          onClick={() =>\r\n            dispatch({ type: \"SET_ACTIVE_MENU\", menu: \"settings\" })\r\n          }\r\n        >\r\n          Settings\r\n        </Button>\r\n      </MenuBar>\r\n    </HeaderWrapper>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {};\r\n\r\nexport default Header;\r\n","import produce from \"immer\";\r\n\r\nexport const initialState = {\r\n  results: {\r\n    posts: [],\r\n    page: 0,\r\n    count: undefined,\r\n  },\r\n  context: {\r\n    focusedPost: undefined,\r\n    activeMenu: \"search\",\r\n  },\r\n  tags: [],\r\n  options: {\r\n    infinite: true,\r\n    rated: undefined,\r\n    originals: false,\r\n  },\r\n};\r\n\r\nconst findTag = (tags, tagToFind) => {\r\n  return tags.findIndex((tag) => tag.name === tagToFind.name);\r\n};\r\n\r\nconst addTag = (state, newTag) =>\r\n  produce(state, (draft) => {\r\n    const tagIndex = findTag(state.tags, newTag);\r\n\r\n    draft.tags = [...state.tags];\r\n\r\n    if (tagIndex !== -1) {\r\n      draft.tags[tagIndex] = newTag;\r\n    } else {\r\n      draft.tags = [...draft.tags, newTag];\r\n    }\r\n  });\r\n\r\nconst removeTag = (state, tagToRemove) =>\r\n  produce(state, (draft) => {\r\n    const tagIndex = findTag(state.tags, tagToRemove);\r\n\r\n    if (tagIndex !== -1) {\r\n      draft.tags = [...state.tags];\r\n      draft.tags.splice(tagIndex, 1);\r\n    }\r\n  });\r\n\r\nconst toggleTag = (state, tagToToggle) =>\r\n  findTag(state.tags, tagToToggle) !== -1\r\n    ? removeTag(state, tagToToggle)\r\n    : addTag(state, tagToToggle);\r\n\r\nconst addPosts = (state, posts) =>\r\n  produce(state, (draft) => {\r\n    draft.results.posts = [...state.results.posts, ...posts];\r\n    draft.results.page = state.results.page + 1;\r\n  });\r\n\r\nconst setPosts = (state, posts, postCount) =>\r\n  produce(state, (draft) => {\r\n    draft.results.posts = [...posts];\r\n    draft.results.count = postCount;\r\n    draft.results.page = 0;\r\n  });\r\n\r\nconst setOption = (state, key, value) =>\r\n  produce(state, (draft) => {\r\n    draft.options[key] = value;\r\n  });\r\n\r\nconst setFocusedPost = (state, id) =>\r\n  produce(state, (draft) => {\r\n    draft.context.focusedPost = id;\r\n  });\r\n\r\nconst setActiveMenu = (state, menu) =>\r\n  produce(state, (draft) => {\r\n    draft.context.activeMenu = menu;\r\n  });\r\n\r\nconst reset = (state) =>\r\n  produce(state, (draft) => {\r\n    Object.assign(draft, initialState);\r\n  });\r\n\r\nexport default (state, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TAG\":\r\n      return addTag(state, action.tag);\r\n    case \"REMOVE_TAG\":\r\n      return removeTag(state, action.tag);\r\n    case \"TOGGLE_TAG\":\r\n      return toggleTag(state, action.tag);\r\n    case \"ADD_POSTS\":\r\n      return addPosts(state, action.posts);\r\n    case \"SET_POSTS\":\r\n      return setPosts(state, action.posts, action.count);\r\n    case \"SET_OPTION\":\r\n      return setOption(state, action.key, action.value);\r\n    case \"FOCUS_POST\":\r\n      return setFocusedPost(state, action.id);\r\n    case \"UNFOCUS_POST\":\r\n      return setFocusedPost(state, undefined);\r\n    case \"SET_ACTIVE_MENU\":\r\n      return setActiveMenu(state, action.menu);\r\n    case \"RESET\":\r\n      return reset(state);\r\n    default:\r\n      throw new Error(`Unrecognized Action: ${action.type}`);\r\n  }\r\n};\r\n","import { useReducer, useEffect } from \"react\";\r\n\r\nimport useLocalStorage from \"./useLocalStorage\";\r\nimport reducer, { initialState } from \"./reducer\";\r\n\r\n/**\r\n * Creates and manages state\r\n * @return {[{results: {posts: Array, page: Number, count: Number}, tags: Array, context: {focusedPost: String, activeMenu: String}, options: {originals: Boolean, infinite: Boolean, rated: Boolean}}, dispatch]}\r\n */\r\nexport default function useAppState() {\r\n  const [cache, setCache] = useLocalStorage(initialState);\r\n  const [state, dispatch] = useReducer(reducer, cache);\r\n\r\n  useEffect(() => {\r\n    setCache(state);\r\n  }, [setCache, state]);\r\n\r\n  return [state, dispatch];\r\n}\r\n","export default function useLocalStorage(initialState) {\r\n  const stateString = localStorage.getItem(\"state\");\r\n  const state =\r\n    stateString !== null && stateString !== \"undefined\"\r\n      ? JSON.parse(stateString)\r\n      : initialState;\r\n  const setState = newState =>\r\n    localStorage.setItem(\"state\", JSON.stringify(newState));\r\n\r\n  return [state, setState];\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { gutter, backgroundColor2 } from \"../../misc/style\";\r\nimport Button from \"../common/Button\";\r\n\r\nconst FotterWrapper = styled.footer`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1px 1fr 1px 1fr;\r\n  justify-content: space-around;\r\n  padding: ${gutter};\r\n`;\r\n\r\nconst Divider = styled.div`\r\n  width: 1px;\r\n  height: 20px;\r\n  background: ${backgroundColor2};\r\n`;\r\n\r\nfunction Footer() {\r\n  return (\r\n    <FotterWrapper>\r\n      <Button type=\"invisible\">\r\n        <a href=\"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md\">\r\n          Report a bug\r\n        </a>\r\n      </Button>\r\n      <Divider />\r\n      <Button type=\"invisible\">\r\n        <a href=\"https://github.com/kurozenzen/r34-react\">Github</a>\r\n      </Button>\r\n      <Divider />\r\n      <Button type=\"invisible\">\r\n        <a href=\"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md\">\r\n          Feature request\r\n        </a>\r\n      </Button>\r\n    </FotterWrapper>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport { BlockButton } from \"../components/common/Button\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\n\r\nexport default function Settings({ state, dispatch }) {\r\n  return (\r\n    <>\r\n      <Title>Settings</Title>\r\n      <Surface>\r\n        <Title>General</Title>\r\n        <p>nothing yet</p>\r\n        <Line />\r\n        <Title>Developer</Title>\r\n        <BlockButton onClick={() => dispatch({ type: \"RESET\" })}>\r\n          Reset Application\r\n        </BlockButton>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import { combineReducers } from \"redux\";\r\n\r\nexport default combineReducers({});\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nexport default createStore(rootReducer);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport Help from \"./pages/Help\";\r\nimport Search from \"./pages/Search\";\r\nimport Header from \"./components/features/Header\";\r\nimport useAppState from \"./hooks/useAppState\";\r\nimport Footer from \"./components/features/Footer\";\r\nimport {\r\n  backgroundColor,\r\n  accentColor,\r\n  backgroundColor2,\r\n  gutter,\r\n} from \"./misc/style\";\r\nimport Settings from \"./pages/Settings\";\r\nimport store from \"./redux/store\";\r\n\r\nconst Main = styled.main`\r\n  flex-grow: 1;\r\n  align-self: strech;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 16px;\r\n\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nconst AppWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: strech;\r\n  min-height: 100%;\r\n  background: ${backgroundColor};\r\n  color: ${backgroundColor2};\r\n\r\n  font-size: 14px;\r\n\r\n  a {\r\n    color: ${accentColor};\r\n    text-decoration: none;\r\n  }\r\n\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nfunction getActivePage(activeMenu, state, dispatch) {\r\n  switch (activeMenu) {\r\n    case \"help\":\r\n      return <Help state={state} dispatch={dispatch} />;\r\n    case \"settings\":\r\n      return <Settings state={state} dispatch={dispatch} />;\r\n    case \"search\":\r\n    default:\r\n      return (\r\n        <Search\r\n          tags={state.tags}\r\n          options={state.options}\r\n          results={state.results}\r\n          dispatch={dispatch}\r\n        />\r\n      );\r\n  }\r\n}\r\n\r\nexport default function App() {\r\n  const [state, dispatch] = useAppState();\r\n\r\n  const activePage = getActivePage(state.context.activeMenu, state, dispatch);\r\n\r\n  return (\r\n    <Provider store={store}>\r\n      <AppWrapper>\r\n        <Header activeMenu={state.context.activeMenu} dispatch={dispatch} />\r\n        <Main>{activePage}</Main>\r\n        <Footer />\r\n      </AppWrapper>\r\n    </Provider>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"app-root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}