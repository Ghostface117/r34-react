(this["webpackJsonpr34-browser"]=this["webpackJsonpr34-browser"]||[]).push([[0],{21:function(e,n,t){e.exports=t(37)},26:function(e,n,t){},31:function(e,n,t){},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),i=t.n(c),o=(t(26),t(3)),u=t(1),l=t(2);function s(){var e=Object(u.a)(["\n  font-size: 24px;\n  font-weight: lighter;\n  margin: 0;\n  text-align: center;\n"]);return s=function(){return e},e}function f(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 24px;\n  font-weight: lighter;\n  text-align: center;\n  margin: 0;\n"]);return f=function(){return e},e}var m=l.a.h1(f()),p=l.a.h2(s());var d=function(e){var n=e.size,t=e.children;switch(n){case"large":return r.a.createElement(m,null,t);case"medium":default:return r.a.createElement(p,null,t)}},h="#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.4s ease-in-out",g="box-shadow: 0 0 8px rgba(0, 0, 0, 1)";function b(){var e=Object(u.a)(["\n  width: 100%;\n  height: 1px;\n  background: ",";\n"]);return b=function(){return e},e}function v(){var e=Object(u.a)(["\n  padding: ",";\n  background: ",";\n  ",";\n  border-radius: ",";\n\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return v=function(){return e},e}var E=l.a.div(v(),"8px",h,g,"3px","8px"),O=l.a.div(b(),h),x=t(20),y=t(4),j=t.n(y),w="https://r34-json.herokuapp.com";fetch(w).catch((function(){return w="https://r34-api-clone.herokuapp.com"}));var k=function(e){var n;return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.awrap(fetch(w+"/tags?limit=20&name="+e+"*&order_by=posts"));case 2:return n=t.sent,t.next=5,j.a.awrap(n.json());case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}))},T=function(e){var n,t,a,r=arguments;return j.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:0,t=r.length>2&&void 0!==r[2]?r[2]:0,c.next=4,j.a.awrap(fetch(C(n,e,t)));case 4:return a=c.sent,c.next=7,j.a.awrap(a.json());case 7:return c.abrupt("return",c.sent);case 8:case"end":return c.stop()}}))},_=function(e){var n;return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.awrap(fetch(w+"/alias/"+e));case 2:return n=t.sent,t.next=5,j.a.awrap(n.json());case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}))};function C(e,n,t){var a=w+"/posts";return a+="?pid="+e,a+="&limit=20",a+="&tags="+n.map((function(e){return("-"===e.modifier?"-":"")+encodeURIComponent(e.name)})).join("+"),t>0&&(a+="+"+encodeURIComponent("score:>="+t)),a}var S=t(7),N=function e(n,t,a,r,c,i,o,u,l,s,f,m,p,d,h,g,b,v,E,O,x){Object(S.a)(this,e),this.id=n,this.score=t,this.rating=a,this.source=r,this.tags=c,this.media_type=i,this.small_src=o,this.big_src=u,this.thumbnail_src=l,this.width=s,this.height=f,this.creator_id=m,this.creator_url=p,this.status=d,this.parent_id=h,this.has_children=g,this.has_comments=b,this.comments_url=v,this.has_notes=E,this.created_at=O,this.change=x},z=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"+";Object(S.a)(this,e),this.name=n,this.types=t,this.count=a,this.modifier=r},P=function(e){return e.name?function(e){var n=e.name,t=e.types,a=e.count,r=e.modifier;return new z(n,t,Number(a),r)}(e):function(e){var n=e.id,t=e.type,a=e.score,r=e.rating,c=e.source,i=e.tags,o=e.file_url,u=e.width,l=e.height,s=e.creator_id,f=e.creator_url,m=e.sample_url,p=e.preview_url,d=e.status,h=e.parent_id,g=e.has_children,b=e.has_comments,v=e.comments_url,E=e.has_notes,O=e.created_at,x=e.change;return new N(Number(n),Number(a),r,c,i?i.map((function(e){return new z(e)})):[],t,m,o,p,Number(u),Number(l),Number(s),f,d,h,g,b,v,E,O,x)}(e)};function A(){var e=Object(u.a)(["\n  min-width: 48px;\n  border: "," "," solid;\n  border-right-width: 0;\n  border-radius: "," 0 0 ",";\n"]);return A=function(){return e},e}function I(){var e=Object(u.a)(["\n  border-left-width: 0;\n  border-radius: 0 "," "," 0;\n"]);return I=function(){return e},e}function F(){var e=Object(u.a)(["\n  width: 100%;\n  border-radius: ",";\n"]);return F=function(){return e},e}function U(){var e=Object(u.a)(["\n  height: 32px;\n  font-size: 14px;\n  color: ",";\n  background: ",";\n  border: "," "," solid;\n\n  transition: border-color 0.4s ease-in-out;\n  transition: color 0.4s ease-in-out;\n  transition: background-color 0.4s ease-in-out;\n\n  :hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  :active,\n  :focus {\n    color: ",";\n\n    border-color: ",";\n    cursor: pointer;\n  }\n"]);return U=function(){return e},e}function D(){var e=Object(u.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  filter: drop-shadow(0 0 10px black);\n"]);return D=function(){return e},e}function R(){var e=Object(u.a)(["\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  margin: 10px;\n  padding: 5px 5px;\n  filter: drop-shadow(0 0 10px black);\n"]);return R=function(){return e},e}function G(){var e=Object(u.a)(["\n  color: ",";\n"]);return G=function(){return e},e}function M(){var e=Object(u.a)(["\n  background: none;\n  border: none;\n  padding: ",";\n\n  :focus {\n    text-decoration: underline;\n  }\n"]);return M=function(){return e},e}function L(){var e=Object(u.a)(["\n  font-size: 14px;\n\n  :focus {\n    outline: none;\n  }\n"]);return L=function(){return e},e}var B=l.a.button(L()),V=Object(l.a)(B)(M(),"4px"),W=Object(l.a)(V)(G(),(function(e){return e.active?"crimson":"white"})),H=Object(l.a)(V)(R()),K=Object(l.a)(V)(D()),J=Object(l.a)(B)(U(),"crimson","#121212","crimson","2px","crimson","#121212","white","white"),q=Object(l.a)(J)(F(),"3px"),$=Object(l.a)(J)(I(),"3px","3px"),Y=Object(l.a)(V)(A(),"crimson","2px","3px","3px");function Q(e){var n,t=e.type,a=e.children,c=e.onClick,i=e.active,o=e.disabled,u=e.label;switch(t){case"invisible":n=V;break;case"block":n=q;break;case"topLeft":n=H;break;case"center":n=K;break;case"modifier":n=Y;break;case"add":n=$;break;case"menu":n=W;break;default:n=J}return r.a.createElement(n,{onClick:c,active:i,disabled:o,"aria-label":u},a)}function X(){var e=Object(u.a)(["\n  width: 100%;\n  border: none;\n  outline: none;\n  background: none;\n  font-size: 14px;\n  border-top: "," "," solid;\n  border-bottom: "," "," solid;\n"]);return X=function(){return e},e}var Z=l.a.input(X(),"crimson","2px","crimson","2px");function ee(e){var n=e.value,t=e.setValue;return r.a.createElement(Z,{id:"tag-input",value:n,onChange:function(e){return t(e.target.value)},placeholder:"Search for tags","aria-label":"Search"})}t(31);function ne(e){return e.replace(/_/g," ")}function te(){var e=Object(u.a)(["\n  ","\n  ","\n"]);return te=function(){return e},e}function ae(){var e=Object(u.a)(["\n  display: inline-block;\n  padding: 0.25rem;\n  border-radius: ","\n  font-size: 14px;\n  line-height: 1.2;\n  vertical-align: baseline;\n  margin: ",";\n  ","\n"]);return ae=function(){return e},e}var re=l.a.div(ae(),(function(e){return e.collapsed?"3px":"".concat("3px"," ").concat("3px"," 0 0")}),(function(){return"4px"}),(function(e){var n=e.active,t=n?"#121212":"crimson",a=n?"crimson":"#121212";return"\n    color: ".concat(t,";\n    background-color: ").concat(a,";\n    border: ").concat("crimson"," ").concat("2px"," solid;\n    transition: background-color 0.4s ease-in-out;\n\n    cursor: pointer;\n\n    :hover {\n      background-color: ").concat(t,";\n      color: ").concat(a,";\n      \n      i {\n        color: ").concat(a,";\n      }\n    }\n\n    :focus, :active {\n      color: ").concat("white",";\n      border-color: ").concat("white","\n    }\n  ")})),ce=l.a.span(te(),(function(e){return e.left?"margin-right: 5px;":""}),(function(e){return e.right?"margin-left: 5px;":""}));function ie(e){var n=e.name,t=e.count,c=e.modifier,i=e.types,u=e.activeTags,l=e.loadAliases,s=e.dispatch,f=Object(a.useState)(),m=Object(o.a)(f,2),p=m[0],d=m[1],h=Object(a.useState)(!0),g=Object(o.a)(h,2),b=g[0],v=g[1];Object(a.useEffect)((function(){u.some((function(e){return e.name===n}))&&_(n).then((function(e){e.sort((function(e,n){return Number(n.posts)-Number(e.posts)})),d(e.filter((function(e){return!u.some((function(n){return n.name===e.name}))})))}))}),[n,u]);var E=u.some((function(e){return e.name===n})),O=l&&p&&p.length>0;return r.a.createElement(re,{active:E,collapsed:b,onMouseLeave:function(){return v(!0)},tabIndex:"0"},r.a.createElement(Ne,{types:i,left:!0}),r.a.createElement(oe,{name:n,count:t,modifier:c,types:i,activeTags:u,dispatch:s}),O&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{right:!0,onClick:function(){return v(!b)}},r.a.createElement(ye,null)),r.a.createElement("div",{className:"dropdown-list"+(b?"":" visible")},p.map((function(e){var n=e.name,t=e.posts;return r.a.createElement(ue,{key:"t_"+n,name:n,count:t,dispatch:s})})))))}function oe(e){var n=e.name,t=e.count,a=e.types,c=e.modifier,i=e.dispatch,o=ne(n),u=t?"".concat(o," (").concat(t,")"):o;return r.a.createElement("span",{onClick:function(){return i({type:"TOGGLE_TAG",tag:{name:n,count:t,types:a,modifier:c}})},onKeyDown:function(e){return 32===e.keyCode&&i({type:"TOGGLE_TAG",tag:{name:n,count:t,types:a,modifier:c}})}},"-"===c?r.a.createElement("s",null,u):u)}function ue(e){var n=e.name,t=e.count,a=e.dispatch;return r.a.createElement("div",{className:"alias"},r.a.createElement(oe,{name:n,count:t,dispatch:a}))}ie.defaultProps={types:[],onClick:function(){}},oe.defaultProps={modifier:"+",types:[],activeTags:[],onClick:function(){}};var le=ie;function se(){var e=Object(u.a)(["\n  line-height: 16px;\n  ","\n  ","\n"]);return se=function(){return e},e}function fe(){var e=Object(u.a)(["\n  ","\n"]);return fe=function(){return e},e}var me=l.a.i(fe(),(function(e){var n=e.color,t=e.size;return"\n    color: ".concat(n,";\n    min-width: ").concat(t,"px;\n    height: ").concat(t,"px;\n\n    ").concat(re,":hover & {\n      color: ").concat("crimson",";\n    }\n\n    ").concat(re,":active & ,  ").concat(re,":focus & {\n      color: ").concat("white",";\n    }\n  ")})),pe=l.a.span(se(),(function(e){return e.left?"margin-right: 5px;":""}),(function(e){return e.right?"margin-left: 5px;":""})),de=function(e){var n=e.className,t=e.icon,a=e.color,c=e.size,i=e.onClick,o=e.left,u=e.right;return r.a.createElement(pe,{onClick:i,left:o,right:u},r.a.createElement(me,{className:"fas ".concat(t," ").concat(n),color:a,size:c}))};function he(e){return r.a.createElement(de,Object.assign({icon:"fa-user"},e))}function ge(e){return r.a.createElement(de,Object.assign({icon:"fa-pen"},e))}function be(e){return r.a.createElement(de,Object.assign({icon:"fa-copyright"},e))}function ve(e){return r.a.createElement(de,Object.assign({icon:"fa-plus-circle"},e))}function Ee(e){return r.a.createElement(de,Object.assign({icon:"fa-minus-circle"},e))}function Oe(e){return r.a.createElement(de,Object.assign({icon:"fa-times"},e))}function xe(e){return r.a.createElement(de,Object.assign({icon:"fa-expand"},e))}function ye(e){return r.a.createElement(de,Object.assign({icon:"fa-caret-down"},e))}function je(e){return r.a.createElement(de,Object.assign({icon:"fa-external-link-alt"},e))}function we(e){return r.a.createElement(de,Object.assign({icon:"fa-hashtag"},e))}function ke(e){return r.a.createElement(de,Object.assign({icon:"fa-registered"},e))}function Te(e){return r.a.createElement(de,Object.assign({icon:"fa-heart"},e))}function _e(e){return r.a.createElement(de,Object.assign({icon:"fa-play"},e))}function Ce(e){return r.a.createElement(de,Object.assign({icon:"fa-pause"},e))}function Se(e){var n=e.types,t=e.className,a=e.onClick;switch(n.find((function(e){return!e.match(/^[general|ambiguous]$/)}))){case"character":return r.a.createElement(he,{className:t,onClick:a,left:!0});case"copyright":return r.a.createElement(be,{className:t,onClick:a,left:!0});case"artist":return r.a.createElement(ge,{className:t,onClick:a,left:!0});default:return r.a.createElement("div",{className:t})}}de.defaultProps={color:"black",size:14},Se.defaultProps={types:[]};var Ne=Se;function ze(e){var n=Number(e);return n>=1e6?"".concat((n/1e6).toFixed(0),"M"):n>=1e3?"".concat((n/1e3).toFixed(0),"K"):n}function Pe(){var e=Object(u.a)(["\n  flex: 0 0 48px;\n  text-align: center;\n"]);return Pe=function(){return e},e}function Ae(){var e=Object(u.a)(["\n  display: flex;\n  height: 28px;\n\n  > * {\n    margin: auto;\n  }\n\n  &:not(:last-child) {\n    border-bottom: 1px grey solid;\n  }\n\n  :focus {\n    text-decoration: underline;\n  }\n"]);return Ae=function(){return e},e}function Ie(){var e=Object(u.a)(["\n  ",";\n  display: none;\n  background: white;\n  box-sizing: border-box;\n  border: "," "," solid;\n  border-radius: 0 0 3px 3px;\n  color: black;\n  z-index: 1;\n"]);return Ie=function(){return e},e}var Fe=l.a.div(Ie(),(function(e){var n=e.inputRef;return n?"\n      position: absolute;\n      top: ".concat(n.offsetTop+n.clientHeight-2,"px;\n      left: ").concat(n.offsetLeft,"px;\n      width: ").concat(n.clientWidth,"px;"):""}),"2px","crimson");var Ue=l.a.div(Ae()),De=l.a.span(Pe());function Re(e){var n=e.name,t=e.posts,a=e.types,c=e.onClick;return r.a.createElement(Ue,{onClick:c,onKeyDown:function(e){return 32===e.keyCode&&c(e)},tabIndex:"0"},r.a.createElement(De,null,r.a.createElement(Ne,{types:a})),r.a.createElement("span",{style:{flexGrow:1}},ne(n)),r.a.createElement("span",{style:{paddingRight:5}},ze(t)," posts"))}var Ge=function(e){var n=e.inputRef,t=e.entries,a=e.onClick;return t&&t.length>0?r.a.createElement(Fe,{inputRef:n},t.map((function(e){return r.a.createElement(Re,Object.assign({key:e.name},e,{onClick:function(){return a(e)}}))}))):null};function Me(){var e=Object(u.a)(["\n  display: flex;\n  background: white;\n  ","\n    :focus-within {\n    "," {\n      display: block;\n    }\n  }\n"]);return Me=function(){return e},e}var Le=l.a.div(Me(),(function(e){return e.closed?"border-radius: ".concat("3px",";"):"\n        border-radius: ".concat("3px"," ").concat("3px"," 0 0;\n\n        > ").concat($," {\n          border-radius: 0 ").concat("3px"," 0 0;\n        }\n\n        > ").concat(Y," {\n          border-radius: ").concat("3px"," 0 0 0;\n        }\n      ")}),Fe);var Be=function(e){var n=e.dispatch,t=Object(a.useState)(),c=Object(o.a)(t,2),i=c[0],u=c[1],l=Object(a.useState)(""),s=Object(o.a)(l,2),f=s[0],m=s[1],p=Object(a.useState)("+"),d=Object(o.a)(p,2),h=d[0],g=d[1],b=Object(a.useState)([]),v=Object(o.a)(b,2),E=v[0],O=v[1],y=Object(a.useCallback)((function(e){n({type:"ADD_TAG",tag:P({name:e.name,modifier:h,count:e.posts,types:e.types})}),m(""),O([])}),[n,h]);return Object(a.useEffect)((function(){var e=setTimeout((function(){var e;f&&""!==f&&k((e=f,e.toLowerCase().replace(/ /g,"_"))).then((function(e){O(e)}))}),400);return function(){return clearTimeout(e)}}),[f]),r.a.createElement(Le,{ref:u,closed:0===E.length},r.a.createElement(Q,{type:"modifier",onClick:function(){return g("+"===h?"-":"+")}},h),r.a.createElement(ee,{value:f,setValue:m}),r.a.createElement(Q,{type:"add",onClick:function(){if(f&&""!==f.trim()){var e=E.find((function(e){return e.name===f}))||{};y(Object(x.a)({},e,{name:f}))}}},"Add"),r.a.createElement(Ge,{inputRef:i,entries:E,onClick:function(e){y(e)}}))},Ve=t(17),We=t.n(Ve);t(36);function He(){var e=Object(u.a)(["\n  margin-left: ",";\n"]);return He=function(){return e},e}function Ke(){var e=Object(u.a)(["\n  display: flex;\n"]);return Ke=function(){return e},e}var Je=l.a.label(Ke()),qe=l.a.span(He(),"8px");function $e(e){var n=e.children,t=e.initial,a=e.onChange;return r.a.createElement(Je,null,r.a.createElement(We.a,{defaultChecked:t,icons:{checked:null,unchecked:null},onChange:a}),r.a.createElement(qe,null,n))}function Ye(){var e=Object(u.a)(["\n  background: none;\n  border: none;\n  outline: none;\n  color: ",";\n  max-height: 16px;\n  width: ","em;\n  text-align: right;\n  font-size: 14px;\n  margin: -1px 0.2em 0 0.2em;\n\n  ::-webkit-inner-spin-button,\n  ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  -moz-appearance: textfield;\n"]);return Ye=function(){return e},e}function Qe(){var e=Object(u.a)(["\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return Qe=function(){return e},e}$e.defaultProps={initial:!1};var Xe=l.a.div(Qe(),"8px"),Ze=l.a.input(Ye(),"crimson",(function(e){var n=e.value;return.57*String(n).length}));function en(e){var n=e.options,t=e.dispatch,c=Object(a.useState)(1),i=Object(o.a)(c,2),u=i[0],l=i[1];return r.a.createElement(Xe,null,r.a.createElement($e,{initial:n.infinite,onChange:function(){return t({type:"SET_OPTION",key:"infinite",value:!n.infinite})}},"Infinite Scrolling"),r.a.createElement($e,{initial:Boolean(n.rated),onChange:function(){t({type:"SET_OPTION",key:"rated",value:n.rated?void 0:u})}},n.rated?r.a.createElement("div",{style:{display:"flex"}},"Above",r.a.createElement(Ze,{type:"number",value:u,onChange:function(e){return l(Number(e.target.value))},onBlur:function(e){return t({type:"SET_OPTION",key:"rated",value:Number(e.target.value)})}}),"likes"):"Only show Rated Posts"),r.a.createElement($e,{initial:n.originals,onChange:function(){return t({type:"SET_OPTION",key:"originals",value:!n.originals})}},"Load Original Sizes"))}function nn(){var e=Object(u.a)(["\n  display: inline-flex;\n  flex-wrap: wrap;\n  margin: ",";\n"]);return nn=function(){return e},e}var tn=l.a.div(nn(),(function(e){var n=e.padding;return"calc(".concat(n," - ").concat("4px",")")}));function an(e){var n=e.tags,t=e.activeTags,a=e.loadAliases,c=e.dispatch,i=e.padding;return r.a.createElement("div",null,r.a.createElement(tn,{padding:i},n.map((function(e){return r.a.createElement(le,Object.assign({key:"t_"+e.name},e,{activeTags:t,loadAliases:a,dispatch:c}))}))))}an.defaultProps={activeTags:[],onItemClick:function(){},onItemItemClick:function(){},padding:"0px"};var rn=an;var cn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null,"Help"),r.a.createElement(E,null,r.a.createElement(d,{type:"small"},"Searching for Tags"),r.a.createElement(O,null),r.a.createElement(Be,{dispatch:function(){}}),r.a.createElement(O,null),r.a.createElement("p",null,"You can use the Tag Selector to look for tags you like.The Tag Selector has 4 parts."),r.a.createElement("ol",null,r.a.createElement("li",null,'The modifier (left) determines wether posts must match a tag or not. Putting "-" will hide all posts with this tag'),r.a.createElement("li",null,"The Search Box (center) allows you to search for tags. As soon as you start typing the Tag Selector will show you relevant tags to choose from (4)."),r.a.createElement("li",null,"The Add Button (right) Allows you to add any tag to the current filter. Usefull when using wildcards."),r.a.createElement("li",null,"The Tag Dropdown (left) automatically shows tags that start with your input. It also includes The number of posts tagged, to allow you to weigh tags against each other."))),r.a.createElement(E,null,r.a.createElement(d,{type:"small"},"Options"),r.a.createElement(O,null),r.a.createElement(en,{options:{},dispatch:function(){}}),r.a.createElement(O,null),r.a.createElement("p",null,"Options allow you to customize your experience in various ways. There are 3 options available"),r.a.createElement("ol",null,r.a.createElement("li",null,"Infinite Scrolling automatically loads new posts when you get close to the bottom of the page."),r.a.createElement("li",null,"Only show Rated posts filters out posts below the specified amount of posts."),r.a.createElement("li",null,"Load original sizes always loads the highest quality of an image. This can easily cause extreme data consumption. Don't use with mobile data."))),r.a.createElement(E,null,r.a.createElement(d,{type:"small"},"Tags"),r.a.createElement(O,null),r.a.createElement(rn,{tags:[{name:"Tag 1"},{name:"Tag 2",types:["character"]},{name:"Tag 3",modifier:"-",types:["copyright"],count:1020}],activeTags:[{name:"Tag 2"},{name:"Tag 3"}]}),r.a.createElement(O,null),r.a.createElement("p",null,"This whole application is based on tags. Every Post has multiple tags. Usually you can enable/disable a tag just by tapping it. If a tag is red it means its active. The icons next to the name show what type of tag it is. Not every tag has a type. The number on the right shows how many posts there are with that tag.")))};function on(){var e=Object(u.a)(["\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return on=function(){return e},e}var un=l.a.section(on(),"8px");var ln=function(e){var n=e.options,t=e.tags,c=e.dispatch,i=Object(a.useCallback)((function(){T(t,0,n.rated).then((function(e){c({type:"SET_POSTS",posts:e.posts.map(P),count:Number(e.count)})}))}),[c,n.rated,t]);return r.a.createElement(un,null,r.a.createElement(d,null,r.a.createElement("label",{htmlFor:"tag-input"},"Search")),r.a.createElement(E,null,r.a.createElement(Be,{dispatch:c}),t.length>0&&r.a.createElement(rn,{tags:t,activeTags:t,dispatch:c,loadAliases:!0}),r.a.createElement(en,{options:n,dispatch:c}),r.a.createElement(Q,{type:"block",onClick:i},"Search")))};function sn(){var e=Object(u.a)(["\n  border: 1px solid black;\n  display: inline-block;\n  position: relative;\n"]);return sn=function(){return e},e}function fn(){var e=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n"]);return fn=function(){return e},e}function mn(){var e=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n"]);return mn=function(){return e},e}var pn=l.a.video(mn()),dn=l.a.img(fn()),hn=l.a.div(sn());function gn(e){var n=e.type,t=e.src,c=e.thumbnail_src,i=e.isFullscreen,u=e.onFullscreen,l=e.onClick,s="video"===n||t.includes(".gif"),f=Object(a.useState)({}),m=Object(o.a)(f,2),p=m[0],d=m[1],h=Object(a.useState)(!0),g=Object(o.a)(h,2),b=g[0],v=g[1],E=s&&"image"===n&&b?c:t;return console.log(s,n,b),Object(a.useEffect)((function(){p&&p.play&&(b?p.pause():p.play())}),[b,p]),r.a.createElement(hn,null,"video"===n?r.a.createElement(pn,{controls:!1,loop:!0,src:E,alt:t,poster:c,preload:"metadata",onClick:l,ref:d,onKeyDown:function(e){return 32===e.keyCode&&l(e)}}):r.a.createElement(dn,{src:E,alt:t,onClick:l,onKeyDown:function(e){return 32===e.keyCode&&l(e)}}),r.a.createElement(Q,{type:"topLeft",onClick:u,label:"Toggle Fullscreen"},i?r.a.createElement(Oe,{color:"white"}):r.a.createElement(xe,{color:"white"})),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{type:"center"},b?r.a.createElement(_e,{color:"white",size:50,onClick:function(){return v(!1)}}):r.a.createElement(Ce,{color:"transparent",size:50,onClick:function(){return v(!0)}})),r.a.createElement("div",{style:{height:5,backgroundColor:"crimson",width:p?p.currentTime/p.duration*100+"%":0}})))}function bn(){var e=Object(u.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  background: ",";\n  padding: ",";\n  ",";\n\n  > span,\n  > a {\n    margin: ",";\n    line-height: 1rem;\n    height: 1rem;\n  }\n"]);return bn=function(){return e},e}function vn(){var e=Object(u.a)(["\n  > "," {\n    padding: ",";\n  }\n\n  overflow: hidden;\n"]);return vn=function(){return e},e}var En=l.a.div(vn(),tn,"4px"),On=l.a.div(bn(),h,"4px",g,"4px");var xn=function(e){var n=e.rating,t=e.score,a=e.source,c=e.tags,i=e.activeTags,o=e.dispatch;return r.a.createElement(En,null,r.a.createElement(On,null,n&&r.a.createElement(yn,{value:n}),t&&r.a.createElement(jn,{value:t}),a&&r.a.createElement(wn,{value:a})),r.a.createElement(rn,{tags:c,activeTags:i,dispatch:o,padding:"8px"}))},yn=function(e){var n=e.value;return r.a.createElement("span",null,r.a.createElement(ke,{color:"white",left:!0}),n[0].toUpperCase())},jn=function(e){var n=e.value;return r.a.createElement("span",null,n,r.a.createElement(Te,{color:"white",right:!0}))};function wn(e){var n=e.value;return n.startsWith("http")?r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"source"},r.a.createElement(je,{color:"red",left:!0}),"Source"):r.a.createElement("span",null,r.a.createElement(we,{color:"white",left:!0}),n)}function kn(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  background: ",";\n  ",";\n  border-radius: ",";\n  overflow: hidden;\n  margin-bottom: ",";\n  border-box: border-box;\n"]);return kn=function(){return e},e}var Tn=l.a.div(kn(),h,g,"3px","8px");function _n(e){var n=e.id,t=e.media_type,c=e.small_src,i=e.big_src,u=e.thumbnail_src,l=e.rating,s=e.score,f=e.source,m=e.tags,p=e.loadOriginal,d=e.activeTags,h=e.dispatch,g=function(e,n,t,a){var r;return e?r=n:(r="".concat(t,"?").concat(a)).includes("//images")&&(r=r.replace("//images","/images")),r}(p,i,c,n),b=Object(a.useState)(!0),v=Object(o.a)(b,2),E=v[0],O=v[1];return r.a.createElement(Tn,null,r.a.createElement(gn,{type:t,src:g,thumbnail_src:u,isFullscreen:!1,onFullscreen:function(){return h({type:"FOCUS_POST",id:n})},onClick:function(){return O(!E)}}),!E&&r.a.createElement(xn,{rating:l,score:s,source:f,tags:m,activeTags:d,dispatch:h}))}function Cn(){var e=Object(u.a)([""]);return Cn=function(){return e},e}var Sn=l.a.div(Cn());var Nn=function(e){var n=e.posts,t=e.activeTags,a=e.loadOriginal,c=e.dispatch;return r.a.createElement(Sn,null,n.map((function(e){return r.a.createElement(_n,Object.assign({key:"p_".concat(e.id)},e,{loadOriginal:a,activeTags:t,dispatch:c}))})))};function zn(){var e=Object(u.a)(["\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return zn=function(){return e},e}var Pn=l.a.section(zn(),"8px"),An=!0;var In=function(e){var n=e.options,t=e.dispatch,c=e.tags,i=e.results,o=Object(a.useCallback)((function(){T(c,i.page+1,n.rated).then((function(e){t({type:"ADD_POSTS",posts:e.posts.map(P)}),An=!0}))}),[t,n.rated,i.page,c]);return window.onscroll=Object(a.useCallback)((function(){n.infinite&&An&&window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-window.innerHeight&&(An=!1,o())}),[o,n.infinite]),r.a.createElement(Pn,{className:"results"},r.a.createElement(d,null,ze(i.count)," results"),r.a.createElement(Nn,{posts:i.posts,activeTags:c,loadOriginal:n.originals,dispatch:t}),!n.infinite&&r.a.createElement(Q,{type:"block",onClick:o},"Load More"))};function Fn(e){var n=e.tags,t=e.options,a=e.results,c=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ln,{options:t,tags:n,dispatch:c}),a.posts.length>0&&r.a.createElement(In,{options:t,dispatch:c,tags:n,results:a}))}function Un(){var e=Object(u.a)(["\n  position: fixed;\n  left: 100%;\n  right: 100%;\n"]);return Un=function(){return e},e}function Dn(){var e=Object(u.a)(["\n  position: fixed;\n  left: 0;\n  bottom: 0;\n"]);return Dn=function(){return e},e}function Rn(){var e=Object(u.a)(["\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  height: 100%;\n  width: 100%;\n  overflow: scroll;\n  background-color: ",";\n"]);return Rn=function(){return e},e}var Gn=l.a.div(Rn(),"#121212"),Mn=l.a.div(Dn()),Ln=l.a.img(Un());function Bn(e){var n=e.focusedPost,t=e.posts,c=e.dispatch,i=t.findIndex((function(e){return e.id===n})),o=t[i],u=o.big_src,l=o.media_type,s=o.thumbnail_src,f=t[i>0?i-1:i].big_src,m=t[i<t.length-1?i+1:i].big_src,p=Object(a.useCallback)((function(){return i>0&&c({type:"FOCUS_POST",id:t[i-1].id})}),[i,c,t]),d=Object(a.useCallback)((function(){return i<t.length-1&&c({type:"FOCUS_POST",id:t[i+1].id})}),[i,c,t]);return r.a.createElement(Gn,null,r.a.createElement(gn,{type:l,src:u,thumbnail_src:s,isFullscreen:!0,onFullscreen:function(){return c({type:"UNFOCUS_POST"})},onClick:function(){}}),r.a.createElement(Mn,null,r.a.createElement(Ee,{onClick:p,color:"white"}),r.a.createElement(ve,{onClick:d,color:"white"})),r.a.createElement(Ln,{src:f}),r.a.createElement(Ln,{src:m}))}var Vn=function(e){var n=e.size;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 12.7 12.7"},r.a.createElement("g",{transform:"translate(0,-284.3)"},r.a.createElement("circle",{id:"path18",cx:"6.3499999",cy:"290.65002",fill:"none",stroke:"crimson",strokeWidth:"0.50848764",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1",r:"6.0957561"}),r.a.createElement("text",{fontStyle:"normal",fontWeight:"normal",fontSize:"8.3113203px",fontFamily:"sansSerif",letterSpacing:"0px",wordSpacing:"0px",fill:"crimson",fillOpacity:"1",x:"2.1363549",y:"289.02704",id:"text4533",transform:"scale(0.98538224,1.0148346)"},r.a.createElement("tspan",{id:"tspan4531",x:"2.1363549",y:"289.02704",fontStyle:"normal",fontVariant:"normal",fontWeight:"300",fontStretch:"normal",fontFamily:"Calibri",fill:"crimson",fillOpacity:"1"},"34"))))};function Wn(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n"]);return Wn=function(){return e},e}function Hn(){var e=Object(u.a)(["\n  background: ",";\n  ",";\n  padding: "," 0;\n  margin-bottom: ",";\n"]);return Hn=function(){return e},e}function Kn(){var e=Object(u.a)(["\n  width: 1px;\n  height: 32px;\n  margin: 0 ",";\n  background: ",";\n"]);return Kn=function(){return e},e}function Jn(){var e=Object(u.a)(["\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return Jn=function(){return e},e}var qn=l.a.header(Jn(),"8px"),$n=l.a.div(Kn(),"8px","white"),Yn=l.a.div(Hn(),h,g,"8px","8px"),Qn=l.a.nav(Wn());var Xn=function(e){var n=e.activeMenu,t=e.dispatch;return r.a.createElement(qn,null,r.a.createElement(Yn,null,r.a.createElement(d,{size:"large"},r.a.createElement(Vn,{size:32}),r.a.createElement($n,null),r.a.createElement("span",{style:{marginTop:2}},"Browse ",r.a.createElement("a",{href:"https://rule34.xxx"},"Rule34")))),r.a.createElement(Qn,null,r.a.createElement(Q,{type:"menu",active:"search"===n,onClick:function(){return t({type:"SET_ACTIVE_MENU",menu:"search"})}},"Search"),r.a.createElement(Q,{type:"menu",active:"help"===n,onClick:function(){return t({type:"SET_ACTIVE_MENU",menu:"help"})}},"Help"),r.a.createElement(Q,{type:"menu",active:"settings"===n,onClick:function(){return t({type:"SET_ACTIVE_MENU",menu:"settings"})}},"Settings")))},Zn=t(6),et=t(5);function nt(e,n){switch(n.type){case"ADD_TAG":return at(e,n.tag);case"REMOVE_TAG":return rt(e,n.tag);case"TOGGLE_TAG":return ct(e,n.tag);case"ADD_POSTS":return it(e,n.posts);case"SET_POSTS":return ot(e,n.posts,n.count);case"SET_OPTION":return ut(e,n.key,n.value);case"FOCUS_POST":return lt(e,n.id);case"UNFOCUS_POST":return lt(e,void 0);case"SET_ACTIVE_MENU":return st(e,n.menu);case"RESET":return ft(e);default:throw new Error("Unrecognized Action: ".concat(n.type))}}function tt(e,n){return e.findIndex((function(e){return e.name===n.name}))}var at=function(e,n){return Object(et.a)(e,(function(t){var a=tt(e.tags,n);t.tags=Object(Zn.a)(e.tags),-1!==a?t.tags[a]=n:t.tags=[].concat(Object(Zn.a)(t.tags),[n])}))},rt=function(e,n){return Object(et.a)(e,(function(t){var a=tt(e.tags,n);-1!==a&&(t.tags=Object(Zn.a)(e.tags),t.tags.splice(a,1))}))},ct=function(e,n){return-1!==tt(e.tags,n)?rt(e,n):at(e,n)},it=function(e,n){return Object(et.a)(e,(function(t){t.results.posts=[].concat(Object(Zn.a)(e.results.posts),Object(Zn.a)(n)),t.results.page=e.results.page+1}))},ot=function(e,n,t){return Object(et.a)(e,(function(e){e.results.posts=Object(Zn.a)(n),e.results.count=t,e.results.page=0}))},ut=function(e,n,t){return Object(et.a)(e,(function(e){e.options[n]=t}))},lt=function(e,n){return Object(et.a)(e,(function(e){e.context.focusedPost=n}))},st=function(e,n){return Object(et.a)(e,(function(e){e.context.activeMenu=n}))},ft=function(e){return Object(et.a)(e,(function(e){Object.assign(e,mt)}))},mt={results:{posts:[],page:0,count:void 0},context:{focusedPost:void 0,activeMenu:"search"},tags:[],options:{infinite:!0,rated:void 0,originals:!1}};function pt(){var e=function(e){var n=localStorage.getItem("state");return[null!==n&&"undefined"!==n?JSON.parse(n):e,function(e){return localStorage.setItem("state",JSON.stringify(e))}]}(mt),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useReducer)(nt,t),i=Object(o.a)(c,2),u=i[0],l=i[1];return Object(a.useEffect)((function(){r(u)}),[r,u]),[u,l]}function dt(){var e=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  justify-content: space-around;\n  padding: ",";\n"]);return dt=function(){return e},e}var ht=l.a.footer(dt(),"8px");var gt=function(){return r.a.createElement(ht,null,r.a.createElement(Q,{type:"invisible"},r.a.createElement("a",{href:"https://github.com/kurozenzen/r34-react"},"Github")),r.a.createElement(Q,{type:"invisible"},r.a.createElement("a",{href:"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md"},"Report a bug")),r.a.createElement(Q,{type:"invisible"},r.a.createElement("a",{href:"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md"},"Feature request")))};function bt(e){e.state;var n=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null,"Settings"),r.a.createElement(E,null,r.a.createElement(d,null,"General"),r.a.createElement("p",null,"nothing yet"),r.a.createElement(O,null),r.a.createElement(d,null,"Developer"),r.a.createElement(q,{onClick:function(){return n({type:"RESET"})}},"Reset Application")))}function vt(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: strech;\n  min-height: 100%;\n  background: ",";\n  color: ",";\n\n  font-size: 14px;\n\n  a {\n    color: ",";\n    text-decoration: none;\n  }\n\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return vt=function(){return e},e}function Et(){var e=Object(u.a)(["\n  flex-grow: 1;\n  align-self: strech;\n  display: flex;\n  flex-direction: column;\n  padding: 0 16px;\n\n  > *:not(:last-child) {\n    margin-bottom: ",";\n  }\n"]);return Et=function(){return e},e}var Ot=l.a.main(Et(),"8px"),xt=l.a.div(vt(),"#121212","white","crimson","8px");Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){var e=pt(),n=Object(o.a)(e,2),t=n[0],a=n[1],c=function(e,n,t){switch(e){case"reader":return r.a.createElement(Bn,{state:n,dispatch:t});case"help":return r.a.createElement(cn,{state:n,dispatch:t});case"settings":return r.a.createElement(bt,{state:n,dispatch:t});case"search":default:return r.a.createElement(Fn,{tags:n.tags,options:n.options,results:n.results,dispatch:t})}}(t.context.activeMenu,t,a);return r.a.createElement(xt,null,r.a.createElement(Xn,{activeMenu:t.context.activeMenu,dispatch:a}),r.a.createElement(Ot,null,c),r.a.createElement(gt,null))}),null),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.188a8a57.chunk.js.map