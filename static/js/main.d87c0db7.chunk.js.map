{"version":3,"sources":["icons/OutOfResults.png","redux/actions.ts","redux/reducers/misc.ts","redux/reducers/preferences.ts","redux/reducers/results.ts","redux/reducers/tags.ts","redux/reducers/index.ts","redux/store.ts","icons/R34Icon.tsx","redux/selectors.ts","components/common/Button.tsx","components/common/Title.tsx","components/features/Header.tsx","data/types.ts","components/features/Footer.tsx","components/common/Surface.tsx","misc/api.ts","data/Post.ts","data/Tag.ts","misc/prepare.ts","components/tagSelector/TagInput.tsx","components/tag/tagUtils.ts","misc/formatting.ts","components/tag/Tag.tsx","icons/Icons.tsx","data/constants.ts","icons/TypeIcon.tsx","components/tagSelector/DropdownList.tsx","components/tagSelector/TagSelector.tsx","components/common/Toggle.tsx","components/common/LabeledToggle.tsx","components/features/Options.tsx","components/tag/TagList.tsx","pages/Help.tsx","pages/Settings.tsx","components/features/Config.tsx","components/post/widgets/Rating.tsx","components/post/widgets/Score.tsx","components/post/widgets/Source.tsx","components/post/Details.tsx","data/utils.ts","components/player/Overlay.tsx","components/player/Video.tsx","components/player/utils.ts","components/player/Gif.tsx","components/player/Picture.tsx","components/player/Player.tsx","components/post/Post.tsx","components/post/PostList.tsx","components/features/Results.tsx","pages/Search.tsx","AppContent.tsx","misc/theme.ts","App.tsx","index.tsx"],"names":["module","exports","setActiveMenu","menu","type","toggleTag","tag","setOption","key","value","initialMiscState","activeMenu","initialPreferencesState","infinite","rated","ratedTreshold","originals","initialResultsState","posts","pageNumber","count","initialTagsState","active","aliases","addTag","state","newTag","produce","draft","name","removeTag","tagToRemove","combineReducers","tags","action","tagToToggle","forTag","addAliases","results","addPosts","postCount","setPosts","preferences","misc","persistConfig","storage","persistedReducer","persistReducer","rootReducer","store","createStore","persistor","persistStore","R34Icon","props","theme","useTheme","xmlns","width","size","height","viewBox","transform","id","cx","cy","fill","stroke","colors","accentColor","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","x","y","fontVariant","fontStretch","selectActiveMenu","selectHasResults","Object","keys","length","selectPreferences","selectActiveTags","selectResults","selectAliases","values","flat","BasicButton","styled","button","InvisibleButton","css","shadow","drop","MenuButton","backgroundColor2","ActiveMenuButton","TopLeftButton","BottomLeftButton","CenterButton","RedButton","backgroundColor","dimensions","borderWidth","BlockButton","borderRadius","AddButton","ModifierButton","Button","children","onClick","disabled","label","TypedButton","getButtonByType","aria-label","Title","h2","BigTitle","h1","HeaderWrapper","header","gutter","Divider","div","TitleBar","layer","box","bigSpacing","MenuBar","nav","Header","useSelector","dispatch","useDispatch","style","marginTop","href","FotterWrapper","footer","spacing","CenteredA","a","Footer","Surface","Line","activeApi","fetch","catch","getTags","searchTerm","res","json","getPosts","minScore","buildPostUrl","getAliases","tagName","page","tagString","map","modifier","encodeURIComponent","join","url","PostDataClass","constructor","score","rating","source","media_type","media_src","file_url","thumbnail_src","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","small_src","big_src","this","TagDataClass","types","preparePost","post","sample_url","preview_url","Number","t","Boolean","Input","input","TagInput","setValue","onChange","event","target","placeholder","prettifyTagname","tagname","replace","formatCount","numberString","number","toFixed","TagWrapper","collapsed","fg","bg","switchingColors","IconWrapper","span","left","right","TagText","text","onKeyDown","e","keyCode","Alias","className","Tag","loadAliases","activeTags","useState","setCollapsed","useEffect","api","then","newAliases","sort","b","filtered","filter","alias","isActive","showAliases","onMouseLeave","TypeIcon","ArrowIcon","StyledIcon","i","color","Icon","icon","CharacterIcon","attrs","ArtistIcon","CopyrightIcon","ExpandIcon","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","PlayIcon","PauseIcon","NO_OP","find","match","ListWrapper","tagSelector","offsetTop","clientHeight","offsetLeft","clientWidth","sizeAndPosition","tagSelectorRef","EntryWrapper","TypeWrapper","Entry","flexGrow","paddingRight","DropdownList","entries","entry","TagSelectorWrapper","closed","TagSelector","setTagSelectorRef","setModifier","suggestions","setSuggestions","activateTag","useCallback","suggestion","dirtyTag","prepareTag","handle","setTimeout","toLowerCase","newSuggestions","clearTimeout","ref","trim","s","Wrapper","Thumb","Toggle","onToggle","ToggleWrapper","Label","LabeledToggle","OptionsWrapper","StyledInput","String","Options","ratedInputValue","setRatedInputValue","display","onBlur","TagListWrapper","padding","TagList","Help","Settings","ConfigWrapper","section","Config","search","htmlFor","toUpperCase","startsWith","rel","sourceString","includes","semiSanitized","substring","indexOf","formatSource","fold","keyframes","DetailsWrapper","Bar","Details","tagsForRendering","useMemo","listToMap","keyProp","reduce","result","current","Rating","Score","Source","fade","isVisible","ProgressBar","Overlay","onFullscreen","togglePlay","isPaused","isPlayable","currentTime","duration","setVisible","defaultProps","FlexVideo","video","Video","src","videoRef","setVideoRef","Date","now","time","setTime","intervalId","setIntervalId","controls","loop","poster","preload","paused","undefined","requestFullscreen","stopPropagation","play","setInterval","console","log","pause","clearInterval","FlexImage","img","Gif","setPaused","usedSource","alt","Picture","PlayerWrapper","Player","toggleDetails","media","MediaComponent","getMediaType","getMedia","PostWrapper","Post","loadOriginal","getCorrectSource","PostListWrapper","PostList","ResultsWrapper","scrollLock","Results","isOutOfResults","setOutOfResults","loadMore","window","onscroll","innerHeight","document","documentElement","scrollTop","scrollHeight","outOfResultsPicture","textAlign","Search","hasResults","Main","main","AppWrapper","AppContent","activePage","getActivePage","appMargin","hoverAccent","timings","transistionTime","App","loading","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d87c0db7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/OutOfResults.00a98fae.png\";","import { MenuType, PreferenceKey } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport PostDataClass from \"../data/Post\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const RESET = \"R34_RESET\";\r\nexport const SET_ACTIVE_MENU = \"R34_SET_ACTIVE_MENU\";\r\nexport const ADD_TAG = \"R34_ADD_TAG\";\r\nexport const REMOVE_TAG = \"R34_REMOVE_TAG\";\r\nexport const TOGGLE_TAG = \"R34_TOGGLE_TAG\";\r\nexport const ADD_ALIASES = \"R34_ADD_ALIASES\";\r\nexport const ADD_POSTS = \"R34_ADD_POSTS\";\r\nexport const SET_POSTS = \"R34_SET_POSTS\";\r\nexport const SET_OPTION = \"R34_SET_OPTION\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\ninterface ResetAction {\r\n  type: typeof RESET;\r\n}\r\n\r\ninterface SetActiveMenuAction {\r\n  type: typeof SET_ACTIVE_MENU;\r\n  menu: MenuType;\r\n}\r\n\r\ninterface AddTagAction {\r\n  type: typeof ADD_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface RemoveTagAction {\r\n  type: typeof REMOVE_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface ToggleTagAction {\r\n  type: typeof TOGGLE_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface AddAliasesAction {\r\n  type: typeof ADD_ALIASES;\r\n  aliases: TagDataClass[];\r\n  forTag: string;\r\n}\r\n\r\ninterface AddPostsAction {\r\n  type: typeof ADD_POSTS;\r\n  posts: PostDataClass[];\r\n}\r\n\r\ninterface SetPostsAction {\r\n  type: typeof SET_POSTS;\r\n  posts: PostDataClass[];\r\n  count: number;\r\n}\r\n\r\ninterface SetOptionAction {\r\n  type: typeof SET_OPTION;\r\n  key: PreferenceKey;\r\n  value: any;\r\n}\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const reset = () => ({\r\n  type: RESET,\r\n});\r\n\r\nexport const setActiveMenu = (menu: MenuType) => ({\r\n  type: SET_ACTIVE_MENU,\r\n  menu,\r\n});\r\n\r\nexport const addTag = (tag: TagDataClass) => ({\r\n  type: ADD_TAG,\r\n  tag,\r\n});\r\n\r\nexport const removeTag = (tag: TagDataClass) => ({\r\n  type: REMOVE_TAG,\r\n  tag,\r\n});\r\n\r\nexport const toggleTag = (tag: TagDataClass) => ({\r\n  type: TOGGLE_TAG,\r\n  tag,\r\n});\r\n\r\nexport const addAliases = (aliases: TagDataClass[], forTag: string) => ({\r\n  type: ADD_ALIASES,\r\n  aliases,\r\n  forTag,\r\n});\r\n\r\nexport const addPosts = (posts: PostDataClass[]) => ({\r\n  type: ADD_POSTS,\r\n  posts,\r\n});\r\n\r\nexport const setPosts = (posts: PostDataClass[], count: number) => ({\r\n  type: SET_POSTS,\r\n  posts,\r\n  count,\r\n});\r\n\r\nexport const setOption = (key: PreferenceKey, value: any) => ({\r\n  type: SET_OPTION,\r\n  key,\r\n  value,\r\n});\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport type AppAction =\r\n  | ResetAction\r\n  | SetActiveMenuAction\r\n  | AddTagAction\r\n  | RemoveTagAction\r\n  | ToggleTagAction\r\n  | AddAliasesAction\r\n  | AddPostsAction\r\n  | SetPostsAction\r\n  | SetOptionAction;\r\n","import produce from \"immer\";\r\nimport { MenuType } from \"../../data/types\";\r\nimport { SET_ACTIVE_MENU, AppAction } from \"../actions\";\r\n\r\nexport interface MiscState {\r\n  activeMenu: MenuType;\r\n}\r\n\r\nexport const initialMiscState: MiscState = {\r\n  activeMenu: \"search\",\r\n};\r\n\r\nconst setActiveMenu = (state: MiscState, menu: MenuType) =>\r\n  produce(state, (draft) => {\r\n    draft.activeMenu = menu;\r\n  });\r\n\r\nexport default (\r\n  state: MiscState = initialMiscState,\r\n  action: AppAction\r\n): MiscState => {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_MENU:\r\n      return setActiveMenu(state, action.menu);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport { PreferenceKey } from \"../../data/types\";\r\nimport { AppAction, SET_OPTION } from \"../actions\";\r\n\r\nexport interface PreferencesState {\r\n  infinite: boolean;\r\n  rated: boolean;\r\n  ratedTreshold: number;\r\n  originals: boolean;\r\n}\r\n\r\nexport const initialPreferencesState: PreferencesState = {\r\n  infinite: true,\r\n  rated: false,\r\n  ratedTreshold: 1,\r\n  originals: false,\r\n};\r\n\r\nconst setOption = (state: PreferencesState, key: PreferenceKey, value: any) =>\r\n  produce(state, (draft) => {\r\n    switch (key) {\r\n      case \"infinite\":\r\n        draft.infinite = value;\r\n        break;\r\n      case \"rated\":\r\n        draft.rated = value;\r\n        break;\r\n      case \"ratedTreshold\":\r\n        draft.ratedTreshold = value;\r\n        break;\r\n      case \"originals\":\r\n        draft.originals = value;\r\n    }\r\n  });\r\n\r\nexport default (\r\n  state: PreferencesState = initialPreferencesState,\r\n  action: AppAction\r\n): PreferencesState => {\r\n  switch (action.type) {\r\n    case SET_OPTION:\r\n      return setOption(state, action.key, action.value);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport PostDataClass from \"../../data/Post\";\r\nimport { SET_POSTS, ADD_POSTS, AppAction } from \"../actions\";\r\n\r\nexport interface ResultsState {\r\n  posts: PostDataClass[];\r\n  pageNumber: number;\r\n  count: number;\r\n}\r\n\r\nexport const initialResultsState: ResultsState = {\r\n  posts: [],\r\n  pageNumber: 0,\r\n  count: 0,\r\n};\r\n\r\nconst addPosts = (state: ResultsState, posts: PostDataClass[]) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = [...state.posts, ...posts];\r\n    draft.pageNumber = state.pageNumber + 1;\r\n  });\r\n\r\nconst setPosts = (\r\n  state: ResultsState,\r\n  posts: PostDataClass[],\r\n  postCount: number\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = posts;\r\n    draft.count = postCount;\r\n    draft.pageNumber = 0;\r\n  });\r\n\r\nexport default (\r\n  state: ResultsState = initialResultsState,\r\n  action: AppAction\r\n): ResultsState => {\r\n  switch (action.type) {\r\n    case ADD_POSTS:\r\n      return addPosts(state, action.posts);\r\n    case SET_POSTS:\r\n      return setPosts(state, action.posts, action.count);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport {\r\n  ADD_TAG,\r\n  AppAction,\r\n  REMOVE_TAG,\r\n  TOGGLE_TAG,\r\n  ADD_ALIASES,\r\n} from \"../actions\";\r\n\r\nexport interface TagsState {\r\n  active: SimpleMap<TagDataClass>;\r\n  aliases: SimpleMap<TagDataClass[]>;\r\n}\r\n\r\nexport const initialTagsState: TagsState = {\r\n  active: {},\r\n  aliases: {},\r\n};\r\n\r\nconst addTag = (state: TagsState, newTag: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    draft.active[newTag.name] = { ...state.active[newTag.name], ...newTag };\r\n  });\r\n\r\nconst addAliases = (\r\n  state: TagsState,\r\n  aliases: TagDataClass[],\r\n  forTag: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.aliases[forTag] = aliases;\r\n  });\r\n\r\nconst removeTag = (state: TagsState, tagToRemove: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    delete draft.active[tagToRemove.name];\r\n    delete draft.aliases[tagToRemove.name];\r\n  });\r\n\r\nconst toggleTag = (state: TagsState, tagToToggle: TagDataClass) =>\r\n  state.active[tagToToggle.name]\r\n    ? removeTag(state, tagToToggle)\r\n    : addTag(state, tagToToggle);\r\n\r\nexport default (\r\n  state: TagsState = initialTagsState,\r\n  action: AppAction\r\n): TagsState => {\r\n  switch (action.type) {\r\n    case ADD_TAG:\r\n      return addTag(state, action.tag);\r\n    case REMOVE_TAG:\r\n      return removeTag(state, action.tag);\r\n    case TOGGLE_TAG:\r\n      return toggleTag(state, action.tag);\r\n    case ADD_ALIASES:\r\n      return addAliases(state, action.aliases, action.forTag);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport misc from \"./misc\";\r\nimport preferences from \"./preferences\";\r\nimport results from \"./results\";\r\nimport tags from \"./tags\";\r\n\r\nexport default combineReducers({ tags, results, preferences, misc });\r\n","import { createStore } from \"redux\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst persistConfig = {\r\n  key: \"appstate\",\r\n  storage,\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = createStore(persistedReducer);\r\nexport const persistor = persistStore(store);\r\n","import React from \"react\";\r\nimport { ThemeType } from \"../misc/theme\";\r\nimport { useTheme } from \"styled-components\";\r\n\r\nfunction R34Icon(props: { size: number }) {\r\n  const theme = useTheme() as ThemeType;\r\n\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={props.size}\r\n      height={props.size}\r\n      viewBox=\"0 0 12.7 12.7\"\r\n    >\r\n      <g transform=\"translate(0,-284.3)\">\r\n        <circle\r\n          id=\"path18\"\r\n          cx=\"6.3499999\"\r\n          cy=\"290.65002\"\r\n          fill=\"none\"\r\n          stroke={theme.colors.accentColor}\r\n          strokeWidth=\"0.50848764\"\r\n          strokeMiterlimit=\"4\"\r\n          strokeDasharray=\"none\"\r\n          strokeOpacity=\"1\"\r\n          r=\"6.0957561\"\r\n        />\r\n        <text\r\n          fontStyle=\"normal\"\r\n          fontWeight=\"normal\"\r\n          fontSize=\"8.3113203px\"\r\n          fontFamily=\"sansSerif\"\r\n          letterSpacing=\"0px\"\r\n          wordSpacing=\"0px\"\r\n          fill={theme.colors.accentColor}\r\n          fillOpacity=\"1\"\r\n          x=\"2.1363549\"\r\n          y=\"289.02704\"\r\n          id=\"text4533\"\r\n          transform=\"scale(0.98538224,1.0148346)\"\r\n        >\r\n          <tspan\r\n            id=\"tspan4531\"\r\n            x=\"2.1363549\"\r\n            y=\"289.02704\"\r\n            fontStyle=\"normal\"\r\n            fontVariant=\"normal\"\r\n            fontWeight=\"300\"\r\n            fontStretch=\"normal\"\r\n            fontFamily=\"Calibri\"\r\n            fill={theme.colors.accentColor}\r\n            fillOpacity=\"1\"\r\n          >\r\n            34\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default R34Icon;\r\n","import { TagsState } from \"./reducers/tags\";\r\nimport { MiscState } from \"./reducers/misc\";\r\nimport { ResultsState } from \"./reducers/results\";\r\nimport { PreferencesState } from \"./reducers/preferences\";\r\n\r\ninterface RootState {\r\n  misc: MiscState;\r\n  results: ResultsState;\r\n  preferences: PreferencesState;\r\n  tags: TagsState;\r\n}\r\n\r\nexport const selectActiveMenu = (state: RootState) => state.misc.activeMenu;\r\nexport const selectHasResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length !== 0;\r\nexport const selectPreferences = (state: RootState) => state.preferences;\r\nexport const selectActiveTags = (state: RootState) => state.tags.active;\r\nexport const selectResults = (state: RootState) => state.results;\r\nexport const selectAliasesByTagName = (tagName: string) => (\r\n  state: RootState\r\n) => {\r\n  return state.tags.aliases[tagName];\r\n};\r\n\r\nexport const selectAliases = (state: RootState) =>\r\n  Object.values(state.tags.aliases).flat();\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { ButtonType } from \"../../data/types\";\r\n\r\nconst BasicButton = styled.button`\r\n  font-size: 14px;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst InvisibleButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    border: none;\r\n    border-radius: 1000px;\r\n    padding: 5px;\r\n    filter: ${props.theme.shadow.drop};\r\n    svg {\r\n      transition: all 0.2s ease-in-out;\r\n    }\r\n\r\n    :hover {\r\n      svg {\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n  `\r\n);\r\n\r\nconst MenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst ActiveMenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst BottomLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst CenterButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst RedButton = styled(BasicButton)(\r\n  (props) => css`\r\n    height: 32px;\r\n    font-size: 14px;\r\n    color: ${props.theme.colors.accentColor};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n\r\n    transition: border-color 0.4s ease-in-out;\r\n    transition: color 0.4s ease-in-out;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    :hover {\r\n      background-color: ${props.theme.colors.accentColor};\r\n      color: ${props.theme.colors.backgroundColor};\r\n    }\r\n\r\n    :active,\r\n    :focus {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n\r\n      border-color: ${props.theme.colors.backgroundColor2};\r\n      cursor: pointer;\r\n    }\r\n  `\r\n);\r\n\r\nexport const BlockButton = styled(RedButton)(\r\n  (props) => css`\r\n    width: 100%;\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n  `\r\n);\r\n\r\nexport const AddButton = styled(RedButton)(\r\n  (props) => css`\r\n    border-left-width: 0;\r\n    border-radius: 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius} 0;\r\n  `\r\n);\r\n\r\nexport const ModifierButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    min-width: 48px;\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-right-width: 0;\r\n    border-radius: ${props.theme.dimensions.borderRadius} 0 0\r\n      ${props.theme.dimensions.borderRadius};\r\n    font-weight: bold;\r\n  `\r\n);\r\n\r\nconst getButtonByType = (type: ButtonType, active: boolean) => {\r\n  switch (type) {\r\n    case \"invisible\":\r\n      return InvisibleButton;\r\n    case \"block\":\r\n      return BlockButton;\r\n    case \"topLeft\":\r\n      return TopLeftButton;\r\n    case \"bottomLeft\":\r\n      return BottomLeftButton;\r\n    case \"center\":\r\n      return CenterButton;\r\n    case \"modifier\":\r\n      return ModifierButton;\r\n    case \"add\":\r\n      return AddButton;\r\n    case \"menu\":\r\n      return active ? ActiveMenuButton : MenuButton;\r\n    default:\r\n      return RedButton;\r\n  }\r\n};\r\n\r\ninterface ButtonProps {\r\n  type: ButtonType;\r\n  children: JSX.Element | string;\r\n  onClick: MouseEventHandler;\r\n  active?: boolean;\r\n  disabled?: boolean;\r\n  label: string;\r\n}\r\n\r\nexport default function Button(props: ButtonProps) {\r\n  const {\r\n    type,\r\n    children,\r\n    onClick,\r\n    active = false,\r\n    disabled = false,\r\n    label,\r\n  } = props;\r\n  const TypedButton = getButtonByType(type, active);\r\n\r\n  return (\r\n    <TypedButton onClick={onClick} disabled={disabled} aria-label={label}>\r\n      {children}\r\n    </TypedButton>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nconst Title = styled.h2`\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\nexport default Title;\r\n\r\nexport const BigTitle = styled.h1`\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  margin: 0;\r\n`;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { HELP, MENU, SEARCH, SETTINGS } from \"../../data/types\";\r\nimport R34Icon from \"../../icons/R34Icon\";\r\nimport { setActiveMenu } from \"../../redux/actions\";\r\nimport { selectActiveMenu } from \"../../redux/selectors\";\r\nimport Button from \"../common/Button\";\r\nimport { BigTitle } from \"../common/Title\";\r\n\r\nconst HeaderWrapper = styled.header(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 32px;\r\n    margin: 0 ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst TitleBar = styled.div(\r\n  (props) => css`\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n    margin-bottom: ${props.theme.dimensions.bigSpacing};\r\n  `\r\n);\r\n\r\nconst MenuBar = styled.nav`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nfunction Header() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <HeaderWrapper>\r\n      <TitleBar>\r\n        <BigTitle>\r\n          <R34Icon size={32} />\r\n          <Divider />\r\n          <span style={{ marginTop: 2 }}>\r\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\r\n          </span>\r\n        </BigTitle>\r\n      </TitleBar>\r\n\r\n      <MenuBar>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SEARCH}\r\n          onClick={() => dispatch(setActiveMenu(SEARCH))}\r\n          label={SEARCH}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === HELP}\r\n          onClick={() => dispatch(setActiveMenu(HELP))}\r\n          label={HELP}\r\n        >\r\n          Help\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SETTINGS}\r\n          onClick={() => dispatch(setActiveMenu(SETTINGS))}\r\n          label={SETTINGS}\r\n        >\r\n          Settings\r\n        </Button>\r\n      </MenuBar>\r\n    </HeaderWrapper>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {};\r\n\r\nexport default Header;\r\n","export const GENERAL = \"general\";\r\nexport const CHARACTER = \"character\";\r\nexport const AMBIGUOUS = \"ambiguous\";\r\nexport const ARTIST = \"artist\";\r\nexport const COPYRIGHT = \"copyright\";\r\nexport type TagType =\r\n  | typeof GENERAL\r\n  | typeof CHARACTER\r\n  | typeof AMBIGUOUS\r\n  | typeof ARTIST\r\n  | typeof COPYRIGHT;\r\n\r\nexport const PLUS = \"+\";\r\nexport const MINUS = \"-\";\r\nexport type Modifier = typeof PLUS | typeof MINUS;\r\n\r\nexport const VIDEO = \"video\";\r\nexport const IMAGE = \"image\";\r\nexport type PostType = typeof VIDEO | typeof IMAGE;\r\n\r\nexport const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport type MediaType = typeof VIDEO | typeof PICTURE | typeof GIF;\r\n\r\nexport const SEARCH = \"search\";\r\nexport const HELP = \"help\";\r\nexport const SETTINGS = \"settings\";\r\nexport type MenuType = typeof SEARCH | typeof HELP | typeof SETTINGS;\r\n\r\nexport const INVISIBLE = \"invisible\";\r\nexport const BLOCK = \"block\";\r\nexport const TOPLEFT = \"topLeft\";\r\nexport const BOTTOMLEFT = \"bottomLeft\";\r\nexport const CENTER = \"center\";\r\nexport const MODIFIER = \"modifier\";\r\nexport const ADD = \"add\";\r\nexport const MENU = \"menu\";\r\nexport const RED = \"red\";\r\nexport type ButtonType =\r\n  | typeof INVISIBLE\r\n  | typeof BLOCK\r\n  | typeof TOPLEFT\r\n  | typeof BOTTOMLEFT\r\n  | typeof CENTER\r\n  | typeof MODIFIER\r\n  | typeof ADD\r\n  | typeof MENU\r\n  | typeof RED;\r\n\r\nexport const SAFE = \"safe\";\r\nexport const QUESTIONABLE = \"questionable\";\r\nexport const EXPLICIT = \"explicit\";\r\nexport type RatingType = typeof SAFE | typeof QUESTIONABLE | typeof EXPLICIT;\r\n\r\nexport const INFINITE = \"infinite\";\r\nexport const RATED = \"rated\";\r\nexport const RATEDTRESHOLD = \"ratedTreshold\";\r\nexport const ORIGINALS = \"originals\";\r\nexport type PreferenceKey =\r\n  | typeof INFINITE\r\n  | typeof RATED\r\n  | typeof RATEDTRESHOLD\r\n  | typeof ORIGINALS;\r\n\r\nexport interface SimpleMap<V> {\r\n  [key: string]: V;\r\n}\r\n\r\nexport interface SimpleList<V> {\r\n  [key: number]: V;\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst FotterWrapper = styled.footer(\r\n  (props) => css`\r\n    display: grid;\r\n    grid-template-columns: 1fr 1px 1fr 1px 1fr;\r\n    justify-content: space-around;\r\n    padding: ${props.theme.dimensions.spacing};\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 20px;\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst CenteredA = styled.a`\r\n  text-align: center;\r\n`;\r\n\r\nfunction Footer() {\r\n  return (\r\n    <FotterWrapper>\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md\">\r\n        Report a bug\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react\">\r\n        Github\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md\">\r\n        Feature request\r\n      </CenteredA>\r\n    </FotterWrapper>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import styled, { css } from \"styled-components\";\r\n\r\nconst Surface = styled.div(\r\n  (props) => css`\r\n    padding: ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default Surface;\r\n\r\nexport const Line = styled.div(\r\n  (props) => css`\r\n    width: 100%;\r\n    height: 1px;\r\n    background: ${props.theme.misc.layer};\r\n  `\r\n);\r\n","import TagDataClass from \"../data/Tag\";\r\nimport { SimpleMap } from \"../data/types\";\r\n\r\nexport const pageSize = 20;\r\nconst apiUrl1 = \"https://r34-json.herokuapp.com\";\r\nconst apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\n// Failover to apiUrl2\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm: string) {\r\n    const res = await fetch(\r\n      `${activeApi}/tags?limit=${pageSize}&name=${searchTerm}*&order_by=posts`\r\n    );\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags: SimpleMap<TagDataClass>, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tagName: string) {\r\n    const res = await fetch(`${activeApi}/alias/${tagName}`);\r\n\r\n    return await res.json();\r\n  },\r\n};\r\n\r\nfunction buildPostUrl(\r\n  page: number,\r\n  tags: SimpleMap<TagDataClass>,\r\n  minScore: number\r\n) {\r\n  const tagString = Object.values(tags)\r\n    .map(\r\n      (tag) =>\r\n        `${tag.modifier === \"-\" ? \"-\" : \"\"}${encodeURIComponent(tag.name)}`\r\n    )\r\n    .join(\"+\");\r\n\r\n  let url = `${activeApi}/posts?pid=${page}&limit=${pageSize}&tags=${tagString}`;\r\n\r\n  if (minScore > 0) {\r\n    url += `+${encodeURIComponent(\"score:>=\" + minScore)}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n","import { RatingType, PostType } from \"./types\";\r\nimport TagDataClass from \"./Tag\";\r\n\r\nexport default class PostDataClass {\r\n  id: number;\r\n\r\n  score: number;\r\n  rating: RatingType;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n\r\n  media_type: PostType;\r\n\r\n  thumbnail_src: string;\r\n  small_src: string;\r\n  big_src: string;\r\n\r\n  width: number;\r\n  height: number;\r\n\r\n  creator_id: number;\r\n  creator_url: string;\r\n\r\n  status: string;\r\n  parent_id: number;\r\n  has_children: boolean;\r\n  has_comments: boolean;\r\n  comments_url: string;\r\n  has_notes: boolean;\r\n  created_at: string;\r\n  change: string;\r\n\r\n  constructor(\r\n    id: number,\r\n    score: number,\r\n    rating: string,\r\n    source: string,\r\n    tags: TagDataClass[],\r\n    media_type: string,\r\n    media_src: any,\r\n    file_url: any,\r\n    thumbnail_src: string,\r\n    width: number,\r\n    height: number,\r\n    creator_id: number,\r\n    creator_url: string,\r\n    status: string,\r\n    parent_id: number,\r\n    has_children: boolean,\r\n    has_comments: boolean,\r\n    comments_url: string,\r\n    has_notes: boolean,\r\n    created_at: string,\r\n    change: string\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating as RatingType;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type as PostType;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","import { TagType, Modifier } from \"./types\";\r\n\r\nexport default class TagDataClass {\r\n  name: string;\r\n  count?: number | null;\r\n  types?: TagType[];\r\n  modifier?: Modifier;\r\n\r\n  constructor(\r\n    name: string,\r\n    types: TagType[] = [],\r\n    count: number | null = null,\r\n    modifier: Modifier = \"+\"\r\n  ) {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import PostDataClass from \"../data/Post\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { TagType, Modifier, RatingType } from \"../data/types\";\r\n\r\ninterface DirtyTag {\r\n  name: string;\r\n  types: string[];\r\n  count: string;\r\n  modifier: string;\r\n}\r\n\r\ninterface DirtyPost {\r\n  id: string;\r\n  type: string;\r\n  score: string;\r\n  rating: string;\r\n  source: string;\r\n  tags: string[];\r\n  file_url: string;\r\n  width: string;\r\n  height: string;\r\n  creator_id: string;\r\n  creator_url: string;\r\n  sample_url: string;\r\n  preview_url: string;\r\n  status: string;\r\n  parent_id: string;\r\n  has_children: string;\r\n  has_comments: string;\r\n  comments_url: string;\r\n  has_notes: string;\r\n  created_at: string;\r\n  change: string;\r\n}\r\n\r\nexport function prepareTag(dirtyTag: DirtyTag) {\r\n  const { name, types, count, modifier } = dirtyTag;\r\n\r\n  return new TagDataClass(\r\n    name,\r\n    types as TagType[],\r\n    Number(count),\r\n    modifier as Modifier\r\n  );\r\n}\r\n\r\nexport function preparePost(post: DirtyPost) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change,\r\n  } = post;\r\n  return new PostDataClass(\r\n    Number(id),\r\n    Number(score),\r\n    rating as RatingType,\r\n    source,\r\n    tags ? tags.map((t) => new TagDataClass(t)) : [],\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    Number(parent_id),\r\n    Boolean(has_children),\r\n    Boolean(has_comments),\r\n    comments_url,\r\n    Boolean(has_notes),\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { string, func } from \"prop-types\";\r\n\r\nconst Input = styled.input(\r\n  (props) => css`\r\n    width: 100%;\r\n    border: none;\r\n    outline: none;\r\n    background: none;\r\n    font-size: 14px;\r\n    border-top: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-bottom: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n  `\r\n);\r\n\r\ninterface TagInputProps {\r\n  value: string;\r\n  setValue: (newValue: string) => void;\r\n}\r\n\r\nexport default function TagInput(props: TagInputProps) {\r\n  const { value, setValue } = props;\r\n  return (\r\n    <Input\r\n      id=\"tag-input\"\r\n      value={value}\r\n      onChange={(event) => setValue(event.target.value)}\r\n      placeholder=\"Search for tags\"\r\n      aria-label=\"Search\"\r\n    />\r\n  );\r\n}\r\n\r\nTagInput.propTypes = {\r\n  value: string,\r\n  setValue: func,\r\n};\r\n","export function prettifyTagname(tagname: string) {\r\n  return tagname.replace(/_/g, \" \");\r\n}\r\n\r\nexport function normalizeTagname(tagname: string) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n","export const formatCount = (numberString: number) => {\r\n  const number = numberString;\r\n\r\n  if (number >= 1e6) {\r\n    return `${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n};\r\n\r\n/**\r\n * @param {String} sourceString\r\n */\r\nexport const formatSource = (sourceString: string) => {\r\n  if (\r\n    sourceString.includes(\"http:\") ||\r\n    sourceString.includes(\"https:\") ||\r\n    sourceString.includes(\"www.\") ||\r\n    sourceString.includes(\".com\")\r\n  ) {\r\n    let semiSanitized = sourceString\r\n      .replace(/https?:\\/\\//, \"\")\r\n      .replace(/ww[w\\d]\\./, \"\")\r\n      .replace(\".com\", \"\")\r\n      .replace(\".org\", \"\")\r\n      .replace(\".net\", \"\");\r\n\r\n    return semiSanitized.substring(0, semiSanitized.indexOf(\"/\"));\r\n  } else {\r\n    return sourceString;\r\n  }\r\n};\r\n","import React, { useState, useEffect, MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { ArrowIcon } from \"../../icons/Icons\";\r\nimport { prettifyTagname } from \"./tagUtils\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectActiveTags,\r\n  selectAliasesByTagName,\r\n} from \"../../redux/selectors\";\r\nimport { toggleTag, addAliases } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst dropdownBorderRadius = (collapsed: boolean, theme: ThemeType) =>\r\n  collapsed\r\n    ? theme.dimensions.borderRadius\r\n    : `${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius} 0 0`;\r\n\r\nconst switchingColors = (active: boolean, theme: ThemeType) => {\r\n  const fg = active ? theme.colors.backgroundColor : theme.colors.accentColor;\r\n  const bg = active ? theme.colors.accentColor : theme.colors.backgroundColor;\r\n\r\n  return css`\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${theme.colors.accentColor} ${theme.dimensions.borderWidth} solid;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    cursor: pointer;\r\n\r\n    :hover,\r\n    :focus,\r\n    :active {\r\n      border-color: ${theme.colors.backgroundColor2};\r\n      color: ${theme.colors.backgroundColor2};\r\n\r\n      i {\r\n        color: ${theme.colors.backgroundColor2};\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nexport const TagWrapper = styled.div(\r\n  (props: {\r\n    active: boolean;\r\n    collapsed: boolean;\r\n    onMouseLeave: MouseEventHandler;\r\n    theme: ThemeType;\r\n  }) =>\r\n    css`\r\n      display: inline-block;\r\n      padding: 0.25rem;\r\n      border-radius: ${dropdownBorderRadius(props.collapsed, props.theme)};\r\n      font-size: 14px;\r\n      line-height: 1.2;\r\n      vertical-align: baseline;\r\n      margin: ${props.theme.dimensions.spacing};\r\n      ${switchingColors(props.active, props.theme)}\r\n    `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left?: boolean; right?: boolean }) => css`\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface TagProps extends TagDataClass {\r\n  loadAliases: boolean;\r\n}\r\n\r\ntype TagLike = {\r\n  name: string;\r\n  posts: number;\r\n};\r\n\r\nfunction Tag(props: TagProps) {\r\n  const { name, count, modifier, types, loadAliases } = props;\r\n  const activeTags = useSelector(selectActiveTags);\r\n  const aliases = useSelector(selectAliasesByTagName(name));\r\n  const [collapsed, setCollapsed] = useState(true);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (activeTags[name])\r\n      api.getAliases(name).then((newAliases: TagLike[]) => {\r\n        newAliases.sort((a, b) => b.posts - a.posts);\r\n        const filtered = newAliases\r\n          .filter((alias) => !activeTags[alias.name])\r\n          .map((alias) => new TagDataClass(alias.name, [], alias.posts));\r\n        dispatch(addAliases(filtered, name));\r\n      });\r\n  }, [name, activeTags, dispatch]);\r\n\r\n  const isActive = Boolean(activeTags[name]);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={isActive}\r\n      collapsed={collapsed}\r\n      onMouseLeave={() => setCollapsed(true)}\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText name={name} count={count} modifier={modifier} types={types} />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={() => setCollapsed(!collapsed)}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, count }) => (\r\n              <Alias key={\"t_\" + name} name={name} count={count} />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nfunction TagText(props: TagDataClass) {\r\n  const { name, count, modifier, types } = props;\r\n  const dispatch = useDispatch();\r\n  const tagname = prettifyTagname(name);\r\n  const text = count ? `${tagname} (${formatCount(count)})` : tagname;\r\n\r\n  return (\r\n    <span\r\n      onClick={() => dispatch(toggleTag(new TagDataClass(name, types, count)))}\r\n      onKeyDown={(e) =>\r\n        e.keyCode === 32 &&\r\n        dispatch(toggleTag(new TagDataClass(name, types, count)))\r\n      }\r\n    >\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias(props: TagDataClass) {\r\n  const { name, count } = props;\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tag;\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { TagWrapper } from \"../components/tag/Tag\";\r\nimport { ThemeType } from \"../misc/theme\";\r\n\r\nexport const StyledIcon = styled.i(\r\n  (props) => css`\r\n    ${(props: { color: string; size: number; theme: ThemeType }) => `\r\n    color: ${props.color};\r\n    min-width: ${props.size}px;\r\n    height: ${props.size}px;\r\n\r\n    ${TagWrapper}:hover & {\r\n      color: ${props.theme.colors.accentColor};\r\n    }\r\n\r\n    ${TagWrapper}:active & ,  ${TagWrapper}:focus & {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n    }\r\n  `}\r\n  `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left: boolean; right: boolean }) => css`\r\n    line-height: 16px;\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface IconProps {\r\n  icon: string;\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nconst Icon = (props: IconProps) => {\r\n  const {\r\n    icon,\r\n    className = \"\",\r\n    color = \"black\",\r\n    size = 14,\r\n    onClick = () => {},\r\n    left = false,\r\n    right = false,\r\n  } = props;\r\n  return (\r\n    <IconWrapper onClick={onClick} left={left} right={right}>\r\n      <StyledIcon\r\n        className={`fas ${icon} ${className}`}\r\n        color={color}\r\n        size={size}\r\n      />\r\n    </IconWrapper>\r\n  );\r\n};\r\n\r\nexport const CharacterIcon = styled(Icon).attrs({\r\n  icon: \"fa-user\",\r\n})``;\r\n\r\nexport const ArtistIcon = styled(Icon).attrs({\r\n  icon: \"fa-pen\",\r\n})``;\r\n\r\nexport const CopyrightIcon = styled(Icon).attrs({\r\n  icon: \"fa-copyright\",\r\n})``;\r\n\r\nexport const PlusIcon = styled(Icon).attrs({\r\n  icon: \"fa-plus-circle\",\r\n})``;\r\n\r\nexport const MinusIcon = styled(Icon).attrs({\r\n  icon: \"fa-minus-circle\",\r\n})``;\r\n\r\nexport const CloseIcon = styled(Icon).attrs({\r\n  icon: \"fa-times\",\r\n})``;\r\n\r\nexport const ExpandIcon = styled(Icon).attrs({\r\n  icon: \"fa-expand\",\r\n})``;\r\n\r\nexport const ArrowIcon = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ExternalLinkIcon = styled(Icon).attrs({\r\n  icon: \"fa-external-link-alt\",\r\n})``;\r\n\r\nexport const SourceIcon = styled(Icon).attrs({\r\n  icon: \"fa-hashtag\",\r\n})``;\r\n\r\nexport const RatingIcon = styled(Icon).attrs({\r\n  icon: \"fa-registered\",\r\n})``;\r\n\r\nexport const HeartIcon = styled(Icon).attrs({\r\n  icon: \"fa-heart\",\r\n})``;\r\n\r\nexport const PlayIcon = styled(Icon).attrs({\r\n  icon: \"fa-play\",\r\n})``;\r\n\r\nexport const PauseIcon = styled(Icon).attrs({\r\n  icon: \"fa-pause\",\r\n})``;\r\n\r\nexport const ArrowUp = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ArrowDown = styled(Icon).attrs({\r\n  icon: \"fa-caret-up\",\r\n})``;\r\n","export const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport const VIDEO = \"video\";\r\n\r\nexport const NO_OP = () => {};\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\nimport { NO_OP } from \"../data/constants\";\r\n\r\ninterface TypeIconProps {\r\n  types?: string[];\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nexport default function TypeIcon(props: TypeIconProps) {\r\n  const { types = [], className = \"\", onClick = NO_OP } = props;\r\n  const interestingType = types.find((t) => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon className={className} onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon className={className} onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon className={className} onClick={onClick} left />;\r\n    default:\r\n      return <div className={className}></div>;\r\n  }\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { prettifyTagname } from \"../tag/tagUtils\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { TagType } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nfunction sizeAndPosition(tagSelector: HTMLDivElement | null) {\r\n  if (tagSelector) {\r\n    const { offsetTop, clientHeight, offsetLeft, clientWidth } = tagSelector;\r\n\r\n    return `\r\n      position: absolute;\r\n      top: ${offsetTop + clientHeight - 2}px;\r\n      left: ${offsetLeft}px;\r\n      width: ${clientWidth}px;`;\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nexport const ListWrapper = styled.div(\r\n  (props: { tagSelectorRef: HTMLDivElement | null; theme: ThemeType }) => css`\r\n    ${sizeAndPosition(props.tagSelectorRef)};\r\n    background: white;\r\n    box-sizing: border-box;\r\n    border: ${props.theme.dimensions.borderWidth}\r\n      ${props.theme.colors.accentColor} solid;\r\n    border-radius: 0 0 3px 3px;\r\n    color: black;\r\n    z-index: 1;\r\n  `\r\n);\r\n\r\ninterface DropdownListProps {\r\n  tagSelectorRef: HTMLDivElement | null;\r\n  entries: {\r\n    name: string;\r\n    posts: number;\r\n    types: TagType[];\r\n  }[];\r\n  onClick: (entry: TagDataClass) => void;\r\n}\r\n\r\nfunction DropdownList(props: DropdownListProps) {\r\n  const { tagSelectorRef, entries, onClick } = props;\r\n\r\n  return entries && entries.length > 0 ? (\r\n    <ListWrapper tagSelectorRef={tagSelectorRef}>\r\n      {entries.map((entry) => (\r\n        <Entry\r\n          key={entry.name}\r\n          {...entry}\r\n          onClick={() => onClick(entry)}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  ) : null;\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  height: 28px;\r\n\r\n  > * {\r\n    margin: auto;\r\n  }\r\n\r\n  &:not(:last-child) {\r\n    border-bottom: 1px grey solid;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TypeWrapper = styled.span`\r\n  flex: 0 0 48px;\r\n  text-align: center;\r\n`;\r\n\r\ninterface EntryProps {\r\n  name: string;\r\n  posts: number;\r\n  types: TagType[];\r\n  onClick: MouseEventHandler;\r\n}\r\n\r\nfunction Entry(props: EntryProps) {\r\n  const { name, posts, types, onClick } = props;\r\n\r\n  return (\r\n    <EntryWrapper onClick={onClick}>\r\n      <TypeWrapper>\r\n        <TypeIcon types={types} />\r\n      </TypeWrapper>\r\n\r\n      <span style={{ flexGrow: 1 }}>{prettifyTagname(name)}</span>\r\n      <span style={{ paddingRight: 5 }}>{formatCount(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n}\r\n\r\nexport default DropdownList;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport api from \"../../misc/api\";\r\nimport { prepareTag } from \"../../misc/prepare\";\r\nimport Button, { AddButton, ModifierButton } from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList from \"./DropdownList\";\r\nimport { normalizeTagname } from \"../tag/tagUtils\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagSelectorWrapper = styled.div(\r\n  (props: {\r\n    closed: boolean;\r\n    ref: (ref: HTMLInputElement) => void;\r\n    theme: ThemeType;\r\n  }) => css`\r\n    display: flex;\r\n    background: white;\r\n    ${props.closed\r\n      ? `border-radius: ${props.theme.dimensions.borderRadius};`\r\n      : `\r\n        border-radius: ${props.theme.dimensions.borderRadius} ${props.theme.dimensions.borderRadius} 0 0;\r\n\r\n        > ${AddButton} {\r\n          border-radius: 0 ${props.theme.dimensions.borderRadius} 0 0;\r\n        }\r\n\r\n        > ${ModifierButton} {\r\n          border-radius: ${props.theme.dimensions.borderRadius} 0 0 0;\r\n        }\r\n      `}\r\n  `\r\n);\r\n\r\nfunction TagSelector() {\r\n  const dispatch = useDispatch();\r\n  const [tagSelectorRef, setTagSelectorRef] = useState<HTMLDivElement | null>(\r\n    null\r\n  );\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const activateTag = useCallback(\r\n    (suggestion) => {\r\n      dispatch(\r\n        addTag(\r\n          prepareTag({\r\n            name: suggestion.name,\r\n            modifier: modifier,\r\n            count: suggestion.posts,\r\n            types: suggestion.types,\r\n          })\r\n        )\r\n      );\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (value && value !== \"\")\r\n        api.getTags(normalizeTagname(value)).then((newSuggestions) => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 400);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [value]);\r\n\r\n  return (\r\n    <TagSelectorWrapper\r\n      ref={setTagSelectorRef}\r\n      closed={suggestions.length === 0}\r\n    >\r\n      <Button\r\n        type=\"modifier\"\r\n        onClick={() => setModifier(modifier === \"+\" ? \"-\" : \"+\")}\r\n        label=\"Tag Modifier\"\r\n      >\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button\r\n        type=\"add\"\r\n        onClick={() => {\r\n          if (value && value.trim() !== \"\") {\r\n            const suggestion =\r\n              suggestions.find((s: { name: string }) => s.name === value) || {};\r\n            activateTag({ ...suggestion, name: value });\r\n          }\r\n        }}\r\n        label=\"Add Tag\"\r\n      >\r\n        Add\r\n      </Button>\r\n      {suggestions.length > 0 && (\r\n        <DropdownList\r\n          tagSelectorRef={tagSelectorRef}\r\n          entries={suggestions}\r\n          onClick={(entry) => activateTag(entry)}\r\n        />\r\n      )}\r\n    </TagSelectorWrapper>\r\n  );\r\n}\r\n\r\nexport default TagSelector;\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst Wrapper = styled.div(\r\n  (props) => css`\r\n    border-radius: 30px;\r\n    width: 50px;\r\n    border: ${props.theme.dimensions.borderWidth} solid\r\n      ${props.theme.colors.accentColor};\r\n    background-color: ${props.theme.colors.backgroundColor};\r\n    transition: transform 0.4s ease-in-out;\r\n  `\r\n);\r\n\r\nconst Thumb = styled.div(\r\n  (props: { value: boolean; theme: ThemeType }) => css`\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: ${props.value\r\n      ? props.theme.colors.accentColor\r\n      : props.theme.colors.backgroundColor2};\r\n    border-radius: 50%;\r\n    transition: all 0.2s ease-in-out;\r\n    transform: translate(${props.value ? \"30px\" : \"0px\"});\r\n  `\r\n);\r\n\r\ninterface ToggleProps {\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function Toggle(props: ToggleProps) {\r\n  const { value, onToggle } = props;\r\n\r\n  return (\r\n    <Wrapper onClick={onToggle}>\r\n      <Thumb value={value} />\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport { bool, func, node } from \"prop-types\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Toggle from \"./Toggle\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n`;\r\n\r\nconst Label = styled.span(\r\n  (props) => css`\r\n    margin: auto;\r\n    margin-left: ${props.theme.dimensions.gutter};\r\n  `\r\n);\r\n\r\ninterface LabeledToggleProps {\r\n  children: JSX.Element | string;\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function LabeledToggle(props: LabeledToggleProps) {\r\n  const { children, value, onToggle } = props;\r\n\r\n  return (\r\n    <ToggleWrapper>\r\n      <Toggle value={value} onToggle={onToggle} />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n\r\nLabeledToggle.propTypes = {\r\n  children: node.isRequired,\r\n  value: bool.isRequired,\r\n  onToggle: func.isRequired,\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport LabeledToggle from \"../common/LabeledToggle\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\nimport { setOption } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst OptionsWrapper = styled.div(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst StyledInput = styled.input(\r\n  (props: { value: number; theme: ThemeType }) => css`\r\n    background: none;\r\n    border: none;\r\n    outline: none;\r\n    color: ${props.theme.colors.accentColor};\r\n    max-height: 16px;\r\n    width: ${0.57 * String(props.value).length}em;\r\n    text-align: right;\r\n    font-size: 14px;\r\n    margin: -1px 0.2em 0 0.2em;\r\n\r\n    ::-webkit-inner-spin-button,\r\n    ::-webkit-outer-spin-button {\r\n      -webkit-appearance: none;\r\n      margin: 0;\r\n    }\r\n    -moz-appearance: textfield;\r\n  `\r\n);\r\n\r\nexport default function Options() {\r\n  const dispatch = useDispatch();\r\n  const { infinite, rated, ratedTreshold, originals } = useSelector(\r\n    selectPreferences\r\n  );\r\n\r\n  const [ratedInputValue, setRatedInputValue] = useState(ratedTreshold);\r\n\r\n  return (\r\n    <OptionsWrapper>\r\n      <LabeledToggle\r\n        value={infinite}\r\n        onToggle={() => dispatch(setOption(\"infinite\", !infinite))}\r\n      >\r\n        Infinite Scroll\r\n      </LabeledToggle>\r\n      <LabeledToggle\r\n        value={rated}\r\n        onToggle={() => dispatch(setOption(\"rated\", !rated))}\r\n      >\r\n        {rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            Above\r\n            <StyledInput\r\n              type=\"number\"\r\n              value={ratedInputValue}\r\n              onChange={(event) =>\r\n                setRatedInputValue(Number(event.target.value))\r\n              }\r\n              onBlur={() =>\r\n                dispatch(setOption(\"ratedTreshold\", ratedInputValue))\r\n              }\r\n            />\r\n            likes\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </LabeledToggle>\r\n\r\n      <LabeledToggle\r\n        value={originals}\r\n        onToggle={() => dispatch(setOption(\"originals\", !originals))}\r\n      >\r\n        Load Original Sizes\r\n      </LabeledToggle>\r\n    </OptionsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport Tag from \"./Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagListWrapper = styled.div(\r\n  (props: { padding: boolean; theme: ThemeType }) => css`\r\n    display: inline-flex;\r\n    flex-wrap: wrap;\r\n    margin: calc(\r\n      ${props.padding ? props.theme.dimensions.gutter : \"0px\"} -\r\n        ${props.theme.dimensions.spacing}\r\n    );\r\n  `\r\n);\r\n\r\ninterface TagListProps {\r\n  tags: SimpleMap<TagDataClass>;\r\n  loadAliases?: boolean;\r\n  padding?: boolean;\r\n}\r\n\r\nexport default function TagList(props: TagListProps) {\r\n  const { tags, loadAliases = false, padding = false } = props;\r\n\r\n  return (\r\n    <div>\r\n      <TagListWrapper padding={padding}>\r\n        {Object.entries(tags).map(([key, tag]) => (\r\n          <Tag key={key} {...tag} loadAliases={loadAliases} />\r\n        ))}\r\n      </TagListWrapper>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport Options from \"../components/features/Options\";\r\nimport TagList from \"../components/tag/TagList\";\r\n\r\nfunction Help() {\r\n  return (\r\n    <>\r\n      <Title>Help</Title>\r\n      <Surface>\r\n        <Title>Searching for Tags</Title>\r\n        <Line />\r\n        <TagSelector />\r\n        <Line />\r\n        <p>\r\n          You can use the Tag Selector to look for tags you like.The Tag\r\n          Selector has 4 parts.\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            The modifier (left) determines wether posts must match a tag or not.\r\n            Putting \"-\" will hide all posts with this tag\r\n          </li>\r\n          <li>\r\n            The Search Box (center) allows you to search for tags. As soon as\r\n            you start typing the Tag Selector will show you relevant tags to\r\n            choose from (4).\r\n          </li>\r\n          <li>\r\n            The Add Button (right) Allows you to add any tag to the current\r\n            filter. Usefull when using wildcards.\r\n          </li>\r\n          <li>\r\n            The Tag Dropdown (left) automatically shows tags that start with\r\n            your input. It also includes The number of posts tagged, to allow\r\n            you to weigh tags against each other.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Options</Title>\r\n        <Line />\r\n        <Options />\r\n        <Line />\r\n        <p>\r\n          Options allow you to customize your experience in various ways. There\r\n          are 3 options available\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            Infinite Scrolling automatically loads new posts when you get close\r\n            to the bottom of the page.\r\n          </li>\r\n          <li>\r\n            Only show Rated posts filters out posts below the specified amount\r\n            of posts.\r\n          </li>\r\n          <li>\r\n            Load original sizes always loads the highest quality of an image.\r\n            This can easily cause extreme data consumption. Don't use with\r\n            mobile data.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Tags</Title>\r\n        <Line />\r\n        <TagList\r\n          tags={{\r\n            \"Tag 1\": { name: \"Tag 1\" },\r\n            \"Tag 2\": { name: \"Tag 2\", types: [\"character\"] },\r\n            \"Tag 3\": {\r\n              name: \"Tag 3\",\r\n              modifier: \"-\",\r\n              types: [\"copyright\"],\r\n              count: 1020,\r\n            },\r\n          }}\r\n        />\r\n        <Line />\r\n        <p>\r\n          This whole application is based on tags. Every Post has multiple tags.\r\n          Usually you can enable/disable a tag just by tapping it. If a tag is\r\n          red it means its active. The icons next to the name show what type of\r\n          tag it is. Not every tag has a type. The number on the right shows how\r\n          many posts there are with that tag.\r\n        </p>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Help;\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BlockButton } from \"../components/common/Button\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport Title from \"../components/common/Title\";\r\nimport { reset } from \"../redux/actions\";\r\n\r\nexport default function Settings() {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <>\r\n      <Title>Settings</Title>\r\n      <Surface>\r\n        <Title>General</Title>\r\n        <p>nothing yet</p>\r\n        <Line />\r\n        <Title>Developer</Title>\r\n        <BlockButton onClick={() => dispatch(reset())}>\r\n          Reset Application\r\n        </BlockButton>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { object, array, func } from \"prop-types\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport TagList from \"../tag/TagList\";\r\nimport Options from \"./Options\";\r\nimport Button from \"../common/Button\";\r\nimport api from \"../../misc/api\";\r\nimport { preparePost } from \"../../misc/prepare\";\r\nimport Title from \"../common/Title\";\r\nimport Surface from \"../common/Surface\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectPreferences, selectActiveTags } from \"../../redux/selectors\";\r\nimport { setPosts } from \"../../redux/actions\";\r\n\r\nconst ConfigWrapper = styled.section(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nfunction Config() {\r\n  const dispatch = useDispatch();\r\n  const activeTags = useSelector(selectActiveTags);\r\n  const { rated, ratedTreshold } = useSelector(selectPreferences);\r\n\r\n  const search = useCallback(() => {\r\n    api\r\n      .getPosts(activeTags, 0, rated ? ratedTreshold : 0)\r\n      .then((res) => dispatch(setPosts(res.posts.map(preparePost), res.count)));\r\n  }, [dispatch, rated, ratedTreshold, activeTags]);\r\n\r\n  return (\r\n    <ConfigWrapper>\r\n      <Title>\r\n        <label htmlFor=\"tag-input\">Search</label>\r\n      </Title>\r\n      <Surface>\r\n        <TagSelector />\r\n\r\n        {Object.keys(activeTags).length > 0 && (\r\n          <TagList tags={activeTags} loadAliases />\r\n        )}\r\n        <Options />\r\n        <Button type=\"block\" onClick={search} label=\"Search\">\r\n          Search\r\n        </Button>\r\n      </Surface>\r\n    </ConfigWrapper>\r\n  );\r\n}\r\n\r\nConfig.propTypes = {\r\n  options: object,\r\n  tags: array,\r\n  dispatch: func,\r\n};\r\n\r\nexport default Config;\r\n","import { RatingType } from \"../../../data/types\";\r\nimport React from \"react\";\r\nimport { RatingIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: RatingType }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {props.value[0].toUpperCase()}\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { HeartIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: number }) => (\r\n  <span>\r\n    {props.value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { formatSource } from \"../../../misc/formatting\";\r\nimport { ExternalLinkIcon, SourceIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: string }) =>\r\n  props.value.startsWith(\"http\") ? (\r\n    <a\r\n      href={props.value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      {formatSource(props.value)}\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {props.value}\r\n    </span>\r\n  );\r\n","import React, { useMemo } from \"react\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport TagList, { TagListWrapper } from \"../tag/TagList\";\r\nimport { RatingType } from \"../../data/types\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { listToMap } from \"../../data/utils\";\r\nimport Rating from \"./widgets/Rating\";\r\nimport Score from \"./widgets/Score\";\r\nimport Source from \"./widgets/Source\";\r\n\r\nconst fold = keyframes`\r\n  from {\r\n    max-height: 0px;\r\n  }\r\n\r\n  to {\r\n    max-height: 1500px;\r\n  }\r\n`;\r\n\r\nconst DetailsWrapper = styled.div(\r\n  (props) => css`\r\n    > ${TagListWrapper} {\r\n      padding: ${props.theme.dimensions.spacing};\r\n    }\r\n    max-height: unset;\r\n    animation: ${fold} 0.4s ease-in;\r\n  `\r\n);\r\n\r\nconst Bar = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    background: ${props.theme.misc.layer};\r\n    padding: ${props.theme.dimensions.spacing};\r\n    border-radius: 0 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius};\r\n    ${props.theme.shadow.box};\r\n\r\n    > span,\r\n    > a {\r\n      margin: ${props.theme.dimensions.spacing};\r\n      line-height: 1rem;\r\n      height: 1rem;\r\n    }\r\n  `\r\n);\r\n\r\ninterface DetailsProps {\r\n  rating: RatingType;\r\n  score: number;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n}\r\n\r\nexport default function Details(props: DetailsProps) {\r\n  const { rating, score, source, tags } = props;\r\n  const tagsForRendering = useMemo(() => listToMap(tags, \"name\"), [tags]);\r\n\r\n  return (\r\n    <DetailsWrapper>\r\n      <Bar>\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList tags={tagsForRendering} padding loadAliases={false} />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n","import { SimpleMap } from \"./types\";\r\n\r\nexport const listToMap = <T>(list: T[], keyProp: string): SimpleMap<T> => {\r\n  return list.reduce((result: SimpleMap<T>, current: any) => {\r\n    result[current[keyProp]] = current;\r\n    return result;\r\n  }, {});\r\n};\r\n","import React, { MouseEventHandler, useState } from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, PlayIcon, PauseIcon } from \"../../icons/Icons\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport { NO_OP } from \"../../data/constants\";\r\n\r\nconst fade = keyframes`\r\n  from {\r\n    opacity: 1;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div(\r\n  (props: { isVisible: boolean }) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    ${!props.isVisible\r\n      ? css`\r\n          opacity: 0;\r\n          animation: ${fade} 0.4s ease-in-out;\r\n        `\r\n      : \"\"};\r\n  `\r\n);\r\n\r\nconst ProgressBar = styled.div(\r\n  (props) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    height: 5px;\r\n    background-color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\ninterface OverlayProps {\r\n  onFullscreen?: MouseEventHandler;\r\n  togglePlay?: MouseEventHandler;\r\n  isPaused?: boolean;\r\n  isPlayable: boolean;\r\n  currentTime?: number;\r\n  duration?: number;\r\n}\r\n\r\nfunction Overlay(props: OverlayProps) {\r\n  const {\r\n    onFullscreen = NO_OP,\r\n    togglePlay = NO_OP,\r\n    isPaused = true,\r\n    isPlayable,\r\n    currentTime,\r\n    duration,\r\n  } = props;\r\n\r\n  const [isVisible, setVisible] = useState(false);\r\n\r\n  return (\r\n    <Wrapper\r\n      isVisible={isPaused || isVisible}\r\n      onClick={() => setVisible(!isVisible)}\r\n    >\r\n      {onFullscreen && (\r\n        <Button type=\"topLeft\" onClick={onFullscreen} label=\"Open Fullscreen\">\r\n          <ExpandIcon color=\"white\" />\r\n        </Button>\r\n      )}\r\n\r\n      {isPlayable && (\r\n        <>\r\n          <Button type=\"center\" onClick={togglePlay} label=\"Play/Pause\">\r\n            {isPaused ? (\r\n              <PlayIcon color=\"white\" size={50} />\r\n            ) : (\r\n              <PauseIcon color=\"white\" size={50} />\r\n            )}\r\n          </Button>\r\n          {!!duration && !!currentTime && (\r\n            <ProgressBar\r\n              style={{ width: `${(currentTime / duration) * 100}%` }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nOverlay.defaultProps = {\r\n  onFullscreen: null,\r\n  togglePlay: NO_OP,\r\n  isPaused: true,\r\n  isPlayable: false,\r\n  currentTime: 0,\r\n  duration: null,\r\n};\r\n\r\nexport default Overlay;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\nimport { openFullscreen } from \"./utils\";\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface VideoProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n}\r\n\r\nexport default function Video(props: VideoProps) {\r\n  const { src, thumbnail_src } = props;\r\n\r\n  const [videoRef, setVideoRef] = useState<HTMLVideoElement | null>(null);\r\n\r\n  const [time, setTime] = useState(Date.now());\r\n  const [intervalId, setIntervalId] = useState(0);\r\n\r\n  const play = () => {\r\n    videoRef && videoRef.play();\r\n\r\n    // ~30 fps\r\n    const id = setInterval(() => {\r\n      setTime(Date.now());\r\n      console.log(time);\r\n    }, 34);\r\n\r\n    setIntervalId(id);\r\n  };\r\n\r\n  const pause = () => {\r\n    videoRef && videoRef.pause();\r\n    clearInterval(intervalId);\r\n    setIntervalId(-1);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <FlexVideo\r\n        controls={false}\r\n        loop\r\n        src={src}\r\n        poster={thumbnail_src}\r\n        preload=\"metadata\"\r\n        ref={setVideoRef}\r\n      />\r\n      <Overlay\r\n        isPaused={videoRef ? videoRef.paused : true}\r\n        currentTime={videoRef ? videoRef.currentTime : undefined}\r\n        duration={videoRef ? videoRef.duration : undefined}\r\n        onFullscreen={() => videoRef && openFullscreen(videoRef)}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          videoRef && (videoRef.paused ? play() : pause());\r\n        }}\r\n        isPlayable\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { PostType, VIDEO, GIF, PICTURE } from \"../../data/types\";\r\n\r\nexport const openFullscreen = (elem: HTMLVideoElement) => {\r\n  elem.requestFullscreen();\r\n};\r\n\r\nexport const getMediaType = (type: PostType, src: string) => {\r\n  if (type === VIDEO) {\r\n    return VIDEO;\r\n  }\r\n\r\n  // can't use .endsWith because of queryString\r\n  if (src.includes(\".gif\")) {\r\n    return GIF;\r\n  }\r\n\r\n  return PICTURE;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface GifProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n}\r\n\r\nexport default function Gif(props: GifProps) {\r\n  const { src, thumbnail_src } = props;\r\n\r\n  const [isPaused, setPaused] = useState(true);\r\n  const usedSource = isPaused ? thumbnail_src : src;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={usedSource} alt={usedSource} />\r\n      <Overlay\r\n        isPlayable\r\n        isPaused={isPaused}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          setPaused(!isPaused);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface PictureProps {\r\n  src: string;\r\n}\r\n\r\nexport default function Picture(props: PictureProps) {\r\n  const { src } = props;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={src} alt={src} />\r\n      <Overlay isPlayable={false} />\r\n    </>\r\n  );\r\n}\r\n","import React, { MouseEventHandler, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Video from \"./Video\";\r\nimport Gif from \"./Gif\";\r\nimport Picture from \"./Picture\";\r\nimport { VIDEO, GIF } from \"../../data/constants\";\r\nimport { getMediaType } from \"./utils\";\r\nimport { PostType } from \"../../data/types\";\r\n\r\nconst PlayerWrapper = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\ninterface PlayerProps {\r\n  type: PostType;\r\n  src: string;\r\n  thumbnail_src: string;\r\n  toggleDetails: MouseEventHandler;\r\n}\r\n\r\nconst getMedia = (type: PostType, src: string) => {\r\n  switch (getMediaType(type, src)) {\r\n    case VIDEO:\r\n      return Video;\r\n    case GIF:\r\n      return Gif;\r\n    default:\r\n      return Picture;\r\n  }\r\n};\r\n\r\nexport default function Player(props: PlayerProps) {\r\n  const { toggleDetails, type, src, thumbnail_src } = props;\r\n\r\n  const media = useMemo(() => {\r\n    const MediaComponent = getMedia(type, src);\r\n    return <MediaComponent src={src} thumbnail_src={thumbnail_src} />;\r\n  }, [type, src, thumbnail_src]);\r\n\r\n  return <PlayerWrapper onClick={toggleDetails}>{media}</PlayerWrapper>;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Details from \"./Details\";\r\nimport Player from \"../player/Player\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\nimport PostDataClass from \"../../data/Post\";\r\n\r\nconst PostWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n    overflow: hidden;\r\n    margin-bottom: ${props.theme.dimensions.bigSpacing};\r\n    box-sizing: border-box;\r\n  `\r\n);\r\n\r\nexport function getCorrectSource(\r\n  loadOriginal: boolean,\r\n  big_src: string,\r\n  small_src: string,\r\n  id: number\r\n) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post(props: PostDataClass) {\r\n  const {\r\n    id,\r\n    media_type,\r\n    small_src,\r\n    big_src,\r\n    thumbnail_src,\r\n    rating,\r\n    score,\r\n    source,\r\n    tags,\r\n  } = props;\r\n  const { originals } = useSelector(selectPreferences);\r\n  const media_src = getCorrectSource(originals, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  return (\r\n    <PostWrapper>\r\n      <Player\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        toggleDetails={() => setCollapsed(!collapsed)}\r\n      />\r\n      {!collapsed && (\r\n        <Details rating={rating} score={score} source={source} tags={tags} />\r\n      )}\r\n    </PostWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Post from \"./Post\";\r\nimport PostDataClass from \"../../data/Post\";\r\n\r\nconst PostListWrapper = styled.div``;\r\n\r\ninterface PostListProps {\r\n  posts: PostDataClass[];\r\n}\r\n\r\nfunction PostList(props: PostListProps) {\r\n  const { posts } = props;\r\n\r\n  return (\r\n    <PostListWrapper>\r\n      {posts.map((post) => {\r\n        return <Post key={post.id} {...post} />;\r\n      })}\r\n    </PostListWrapper>\r\n  );\r\n}\r\n\r\nexport default PostList;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport outOfResultsPicture from \"../../icons/OutOfResults.png\";\r\nimport api, { pageSize } from \"../../misc/api\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectResults,\r\n  selectAliases,\r\n} from \"../../redux/selectors\";\r\nimport Button from \"../common/Button\";\r\nimport Surface, { Line } from \"../common/Surface\";\r\nimport Title from \"../common/Title\";\r\nimport PostList from \"../post/PostList\";\r\nimport { preparePost } from \"../../misc/prepare\";\r\nimport { addPosts } from \"../../redux/actions\";\r\nimport TagList from \"../tag/TagList\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\n\r\nconst ResultsWrapper = styled.section(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nlet scrollLock = true;\r\n\r\nfunction hasReachedEndOfPage() {\r\n  return (\r\n    window.innerHeight + document.documentElement.scrollTop >=\r\n    document.documentElement.scrollHeight - window.innerHeight\r\n  );\r\n}\r\n\r\nexport default function Results() {\r\n  const dispatch = useDispatch();\r\n  const activeTags = useSelector(selectActiveTags);\r\n  const { posts, count, pageNumber } = useSelector(selectResults);\r\n  const { rated, infinite, ratedTreshold } = useSelector(selectPreferences);\r\n  const aliases = useSelector(selectAliases);\r\n\r\n  const [isOutOfResults, setOutOfResults] = useState(false);\r\n\r\n  const loadMore = useCallback(() => {\r\n    api\r\n      .getPosts(activeTags, pageNumber + 1, rated ? ratedTreshold : 0)\r\n      .then((res) => {\r\n        setOutOfResults(res.posts.length < pageSize);\r\n        dispatch(addPosts(res.posts.map(preparePost)));\r\n        scrollLock = true;\r\n      });\r\n  }, [dispatch, rated, pageNumber, ratedTreshold, activeTags]);\r\n\r\n  window.onscroll = useCallback(() => {\r\n    if (infinite && scrollLock && hasReachedEndOfPage()) {\r\n      scrollLock = false;\r\n      loadMore();\r\n    }\r\n  }, [loadMore, infinite]);\r\n\r\n  return (\r\n    <ResultsWrapper className=\"results\">\r\n      <Title>{formatCount(count)} results</Title>\r\n      <PostList posts={posts} />\r\n\r\n      {!infinite && !isOutOfResults && (\r\n        <Button type={\"block\"} onClick={loadMore} label=\"Load More\">\r\n          Load More\r\n        </Button>\r\n      )}\r\n\r\n      {isOutOfResults && (\r\n        <Surface>\r\n          <img src={outOfResultsPicture} alt={outOfResultsPicture} />\r\n          <Line />\r\n          <Title>You have reached the end!</Title>\r\n          <p style={{ textAlign: \"center\" }}>Go look for something else!</p>\r\n          {aliases.length > 0 && (\r\n            <>\r\n              <p style={{ textAlign: \"center\" }}>How about some of these?</p>\r\n              <TagList\r\n                tags={aliases.reduce(\r\n                  (result: SimpleMap<TagDataClass>, alias) => {\r\n                    result[alias.name] = alias;\r\n                    return result;\r\n                  },\r\n                  {}\r\n                )}\r\n                padding\r\n              />\r\n            </>\r\n          )}\r\n        </Surface>\r\n      )}\r\n    </ResultsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Config from \"../components/features/Config\";\r\nimport Results from \"../components/features/Results\";\r\nimport { selectHasResults } from \"../redux/selectors\";\r\n\r\nexport default function Search() {\r\n  const hasResults = useSelector(selectHasResults);\r\n\r\n  return (\r\n    <>\r\n      <Config />\r\n      {hasResults && <Results />}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Header from \"./components/features/Header\";\r\nimport Footer from \"./components/features/Footer\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { MenuType } from \"./data/types\";\r\nimport Help from \"./pages/Help\";\r\nimport Settings from \"./pages/Settings\";\r\nimport Search from \"./pages/Search\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveMenu } from \"./redux/selectors\";\r\n\r\nconst Main = styled.main(\r\n  (props) => css`\r\n    flex-grow: 1;\r\n    align-self: strech;\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 0 16px;\r\n    max-width: 1000px;\r\n    margin: auto;\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst AppWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: strech;\r\n    min-height: 100%;\r\n    background: ${props.theme.colors.backgroundColor};\r\n    color: ${props.theme.colors.backgroundColor2};\r\n\r\n    font-size: 14px;\r\n\r\n    a {\r\n      color: ${props.theme.colors.accentColor};\r\n      text-decoration: none;\r\n    }\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nfunction getActivePage(activeMenu: MenuType) {\r\n  switch (activeMenu) {\r\n    case \"help\":\r\n      return <Help />;\r\n    case \"settings\":\r\n      return <Settings />;\r\n    case \"search\":\r\n    default:\r\n      return <Search />;\r\n  }\r\n}\r\n\r\nfunction AppContent() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const activePage = getActivePage(activeMenu);\r\n\r\n  return (\r\n    <AppWrapper>\r\n      <Header />\r\n      <Main>{activePage}</Main>\r\n      <Footer />\r\n    </AppWrapper>\r\n  );\r\n}\r\n\r\nAppContent.propTypes = {};\r\n\r\nexport default AppContent;\r\n","const theme = {\r\n  dimensions: {\r\n    borderRadius: \"3px\",\r\n    borderWidth: \"2px\",\r\n\r\n    spacing: \"4px\",\r\n    bigSpacing: \"8px\",\r\n    appMargin: \"16px\",\r\n    gutter: \"8px\",\r\n  },\r\n  colors: {\r\n    accentColor: \"crimson\",\r\n    hoverAccent: \"crimson\",\r\n    backgroundColor: \"#121212\",\r\n    backgroundColor2: \"#fff\",\r\n  },\r\n  shadow: {\r\n    box: \"box-shadow: 0 0 8px #000\",\r\n    drop: \"drop-shadow(0 0 4px #000)\",\r\n  },\r\n  timings: {\r\n    transistionTime: \"0.2s\",\r\n  },\r\n  misc: {\r\n    layer:\r\n      \"#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.2s ease-in-out\",\r\n  },\r\n};\r\n\r\nexport default theme;\r\n\r\nexport type ThemeType = typeof theme;\r\n","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store, persistor } from \"./redux/store\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport AppContent from \"./AppContent\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport theme from \"./misc/theme\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <ThemeProvider theme={theme}>\r\n          <AppContent />\r\n        </ThemeProvider>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"app-root\"));\r\n"],"sourceRoot":""}