{"version":3,"sources":["icons/OutOfResults.png","redux/actions.ts","redux/reducers/misc.ts","data/types.ts","redux/reducers/preferences.ts","redux/reducers/results.ts","redux/reducers/tags.ts","redux/reducers/index.ts","analytics/events.ts","redux/selectors.ts","redux/middleware/eventLogging.ts","misc/api.ts","data/Post.ts","data/Tag.ts","misc/prepare.ts","redux/middleware/apiRequests.ts","redux/store.ts","components/common/Title.tsx","components/common/Surface.tsx","components/common/Button.tsx","components/tagSelector/TagInput.tsx","components/tag/tagUtils.ts","misc/formatting.ts","misc/useToggle.ts","components/tag/Tag.tsx","icons/Icons.tsx","data/constants.ts","icons/TypeIcon.tsx","components/tagSelector/DropdownList.tsx","components/tagSelector/TagSelector.tsx","components/common/Toggle.tsx","components/common/LabeledToggle.tsx","components/features/Options.tsx","components/tag/TagList.tsx","icons/R34Icon.tsx","components/features/Header.tsx","components/features/Footer.tsx","pages/Help.tsx","components/common/Setting.tsx","components/common/SmallTextInput.tsx","pages/Settings.tsx","components/layout/InfiniteColumn.tsx","components/post/widgets/Rating.tsx","components/post/widgets/Score.tsx","components/post/widgets/Source.tsx","components/post/Details.tsx","data/utils.ts","components/player/FlexVideo.tsx","components/player/Overlay.tsx","components/player/Video.tsx","components/player/utils.ts","components/player/FlexImage.tsx","components/player/Gif.tsx","components/player/Picture.tsx","components/player/Player.tsx","components/post/Post.tsx","components/features/SearchButton.tsx","components/features/ActiveTags.tsx","components/features/Config.tsx","components/layout/LayoutHeader.tsx","components/layout/LayoutFooter.tsx","components/layout/LayoutLoadingItem.tsx","pages/Search.tsx","components/features/CookieConfirmation.tsx","AppContent.tsx","misc/theme.ts","App.tsx","index.tsx"],"names":["module","exports","setActiveMenu","menu","type","addTag","tag","setOption","key","value","initialMiscState","activeMenu","initialPreferencesState","infinite","rated","ratedTreshold","originals","cookies","preloadVideos","tagSuggestionsCount","state","produce","draft","initialResultsState","posts","pageNumber","count","initialTagsState","active","aliases","combineReducers","tags","action","newTag","name","tagToRemove","removeTag","forTag","addAliases","results","window","addPosts","postCount","Number","setPosts","preferences","misc","selectActiveTags","selectPosts","selectCount","selectPageNumber","selectPreferences","selectOriginals","selectCookies","selectActiveMenu","selectAliases","Object","values","flat","selectOutOfResults","keys","length","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","analytics","store","activeApi","fetch","catch","getTags","searchTerm","limit","res","json","getPosts","minScore","buildPostUrl","getAliases","tagName","page","tagString","map","modifier","encodeURIComponent","join","url","PostDataClass","constructor","id","score","rating","source","media_type","media_src","file_url","thumbnail_src","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","small_src","big_src","this","TagDataClass","types","preparePost","post","sample_url","preview_url","t","Boolean","persistConfig","storage","blacklist","persistedReducer","persistReducer","rootReducer","createStore","composeWithDevTools","applyMiddleware","next","getState","firebase","initializeApp","payload","logEvent","console","log","activeTags","page_number","active_tags","sort","searchEvent","api","then","dispatch","isOutOfResults","persistor","persistStore","styled","h2","BigTitle","h1","SmallTitle","h3","div","props","css","theme","dimensions","gutter","layer","shadow","box","borderRadius","Line","BasicButton","button","InvisibleButton","drop","MenuButton","colors","backgroundColor2","ActiveMenuButton","accentColor","TopLeftButton","BottomLeftButton","CenterButton","RedButton","backgroundColor","borderWidth","BlockButton","AddButton","ModifierButton","Button","children","onClick","disabled","label","TypedButton","getButtonByType","aria-label","Input","input","TagInput","setValue","onChange","event","target","placeholder","prettifyTagname","tagname","replace","formatCount","numberString","number","toFixed","useToggle","initialValue","useState","toggleValue","useCallback","resetValue","TagWrapper","collapsed","spacing","fg","bg","switchingColors","IconWrapper","span","left","right","TagText","useDispatch","text","useSelector","onKeyDown","e","keyCode","Alias","className","Tag","loadAliases","toggleCollapsed","resetCollapsed","useEffect","newAliases","a","b","filtered","filter","alias","isActive","showAliases","onMouseLeave","TypeIcon","ArrowIcon","StyledIcon","i","color","size","Icon","icon","CharacterIcon","attrs","ArtistIcon","CopyrightIcon","ExpandIcon","memo","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","PlayIcon","PauseIcon","NO_OP","find","match","ListWrapper","tagSelector","offsetTop","clientHeight","offsetLeft","clientWidth","sizeAndPosition","tagSelectorRef","DropdownList","entries","entry","Entry","EntryWrapper","TypeWrapper","style","flexGrow","paddingRight","TagSelectorWrapper","closed","TagSelector","setModifier","suggestions","setSuggestions","setTagSelectorRef","activateTag","suggestion","dirtyTag","prepareTag","handle","setTimeout","toLowerCase","newSuggestions","clearTimeout","onModifierClick","onAddClick","trim","s","ref","Wrapper","Thumb","Toggle","onToggle","ToggleWrapper","Label","LabeledToggle","OptionsWrapper","StyledInput","String","Options","ratedInputValue","setRatedInputValue","toggleRated","toggleOriginals","setRatedThreshold","display","onBlur","TagListWrapper","padding","TagList","R34Icon","useTheme","xmlns","viewBox","transform","cx","cy","fill","stroke","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","x","y","fontVariant","fontStretch","HeaderWrapper","header","Divider","TitleBar","bigSpacing","MenuBar","nav","Header","marginTop","href","FotterWrapper","footer","CenteredA","Footer","Help","Title","Surface","SettingGrid","Setting","title","description","TextInput","SmallTextInput","Settings","togglePreloadVideos","setTagSuggestionCount","reset","localStorage","clear","location","reload","InifinteColumn","items","loadingItem","hasMoreRows","ItemComponent","loadMore","OutOfItems","listRef","setListRef","cache","useMemo","CellMeasurerCache","fixedWidth","isLoading","setLoading","prependedRows","appendedRows","rowCount","isRowLoaded","index","listener","measureAllRows","recomputeRowHeights","forceUpdateGrid","addEventListener","removeEventListener","rowRenderer","parent","columnIndex","rowIndex","measure","registerChild","virtualRef","onLoad","warn","loadMoreRows","params","Promise","resolve","onRowsRendered","registerChildHereAswell","child","deferredMeasurementCache","overscanRowCount","rowHeight","innerWidth","innerHeight","toUpperCase","startsWith","rel","sourceString","includes","semiSanitized","substring","indexOf","formatSource","fold","keyframes","DetailsWrapper","Bar","Details","tagsForRendering","listToMap","keyProp","reduce","result","current","Rating","Score","Source","FlexVideo","video","fade","isVisible","ProgressBar","Overlay","onFullscreen","togglePlay","isPaused","isPlayable","currentTime","duration","toggleVisible","Video","src","videoRef","setVideoRef","Date","now","setTime","intervalId","setIntervalId","play","setInterval","pause","clearInterval","requestFullscreen","stopPropagation","paused","controls","loop","preload","onLoadedMetadata","undefined","FlexImage","img","Gif","setPaused","usedSource","alt","loading","Picture","PlayerWrapper","Player","toggleDetails","media","MediaComponent","getMediaType","getMedia","ListDiv","PostWrapper","Post","loadOriginal","getCorrectSource","setCollapsed","SearchButton","search","ActiveTags","ConfigWrapper","section","Config","htmlFor","LayoutHeader","fullNumber","toggleFullNumber","toLocaleString","LayoutFooter","LayoutLoadingItem","aliasesForRendering","outOfResultsPicture","textAlign","Search","hasMorePosts","CookieWrapper","CookieConfirmation","AppWrapper","AppContent","pages","help","settings","appMargin","hoverAccent","timings","transistionTime","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.83702fba.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/OutOfResults.00a98fae.png\";","import { MenuType, PreferenceKey } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport PostDataClass from \"../data/Post\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const RESET = \"R34_RESET\";\r\nexport const SET_ACTIVE_MENU = \"R34_SET_ACTIVE_MENU\";\r\nexport const ADD_TAG = \"R34_ADD_TAG\";\r\nexport const REMOVE_TAG = \"R34_REMOVE_TAG\";\r\nexport const ADD_ALIASES = \"R34_ADD_ALIASES\";\r\nexport const ADD_POSTS = \"R34_ADD_POSTS\";\r\nexport const SET_POSTS = \"R34_SET_POSTS\";\r\nexport const SET_OPTION = \"R34_SET_OPTION\";\r\nexport const GET_RESULTS = \"R34_GET_RESULTS\";\r\nexport const GET_MORE_RESULTS = \"R34_GET_MORE_RESULTS\";\r\nexport const ALLOW_COOKIES = \"R34_ALLOW_COOKIES\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\ninterface ResetAction {\r\n  type: typeof RESET;\r\n}\r\n\r\ninterface SetActiveMenuAction {\r\n  type: typeof SET_ACTIVE_MENU;\r\n  menu: MenuType;\r\n}\r\n\r\ninterface AddTagAction {\r\n  type: typeof ADD_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface RemoveTagAction {\r\n  type: typeof REMOVE_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface AddAliasesAction {\r\n  type: typeof ADD_ALIASES;\r\n  aliases: TagDataClass[];\r\n  forTag: string;\r\n}\r\n\r\ninterface AddPostsAction {\r\n  type: typeof ADD_POSTS;\r\n  posts: PostDataClass[];\r\n}\r\n\r\ninterface SetPostsAction {\r\n  type: typeof SET_POSTS;\r\n  posts: PostDataClass[];\r\n  count: string;\r\n}\r\n\r\ninterface SetOptionAction {\r\n  type: typeof SET_OPTION;\r\n  key: PreferenceKey;\r\n  value: any;\r\n}\r\n\r\ninterface GetResultsAction {\r\n  type: typeof GET_RESULTS;\r\n}\r\n\r\ninterface GetMoreResultsAction {\r\n  type: typeof GET_MORE_RESULTS;\r\n}\r\n\r\ninterface AllowCookiesAction {\r\n  type: typeof ALLOW_COOKIES;\r\n  value: boolean;\r\n}\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const reset = () => ({\r\n  type: RESET,\r\n});\r\n\r\nexport const setActiveMenu = (menu: MenuType) => ({\r\n  type: SET_ACTIVE_MENU,\r\n  menu,\r\n});\r\n\r\nexport const addTag = (tag: TagDataClass) => ({\r\n  type: ADD_TAG,\r\n  tag,\r\n});\r\n\r\nexport const removeTag = (tag: TagDataClass) => ({\r\n  type: REMOVE_TAG,\r\n  tag,\r\n});\r\n\r\nexport const addAliases = (aliases: TagDataClass[], forTag: string) => ({\r\n  type: ADD_ALIASES,\r\n  aliases,\r\n  forTag,\r\n});\r\n\r\nexport const addPosts = (posts: PostDataClass[]) => ({\r\n  type: ADD_POSTS,\r\n  posts,\r\n});\r\n\r\nexport const setPosts = (posts: PostDataClass[], count: string) => ({\r\n  type: SET_POSTS,\r\n  posts,\r\n  count,\r\n});\r\n\r\nexport const setOption = (key: PreferenceKey, value: any) => ({\r\n  type: SET_OPTION,\r\n  key,\r\n  value,\r\n});\r\n\r\nexport const getResults = () => ({\r\n  type: GET_RESULTS,\r\n});\r\n\r\nexport const getMoreResults = () => ({\r\n  type: GET_MORE_RESULTS,\r\n});\r\n\r\nexport const allowCookiesAction = () => ({\r\n  type: ALLOW_COOKIES,\r\n  value: true,\r\n});\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport type AppAction =\r\n  | ResetAction\r\n  | SetActiveMenuAction\r\n  | AddTagAction\r\n  | RemoveTagAction\r\n  | AddAliasesAction\r\n  | AddPostsAction\r\n  | SetPostsAction\r\n  | SetOptionAction\r\n  | GetResultsAction\r\n  | GetMoreResultsAction\r\n  | AllowCookiesAction;\r\n","import produce from \"immer\";\r\nimport { MenuType } from \"../../data/types\";\r\nimport { SET_ACTIVE_MENU, AppAction } from \"../actions\";\r\n\r\nexport interface MiscState {\r\n  activeMenu: MenuType;\r\n}\r\n\r\nexport const initialMiscState: MiscState = {\r\n  activeMenu: \"search\",\r\n};\r\n\r\nconst setActiveMenu = (state: MiscState, menu: MenuType) =>\r\n  produce(state, (draft) => {\r\n    draft.activeMenu = menu;\r\n  });\r\n\r\nexport default (\r\n  state: MiscState = initialMiscState,\r\n  action: AppAction\r\n): MiscState => {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_MENU:\r\n      return setActiveMenu(state, action.menu);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const GENERAL = \"general\";\r\nexport const CHARACTER = \"character\";\r\nexport const AMBIGUOUS = \"ambiguous\";\r\nexport const ARTIST = \"artist\";\r\nexport const COPYRIGHT = \"copyright\";\r\nexport type TagType =\r\n  | typeof GENERAL\r\n  | typeof CHARACTER\r\n  | typeof AMBIGUOUS\r\n  | typeof ARTIST\r\n  | typeof COPYRIGHT;\r\n\r\nexport const PLUS = \"+\";\r\nexport const MINUS = \"-\";\r\nexport type Modifier = typeof PLUS | typeof MINUS;\r\n\r\nexport const VIDEO = \"video\";\r\nexport const IMAGE = \"image\";\r\nexport type PostType = typeof VIDEO | typeof IMAGE;\r\n\r\nexport const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport type MediaType = typeof VIDEO | typeof PICTURE | typeof GIF;\r\n\r\nexport const SEARCH = \"search\";\r\nexport const HELP = \"help\";\r\nexport const SETTINGS = \"settings\";\r\nexport type MenuType = typeof SEARCH | typeof HELP | typeof SETTINGS;\r\n\r\nexport const INVISIBLE = \"invisible\";\r\nexport const BLOCK = \"block\";\r\nexport const TOPLEFT = \"topLeft\";\r\nexport const BOTTOMLEFT = \"bottomLeft\";\r\nexport const CENTER = \"center\";\r\nexport const MODIFIER = \"modifier\";\r\nexport const ADD = \"add\";\r\nexport const MENU = \"menu\";\r\nexport const RED = \"red\";\r\nexport type ButtonType =\r\n  | typeof INVISIBLE\r\n  | typeof BLOCK\r\n  | typeof TOPLEFT\r\n  | typeof BOTTOMLEFT\r\n  | typeof CENTER\r\n  | typeof MODIFIER\r\n  | typeof ADD\r\n  | typeof MENU\r\n  | typeof RED;\r\n\r\nexport const SAFE = \"safe\";\r\nexport const QUESTIONABLE = \"questionable\";\r\nexport const EXPLICIT = \"explicit\";\r\nexport type RatingType = typeof SAFE | typeof QUESTIONABLE | typeof EXPLICIT;\r\n\r\nexport const INFINITE = \"infinite\";\r\nexport const RATED = \"rated\";\r\nexport const RATEDTRESHOLD = \"ratedTreshold\";\r\nexport const ORIGINALS = \"originals\";\r\nexport const COOKIES = \"cookies\";\r\nexport const PRELOAD_VIDEOS = \"preload_videos\";\r\nexport const TAG_SUGGESTION_COUNT = \"tag_suggestion_count\";\r\n\r\nexport type PreferenceKey =\r\n  | typeof INFINITE\r\n  | typeof RATED\r\n  | typeof RATEDTRESHOLD\r\n  | typeof ORIGINALS\r\n  | typeof COOKIES\r\n  | typeof PRELOAD_VIDEOS\r\n  | typeof TAG_SUGGESTION_COUNT;\r\n\r\nexport interface SimpleMap<V> {\r\n  [key: string]: V;\r\n}\r\n\r\nexport interface SimpleList<V> {\r\n  [key: number]: V;\r\n}\r\n","import produce from \"immer\";\r\nimport {\r\n  PreferenceKey,\r\n  INFINITE,\r\n  RATED,\r\n  RATEDTRESHOLD,\r\n  ORIGINALS,\r\n  COOKIES,\r\n  PRELOAD_VIDEOS,\r\n  TAG_SUGGESTION_COUNT,\r\n} from \"../../data/types\";\r\nimport { AppAction, SET_OPTION, ALLOW_COOKIES } from \"../actions\";\r\n\r\nexport interface PreferencesState {\r\n  infinite: boolean;\r\n  rated: boolean;\r\n  ratedTreshold: number;\r\n  originals: boolean;\r\n  cookies: boolean;\r\n  preloadVideos: boolean;\r\n  tagSuggestionsCount: number;\r\n}\r\n\r\nexport const initialPreferencesState: PreferencesState = {\r\n  infinite: true,\r\n  rated: false,\r\n  ratedTreshold: 1,\r\n  originals: false,\r\n  cookies: false,\r\n  preloadVideos: false,\r\n  tagSuggestionsCount: 20,\r\n};\r\n\r\nconst setOption = (state: PreferencesState, key: PreferenceKey, value: any) =>\r\n  produce(state, (draft) => {\r\n    switch (key) {\r\n      case INFINITE:\r\n        draft.infinite = value;\r\n        break;\r\n      case RATED:\r\n        draft.rated = value;\r\n        break;\r\n      case RATEDTRESHOLD:\r\n        draft.ratedTreshold = value;\r\n        break;\r\n      case ORIGINALS:\r\n        draft.originals = value;\r\n        break;\r\n      case COOKIES:\r\n        draft.cookies = value;\r\n        break;\r\n      case PRELOAD_VIDEOS:\r\n        draft.preloadVideos = value;\r\n        break;\r\n      case TAG_SUGGESTION_COUNT:\r\n        draft.tagSuggestionsCount = value;\r\n        break;\r\n    }\r\n  });\r\n\r\nexport default (\r\n  state: PreferencesState = initialPreferencesState,\r\n  action: AppAction\r\n): PreferencesState => {\r\n  switch (action.type) {\r\n    case SET_OPTION:\r\n      return setOption(state, action.key, action.value);\r\n    case ALLOW_COOKIES:\r\n      return setOption(state, COOKIES, action.value);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport PostDataClass from \"../../data/Post\";\r\nimport { SET_POSTS, ADD_POSTS, AppAction } from \"../actions\";\r\n\r\nexport interface ResultsState {\r\n  posts: PostDataClass[];\r\n  pageNumber: number;\r\n  count: number;\r\n}\r\n\r\nexport const initialResultsState: ResultsState = {\r\n  posts: [],\r\n  pageNumber: 0,\r\n  count: 0,\r\n};\r\n\r\nconst addPosts = (state: ResultsState, posts: PostDataClass[]) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = [...state.posts, ...posts];\r\n    draft.pageNumber = state.pageNumber + 1;\r\n\r\n    //@ts-expect-error\r\n    window.posts = draft.posts;\r\n  });\r\n\r\nconst setPosts = (\r\n  state: ResultsState,\r\n  posts: PostDataClass[],\r\n  postCount: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = posts;\r\n    draft.count = Number(postCount);\r\n    draft.pageNumber = 0;\r\n\r\n    //@ts-expect-error\r\n    window.posts = draft.posts;\r\n  });\r\n\r\nexport default (\r\n  state: ResultsState = initialResultsState,\r\n  action: AppAction\r\n): ResultsState => {\r\n  switch (action.type) {\r\n    case ADD_POSTS:\r\n      return addPosts(state, action.posts);\r\n    case SET_POSTS:\r\n      return setPosts(state, action.posts, action.count);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ADD_TAG, AppAction, REMOVE_TAG, ADD_ALIASES } from \"../actions\";\r\n\r\nexport interface TagsState {\r\n  active: SimpleMap<TagDataClass>;\r\n  aliases: SimpleMap<TagDataClass[]>;\r\n}\r\n\r\nexport const initialTagsState: TagsState = {\r\n  active: {},\r\n  aliases: {},\r\n};\r\n\r\nconst addTag = (state: TagsState, newTag: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    draft.active[newTag.name] = { ...state.active[newTag.name], ...newTag };\r\n  });\r\n\r\nconst addAliases = (\r\n  state: TagsState,\r\n  aliases: TagDataClass[],\r\n  forTag: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.aliases[forTag] = aliases;\r\n  });\r\n\r\nconst removeTag = (state: TagsState, tagToRemove: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    delete draft.active[tagToRemove.name];\r\n    delete draft.aliases[tagToRemove.name];\r\n  });\r\n\r\nexport default (\r\n  state: TagsState = initialTagsState,\r\n  action: AppAction\r\n): TagsState => {\r\n  switch (action.type) {\r\n    case ADD_TAG:\r\n      return addTag(state, action.tag);\r\n    case REMOVE_TAG:\r\n      return removeTag(state, action.tag);\r\n    case ADD_ALIASES:\r\n      return addAliases(state, action.aliases, action.forTag);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport misc from \"./misc\";\r\nimport preferences from \"./preferences\";\r\nimport results from \"./results\";\r\nimport tags from \"./tags\";\r\n\r\nexport default combineReducers({ tags, results, preferences, misc });\r\n","import { Modifier, SimpleMap } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { PreferencesState } from \"../redux/reducers/preferences\";\r\n\r\nconst SEARCH = \"r34_search\";\r\nconst ADD_TAG = \"r34_add_tag\";\r\n\r\ninterface SearchEvent {\r\n  id: typeof SEARCH;\r\n  payload: {\r\n    tags: string[];\r\n  };\r\n}\r\n\r\ninterface TagActivateEvent {\r\n  id: typeof ADD_TAG;\r\n  payload: {\r\n    name: string;\r\n    modifier: Modifier | undefined;\r\n  };\r\n}\r\n\r\nexport const searchEvent = (\r\n  activeTags: SimpleMap<TagDataClass>,\r\n  page_number: number,\r\n  preferences: PreferencesState\r\n) => ({\r\n  id: SEARCH,\r\n  payload: {\r\n    active_tags: Object.values(activeTags)\r\n      .map((tag) => `${tag.modifier}${tag.name}`)\r\n      .sort(),\r\n    page_number,\r\n    preferences,\r\n  },\r\n});\r\n\r\nexport const addTagEvent = (tag: TagDataClass) => ({\r\n  id: ADD_TAG,\r\n  payload: {\r\n    name: tag.name,\r\n    modifier: tag.modifier,\r\n  },\r\n});\r\n\r\nexport type EventType = SearchEvent | TagActivateEvent;\r\n","import { TagsState } from \"./reducers/tags\";\r\nimport { MiscState } from \"./reducers/misc\";\r\nimport { ResultsState } from \"./reducers/results\";\r\nimport { PreferencesState } from \"./reducers/preferences\";\r\n\r\ninterface RootState {\r\n  misc: MiscState;\r\n  results: ResultsState;\r\n  preferences: PreferencesState;\r\n  tags: TagsState;\r\n}\r\nexport const selectActiveTags = (state: RootState) => state.tags.active;\r\nexport const selectResults = (state: RootState) => state.results;\r\nexport const selectPosts = (state: RootState) => state.results.posts;\r\nexport const selectCount = (state: RootState) => state.results.count;\r\nexport const selectPageNumber = (state: RootState) => state.results.pageNumber;\r\nexport const selectPreferences = (state: RootState) => state.preferences;\r\nexport const selectInfinite = (state: RootState) => state.preferences.infinite;\r\nexport const selectOriginals = (state: RootState) =>\r\n  state.preferences.originals;\r\nexport const selectRated = (state: RootState) => state.preferences.rated;\r\nexport const selectRatedThreshold = (state: RootState) =>\r\n  state.preferences.ratedTreshold;\r\nexport const selectCookies = (state: RootState) => state.preferences.cookies;\r\nexport const selectActiveMenu = (state: RootState) => state.misc.activeMenu;\r\n\r\nexport const selectAliases = (state: RootState) =>\r\n  Object.values(state.tags.aliases).flat();\r\nexport const selectHasResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length !== 0;\r\nexport const selectOutOfResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length === state.results.count;\r\n\r\nexport const selectAliasesByTagName = (tagName: string) => (state: RootState) =>\r\n  state.tags.aliases[tagName];\r\n","import { ADD_TAG, AppAction, SET_POSTS, ADD_POSTS } from \"../actions\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport { addTagEvent, searchEvent } from \"../../analytics/events\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectPageNumber,\r\n  selectCookies,\r\n} from \"../selectors\";\r\nimport { MiddlewareAPI, Dispatch } from \"redux\";\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyBHdepwE7M4Byu2lFtX2s__9COcMdvXu7Q\",\r\n  authDomain: \"r34-react.firebaseapp.com\",\r\n  databaseURL: \"https://r34-react.firebaseio.com\",\r\n  projectId: \"r34-react\",\r\n  storageBucket: \"r34-react.appspot.com\",\r\n  messagingSenderId: \"844749417844\",\r\n  appId: \"1:844749417844:web:11fa1fda0e14f1ac2dd021\",\r\n  measurementId: \"G-27J3QXZ8YR\",\r\n};\r\n\r\nlet firebaseApp: firebase.app.App;\r\nlet analytics: firebase.analytics.Analytics;\r\n\r\nexport default (store: MiddlewareAPI<any>) => (next: Dispatch<AppAction>) => (\r\n  action: AppAction\r\n) => {\r\n  const cookies = selectCookies(store.getState());\r\n\r\n  if (cookies) {\r\n    if (!firebaseApp) {\r\n      firebaseApp = firebase.initializeApp(config);\r\n      analytics = firebaseApp.analytics();\r\n    }\r\n\r\n    if (action.type === ADD_TAG) {\r\n      const { id, payload } = addTagEvent(action.tag);\r\n      analytics.logEvent<typeof id>(id, payload);\r\n      console.log(\"EVENT:\", id, payload);\r\n    }\r\n\r\n    if (action.type === ADD_POSTS || action.type === SET_POSTS) {\r\n      const activeTags = selectActiveTags(store.getState());\r\n      const pageNumber = selectPageNumber(store.getState());\r\n      const preferences = selectPreferences(store.getState());\r\n      const { id, payload } = searchEvent(\r\n        activeTags,\r\n        action.type === SET_POSTS ? 0 : pageNumber + 1,\r\n        preferences\r\n      );\r\n      analytics.logEvent<typeof id>(id, payload);\r\n      console.log(\"EVENT:\", id, payload);\r\n    }\r\n  }\r\n\r\n  next(action);\r\n};\r\n","import TagDataClass from \"../data/Tag\";\r\nimport { SimpleMap } from \"../data/types\";\r\n\r\nexport const pageSize = 20;\r\nconst apiUrl1 = \"https://r34-json.herokuapp.com\";\r\nconst apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\n// Failover to apiUrl2\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm: string, limit: number = pageSize) {\r\n    const res = await fetch(\r\n      `${activeApi}/tags?limit=${limit}&name=${searchTerm}*&order_by=posts`\r\n    );\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags: SimpleMap<TagDataClass>, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tagName: string) {\r\n    const res = await fetch(`${activeApi}/alias/${tagName}`);\r\n\r\n    return await res.json();\r\n  },\r\n};\r\n\r\nfunction buildPostUrl(\r\n  page: number,\r\n  tags: SimpleMap<TagDataClass>,\r\n  minScore: number\r\n) {\r\n  const tagString = Object.values(tags)\r\n    .map(\r\n      (tag) =>\r\n        `${tag.modifier === \"-\" ? \"-\" : \"\"}${encodeURIComponent(tag.name)}`\r\n    )\r\n    .join(\"+\");\r\n\r\n  let url = `${activeApi}/posts?pid=${page}&limit=${pageSize}&tags=${tagString}`;\r\n\r\n  if (minScore > 0) {\r\n    url += `+${encodeURIComponent(\"score:>=\" + minScore)}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n","import { RatingType, PostType } from \"./types\";\r\nimport TagDataClass from \"./Tag\";\r\n\r\nexport default class PostDataClass {\r\n  id: number;\r\n\r\n  score: number;\r\n  rating: RatingType;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n\r\n  media_type: PostType;\r\n\r\n  thumbnail_src: string;\r\n  small_src: string;\r\n  big_src: string;\r\n\r\n  width: number;\r\n  height: number;\r\n\r\n  creator_id: number;\r\n  creator_url: string;\r\n\r\n  status: string;\r\n  parent_id: number;\r\n  has_children: boolean;\r\n  has_comments: boolean;\r\n  comments_url: string;\r\n  has_notes: boolean;\r\n  created_at: string;\r\n  change: string;\r\n\r\n  constructor(\r\n    id: number,\r\n    score: number,\r\n    rating: string,\r\n    source: string,\r\n    tags: TagDataClass[],\r\n    media_type: string,\r\n    media_src: any,\r\n    file_url: any,\r\n    thumbnail_src: string,\r\n    width: number,\r\n    height: number,\r\n    creator_id: number,\r\n    creator_url: string,\r\n    status: string,\r\n    parent_id: number,\r\n    has_children: boolean,\r\n    has_comments: boolean,\r\n    comments_url: string,\r\n    has_notes: boolean,\r\n    created_at: string,\r\n    change: string\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating as RatingType;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type as PostType;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","import { TagType, Modifier } from \"./types\";\r\n\r\nexport default class TagDataClass {\r\n  name: string;\r\n  count?: number | null;\r\n  types?: TagType[];\r\n  modifier?: Modifier;\r\n\r\n  constructor(\r\n    name: string,\r\n    types: TagType[] = [],\r\n    count: number | null = null,\r\n    modifier: Modifier = \"+\"\r\n  ) {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import PostDataClass from \"../data/Post\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { TagType, Modifier, RatingType } from \"../data/types\";\r\n\r\ninterface DirtyTag {\r\n  name: string;\r\n  types: string[];\r\n  count: string;\r\n  modifier: string;\r\n}\r\n\r\ninterface DirtyPost {\r\n  id: string;\r\n  type: string;\r\n  score: string;\r\n  rating: string;\r\n  source: string;\r\n  tags: string[];\r\n  file_url: string;\r\n  width: string;\r\n  height: string;\r\n  creator_id: string;\r\n  creator_url: string;\r\n  sample_url: string;\r\n  preview_url: string;\r\n  status: string;\r\n  parent_id: string;\r\n  has_children: string;\r\n  has_comments: string;\r\n  comments_url: string;\r\n  has_notes: string;\r\n  created_at: string;\r\n  change: string;\r\n}\r\n\r\nexport function prepareTag(dirtyTag: DirtyTag) {\r\n  const { name, types, count, modifier } = dirtyTag;\r\n\r\n  return new TagDataClass(\r\n    name,\r\n    types as TagType[],\r\n    Number(count),\r\n    modifier as Modifier\r\n  );\r\n}\r\n\r\nexport function preparePost(post: DirtyPost) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change,\r\n  } = post;\r\n  return new PostDataClass(\r\n    Number(id),\r\n    Number(score),\r\n    rating as RatingType,\r\n    source,\r\n    tags ? tags.map((t) => new TagDataClass(t)) : [],\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    Number(parent_id),\r\n    Boolean(has_children),\r\n    Boolean(has_comments),\r\n    comments_url,\r\n    Boolean(has_notes),\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import { MiddlewareAPI } from \"redux\";\r\nimport { Dispatch } from \"react\";\r\nimport {\r\n  AppAction,\r\n  GET_RESULTS,\r\n  GET_MORE_RESULTS,\r\n  addPosts,\r\n  setPosts,\r\n} from \"../actions\";\r\nimport api from \"../../misc/api\";\r\nimport { preparePost } from \"../../misc/prepare\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectPageNumber,\r\n  selectOutOfResults,\r\n} from \"../selectors\";\r\n\r\nexport default (store: MiddlewareAPI<any>) => (next: Dispatch<AppAction>) => (\r\n  action: AppAction\r\n) => {\r\n  if (action.type === GET_RESULTS) {\r\n    const activeTags = selectActiveTags(store.getState());\r\n    const { rated, ratedTreshold } = selectPreferences(store.getState());\r\n    api.getPosts(activeTags, 0, rated ? ratedTreshold : 0).then((res) => {\r\n      store.dispatch(setPosts(res.posts.map(preparePost), res.count));\r\n    });\r\n  }\r\n\r\n  const isOutOfResults = selectOutOfResults(store.getState());\r\n  if (action.type === GET_MORE_RESULTS && !isOutOfResults) {\r\n    const activeTags = selectActiveTags(store.getState());\r\n    const pageNumber = selectPageNumber(store.getState());\r\n    const { rated, ratedTreshold } = selectPreferences(store.getState());\r\n\r\n    api\r\n      .getPosts(activeTags, pageNumber + 1, rated ? ratedTreshold : 0)\r\n      .then((res) => {\r\n        store.dispatch(addPosts(res.posts.map(preparePost)));\r\n      });\r\n  }\r\n\r\n  next(action);\r\n};\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport rootReducer from \"./reducers\";\r\nimport eventLogging from \"./middleware/eventLogging\";\r\nimport apiRequests from \"./middleware/apiRequests\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nconst persistConfig = {\r\n  key: \"appstate\",\r\n  storage,\r\n  blacklist: [\"results\"],\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = createStore(\r\n  persistedReducer,\r\n  composeWithDevTools(applyMiddleware(eventLogging, apiRequests))\r\n);\r\nexport const persistor = persistStore(store);\r\n","import styled from \"styled-components\";\r\n\r\nexport default styled.h2`\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\nexport const BigTitle = styled.h1`\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  margin: 0;\r\n`;\r\n\r\nexport const SmallTitle = styled.h3`\r\n  font-size: 16px;\r\n  margin: 0;\r\n`;\r\n","import styled, { css } from \"styled-components\";\r\n\r\nexport default styled.div(\r\n  (props) => css`\r\n    padding: ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n    width: calc(100% - 20px);\r\n    max-width: 1000px;\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport const Line = styled.div(\r\n  (props) => css`\r\n    width: 100%;\r\n    height: 1px;\r\n    background: ${props.theme.misc.layer};\r\n  `\r\n);\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport {\r\n  ButtonType,\r\n  TOPLEFT,\r\n  BLOCK,\r\n  INVISIBLE,\r\n  BOTTOMLEFT,\r\n  CENTER,\r\n  MODIFIER,\r\n  ADD,\r\n  MENU,\r\n} from \"../../data/types\";\r\n\r\nconst BasicButton = styled.button`\r\n  font-size: 14px;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst InvisibleButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    border: none;\r\n    border-radius: 1000px;\r\n    padding: 5px;\r\n    filter: ${props.theme.shadow.drop};\r\n\r\n    svg {\r\n      transition: all 0.2s ease-in-out;\r\n    }\r\n\r\n    :hover {\r\n      svg {\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n  `\r\n);\r\n\r\nconst MenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst ActiveMenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst BottomLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst CenterButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst RedButton = styled(BasicButton)(\r\n  (props) => css`\r\n    height: 32px;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    color: ${props.theme.colors.accentColor};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n\r\n    transition: border-color 0.4s ease-in-out;\r\n    transition: color 0.4s ease-in-out;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    :hover {\r\n      background-color: ${props.theme.colors.accentColor};\r\n      color: ${props.theme.colors.backgroundColor};\r\n    }\r\n\r\n    :active,\r\n    :focus {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n\r\n      border-color: ${props.theme.colors.backgroundColor2};\r\n      cursor: pointer;\r\n    }\r\n  `\r\n);\r\n\r\nexport const BlockButton = styled(RedButton)(\r\n  (props) => css`\r\n    width: 100%;\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n  `\r\n);\r\n\r\nexport const AddButton = styled(RedButton)(\r\n  (props) => css`\r\n    border-left-width: 0;\r\n    border-radius: 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius} 0;\r\n  `\r\n);\r\n\r\nexport const ModifierButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    min-width: 48px;\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-right-width: 0;\r\n    border-radius: ${props.theme.dimensions.borderRadius} 0 0\r\n      ${props.theme.dimensions.borderRadius};\r\n    font-weight: bold;\r\n  `\r\n);\r\n\r\nconst getButtonByType = (type: ButtonType, active: boolean) => {\r\n  switch (type) {\r\n    case INVISIBLE:\r\n      return InvisibleButton;\r\n    case BLOCK:\r\n      return BlockButton;\r\n    case TOPLEFT:\r\n      return TopLeftButton;\r\n    case BOTTOMLEFT:\r\n      return BottomLeftButton;\r\n    case CENTER:\r\n      return CenterButton;\r\n    case MODIFIER:\r\n      return ModifierButton;\r\n    case ADD:\r\n      return AddButton;\r\n    case MENU:\r\n      return active ? ActiveMenuButton : MenuButton;\r\n    default:\r\n      return RedButton;\r\n  }\r\n};\r\n\r\ninterface ButtonProps {\r\n  type: ButtonType;\r\n  children: JSX.Element | string;\r\n  onClick: MouseEventHandler;\r\n  active?: boolean;\r\n  disabled?: boolean;\r\n  label: string;\r\n}\r\n\r\nfunction Button(props: ButtonProps) {\r\n  const {\r\n    type,\r\n    children,\r\n    onClick,\r\n    active = false,\r\n    disabled = false,\r\n    label,\r\n  } = props;\r\n  const TypedButton = getButtonByType(type, active);\r\n\r\n  return (\r\n    <TypedButton onClick={onClick} disabled={disabled} aria-label={label}>\r\n      {children}\r\n    </TypedButton>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst Input = styled.input(\r\n  (props) => css`\r\n    width: 100%;\r\n    border: none;\r\n    outline: none;\r\n    background: none;\r\n    font-size: 14px;\r\n    border-top: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-bottom: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n  `\r\n);\r\n\r\ninterface TagInputProps {\r\n  value: string;\r\n  setValue: (newValue: string) => void;\r\n}\r\n\r\nexport default function TagInput(props: TagInputProps) {\r\n  const { value, setValue } = props;\r\n  return (\r\n    <Input\r\n      id=\"tag-input\"\r\n      value={value}\r\n      onChange={(event) => setValue(event.target.value)}\r\n      placeholder=\"Search for tags\"\r\n      aria-label=\"Search\"\r\n    />\r\n  );\r\n}\r\n","export function prettifyTagname(tagname: string) {\r\n  return tagname.replace(/_/g, \" \");\r\n}\r\n\r\nexport function normalizeTagname(tagname: string) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n","export const formatCount = (numberString: number) => {\r\n  const number = numberString;\r\n\r\n  if (number >= 1e6) {\r\n    return `${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n};\r\n\r\n/**\r\n * @param {String} sourceString\r\n */\r\nexport const formatSource = (sourceString: string) => {\r\n  if (\r\n    sourceString.includes(\"http:\") ||\r\n    sourceString.includes(\"https:\") ||\r\n    sourceString.includes(\"www.\") ||\r\n    sourceString.includes(\".com\")\r\n  ) {\r\n    let semiSanitized = sourceString\r\n      .replace(/https?:\\/\\//, \"\")\r\n      .replace(/ww[w\\d]\\./, \"\")\r\n      .replace(\".com\", \"\")\r\n      .replace(\".org\", \"\")\r\n      .replace(\".net\", \"\");\r\n\r\n    return semiSanitized.substring(0, semiSanitized.indexOf(\"/\"));\r\n  } else {\r\n    return sourceString;\r\n  }\r\n};\r\n","import { useCallback, useState } from \"react\";\r\n\r\nexport default function useToggle(\r\n  initialValue = false\r\n): [boolean, () => void, () => void] {\r\n  const [value, setValue] = useState<boolean>(initialValue);\r\n  const toggleValue = useCallback(() => setValue(!value), [value]);\r\n  const resetValue = useCallback(() => setValue(initialValue), [initialValue]);\r\n\r\n  return [value, toggleValue, resetValue];\r\n}\r\n","import React, { useEffect, MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { ArrowIcon } from \"../../icons/Icons\";\r\nimport { prettifyTagname } from \"./tagUtils\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectActiveTags,\r\n  selectAliasesByTagName,\r\n} from \"../../redux/selectors\";\r\nimport { addAliases, removeTag, addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\nimport useToggle from \"../../misc/useToggle\";\r\n\r\nconst dropdownBorderRadius = (collapsed: boolean, theme: ThemeType) =>\r\n  collapsed\r\n    ? theme.dimensions.borderRadius\r\n    : `${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius} 0 0`;\r\n\r\nconst switchingColors = (active: boolean, theme: ThemeType) => {\r\n  const fg = active ? theme.colors.backgroundColor : theme.colors.accentColor;\r\n  const bg = active ? theme.colors.accentColor : theme.colors.backgroundColor;\r\n\r\n  return css`\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${theme.colors.accentColor} ${theme.dimensions.borderWidth} solid;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    cursor: pointer;\r\n\r\n    :hover,\r\n    :focus,\r\n    :active {\r\n      border-color: ${theme.colors.backgroundColor2};\r\n      color: ${theme.colors.backgroundColor2};\r\n\r\n      i {\r\n        color: ${theme.colors.backgroundColor2};\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nexport const TagWrapper = styled.div(\r\n  (props: {\r\n    active: boolean;\r\n    collapsed: boolean;\r\n    onMouseLeave: MouseEventHandler;\r\n    theme: ThemeType;\r\n  }) =>\r\n    css`\r\n      display: inline-block;\r\n      padding: 0.25rem;\r\n      border-radius: ${dropdownBorderRadius(props.collapsed, props.theme)};\r\n      font-size: 14px;\r\n      line-height: 1.2;\r\n      vertical-align: baseline;\r\n      margin: ${props.theme.dimensions.spacing};\r\n      ${switchingColors(props.active, props.theme)}\r\n    `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left?: boolean; right?: boolean }) => css`\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface TagProps extends TagDataClass {\r\n  loadAliases: boolean;\r\n}\r\n\r\ntype TagLike = {\r\n  name: string;\r\n  posts: number;\r\n};\r\n\r\nfunction Tag(props: TagProps) {\r\n  const { name, count, modifier, types, loadAliases } = props;\r\n  const activeTags = useSelector(selectActiveTags);\r\n  const aliases = useSelector(selectAliasesByTagName(name));\r\n  const [collapsed, toggleCollapsed, resetCollapsed] = useToggle(true);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (loadAliases && activeTags[name])\r\n      api.getAliases(name).then((newAliases: TagLike[]) => {\r\n        newAliases.sort((a, b) => b.posts - a.posts);\r\n        const filtered = newAliases\r\n          .filter((alias) => !activeTags[alias.name])\r\n          .map((alias) => new TagDataClass(alias.name, [], alias.posts));\r\n        dispatch(addAliases(filtered, name));\r\n      });\r\n  }, [loadAliases, name, activeTags, dispatch]);\r\n\r\n  const isActive = Boolean(activeTags[name]);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={isActive}\r\n      collapsed={collapsed}\r\n      onMouseLeave={resetCollapsed}\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText name={name} count={count} modifier={modifier} types={types} />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={toggleCollapsed}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, count }) => (\r\n              <Alias key={\"t_\" + name} name={name} count={count} />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nfunction TagText(props: TagDataClass) {\r\n  const { name, count, modifier, types } = props;\r\n  const dispatch = useDispatch();\r\n  const tagname = prettifyTagname(name);\r\n  const text = count ? `${tagname} (${formatCount(count)})` : tagname;\r\n  const activeTags = useSelector(selectActiveTags);\r\n\r\n  const onClick = () =>\r\n    activeTags[name]\r\n      ? dispatch(removeTag(new TagDataClass(name, types, count)))\r\n      : dispatch(addTag(new TagDataClass(name, types, count)));\r\n\r\n  return (\r\n    <span onClick={onClick} onKeyDown={(e) => e.keyCode === 32 && onClick()}>\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias(props: TagDataClass) {\r\n  const { name, count } = props;\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tag;\r\n","import React, { MouseEventHandler, memo } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { TagWrapper } from \"../components/tag/Tag\";\r\nimport { ThemeType } from \"../misc/theme\";\r\n\r\nexport const StyledIcon = styled.i(\r\n  (props) => css`\r\n    ${(props: { color: string; size: number; theme: ThemeType }) => `\r\n    color: ${props.color};\r\n    min-width: ${props.size}px;\r\n    height: ${props.size}px;\r\n\r\n    ${TagWrapper}:hover & {\r\n      color: ${props.theme.colors.accentColor};\r\n    }\r\n\r\n    ${TagWrapper}:active & ,  ${TagWrapper}:focus & {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n    }\r\n  `}\r\n  `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left: boolean; right: boolean }) => css`\r\n    line-height: 16px;\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface IconProps {\r\n  icon: string;\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nconst Icon = (props: IconProps) => {\r\n  const {\r\n    icon,\r\n    className = \"\",\r\n    color = \"black\",\r\n    size = 14,\r\n    onClick = () => {},\r\n    left = false,\r\n    right = false,\r\n  } = props;\r\n  return (\r\n    <IconWrapper onClick={onClick} left={left} right={right}>\r\n      <StyledIcon\r\n        className={`fas ${icon} ${className}`}\r\n        color={color}\r\n        size={size}\r\n      />\r\n    </IconWrapper>\r\n  );\r\n};\r\n\r\nexport const CharacterIcon = styled(Icon).attrs({\r\n  icon: \"fa-user\",\r\n})``;\r\n\r\nexport const ArtistIcon = styled(Icon).attrs({\r\n  icon: \"fa-pen\",\r\n})``;\r\n\r\nexport const CopyrightIcon = styled(Icon).attrs({\r\n  icon: \"fa-copyright\",\r\n})``;\r\n\r\nexport const PlusIcon = styled(Icon).attrs({\r\n  icon: \"fa-plus-circle\",\r\n})``;\r\n\r\nexport const MinusIcon = styled(Icon).attrs({\r\n  icon: \"fa-minus-circle\",\r\n})``;\r\n\r\nexport const CloseIcon = styled(Icon).attrs({\r\n  icon: \"fa-times\",\r\n})``;\r\n\r\nexport const ExpandIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-expand\",\r\n  })``\r\n);\r\n\r\nexport const ArrowIcon = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ExternalLinkIcon = styled(Icon).attrs({\r\n  icon: \"fa-external-link-alt\",\r\n})``;\r\n\r\nexport const SourceIcon = styled(Icon).attrs({\r\n  icon: \"fa-hashtag\",\r\n})``;\r\n\r\nexport const RatingIcon = styled(Icon).attrs({\r\n  icon: \"fa-registered\",\r\n})``;\r\n\r\nexport const HeartIcon = styled(Icon).attrs({\r\n  icon: \"fa-heart\",\r\n})``;\r\n\r\nexport const PlayIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-play\",\r\n  })``\r\n);\r\n\r\nexport const PauseIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-pause\",\r\n  })``\r\n);\r\n\r\nexport const ArrowUp = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ArrowDown = styled(Icon).attrs({\r\n  icon: \"fa-caret-up\",\r\n})``;\r\n","export const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport const VIDEO = \"video\";\r\n\r\nexport const NO_OP = () => {};\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\nimport { NO_OP } from \"../data/constants\";\r\n\r\ninterface TypeIconProps {\r\n  types?: string[];\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nexport default function TypeIcon(props: TypeIconProps) {\r\n  const { types = [], className = \"\", onClick = NO_OP } = props;\r\n  const interestingType = types.find((t) => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon className={className} onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon className={className} onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon className={className} onClick={onClick} left />;\r\n    default:\r\n      return <div className={className}></div>;\r\n  }\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { prettifyTagname } from \"../tag/tagUtils\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { TagType } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nfunction sizeAndPosition(tagSelector: HTMLDivElement | null) {\r\n  if (tagSelector) {\r\n    const { offsetTop, clientHeight, offsetLeft, clientWidth } = tagSelector;\r\n\r\n    return css`\r\n      position: absolute;\r\n      top: ${offsetTop + clientHeight - 2}px;\r\n      left: ${offsetLeft}px;\r\n      width: ${clientWidth}px;\r\n      max-height: 50vh;\r\n      overflow-y: scroll;\r\n    `;\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nexport const ListWrapper = styled.div(\r\n  (props: { tagSelectorRef: HTMLDivElement | null; theme: ThemeType }) => css`\r\n    ${sizeAndPosition(props.tagSelectorRef)};\r\n    background: white;\r\n    box-sizing: border-box;\r\n    border: ${props.theme.dimensions.borderWidth}\r\n      ${props.theme.colors.accentColor} solid;\r\n    border-radius: 0 0 3px 3px;\r\n    color: black;\r\n    z-index: 1;\r\n  `\r\n);\r\n\r\ninterface DropdownListProps {\r\n  tagSelectorRef: HTMLDivElement | null;\r\n  entries: {\r\n    name: string;\r\n    posts: number;\r\n    types: TagType[];\r\n  }[];\r\n  onClick: (entry: TagDataClass) => void;\r\n}\r\n\r\nexport default function DropdownList(props: DropdownListProps) {\r\n  const { tagSelectorRef, entries, onClick } = props;\r\n\r\n  return entries && entries.length > 0 ? (\r\n    <ListWrapper tagSelectorRef={tagSelectorRef}>\r\n      {entries.map((entry) => (\r\n        <Entry\r\n          key={entry.name}\r\n          onClick={() => onClick(entry)}\r\n          {...entry}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  ) : null;\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  height: 28px;\r\n\r\n  > * {\r\n    margin: auto;\r\n  }\r\n\r\n  &:not(:last-child) {\r\n    border-bottom: 1px grey solid;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TypeWrapper = styled.span`\r\n  flex: 0 0 48px;\r\n  text-align: center;\r\n`;\r\n\r\ninterface EntryProps {\r\n  name: string;\r\n  posts: number;\r\n  types: TagType[];\r\n  onClick: MouseEventHandler;\r\n}\r\n\r\nconst Entry = (props: EntryProps) => {\r\n  const { name, posts, types, onClick } = props;\r\n\r\n  return (\r\n    <EntryWrapper onClick={onClick}>\r\n      <TypeWrapper>\r\n        <TypeIcon types={types} />\r\n      </TypeWrapper>\r\n\r\n      <span style={{ flexGrow: 1 }}>{prettifyTagname(name)}</span>\r\n      <span style={{ paddingRight: 5 }}>{formatCount(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport api from \"../../misc/api\";\r\nimport { prepareTag } from \"../../misc/prepare\";\r\nimport Button, { AddButton, ModifierButton } from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList from \"./DropdownList\";\r\nimport { normalizeTagname } from \"../tag/tagUtils\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\n\r\nexport const TagSelectorWrapper = styled.div(\r\n  (props: {\r\n    closed: boolean;\r\n    ref: (ref: HTMLInputElement) => void;\r\n    theme: ThemeType;\r\n  }) => css`\r\n    display: flex;\r\n    background: white;\r\n    ${props.closed\r\n      ? `border-radius: ${props.theme.dimensions.borderRadius};`\r\n      : `\r\n        border-radius: ${props.theme.dimensions.borderRadius} ${props.theme.dimensions.borderRadius} 0 0;\r\n\r\n        > ${AddButton} {\r\n          border-radius: 0 ${props.theme.dimensions.borderRadius} 0 0;\r\n        }\r\n\r\n        > ${ModifierButton} {\r\n          border-radius: ${props.theme.dimensions.borderRadius} 0 0 0;\r\n        }\r\n      `}\r\n  `\r\n);\r\n\r\nexport default function TagSelector() {\r\n  const dispatch = useDispatch();\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const { tagSuggestionsCount } = useSelector(selectPreferences);\r\n\r\n  const [tagSelectorRef, setTagSelectorRef] = useState<HTMLDivElement | null>(\r\n    null\r\n  );\r\n\r\n  const activateTag = useCallback(\r\n    (suggestion) => {\r\n      dispatch(\r\n        addTag(\r\n          prepareTag({\r\n            name: suggestion.name,\r\n            modifier: modifier,\r\n            count: suggestion.posts,\r\n            types: suggestion.types,\r\n          })\r\n        )\r\n      );\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (!value) {\r\n        setSuggestions([]);\r\n        return;\r\n      }\r\n\r\n      api\r\n        .getTags(normalizeTagname(value), tagSuggestionsCount)\r\n        .then((newSuggestions) => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 300);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [tagSuggestionsCount, value]);\r\n\r\n  const onModifierClick = useCallback(\r\n    () => setModifier(modifier === \"+\" ? \"-\" : \"+\"),\r\n    [modifier, setModifier]\r\n  );\r\n\r\n  const onAddClick = useCallback(() => {\r\n    if (value && value.trim() !== \"\") {\r\n      const suggestion =\r\n        suggestions.find((s: { name: string }) => s.name === value) || {};\r\n      activateTag({ ...suggestion, name: value });\r\n    }\r\n  }, [value, activateTag, suggestions]);\r\n\r\n  return (\r\n    <TagSelectorWrapper\r\n      ref={setTagSelectorRef}\r\n      closed={suggestions.length === 0}\r\n    >\r\n      <Button type=\"modifier\" onClick={onModifierClick} label=\"Tag Modifier\">\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button type=\"add\" onClick={onAddClick} label=\"Add Tag\">\r\n        Add\r\n      </Button>\r\n      {suggestions.length > 0 && (\r\n        <DropdownList\r\n          tagSelectorRef={tagSelectorRef}\r\n          entries={suggestions}\r\n          onClick={(entry) => activateTag(entry)}\r\n        />\r\n      )}\r\n    </TagSelectorWrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst Wrapper = styled.div(\r\n  (props) => css`\r\n    border-radius: 30px;\r\n    width: 50px;\r\n    border: ${props.theme.dimensions.borderWidth} solid\r\n      ${props.theme.colors.accentColor};\r\n    background-color: ${props.theme.colors.backgroundColor};\r\n    transition: transform 0.4s ease-in-out;\r\n  `\r\n);\r\n\r\nconst Thumb = styled.div(\r\n  (props: { value: boolean; theme: ThemeType }) => css`\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: ${props.value\r\n      ? props.theme.colors.accentColor\r\n      : props.theme.colors.backgroundColor2};\r\n    border-radius: 50%;\r\n    transition: all 0.2s ease-in-out;\r\n    transform: translate(${props.value ? \"30px\" : \"0px\"});\r\n  `\r\n);\r\n\r\ninterface ToggleProps {\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function Toggle(props: ToggleProps) {\r\n  const { value, onToggle } = props;\r\n\r\n  return (\r\n    <Wrapper onClick={onToggle}>\r\n      <Thumb value={value} />\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Toggle from \"./Toggle\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n`;\r\n\r\nconst Label = styled.span(\r\n  (props) => css`\r\n    margin: auto;\r\n    margin-left: ${props.theme.dimensions.gutter};\r\n  `\r\n);\r\n\r\ninterface LabeledToggleProps {\r\n  children: JSX.Element | string;\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function LabeledToggle(props: LabeledToggleProps) {\r\n  const { children, value, onToggle } = props;\r\n\r\n  return (\r\n    <ToggleWrapper>\r\n      <Toggle value={value} onToggle={onToggle} />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n","import React, { useCallback, useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport LabeledToggle from \"../common/LabeledToggle\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\nimport { setOption } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\nimport { RATED, RATEDTRESHOLD, ORIGINALS } from \"../../data/types\";\r\n\r\nconst OptionsWrapper = styled.div(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst StyledInput = styled.input(\r\n  (props: { value: number; theme: ThemeType }) => css`\r\n    background: none;\r\n    border: none;\r\n    outline: none;\r\n    color: ${props.theme.colors.accentColor};\r\n    max-height: 16px;\r\n    width: ${0.57 * String(props.value).length}em;\r\n    text-align: right;\r\n    font-size: 16px;\r\n    margin: -1px 0.2em 0 0.2em;\r\n\r\n    ::-webkit-inner-spin-button,\r\n    ::-webkit-outer-spin-button {\r\n      -webkit-appearance: none;\r\n      margin: 0;\r\n    }\r\n    -moz-appearance: textfield;\r\n  `\r\n);\r\n\r\nexport default function Options() {\r\n  const dispatch = useDispatch();\r\n  const { rated, ratedTreshold, originals } = useSelector(selectPreferences);\r\n\r\n  const [ratedInputValue, setRatedInputValue] = useState(ratedTreshold);\r\n\r\n  const toggleRated = useCallback(() => dispatch(setOption(RATED, !rated)), [\r\n    dispatch,\r\n    rated,\r\n  ]);\r\n\r\n  const toggleOriginals = useCallback(\r\n    () => dispatch(setOption(ORIGINALS, !originals)),\r\n    [dispatch, originals]\r\n  );\r\n\r\n  const setRatedThreshold = useCallback(\r\n    () => dispatch(setOption(RATEDTRESHOLD, ratedInputValue)),\r\n    [dispatch, ratedInputValue]\r\n  );\r\n\r\n  return (\r\n    <OptionsWrapper>\r\n      <LabeledToggle value={rated} onToggle={toggleRated}>\r\n        {rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            <span>More than</span>\r\n            <StyledInput\r\n              type=\"number\"\r\n              value={ratedInputValue}\r\n              onChange={(event) =>\r\n                setRatedInputValue(Number(event.target.value))\r\n              }\r\n              onBlur={setRatedThreshold}\r\n            />\r\n            <span>likes</span>\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </LabeledToggle>\r\n\r\n      <LabeledToggle value={originals} onToggle={toggleOriginals}>\r\n        Load Original Sizes\r\n      </LabeledToggle>\r\n    </OptionsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport Tag from \"./Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagListWrapper = styled.div(\r\n  (props: { padding: boolean; theme: ThemeType }) => css`\r\n    display: inline-flex;\r\n    flex-wrap: wrap;\r\n    margin: calc(\r\n      ${props.padding ? props.theme.dimensions.gutter : \"0px\"} -\r\n        ${props.theme.dimensions.spacing}\r\n    );\r\n  `\r\n);\r\n\r\ninterface TagListProps {\r\n  tags: SimpleMap<TagDataClass>;\r\n  loadAliases?: boolean;\r\n  padding?: boolean;\r\n}\r\n\r\nexport default function TagList(props: TagListProps) {\r\n  const { tags, loadAliases = false, padding = false } = props;\r\n\r\n  return (\r\n    <div>\r\n      <TagListWrapper padding={padding}>\r\n        {Object.entries(tags).map(([key, tag]) => (\r\n          <Tag key={key} {...tag} loadAliases={loadAliases} />\r\n        ))}\r\n      </TagListWrapper>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { ThemeType } from \"../misc/theme\";\r\nimport { useTheme } from \"styled-components\";\r\n\r\nexport default function R34Icon(props: { size: number }) {\r\n  const theme = useTheme() as ThemeType;\r\n\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={props.size}\r\n      height={props.size}\r\n      viewBox=\"0 0 12.7 12.7\"\r\n    >\r\n      <g transform=\"translate(0,-284.3)\">\r\n        <circle\r\n          id=\"path18\"\r\n          cx=\"6.3499999\"\r\n          cy=\"290.65002\"\r\n          fill=\"none\"\r\n          stroke={theme.colors.accentColor}\r\n          strokeWidth=\"0.50848764\"\r\n          strokeMiterlimit=\"4\"\r\n          strokeDasharray=\"none\"\r\n          strokeOpacity=\"1\"\r\n          r=\"6.0957561\"\r\n        />\r\n        <text\r\n          fontStyle=\"normal\"\r\n          fontWeight=\"normal\"\r\n          fontSize=\"8.3113203px\"\r\n          fontFamily=\"sansSerif\"\r\n          letterSpacing=\"0px\"\r\n          wordSpacing=\"0px\"\r\n          fill={theme.colors.accentColor}\r\n          fillOpacity=\"1\"\r\n          x=\"2.1363549\"\r\n          y=\"289.02704\"\r\n          id=\"text4533\"\r\n          transform=\"scale(0.98538224,1.0148346)\"\r\n        >\r\n          <tspan\r\n            id=\"tspan4531\"\r\n            x=\"2.1363549\"\r\n            y=\"289.02704\"\r\n            fontStyle=\"normal\"\r\n            fontVariant=\"normal\"\r\n            fontWeight=\"300\"\r\n            fontStretch=\"normal\"\r\n            fontFamily=\"Calibri\"\r\n            fill={theme.colors.accentColor}\r\n            fillOpacity=\"1\"\r\n          >\r\n            34\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { HELP, MENU, SEARCH, SETTINGS } from \"../../data/types\";\r\nimport R34Icon from \"../../icons/R34Icon\";\r\nimport { setActiveMenu } from \"../../redux/actions\";\r\nimport { selectActiveMenu } from \"../../redux/selectors\";\r\nimport Button from \"../common/Button\";\r\nimport { BigTitle } from \"../common/Title\";\r\n\r\nconst HeaderWrapper = styled.header(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 32px;\r\n    margin: 0 ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst TitleBar = styled.div(\r\n  (props) => css`\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n    margin-bottom: ${props.theme.dimensions.bigSpacing};\r\n  `\r\n);\r\n\r\nconst MenuBar = styled.nav`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default function Header() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <HeaderWrapper>\r\n      <TitleBar>\r\n        <BigTitle>\r\n          <R34Icon size={32} />\r\n          <Divider />\r\n          <span style={{ marginTop: 2 }}>\r\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\r\n          </span>\r\n        </BigTitle>\r\n      </TitleBar>\r\n\r\n      <MenuBar>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SEARCH}\r\n          onClick={() => dispatch(setActiveMenu(SEARCH))}\r\n          label={SEARCH}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === HELP}\r\n          onClick={() => dispatch(setActiveMenu(HELP))}\r\n          label={HELP}\r\n        >\r\n          Help\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SETTINGS}\r\n          onClick={() => dispatch(setActiveMenu(SETTINGS))}\r\n          label={SETTINGS}\r\n        >\r\n          Settings\r\n        </Button>\r\n      </MenuBar>\r\n    </HeaderWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst FotterWrapper = styled.footer(\r\n  (props) => css`\r\n    display: grid;\r\n    grid-template-columns: 1fr 1px 1fr 1px 1fr;\r\n    justify-content: space-around;\r\n    padding: ${props.theme.dimensions.spacing};\r\n    height: 50vh;\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 20px;\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst CenteredA = styled.a`\r\n  text-align: center;\r\n`;\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <FotterWrapper>\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md\">\r\n        Report a bug\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react\">\r\n        Github\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md\">\r\n        Feature request\r\n      </CenteredA>\r\n    </FotterWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport Options from \"../components/features/Options\";\r\nimport TagList from \"../components/tag/TagList\";\r\nimport Header from \"../components/features/Header\";\r\nimport Footer from \"../components/features/Footer\";\r\n\r\nexport default function Help() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Title>Help</Title>\r\n      <Surface>\r\n        <Title>Searching for Tags</Title>\r\n        <Line />\r\n        <TagSelector />\r\n        <Line />\r\n        <p>\r\n          You can use the Tag Selector to look for tags you like.The Tag\r\n          Selector has 4 parts.\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            The modifier (left) determines wether posts must match a tag or not.\r\n            Putting \"-\" will hide all posts with this tag\r\n          </li>\r\n          <li>\r\n            The Search Box (center) allows you to search for tags. As soon as\r\n            you start typing the Tag Selector will show you relevant tags to\r\n            choose from (4).\r\n          </li>\r\n          <li>\r\n            The Add Button (right) Allows you to add any tag to the current\r\n            filter. Usefull when using wildcards.\r\n          </li>\r\n          <li>\r\n            The Tag Dropdown (left) automatically shows tags that start with\r\n            your input. It also includes The number of posts tagged, to allow\r\n            you to weigh tags against each other.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Options</Title>\r\n        <Line />\r\n        <Options />\r\n        <Line />\r\n        <p>\r\n          Options allow you to customize your experience in various ways. There\r\n          are 3 options available\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            Infinite Scrolling automatically loads new posts when you get close\r\n            to the bottom of the page.\r\n          </li>\r\n          <li>\r\n            Only show Rated posts filters out posts below the specified amount\r\n            of posts.\r\n          </li>\r\n          <li>\r\n            Load original sizes always loads the highest quality of an image.\r\n            This can easily cause extreme data consumption. Don't use with\r\n            mobile data.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Tags</Title>\r\n        <Line />\r\n        <TagList\r\n          tags={{\r\n            \"Tag 1\": { name: \"Tag 1\" },\r\n            \"Tag 2\": { name: \"Tag 2\", types: [\"character\"] },\r\n            \"Tag 3\": {\r\n              name: \"Tag 3\",\r\n              modifier: \"-\",\r\n              types: [\"copyright\"],\r\n              count: 1020,\r\n            },\r\n          }}\r\n        />\r\n        <Line />\r\n        <p>\r\n          This whole application is based on tags. Every Post has multiple tags.\r\n          Usually you can enable/disable a tag just by tapping it. If a tag is\r\n          red it means its active. The icons next to the name show what type of\r\n          tag it is. Not every tag has a type. The number on the right shows how\r\n          many posts there are with that tag.\r\n        </p>\r\n      </Surface>\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { SmallTitle } from \"./Title\";\r\n\r\nconst SettingGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr auto;\r\n  grid-template-rows: auto auto;\r\n\r\n  > h3 {\r\n    grid-column: 1/2;\r\n    grid-row: 1/2;\r\n  }\r\n\r\n  > p {\r\n    grid-column: 1/2;\r\n    grid-row: 2/3;\r\n  }\r\n\r\n  > :nth-child(3) {\r\n    grid-column: 2/3;\r\n    grid-row: 1/3;\r\n  }\r\n`;\r\n\r\ninterface SettingProps {\r\n  title: string;\r\n  description: string;\r\n  children: JSX.Element;\r\n}\r\n\r\nexport default function Setting({\r\n  title,\r\n  description,\r\n  children,\r\n}: SettingProps) {\r\n  return (\r\n    <SettingGrid>\r\n      <SmallTitle>{title}</SmallTitle>\r\n      <p>{description}</p>\r\n      <div>{children}</div>\r\n    </SettingGrid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst TextInput = styled.input(\r\n  (props) => css`\r\n    width: 50px;\r\n    border: ${props.theme.dimensions.borderWidth} solid\r\n      ${props.theme.colors.accentColor};\r\n    background-color: ${props.theme.colors.backgroundColor2};\r\n    padding: 3px;\r\n    border-radius: 3px;\r\n    text-align: right;\r\n  `\r\n);\r\n\r\ninterface SmallTextInputProps {\r\n  type: string;\r\n  value: string | number;\r\n  onChange: (event: any) => void;\r\n}\r\n\r\nexport default function SmallTextInput({\r\n  type,\r\n  value,\r\n  onChange,\r\n}: SmallTextInputProps) {\r\n  return <TextInput type={type} value={value} onChange={onChange} />;\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { BlockButton } from \"../components/common/Button\";\r\nimport Setting from \"../components/common/Setting\";\r\nimport SmallTextInput from \"../components/common/SmallTextInput\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport Title from \"../components/common/Title\";\r\nimport Toggle from \"../components/common/Toggle\";\r\nimport Footer from \"../components/features/Footer\";\r\nimport Header from \"../components/features/Header\";\r\nimport { PRELOAD_VIDEOS, TAG_SUGGESTION_COUNT } from \"../data/types\";\r\nimport { setOption } from \"../redux/actions\";\r\nimport { selectPreferences } from \"../redux/selectors\";\r\n\r\nexport default function Settings() {\r\n  const dispatch = useDispatch();\r\n  const { preloadVideos, tagSuggestionsCount } = useSelector(selectPreferences);\r\n  const togglePreloadVideos = useCallback(\r\n    () => dispatch(setOption(PRELOAD_VIDEOS, !preloadVideos)),\r\n    [dispatch, preloadVideos]\r\n  );\r\n  const setTagSuggestionCount = useCallback(\r\n    (event) => dispatch(setOption(TAG_SUGGESTION_COUNT, event.target.value)),\r\n    [dispatch]\r\n  );\r\n\r\n  const reset = useCallback(() => {\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Title>Settings</Title>\r\n      <Surface>\r\n        <Title>General</Title>\r\n\r\n        <Setting\r\n          title=\"Preload Videos\"\r\n          description=\"Start loading videos immediately instead of just-in-time. This can improve the viewing experience but will consume a LOT of data. Only use with WIFI.\"\r\n        >\r\n          <Toggle value={preloadVideos} onToggle={togglePreloadVideos} />\r\n        </Setting>\r\n\r\n        <Setting\r\n          title=\"Number of Tag suggestions\"\r\n          description=\"Controls the number of tags displayed when searching. Increase this when searching for niche tags.\"\r\n        >\r\n          <SmallTextInput\r\n            type=\"number\"\r\n            value={tagSuggestionsCount}\r\n            onChange={setTagSuggestionCount}\r\n          />\r\n        </Setting>\r\n        <Line />\r\n        <Title>Developer</Title>\r\n        <BlockButton onClick={reset}>Reset Application</BlockButton>\r\n      </Surface>\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n","import React, {\r\n  ReactNode,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from \"react\";\r\nimport {\r\n  AutoSizer,\r\n  CellMeasurer,\r\n  CellMeasurerCache,\r\n  IndexRange,\r\n  InfiniteLoader,\r\n  List,\r\n} from \"react-virtualized\";\r\nimport LayoutElementProps from \"./LayoutElementProps\";\r\n\r\ninterface InfiniteColumnProps<T> {\r\n  Header?: (props: LayoutElementProps) => JSX.Element;\r\n  Footer?: (props: LayoutElementProps) => JSX.Element;\r\n  OutOfItems?: (props: LayoutElementProps) => JSX.Element;\r\n  items?: T[];\r\n  loadingItem: ReactNode;\r\n  hasMoreRows: boolean;\r\n  loadMore: () => void;\r\n  ItemComponent: (props: T & LayoutElementProps) => JSX.Element;\r\n}\r\n\r\nexport default function InifinteColumn<T>(props: InfiniteColumnProps<T>) {\r\n  const {\r\n    Header,\r\n    Footer,\r\n    items = [],\r\n    loadingItem,\r\n    hasMoreRows,\r\n    ItemComponent,\r\n    loadMore,\r\n    OutOfItems,\r\n  } = props;\r\n\r\n  const [listRef, setListRef] = useState<List | null>(null);\r\n\r\n  const cache = useMemo(\r\n    () =>\r\n      new CellMeasurerCache({\r\n        fixedWidth: true,\r\n      }),\r\n    []\r\n  );\r\n\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const prependedRows = Header ? 1 : 0;\r\n  const appendedRows = Footer ? 1 : 0;\r\n  const loadingRows = 1;\r\n\r\n  const rowCount = items.length + prependedRows + appendedRows + loadingRows;\r\n\r\n  const isRowLoaded = useCallback(\r\n    ({ index }: { index: number }) =>\r\n      index < prependedRows + items.length + appendedRows, // maybe weird cause the loaded item (footer) is after the loading item\r\n    [appendedRows, items.length, prependedRows]\r\n  );\r\n\r\n  useEffect(() => {\r\n    console.log(\"EFFECT\");\r\n    if (listRef) {\r\n      const listener = () => {\r\n        console.log(\"updating\", listRef);\r\n        listRef.measureAllRows();\r\n        listRef.recomputeRowHeights();\r\n        listRef.forceUpdateGrid();\r\n      };\r\n\r\n      window.addEventListener(\"resize\", listener);\r\n\r\n      return () => {\r\n        console.log(\"cleanup\");\r\n        window.removeEventListener(\"resize\", listener);\r\n      };\r\n    }\r\n  }, [listRef]);\r\n\r\n  const rowRenderer = useCallback(\r\n    ({\r\n      index,\r\n      key,\r\n      parent,\r\n      style,\r\n    }: {\r\n      index: number;\r\n      key: any;\r\n      parent: any;\r\n      style: any;\r\n    }) => {\r\n      console.log(\"index\", index);\r\n      return (\r\n        <CellMeasurer\r\n          cache={cache}\r\n          columnIndex={0}\r\n          key={key}\r\n          rowIndex={index}\r\n          parent={parent}\r\n        >\r\n          {({ measure, registerChild }) => {\r\n            // Index 0\r\n            if (Header && index < prependedRows) {\r\n              console.log(\"HEADER\");\r\n              return (\r\n                <Header\r\n                  style={style}\r\n                  virtualRef={registerChild}\r\n                  onLoad={measure}\r\n                />\r\n              );\r\n            }\r\n\r\n            // Index 1\r\n            if (index < prependedRows + items.length) {\r\n              console.log(\"ITEM ROW\");\r\n              return (\r\n                <ItemComponent\r\n                  style={style}\r\n                  virtualRef={registerChild}\r\n                  onLoad={measure}\r\n                  {...items[index - prependedRows]}\r\n                />\r\n              );\r\n            }\r\n\r\n            // Index 2\r\n            if (index < prependedRows + items.length + loadingRows) {\r\n              console.log(\"LOADING ROW\");\r\n              return hasMoreRows ? (\r\n                loadingItem\r\n              ) : OutOfItems && items.length > 0 ? (\r\n                <OutOfItems\r\n                  style={style}\r\n                  virtualRef={registerChild}\r\n                  onLoad={measure}\r\n                />\r\n              ) : (\r\n                <div></div>\r\n              );\r\n            }\r\n\r\n            // Index 3\r\n            if (\r\n              Footer &&\r\n              index < prependedRows + items.length + loadingRows + appendedRows\r\n            ) {\r\n              console.log(\"FOOTER\");\r\n              return (\r\n                <Footer\r\n                  style={style}\r\n                  virtualRef={registerChild}\r\n                  onLoad={measure}\r\n                />\r\n              );\r\n            }\r\n\r\n            console.warn(\"index not found / out of bounds. INDEX:\", index);\r\n            return null;\r\n          }}\r\n        </CellMeasurer>\r\n      );\r\n    },\r\n    [\r\n      cache,\r\n      Header,\r\n      prependedRows,\r\n      items,\r\n      Footer,\r\n      appendedRows,\r\n      hasMoreRows,\r\n      loadingItem,\r\n      OutOfItems,\r\n    ]\r\n  );\r\n\r\n  const loadMoreRows = (params: IndexRange) => {\r\n    if (isLoading || !hasMoreRows) {\r\n      return Promise.resolve(0);\r\n    }\r\n\r\n    setLoading(true);\r\n    loadMore();\r\n\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n        resolve(1);\r\n      }, 1000);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <InfiniteLoader\r\n      isRowLoaded={isRowLoaded}\r\n      loadMoreRows={loadMoreRows}\r\n      rowCount={rowCount}\r\n    >\r\n      {({ onRowsRendered, registerChild }) => {\r\n        const registerChildHereAswell = (child: List) => {\r\n          setListRef(child);\r\n          registerChild(child);\r\n        };\r\n        return (\r\n          <AutoSizer>\r\n            {({ width, height }) => (\r\n              <List\r\n                ref={registerChildHereAswell}\r\n                onRowsRendered={onRowsRendered}\r\n                rowRenderer={rowRenderer}\r\n                deferredMeasurementCache={cache}\r\n                overscanRowCount={0}\r\n                rowCount={\r\n                  items.length + prependedRows + appendedRows + loadingRows\r\n                }\r\n                rowHeight={cache.rowHeight}\r\n                width={window.innerWidth}\r\n                height={window.innerHeight}\r\n              />\r\n            )}\r\n          </AutoSizer>\r\n        );\r\n      }}\r\n    </InfiniteLoader>\r\n  );\r\n}\r\n","import { RatingType } from \"../../../data/types\";\r\nimport React from \"react\";\r\nimport { RatingIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: RatingType }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {props.value[0].toUpperCase()}\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { HeartIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: number }) => (\r\n  <span>\r\n    {props.value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { formatSource } from \"../../../misc/formatting\";\r\nimport { ExternalLinkIcon, SourceIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: string }) =>\r\n  props.value.startsWith(\"http\") ? (\r\n    <a\r\n      href={props.value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      {formatSource(props.value)}\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {props.value}\r\n    </span>\r\n  );\r\n","import React, { useMemo } from \"react\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport TagList, { TagListWrapper } from \"../tag/TagList\";\r\nimport { RatingType } from \"../../data/types\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { listToMap } from \"../../data/utils\";\r\nimport Rating from \"./widgets/Rating\";\r\nimport Score from \"./widgets/Score\";\r\nimport Source from \"./widgets/Source\";\r\n\r\nconst fold = keyframes`\r\n  from {\r\n    max-height: 0px;\r\n  }\r\n\r\n  to {\r\n    max-height: 1500px;\r\n  }\r\n`;\r\n\r\nconst DetailsWrapper = styled.div(\r\n  (props) => css`\r\n    > ${TagListWrapper} {\r\n      padding: ${props.theme.dimensions.spacing};\r\n    }\r\n    max-height: unset;\r\n    /* animation: ${fold} 0.4s ease-in; */\r\n  `\r\n);\r\n\r\nconst Bar = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    background: ${props.theme.misc.layer};\r\n    padding: ${props.theme.dimensions.spacing};\r\n    border-radius: 0 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius};\r\n    ${props.theme.shadow.box};\r\n\r\n    > span,\r\n    > a {\r\n      margin: ${props.theme.dimensions.spacing};\r\n      line-height: 1rem;\r\n      height: 1rem;\r\n    }\r\n  `\r\n);\r\n\r\ninterface DetailsProps {\r\n  rating: RatingType;\r\n  score: number;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n}\r\n\r\nexport default function Details(props: DetailsProps) {\r\n  const { rating, score, source, tags } = props;\r\n  const tagsForRendering = useMemo(() => listToMap(tags, \"name\"), [tags]);\r\n\r\n  return (\r\n    <DetailsWrapper className=\"details-wrapper\">\r\n      <Bar className=\"bar\">\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList tags={tagsForRendering} padding loadAliases={false} />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n","import { SimpleMap } from \"./types\";\r\n\r\nexport const listToMap = <T>(list: T[], keyProp: string): SimpleMap<T> => {\r\n  return list.reduce((result: SimpleMap<T>, current: any) => {\r\n    result[current[keyProp]] = current;\r\n    return result;\r\n  }, {});\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\nexport default FlexVideo;\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, PlayIcon, PauseIcon } from \"../../icons/Icons\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport { NO_OP } from \"../../data/constants\";\r\nimport useToggle from \"../../misc/useToggle\";\r\n\r\nconst fade = keyframes`\r\n  from {\r\n    opacity: 1;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div(\r\n  (props: { isVisible: boolean }) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    ${!props.isVisible\r\n      ? css`\r\n          opacity: 0;\r\n          animation: ${fade} 0.4s ease-in-out;\r\n        `\r\n      : \"\"};\r\n  `\r\n);\r\n\r\nconst ProgressBar = styled.div(\r\n  (props) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    height: 5px;\r\n    background-color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\ninterface OverlayProps {\r\n  onFullscreen?: MouseEventHandler;\r\n  togglePlay?: MouseEventHandler;\r\n  isPaused?: boolean;\r\n  isPlayable: boolean;\r\n  currentTime?: number;\r\n  duration?: number;\r\n}\r\n\r\nfunction Overlay(props: OverlayProps) {\r\n  const {\r\n    onFullscreen = NO_OP,\r\n    togglePlay = NO_OP,\r\n    isPaused = true,\r\n    isPlayable = false,\r\n    currentTime = 0,\r\n    duration = null,\r\n  } = props;\r\n\r\n  const [isVisible, toggleVisible] = useToggle();\r\n\r\n  return (\r\n    <Wrapper isVisible={isPaused || isVisible} onClick={toggleVisible}>\r\n      {onFullscreen && (\r\n        <Button type=\"topLeft\" onClick={onFullscreen} label=\"Open Fullscreen\">\r\n          <ExpandIcon color=\"white\" />\r\n        </Button>\r\n      )}\r\n\r\n      {isPlayable && (\r\n        <>\r\n          <Button type=\"center\" onClick={togglePlay} label=\"Play/Pause\">\r\n            {isPaused ? (\r\n              <PlayIcon color=\"white\" size={50} />\r\n            ) : (\r\n              <PauseIcon color=\"white\" size={50} />\r\n            )}\r\n          </Button>\r\n          {!!duration && !!currentTime && (\r\n            <ProgressBar\r\n              style={{ width: `${(currentTime / duration) * 100}%` }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Overlay;\r\n","import React, { useState, useCallback } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\nimport FlexVideo from \"./FlexVideo\";\r\nimport Overlay from \"./Overlay\";\r\nimport { openFullscreen } from \"./utils\";\r\n\r\ninterface VideoProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport default function Video(props: VideoProps) {\r\n  const { src, onLoad } = props;\r\n\r\n  const [videoRef, setVideoRef] = useState<HTMLVideoElement | null>(null);\r\n\r\n  const [, setTime] = useState(Date.now());\r\n  const [intervalId, setIntervalId] = useState<NodeJS.Timeout | null>(null);\r\n\r\n  const play = useCallback(() => {\r\n    videoRef && videoRef.play();\r\n\r\n    // ~30 fps\r\n    const id = setInterval(() => {\r\n      setTime(Date.now());\r\n    }, 34);\r\n\r\n    setIntervalId(id);\r\n  }, [videoRef]);\r\n\r\n  const pause = useCallback(() => {\r\n    videoRef && videoRef.pause();\r\n    clearInterval(intervalId as NodeJS.Timeout);\r\n    setIntervalId(null);\r\n  }, [videoRef, intervalId]);\r\n\r\n  const onFullscreen = useCallback(() => videoRef && openFullscreen(videoRef), [\r\n    videoRef,\r\n  ]);\r\n\r\n  const togglePlay = useCallback(\r\n    (event) => {\r\n      event.stopPropagation();\r\n      videoRef && (videoRef.paused ? play() : pause());\r\n    },\r\n    [videoRef, play, pause]\r\n  );\r\n\r\n  const { preloadVideos } = useSelector(selectPreferences);\r\n\r\n  return (\r\n    <>\r\n      <FlexVideo\r\n        controls={false}\r\n        loop\r\n        src={src}\r\n        preload={preloadVideos ? \"auto\" : \"metadata\"}\r\n        ref={setVideoRef}\r\n        onLoadedMetadata={onLoad}\r\n      />\r\n      <Overlay\r\n        isPaused={videoRef ? videoRef.paused : true}\r\n        currentTime={videoRef ? videoRef.currentTime : undefined}\r\n        duration={videoRef ? videoRef.duration : undefined}\r\n        onFullscreen={onFullscreen}\r\n        togglePlay={togglePlay}\r\n        isPlayable\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { PostType, VIDEO, GIF, PICTURE } from \"../../data/types\";\r\n\r\nexport const openFullscreen = (elem: HTMLVideoElement) => {\r\n  elem.requestFullscreen();\r\n};\r\n\r\nexport const getMediaType = (type: PostType, src: string) => {\r\n  if (type === VIDEO) {\r\n    return VIDEO;\r\n  }\r\n\r\n  // can't use .endsWith because of queryString\r\n  if (src.includes(\".gif\")) {\r\n    return GIF;\r\n  }\r\n\r\n  return PICTURE;\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\nexport default FlexImage;\r\n","import React, { useState } from \"react\";\r\nimport FlexImage from \"./FlexImage\";\r\nimport Overlay from \"./Overlay\";\r\n\r\ninterface GifProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport default function Gif(props: GifProps) {\r\n  const { src, thumbnail_src, onLoad } = props;\r\n\r\n  const [isPaused, setPaused] = useState(true);\r\n  const usedSource = isPaused ? thumbnail_src : src;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage\r\n        src={usedSource}\r\n        alt={usedSource}\r\n        loading=\"lazy\"\r\n        onLoad={onLoad}\r\n      />\r\n      <Overlay\r\n        isPlayable\r\n        isPaused={isPaused}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          setPaused(!isPaused);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport FlexImage from \"./FlexImage\";\r\nimport Overlay from \"./Overlay\";\r\n\r\ninterface PictureProps {\r\n  src: string;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport default function Picture(props: PictureProps) {\r\n  const { src, onLoad } = props;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={src} alt={src} onLoad={onLoad} loading=\"lazy\" />\r\n      <Overlay isPlayable={false} />\r\n    </>\r\n  );\r\n}\r\n","import React, { MouseEventHandler, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Video from \"./Video\";\r\nimport Gif from \"./Gif\";\r\nimport Picture from \"./Picture\";\r\nimport { VIDEO, GIF } from \"../../data/constants\";\r\nimport { getMediaType } from \"./utils\";\r\nimport { PostType } from \"../../data/types\";\r\n\r\nconst PlayerWrapper = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\ninterface PlayerProps {\r\n  type: PostType;\r\n  src: string;\r\n  thumbnail_src: string;\r\n  toggleDetails: MouseEventHandler;\r\n  onLoad: () => void;\r\n}\r\n\r\nconst getMedia = (type: PostType, src: string) => {\r\n  switch (getMediaType(type, src)) {\r\n    case VIDEO:\r\n      return Video;\r\n    case GIF:\r\n      return Gif;\r\n    default:\r\n      return Picture;\r\n  }\r\n};\r\n\r\nexport default function Player(props: PlayerProps) {\r\n  const { toggleDetails, type, src, thumbnail_src, onLoad } = props;\r\n\r\n  const media = useMemo(() => {\r\n    const MediaComponent = getMedia(type, src);\r\n    return (\r\n      <MediaComponent src={src} thumbnail_src={thumbnail_src} onLoad={onLoad} />\r\n    );\r\n  }, [type, src, thumbnail_src, onLoad]);\r\n\r\n  return <PlayerWrapper onClick={toggleDetails}>{media}</PlayerWrapper>;\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Details from \"./Details\";\r\nimport Player from \"../player/Player\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectOriginals } from \"../../redux/selectors\";\r\nimport PostDataClass from \"../../data/Post\";\r\n\r\nconst ListDiv = styled.div`\r\n  padding-top: 10px;\r\n`;\r\n\r\nconst PostWrapper = styled.div(\r\n  (props) => css`\r\n    display: grid;\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: auto auto;\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n    overflow: hidden;\r\n    width: calc(100% - 20px);\r\n    max-width: 1000px;\r\n    margin: auto;\r\n    box-sizing: border-box;\r\n\r\n    > * {\r\n      background: ${props.theme.misc.layer};\r\n    }\r\n  `\r\n);\r\n\r\nexport function getCorrectSource(\r\n  loadOriginal: boolean,\r\n  big_src: string,\r\n  small_src: string,\r\n  id: number\r\n) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post(\r\n  props: PostDataClass & { style: any; onLoad: () => void; virtualRef: any }\r\n) {\r\n  const {\r\n    id,\r\n    media_type,\r\n    small_src,\r\n    big_src,\r\n    thumbnail_src,\r\n    rating,\r\n    score,\r\n    source,\r\n    tags,\r\n    style,\r\n    onLoad,\r\n    virtualRef,\r\n  } = props;\r\n  const originals = useSelector(selectOriginals);\r\n  const media_src = getCorrectSource(originals, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  const toggleDetails = useCallback(() => {\r\n    setCollapsed(!collapsed);\r\n    setTimeout(onLoad, 100);\r\n  }, [collapsed, onLoad]);\r\n\r\n  return (\r\n    <ListDiv style={style} ref={virtualRef} className=\"list-div\">\r\n      <PostWrapper className=\"post wrapper\">\r\n        <Player\r\n          onLoad={onLoad}\r\n          type={media_type}\r\n          src={media_src}\r\n          thumbnail_src={thumbnail_src}\r\n          toggleDetails={toggleDetails}\r\n        />\r\n        {!collapsed && (\r\n          <Details rating={rating} score={score} source={source} tags={tags} />\r\n        )}\r\n      </PostWrapper>\r\n    </ListDiv>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BLOCK } from \"../../data/types\";\r\nimport { getResults } from \"../../redux/actions\";\r\nimport Button from \"../common/Button\";\r\n\r\nexport default function SearchButton() {\r\n  const dispatch = useDispatch();\r\n  const search = useCallback(() => dispatch(getResults()), [dispatch]);\r\n\r\n  return (\r\n    <Button type={BLOCK} onClick={search} label=\"Search\">\r\n      Search\r\n    </Button>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveTags } from \"../../redux/selectors\";\r\nimport TagList from \"../tag/TagList\";\r\n\r\nexport default function ActiveTags({ onChange }: { onChange: () => void }) {\r\n  const activeTags = useSelector(selectActiveTags);\r\n\r\n  useEffect(() => {\r\n    onChange();\r\n  }, [onChange, activeTags]);\r\n\r\n  return Object.keys(activeTags).length > 0 ? (\r\n    <TagList tags={activeTags} loadAliases />\r\n  ) : null;\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport Options from \"./Options\";\r\nimport Title from \"../common/Title\";\r\nimport Surface from \"../common/Surface\";\r\nimport SearchButton from \"./SearchButton\";\r\nimport ActiveTags from \"./ActiveTags\";\r\n\r\nconst ConfigWrapper = styled.section(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 0 10px;\r\n    align-items: center;\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function Config(props: { onLoad: () => void }) {\r\n  const { onLoad } = props;\r\n\r\n  return (\r\n    <ConfigWrapper>\r\n      <Title>\r\n        <label htmlFor=\"tag-input\">Search</label>\r\n      </Title>\r\n      <Surface>\r\n        <TagSelector />\r\n        <ActiveTags onChange={onLoad} />\r\n        <Options />\r\n        <SearchButton />\r\n      </Surface>\r\n    </ConfigWrapper>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport useToggle from \"../../misc/useToggle\";\r\nimport { selectCount } from \"../../redux/selectors\";\r\nimport Title from \"../common/Title\";\r\nimport Config from \"../features/Config\";\r\nimport Header from \"../features/Header\";\r\nimport LayoutElementProps from \"./LayoutElementProps\";\r\n\r\nexport default function LayoutHeader({\r\n  onLoad,\r\n  virtualRef,\r\n  style,\r\n}: LayoutElementProps) {\r\n  const [fullNumber, toggleFullNumber] = useToggle();\r\n  const count = useSelector(selectCount);\r\n\r\n  useEffect(() => {\r\n    if (count > 0) onLoad();\r\n  }, [count, onLoad]);\r\n\r\n  return (\r\n    <div onLoad={onLoad} ref={virtualRef} style={style}>\r\n      <Header />\r\n      <Config onLoad={onLoad} />\r\n      {count > 0 && (\r\n        <Title onClick={toggleFullNumber}>\r\n          {(fullNumber ? count.toLocaleString() : formatCount(count)) +\r\n            \" results\"}\r\n        </Title>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Footer from \"../features/Footer\";\r\nimport LayoutElementProps from \"./LayoutElementProps\";\r\n\r\nexport default function LayoutFooter({\r\n  onLoad,\r\n  virtualRef,\r\n  style,\r\n}: LayoutElementProps) {\r\n  return (\r\n    <div onLoad={onLoad} ref={virtualRef} style={style}>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport Surface, { Line } from \"../common/Surface\";\r\nimport Title from \"../common/Title\";\r\nimport TagList from \"../tag/TagList\";\r\nimport outOfResultsPicture from \"../../icons/OutOfResults.png\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectAliases } from \"../../redux/selectors\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\n\r\nexport default function LayoutLoadingItem() {\r\n  const aliases = useSelector(selectAliases);\r\n  const aliasesForRendering = useMemo(\r\n    () =>\r\n      aliases.reduce((result: SimpleMap<TagDataClass>, alias) => {\r\n        result[alias.name] = alias;\r\n        return result;\r\n      }, {}),\r\n    [aliases]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Surface>\r\n        <img\r\n          src={outOfResultsPicture}\r\n          alt={outOfResultsPicture}\r\n          style={{ width: \"100%\" }}\r\n        />\r\n        <Line />\r\n        <Title>You have reached the end!</Title>\r\n        <p style={{ textAlign: \"center\" }}>Go look for something else!</p>\r\n        {aliases.length > 0 && (\r\n          <>\r\n            <p style={{ textAlign: \"center\" }}>How about some of these?</p>\r\n            <TagList tags={aliasesForRendering} padding />\r\n          </>\r\n        )}\r\n      </Surface>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport InifinteColumn from \"../components/layout/InfiniteColumn\";\r\nimport Post from \"../components/post/Post\";\r\nimport { getMoreResults } from \"../redux/actions\";\r\nimport { selectOutOfResults, selectPosts } from \"../redux/selectors\";\r\nimport LayoutHeader from \"../components/layout/LayoutHeader\";\r\nimport LayoutFooter from \"../components/layout/LayoutFooter\";\r\nimport LayoutLoadingItem from \"../components/layout/LayoutLoadingItem\";\r\n\r\nexport default function Search() {\r\n  const dispatch = useDispatch();\r\n  const posts = useSelector(selectPosts);\r\n  const hasMorePosts = !useSelector(selectOutOfResults);\r\n  const loadMore = useCallback(() => dispatch(getMoreResults()), [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <InifinteColumn\r\n        Header={LayoutHeader}\r\n        Footer={LayoutFooter}\r\n        OutOfItems={LayoutLoadingItem}\r\n        items={posts}\r\n        loadingItem={<span>LOADING...</span>}\r\n        hasMoreRows={hasMorePosts}\r\n        ItemComponent={Post}\r\n        loadMore={loadMore}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Button from \"../common/Button\";\r\nimport { RED } from \"../../data/types\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { allowCookiesAction } from \"../../redux/actions\";\r\n\r\nconst CookieWrapper = styled.div(\r\n  (props) => css`\r\n    position: fixed;\r\n    display: flex;\r\n    bottom: 0;\r\n    bottom: left;\r\n    width: 100%;\r\n    color: ${props.theme.colors.text};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    justify-content: space-between;\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n\r\n    span {\r\n      margin: auto 0;\r\n      margin-left: ${props.theme.dimensions.gutter};\r\n    }\r\n\r\n    button {\r\n      margin-right: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function CookieConfirmation() {\r\n  const dispatch = useDispatch();\r\n\r\n  const onClick = useCallback(() => {\r\n    dispatch(allowCookiesAction());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <CookieWrapper>\r\n      <span>This website uses cookies.</span>\r\n      <Button type={RED} onClick={onClick} label=\"Allow Cookies\">\r\n        Cool\r\n      </Button>\r\n    </CookieWrapper>\r\n  );\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Help from \"./pages/Help\";\r\nimport Settings from \"./pages/Settings\";\r\nimport Search from \"./pages/Search\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveMenu, selectCookies } from \"./redux/selectors\";\r\nimport CookieConfirmation from \"./components/features/CookieConfirmation\";\r\n\r\nconst AppWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: strech;\r\n    width: 100vw;\r\n    min-height: 100vh;\r\n    background: ${props.theme.colors.backgroundColor};\r\n    color: ${props.theme.colors.backgroundColor2};\r\n\r\n    font-size: 14px;\r\n\r\n    a {\r\n      color: ${props.theme.colors.accentColor};\r\n      text-decoration: none;\r\n    }\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function AppContent() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const cookies = useSelector(selectCookies);\r\n\r\n  const pages = useMemo(\r\n    () => ({\r\n      help: <Help />,\r\n      settings: <Settings />,\r\n      search: <Search />,\r\n    }),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <AppWrapper>\r\n      {pages[activeMenu]}\r\n      {!cookies && <CookieConfirmation />}\r\n    </AppWrapper>\r\n  );\r\n}\r\n","const theme = {\r\n  dimensions: {\r\n    borderRadius: \"3px\",\r\n    borderWidth: \"2px\",\r\n\r\n    spacing: \"4px\",\r\n    bigSpacing: \"8px\",\r\n    appMargin: \"16px\",\r\n    gutter: \"8px\",\r\n  },\r\n  colors: {\r\n    accentColor: \"crimson\",\r\n    hoverAccent: \"crimson\",\r\n    backgroundColor: \"#121212\",\r\n    backgroundColor2: \"#fff\",\r\n  },\r\n  shadow: {\r\n    box: \"box-shadow: 0 0 8px #000\",\r\n    drop: \"drop-shadow(0 0 4px #000)\",\r\n  },\r\n  timings: {\r\n    transistionTime: \"0.2s\",\r\n  },\r\n  misc: {\r\n    layer:\r\n      \"#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.2s ease-in-out\",\r\n  },\r\n};\r\n\r\nexport default theme;\r\n\r\nexport type ThemeType = typeof theme;\r\n","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store, persistor } from \"./redux/store\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport AppContent from \"./AppContent\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport theme from \"./misc/theme\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <ThemeProvider theme={theme}>\r\n          <AppContent />\r\n        </ThemeProvider>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"app-root\"));\r\n"],"sourceRoot":""}