(this["webpackJsonpr34-browser"]=this["webpackJsonpr34-browser"]||[]).push([[7],{166:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return s}));var c,r,i=t(4),a=t(3),o=Object(a.e)(c||(c=Object(i.a)(["\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n"]))),s=Object(a.e)(r||(r=Object(i.a)(["\n  0% {\n    transform: rotate(0) scale(1);\n  }\n  60% {\n    transform: rotate(0) scale(1);\n  }\n  75% {\n    transform: rotate(0) scale(1.12);\n  }\n  80% {\n    transform: rotate(0) scale(1.1);\n  }\n  84% {\n    transform: rotate(-10deg) scale(1.1);\n  }\n  88% {\n    transform: rotate(10deg) scale(1.1);\n  }\n  92% {\n    transform: rotate(-10deg) scale(1.1);\n  }\n  96% {\n    transform: rotate(10deg) scale(1.1);\n  }\n  100% {\n    transform: rotate(0) scale(1);\n  }\n"])))},170:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var c=t(16),r=t(1);function i(e,n){var t=Object(r.useState)(!1),i=Object(c.a)(t,2),a=i[0],o=i[1],s=Object(r.useCallback)((function(e){var n=Object(c.a)(e,1)[0];o(n.isIntersecting)}),[]);return Object(r.useEffect)((function(){var t=new IntersectionObserver(s,n||{threshold:1,root:null});return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[s,n,e]),[a]}},172:function(e,n,t){"use strict";t.d(n,"a",(function(){return pe}));var c,r,i,a,o=t(16),s=t(1),u=t.n(s),l=t(32),d=t(12),b=t(4),f=t(3),j=t(166),h=t(67);var v,O=f.d.input((function(e){var n=e.$controls,t=e.$accent,o=e.theme;return Object(f.c)(a||(a=Object(b.a)(["\n    ","\n    ","\n  "])),function(e){var n=e.$accent,t=e.theme;return Object(f.c)(i||(i=Object(b.a)(["\n    -webkit-appearance: none;\n    flex-grow: 1;\n    background: ",";\n    border-radius: 100px;\n    height: 6px;\n\n    &::-moz-range-progress {\n      background-color: ",";\n    }\n\n    &::-ms-fill-lower {\n      background-color: ",";\n    }\n  "])),(function(e){return e.theme.colors.layerBg}),n?t.colors.accentColor:t.colors.backgroundColor2,n?t.colors.accentColor:t.colors.backgroundColor2)}({$accent:t,theme:o}),function(e){var n=e.$controls,t=e.theme,i=Object(f.c)(c||(c=Object(b.a)(["\n    height: 16px;\n    width: 16px;\n    border-radius: 100px;\n    background: ",";\n    cursor: pointer;\n  "])),n?t.colors.backgroundColor2:"transparent");return Object(f.c)(r||(r=Object(b.a)(["\n    &::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      ","\n    }\n\n    &::-moz-range-thumb {\n      ","\n    }\n\n    &::-ms-thumb {\n      ","\n    }\n  "])),i,i,i)}({$controls:n,theme:o}))})),m=t(2),g=t(11),p=f.d.svg(v||(v=Object(b.a)(["\n  > rect {\n    transition: all 0.2s ease-in;\n  }\n\n  &.play {\n    .left {\n      clip-path: path('M1.61 0 L10.1 4.9 L10.1 19.1 L1.61 24');\n    }\n\n    .right {\n      clip-path: path('M22.39 12 L9.9 4.79 L9.9 19.21 L22.39 12');\n    }\n  }\n\n  &.pause {\n    .left {\n      clip-path: path('M4.8 0 L10 0 L10 24 L4.8 24');\n    }\n\n    .right {\n      clip-path: path('M19.2 0 L14 0 L14 24 L19.2 24');\n    }\n  }\n"])));var x,w,S=t(17),k=t(25),F=t(29),C=t(5),y=Object(f.d)(F.m)((function(e){var n=e.theme;return Object(f.c)(x||(x=Object(b.a)(["\n    grid-area: 1/1/2/2;\n    place-self: start start;\n    ","\n    margin: ",";\n    cursor: pointer;\n  "])),g.f,n.dimensions.gutter)})),E=Object(f.d)(F.g)((function(e){var n=e.theme;return Object(f.c)(w||(w=Object(b.a)(["\n    grid-area: 1/1/2/2;\n    place-self: start start;\n    ","\n    margin: ",";\n    cursor: pointer;\n  "])),g.f,n.dimensions.gutter)}));function L(e){var n=e.index,t=Object(S.b)(),c=Object(k.f)(),r=u.a.useCallback((function(e){e.stopPropagation(),c.goBack()}),[c]),i=u.a.useCallback((function(e){e.stopPropagation(),t(Object(C.K)(n)),c.push(l.c.STORIES)}),[t,c,n]);return c.location.pathname===l.c.STORIES?Object(m.jsx)(E,{color:"white",onClick:r,"aria-label":"Exit fullscreen",title:"Exit fullscreen"}):Object(m.jsx)(y,{color:"white",onClick:i,"aria-label":"Enter fullscreen",title:"Enter fullscreen"})}var P,A,V=t(68),I=f.d.div(P||(P=Object(b.a)(["\n  grid-area: 3/1/4/2;\n  place-self: end stretch;\n  display: flex;\n  place-items: start center;\n  ","\n\n  > svg {\n    ","\n  }\n"])),g.o,g.f),T=Object(f.d)(F.l)(A||(A=Object(b.a)(["\n  cursor: pointer;\n"])));function N(e){var n=e.fullSrc,t=u.a.useCallback((function(e){e.stopPropagation(),Object(V.b)(n)}),[n]);return Object(m.jsxs)(I,{children:[Object(m.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer","aria-label":"Open In New Tab",title:n,children:Object(m.jsx)(F.n,{color:"white",title:"Open image in new tab"})}),Object(m.jsx)(T,{color:"white","aria-label":"Download Image",onClick:t,title:n})]})}var $,M,R,D,q,z,B,_,K;var J=f.d.div(R||(R=Object(b.a)(["\n  grid-area: 1/1/2/2;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: auto 1fr auto auto;\n  z-index: 1;\n\n  ",";\n"])),(function(e){return e.isVisible?Object(f.c)($||($=Object(b.a)([""]))):Object(f.c)(M||(M=Object(b.a)(["\n        opacity: 0;\n        animation: "," 0.4s ease-in;\n      "])),j.a)})),G=Object(f.d)((function(e){var n=e.isPaused,t=e.videoRef,c=e.className,r=e.onChange,i=e.onEnded,a=u.a.useRef(null),o=Object(f.f)(),l=Object(s.useCallback)((function(e){var n=Number(e.target.value);r(n)}),[r]),d=Object(s.useCallback)((function(e){e.stopPropagation()}),[]);return u.a.useEffect((function(){if(i&&t)return t.addEventListener("ended",i),function(){return t.removeEventListener("ended",i)}})),u.a.useEffect((function(){if(!n){var e;return e=requestAnimationFrame((function n(){if((null===a||void 0===a?void 0:a.current)&&t){a.current.value=t.currentTime.toString();var c=Math.round(t.currentTime/t.duration*100);a.current.style.backgroundImage="linear-gradient(90deg, ".concat(o.colors.accentColor," ").concat(c,"%, transparent ").concat(c,"%)")}e=requestAnimationFrame(n)})),function(){cancelAnimationFrame(e)}}}),[n,o.colors.accentColor,o.colors.backgroundColor2,t]),Object(m.jsx)(O,{ref:a,type:"range",step:.034,min:0,max:(null===t||void 0===t?void 0:t.duration)||0,onChange:l,className:c,onClick:d,$controls:!0,$accent:!0})}))((function(e){var n=e.theme;return Object(f.c)(D||(D=Object(b.a)(["\n    grid-area: 4/1/4/4;\n    margin: ",";\n  "])),n.dimensions.gutter)})),H=Object(f.d)((function(e){var n=e.onFinished,t=void 0===n?l.b:n,c=e.isActive,r=Object(s.useState)(!1),i=Object(o.a)(r,2),a=i[0],d=i[1],b=Object(S.b)(),f=Object(s.useCallback)((function(e){return b(Object(C.K)(e))}),[b]);u.a.useEffect((function(){var e=function(){return d(!0)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}})),u.a.useEffect((function(){var e=function(){return d(!1)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}}));var j=u.a.useRef(null);return u.a.useEffect((function(){if(!a&&c){var e;console.log("triggered");var n=(new Date).getTime();return e=requestAnimationFrame((function c(){if(j.current){var r=(new Date).getTime(),i=Number(j.current.value)+(r-n);n=r,j.current.value=i.toString();var a=Math.round(i/5e3*100);j.current.style.backgroundImage="linear-gradient(90deg, #ffffff80 ".concat(a,"%, transparent ").concat(a,"%)"),i>=Number(j.current.max)?(t(),j.current&&(j.current.value="0")):e=requestAnimationFrame(c)}})),function(){console.log("removed interval"),cancelAnimationFrame(e)}}}),[c,a,t,e.index,f]),Object(m.jsx)(O,{ref:j,type:"range",step:.034,min:0,max:5e3,onChange:l.b,onClick:l.b,$controls:!1,$accent:!1,className:e.className})}))((function(e){var n=e.theme;return Object(f.c)(q||(q=Object(b.a)(["\n    grid-area: 4/1/4/4;\n    margin: ",";\n  "])),n.dimensions.gutter)})),Q=Object(f.d)((function(e){var n=e.onClick,t=void 0===n?l.b:n,c=e.className,r=void 0===c?"":c,i=e.isPaused;return Object(m.jsxs)(p,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onClick:t,className:"".concat(r," ").concat(i?"play":"pause"),children:[Object(m.jsx)("rect",{className:"left",color:"currentColor",x:"0",y:"0",width:"24",height:" 24"}),Object(m.jsx)("rect",{className:"right",color:"currentColor",x:"0",y:"0",width:"24",height:" 24"})]})}))(z||(z=Object(b.a)(["\n  height: 50px;\n  width: 50px;\n  grid-area: 2/2/3/3;\n  place-self: center center;\n  cursor: pointer;\n  fill: white;\n  ","\n"])),g.f),U=f.d.span((function(e){return Object(f.c)(B||(B=Object(b.a)(["\n    grid-area: 3/3/4/4;\n    place-self: end end;\n    background: #00000080;\n    color: white;\n    border-radius: 4px;\n    padding: ",";\n    margin: ",";\n  "])),e.theme.dimensions.spacing,e.theme.dimensions.gutter)})),W=f.d.div(_||(_=Object(b.a)(["\n  display: grid;\n  grid-area: 2/3/3/4;\n  place-items: center;\n  opacity: 0;\n"]))),X=f.d.div(K||(K=Object(b.a)(["\n  display: grid;\n  grid-area: 2/1/3/2;\n  place-items: center;\n  opacity: 0;\n"])));function Y(e){var n=e.index,t=e.fullSrc,c=e.isFullscreen,r=e.isActive,i=e.onFinished;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(L,{index:n}),Object(m.jsx)(N,{fullSrc:t}),c&&Object(m.jsx)(H,{index:n,onFinished:i,isActive:r})]})}function Z(e){var n=e.fullSrc,t=e.isPaused,c=e.index,r=e.onTogglePaused,i=e.isFullscreen,a=e.isActive,o=e.onFinished;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(L,{index:c}),Object(m.jsx)(N,{fullSrc:n}),Object(m.jsx)(Q,{isPaused:t,onClick:r,"aria-label":"Play/Pause"}),i&&Object(m.jsx)(H,{index:c,isPaused:t,onFinished:o,isActive:a}),Object(m.jsx)(U,{children:"GIF"})]})}function ee(e){var n=e.fullSrc,t=e.isPaused,c=e.index,r=e.onTogglePaused,i=e.onSeek,a=e.duration,o=e.videoRef,u=e.isActive,l=e.onFinished,d=Object(s.useCallback)((function(e){e.preventDefault(),o&&i(o.currentTime+10)}),[i,o]),b=Object(s.useCallback)((function(e){e.preventDefault(),o&&i(o.currentTime-10)}),[i,o]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(L,{index:c}),Object(m.jsx)(N,{fullSrc:n}),Object(m.jsx)(X,{onDoubleClick:b,children:Object(m.jsx)(F.c,{tabIndex:0})}),Object(m.jsx)(Q,{isPaused:t||!u,onClick:r,"aria-label":"Play/Pause"}),Object(m.jsx)(W,{onDoubleClick:d,children:Object(m.jsx)(F.p,{tabIndex:0})}),Object(m.jsx)(U,{children:Object(h.c)(a)}),Object(m.jsx)(G,{isPaused:t||!u,videoRef:o,onChange:i,onEnded:l})]})}function ne(e){switch(e.type){case"image":return Object(m.jsx)(Y,Object(d.a)({},e));case"gif":return Object(m.jsx)(Z,Object(d.a)({},e));case"video":return Object(m.jsx)(ee,Object(d.a)({},e))}}function te(e){var n=e.isVisible,t=e.setVisible,c=u.a.useCallback((function(){return t(!n)}),[n,t]);return Object(m.jsx)(J,{isVisible:n,onClick:c,"data-testid":"overlay-wrapper",children:ne(e)})}var ce,re,ie,ae=t(78),oe=f.d.video(ce||(ce=Object(b.a)(["\n  ","\n  ","\n  grid-area: 1/1/2/2;\n"])),g.j,g.r),se=Object(f.d)(oe)(re||(re=Object(b.a)(["\n  ","\n"])),g.q),ue=Object(f.d)(ae.a)(ie||(ie=Object(b.a)(["\n  ","\n"])),g.q);function le(e){var n=e.viewSrc,t=e.fullSrc,c=e.index,r=e.onLoad,i=void 0===r?l.b:r,a=e.width,o=e.height,s=e.isFullscreen,u=e.isActive,d=e.onFinished;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ue,{"data-testid":"image",src:n,alt:n,onLoad:i,loading:"lazy",width:a,height:o}),Object(m.jsx)(te,{type:"image",fullSrc:t,index:c,isVisible:!0,setVisible:l.b,isFullscreen:s,onFinished:d,isActive:u})]})}var de,be,fe=t(13),je=t(170),he=!1,ve=[];function Oe(e){var n=u.a.useState(!1),t=Object(o.a)(n,2),c=t[0],r=t[1],i=Object(S.c)(fe.e),a=Object(je.a)(e),s=Object(o.a)(a,1)[0],l=function(){var e=u.a.useState(he),n=Object(o.a)(e,2),t=n[0],c=n[1];return void 0===de&&(de=function(e){he=!0,ve.forEach((function(e){return e(he)})),be&&clearTimeout(be),be=setTimeout((function(){he=!1,ve.forEach((function(e){return e(he)}))}),500)},document.addEventListener("scroll",de,{passive:!0})),u.a.useEffect((function(){return ve.push(c),c(he),function(){0===(ve=ve.filter((function(e){return e!==c}))).length&&de&&(document.removeEventListener("scroll",de),de=void 0)}}),[]),t}();return u.a.useEffect((function(){i&&s&&!l&&r(!0)}),[i,s,l]),u.a.useEffect((function(){s||r(!1)}),[s]),i&&c}function me(e){var n=e.viewSrc,t=e.thumbnailSrc,c=e.fullSrc,r=e.onLoad,i=void 0===r?l.b:r,a=e.index,d=e.width,b=e.height,f=e.detailsVisible,j=e.isFullscreen,h=e.onFinished,v=e.isActive,O=u.a.useState(!0),g=Object(o.a)(O,2),p=g[0],x=g[1],w=Object(s.useState)(null),k=Object(o.a)(w,2),F=k[0],C=k[1],y=u.a.useCallback((function(e){e.stopPropagation(),C(!F),x(!1)}),[F]),E=Object(s.useState)(null),L=Object(o.a)(E,2),P=L[0],A=L[1],V=Oe(P),I=null===F?V:F,T=Object(S.c)(fe.w),N=I?n:t;return Object(s.useEffect)((function(){T&&((new Image).src=n)})),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ue,{"data-testid":"gif",ref:A,src:N,alt:N,loading:"lazy",onLoad:i,width:d,height:b}),Object(m.jsx)(te,{isVisible:!I||p||f,setVisible:x,type:"gif",fullSrc:c,index:a,isPaused:!I,onTogglePaused:y,isFullscreen:j,onFinished:h,isActive:v})]})}function ge(e){var n=e.viewSrc,t=e.fullSrc,c=e.onLoad,r=void 0===c?l.b:c,i=e.index,a=e.width,d=e.height,b=e.detailsVisible,f=e.isFullscreen,j=e.isActive,h=e.onFinished,v=u.a.useState(!0),O=Object(o.a)(v,2),g=O[0],p=O[1],x=Object(s.useState)(null),w=Object(o.a)(x,2),k=w[0],F=w[1],C=u.a.useCallback((function(e){e.stopPropagation(),F(!k),p(!1)}),[k]),y=Object(s.useState)(null),E=Object(o.a)(y,2),L=E[0],P=E[1],A=Oe(L),V=null===k?A:k,I=Object(S.c)(fe.x)?"auto":"metadata";u.a.useEffect((function(){V&&(null===L||void 0===L?void 0:L.paused)&&(null===L||void 0===L||L.play()),V||(null===L||void 0===L?void 0:L.paused)||null===L||void 0===L||L.pause()}),[n,V,L]);var T=u.a.useCallback((function(e){L&&(L.currentTime=e)}),[L]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(se,{"data-testid":"video",controls:!1,loop:!f,preload:I,ref:P,onLoadedMetadata:r,width:a,height:d,src:n}),Object(m.jsx)(te,{type:"video",index:i,fullSrc:t,isPaused:!V,duration:(null===L||void 0===L?void 0:L.duration)||0,onTogglePaused:C,onSeek:T,videoRef:L,isVisible:!V||b||g,setVisible:p,isFullscreen:f,onFinished:h,isActive:j})]})}function pe(e){var n=e.type,t=e.thumbnailSrc,c=e.sampleSrc,r=e.fullSrc,i=e.index,a=e.onLoad,s=e.width,l=e.height,d=e.detailsVisible,b=e.isFullscreen,f=void 0!==b&&b,j=e.onFinished,h=e.isActive,v=void 0!==h&&h,O=function(e,n,t,c){var r=Object(S.c)(fe.p);return u.a.useMemo((function(){switch(e){case"image":return r?["",c]:["",t];case"gif":return t.includes(".gif")?[n,t]:[t,c];case"video":return r?[n,c]:[n,t]}}),[c,r,t,n,e])}(n,t,c,r),g=Object(o.a)(O,2),p=g[0],x=g[1];switch(n){case"image":return Object(m.jsx)(le,{viewSrc:x,fullSrc:r,onLoad:a,index:i,width:s,height:l,isFullscreen:f,onFinished:j,isActive:v});case"gif":return Object(m.jsx)(me,{detailsVisible:d,viewSrc:x,thumbnailSrc:p,fullSrc:r,onLoad:a,index:i,width:s,height:l,isFullscreen:f,onFinished:j,isActive:v});case"video":return Object(m.jsx)(ge,{detailsVisible:d,viewSrc:x,thumbnailSrc:p,fullSrc:r,onLoad:a,index:i,width:s,height:l,isFullscreen:f,onFinished:j,isActive:v})}}},193:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return k}));var c=t(16),r=t(4),i=t(1),a=t.n(i),o=t(17),s=t(25),u=t(3),l=t(57);var d,b,f,j=t(5),h=t(13),v=t(32),O=t(170),m=t(172),g=t(2),p=u.d.div(d||(d=Object(r.a)(["\n  height: 100vh;\n  width: 100vw;\n  scroll-snap-align: start;\n  scroll-snap-stop: always;\n\n  display: grid;\n"])));function x(e){var n=e.index,t=e.onInView,r=e.onFinished,i=a.a.useState(null),s=Object(c.a)(i,2),u=s[0],l=s[1],d=Object(O.a)(u),b=Object(c.a)(d,1)[0],f=Object(o.c)(Object(h.t)(n)),j=f.type,x=f.preview_url,w=f.sample_url,S=f.file_url,k=f.width,F=f.height;return a.a.useEffect((function(){t&&b&&t(n)}),[n,b,t]),Object(g.jsx)(p,{id:"story-".concat(n),ref:l,children:Object(g.jsx)(m.a,{type:j,index:n,thumbnailSrc:x,sampleSrc:w,fullSrc:S,onLoad:v.b,width:k,height:F,detailsVisible:!1,isFullscreen:!0,onFinished:r,isActive:b})})}var w=u.d.div(b||(b=Object(r.a)(["\n  height: 100vh;\n  width: 100vw;\n  overflow: scroll;\n  scroll-snap-type: y mandatory;\n  scroll-snap-stop: always;\n\n  ::-webkit-scrollbar {\n    height: 0px;\n    width: 0px;\n  }\n"]))),S=u.d.div((function(e){var n=e.index;return Object(u.c)(f||(f=Object(r.a)(["\n    height: ","00vh;\n  "])),Math.max(n-1,0))}));function k(){var e,n=Object(o.b)(),t=Object(s.f)(),r=a.a.useState(null),u=Object(c.a)(r,2),d=u[0],b=u[1],f=a.a.useCallback((function(e){return n(Object(j.K)(e))}),[n]),v=Object(o.c)(h.i),O=v+1,m=[v-1,v,O],p=a.a.useCallback((function(){var e;null===(e=document.getElementById("story-".concat(O)))||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[O]);return e=function(){t.goBack()},Object(i.useEffect)((function(){var n=function(){document.fullscreenElement||e()};return document.addEventListener("fullscreenchange",n),function(){document.removeEventListener("fullscreenchange",n)}}),[e]),a.a.useEffect((function(){d&&Object(l.a)(d)}),[d]),Object(g.jsxs)(w,{ref:b,children:[Object(g.jsx)(S,{index:v}),m.map((function(e){return e<0?null:e<v||e>v?Object(g.jsx)(x,{index:e,onInView:f},e):Object(g.jsx)(x,{index:e,onFinished:p},e)}))]})}}}]);
//# sourceMappingURL=7.522ee3a8.chunk.js.map