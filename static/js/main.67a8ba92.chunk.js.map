{"version":3,"sources":["icons/OutOfResults.png","redux/actions.ts","redux/reducers/misc.ts","data/types.ts","redux/reducers/preferences.ts","redux/reducers/results.ts","redux/reducers/tags.ts","redux/reducers/index.ts","analytics/events.ts","redux/selectors.ts","redux/middleware/eventLogging.ts","misc/api.ts","data/Post.ts","data/Tag.ts","misc/prepare.ts","redux/middleware/apiRequests.ts","redux/store.ts","icons/R34Icon.tsx","components/common/Button.tsx","components/common/Title.tsx","components/features/Header.tsx","components/features/Footer.tsx","components/common/Surface.tsx","components/tagSelector/TagInput.tsx","components/tag/tagUtils.ts","misc/formatting.ts","components/tag/Tag.tsx","icons/Icons.tsx","data/constants.ts","icons/TypeIcon.tsx","components/tagSelector/DropdownList.tsx","components/tagSelector/TagSelector.tsx","components/common/Toggle.tsx","components/common/LabeledToggle.tsx","components/features/Options.tsx","components/tag/TagList.tsx","pages/Help.tsx","pages/Settings.tsx","components/features/SearchButton.tsx","components/features/ActiveTags.tsx","components/features/Config.tsx","components/post/widgets/Rating.tsx","components/post/widgets/Score.tsx","components/post/widgets/Source.tsx","components/post/Details.tsx","data/utils.ts","components/player/Overlay.tsx","components/player/Video.tsx","components/player/utils.ts","components/player/Gif.tsx","components/player/Picture.tsx","components/player/Player.tsx","components/post/Post.tsx","components/post/PostList.tsx","components/features/LoadMore.tsx","components/features/Results.tsx","pages/Search.tsx","components/features/CookieConfirmation.tsx","AppContent.tsx","misc/theme.ts","App.tsx","index.tsx"],"names":["module","exports","setActiveMenu","menu","type","addTag","tag","setOption","key","value","initialMiscState","activeMenu","initialPreferencesState","infinite","rated","ratedTreshold","originals","cookies","state","produce","draft","initialResultsState","posts","pageNumber","count","initialTagsState","active","aliases","combineReducers","tags","action","newTag","name","tagToRemove","removeTag","forTag","addAliases","results","addPosts","postCount","Number","setPosts","preferences","misc","selectActiveTags","selectPosts","selectCount","selectPageNumber","selectPreferences","selectInfinite","selectOriginals","selectCookies","selectActiveMenu","selectAliases","Object","values","flat","selectHasResults","keys","length","selectOutOfResults","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","analytics","store","activeApi","fetch","catch","getTags","searchTerm","res","json","getPosts","minScore","buildPostUrl","getAliases","tagName","page","tagString","map","modifier","encodeURIComponent","join","url","PostDataClass","constructor","id","score","rating","source","media_type","media_src","file_url","thumbnail_src","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","small_src","big_src","this","TagDataClass","types","preparePost","post","sample_url","preview_url","t","Boolean","persistConfig","storage","persistedReducer","persistReducer","rootReducer","createStore","composeWithDevTools","applyMiddleware","next","getState","firebase","initializeApp","payload","logEvent","console","log","activeTags","page_number","active_tags","sort","searchEvent","api","then","dispatch","isOutOfResults","persistor","persistStore","R34Icon","props","theme","useTheme","xmlns","size","viewBox","transform","cx","cy","fill","stroke","colors","accentColor","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","x","y","fontVariant","fontStretch","BasicButton","styled","button","InvisibleButton","css","shadow","drop","MenuButton","backgroundColor2","ActiveMenuButton","TopLeftButton","BottomLeftButton","CenterButton","RedButton","backgroundColor","dimensions","borderWidth","BlockButton","borderRadius","AddButton","ModifierButton","Button","children","onClick","disabled","label","TypedButton","getButtonByType","aria-label","h2","BigTitle","h1","HeaderWrapper","header","gutter","Divider","div","TitleBar","layer","box","bigSpacing","MenuBar","nav","Header","useSelector","useDispatch","style","marginTop","href","FotterWrapper","footer","spacing","CenteredA","a","Footer","Line","Input","input","TagInput","setValue","onChange","event","target","placeholder","prettifyTagname","tagname","replace","formatCount","numberString","number","toFixed","TagWrapper","collapsed","fg","bg","switchingColors","IconWrapper","span","left","right","TagText","text","onKeyDown","e","keyCode","Alias","className","Tag","loadAliases","useState","setCollapsed","useEffect","newAliases","b","filtered","filter","alias","isActive","showAliases","onMouseLeave","TypeIcon","ArrowIcon","StyledIcon","i","color","Icon","icon","CharacterIcon","attrs","ArtistIcon","CopyrightIcon","ExpandIcon","memo","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","PlayIcon","PauseIcon","NO_OP","find","match","ListWrapper","tagSelector","offsetTop","clientHeight","offsetLeft","clientWidth","sizeAndPosition","tagSelectorRef","DropdownList","entries","entry","Entry","EntryWrapper","TypeWrapper","flexGrow","paddingRight","TagSelectorWrapper","closed","TagSelector","setModifier","suggestions","setSuggestions","setTagSelectorRef","activateTag","useCallback","suggestion","dirtyTag","prepareTag","handle","setTimeout","toLowerCase","newSuggestions","clearTimeout","onModifierClick","onAddClick","trim","s","ref","Wrapper","Thumb","Toggle","onToggle","ToggleWrapper","Label","LabeledToggle","OptionsWrapper","StyledInput","String","Options","ratedInputValue","setRatedInputValue","display","onBlur","TagListWrapper","padding","TagList","Help","Title","Surface","Settings","SearchButton","search","ActiveTags","ConfigWrapper","section","Config","htmlFor","toUpperCase","startsWith","rel","sourceString","includes","semiSanitized","substring","indexOf","formatSource","fold","keyframes","DetailsWrapper","Bar","Details","tagsForRendering","useMemo","listToMap","keyProp","reduce","result","current","Rating","Score","Source","fade","isVisible","ProgressBar","Overlay","onFullscreen","togglePlay","isPaused","isPlayable","currentTime","duration","setVisible","defaultProps","FlexVideo","video","Video","src","videoRef","setVideoRef","Date","now","setTime","intervalId","setIntervalId","play","setInterval","pause","clearInterval","requestFullscreen","stopPropagation","paused","controls","loop","poster","preload","undefined","FlexImage","img","Gif","setPaused","usedSource","alt","Picture","PlayerWrapper","Player","toggleDetails","media","MediaComponent","getMediaType","getMedia","PostWrapper","Post","loadOriginal","getCorrectSource","PostListWrapper","PostList","concurrencyLock","LoadMore","aliasesForRendering","loadMore","window","onscroll","innerHeight","document","documentElement","scrollTop","scrollHeight","outOfResultsPicture","textAlign","ResultsWrapper","Results","Search","hasResults","CookieWrapper","CookieConfirmation","Main","main","AppWrapper","AppContent","activePage","getActivePage","appMargin","hoverAccent","timings","transistionTime","App","loading","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.67a8ba92.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/OutOfResults.00a98fae.png\";","import { MenuType, PreferenceKey } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport PostDataClass from \"../data/Post\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const RESET = \"R34_RESET\";\r\nexport const SET_ACTIVE_MENU = \"R34_SET_ACTIVE_MENU\";\r\nexport const ADD_TAG = \"R34_ADD_TAG\";\r\nexport const REMOVE_TAG = \"R34_REMOVE_TAG\";\r\nexport const ADD_ALIASES = \"R34_ADD_ALIASES\";\r\nexport const ADD_POSTS = \"R34_ADD_POSTS\";\r\nexport const SET_POSTS = \"R34_SET_POSTS\";\r\nexport const SET_OPTION = \"R34_SET_OPTION\";\r\nexport const GET_RESULTS = \"R34_GET_RESULTS\";\r\nexport const GET_MORE_RESULTS = \"R34_GET_MORE_RESULTS\";\r\nexport const ALLOW_COOKIES = \"R34_ALLOW_COOKIES\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\ninterface ResetAction {\r\n  type: typeof RESET;\r\n}\r\n\r\ninterface SetActiveMenuAction {\r\n  type: typeof SET_ACTIVE_MENU;\r\n  menu: MenuType;\r\n}\r\n\r\ninterface AddTagAction {\r\n  type: typeof ADD_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface RemoveTagAction {\r\n  type: typeof REMOVE_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface AddAliasesAction {\r\n  type: typeof ADD_ALIASES;\r\n  aliases: TagDataClass[];\r\n  forTag: string;\r\n}\r\n\r\ninterface AddPostsAction {\r\n  type: typeof ADD_POSTS;\r\n  posts: PostDataClass[];\r\n}\r\n\r\ninterface SetPostsAction {\r\n  type: typeof SET_POSTS;\r\n  posts: PostDataClass[];\r\n  count: string;\r\n}\r\n\r\ninterface SetOptionAction {\r\n  type: typeof SET_OPTION;\r\n  key: PreferenceKey;\r\n  value: any;\r\n}\r\n\r\ninterface GetResultsAction {\r\n  type: typeof GET_RESULTS;\r\n}\r\n\r\ninterface GetMoreResultsAction {\r\n  type: typeof GET_MORE_RESULTS;\r\n}\r\n\r\ninterface AllowCookiesAction {\r\n  type: typeof ALLOW_COOKIES;\r\n  value: boolean;\r\n}\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const reset = () => ({\r\n  type: RESET,\r\n});\r\n\r\nexport const setActiveMenu = (menu: MenuType) => ({\r\n  type: SET_ACTIVE_MENU,\r\n  menu,\r\n});\r\n\r\nexport const addTag = (tag: TagDataClass) => ({\r\n  type: ADD_TAG,\r\n  tag,\r\n});\r\n\r\nexport const removeTag = (tag: TagDataClass) => ({\r\n  type: REMOVE_TAG,\r\n  tag,\r\n});\r\n\r\nexport const addAliases = (aliases: TagDataClass[], forTag: string) => ({\r\n  type: ADD_ALIASES,\r\n  aliases,\r\n  forTag,\r\n});\r\n\r\nexport const addPosts = (posts: PostDataClass[]) => ({\r\n  type: ADD_POSTS,\r\n  posts,\r\n});\r\n\r\nexport const setPosts = (posts: PostDataClass[], count: string) => ({\r\n  type: SET_POSTS,\r\n  posts,\r\n  count,\r\n});\r\n\r\nexport const setOption = (key: PreferenceKey, value: any) => ({\r\n  type: SET_OPTION,\r\n  key,\r\n  value,\r\n});\r\n\r\nexport const getResults = () => ({\r\n  type: GET_RESULTS,\r\n});\r\n\r\nexport const getMoreResults = () => ({\r\n  type: GET_MORE_RESULTS,\r\n});\r\n\r\nexport const allowCookiesAction = () => ({\r\n  type: ALLOW_COOKIES,\r\n  value: true,\r\n});\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport type AppAction =\r\n  | ResetAction\r\n  | SetActiveMenuAction\r\n  | AddTagAction\r\n  | RemoveTagAction\r\n  | AddAliasesAction\r\n  | AddPostsAction\r\n  | SetPostsAction\r\n  | SetOptionAction\r\n  | GetResultsAction\r\n  | GetMoreResultsAction\r\n  | AllowCookiesAction;\r\n","import produce from \"immer\";\r\nimport { MenuType } from \"../../data/types\";\r\nimport { SET_ACTIVE_MENU, AppAction } from \"../actions\";\r\n\r\nexport interface MiscState {\r\n  activeMenu: MenuType;\r\n}\r\n\r\nexport const initialMiscState: MiscState = {\r\n  activeMenu: \"search\",\r\n};\r\n\r\nconst setActiveMenu = (state: MiscState, menu: MenuType) =>\r\n  produce(state, (draft) => {\r\n    draft.activeMenu = menu;\r\n  });\r\n\r\nexport default (\r\n  state: MiscState = initialMiscState,\r\n  action: AppAction\r\n): MiscState => {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_MENU:\r\n      return setActiveMenu(state, action.menu);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const GENERAL = \"general\";\r\nexport const CHARACTER = \"character\";\r\nexport const AMBIGUOUS = \"ambiguous\";\r\nexport const ARTIST = \"artist\";\r\nexport const COPYRIGHT = \"copyright\";\r\nexport type TagType =\r\n  | typeof GENERAL\r\n  | typeof CHARACTER\r\n  | typeof AMBIGUOUS\r\n  | typeof ARTIST\r\n  | typeof COPYRIGHT;\r\n\r\nexport const PLUS = \"+\";\r\nexport const MINUS = \"-\";\r\nexport type Modifier = typeof PLUS | typeof MINUS;\r\n\r\nexport const VIDEO = \"video\";\r\nexport const IMAGE = \"image\";\r\nexport type PostType = typeof VIDEO | typeof IMAGE;\r\n\r\nexport const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport type MediaType = typeof VIDEO | typeof PICTURE | typeof GIF;\r\n\r\nexport const SEARCH = \"search\";\r\nexport const HELP = \"help\";\r\nexport const SETTINGS = \"settings\";\r\nexport type MenuType = typeof SEARCH | typeof HELP | typeof SETTINGS;\r\n\r\nexport const INVISIBLE = \"invisible\";\r\nexport const BLOCK = \"block\";\r\nexport const TOPLEFT = \"topLeft\";\r\nexport const BOTTOMLEFT = \"bottomLeft\";\r\nexport const CENTER = \"center\";\r\nexport const MODIFIER = \"modifier\";\r\nexport const ADD = \"add\";\r\nexport const MENU = \"menu\";\r\nexport const RED = \"red\";\r\nexport type ButtonType =\r\n  | typeof INVISIBLE\r\n  | typeof BLOCK\r\n  | typeof TOPLEFT\r\n  | typeof BOTTOMLEFT\r\n  | typeof CENTER\r\n  | typeof MODIFIER\r\n  | typeof ADD\r\n  | typeof MENU\r\n  | typeof RED;\r\n\r\nexport const SAFE = \"safe\";\r\nexport const QUESTIONABLE = \"questionable\";\r\nexport const EXPLICIT = \"explicit\";\r\nexport type RatingType = typeof SAFE | typeof QUESTIONABLE | typeof EXPLICIT;\r\n\r\nexport const INFINITE = \"infinite\";\r\nexport const RATED = \"rated\";\r\nexport const RATEDTRESHOLD = \"ratedTreshold\";\r\nexport const ORIGINALS = \"originals\";\r\nexport const COOKIES = \"cookies\";\r\n\r\nexport type PreferenceKey =\r\n  | typeof INFINITE\r\n  | typeof RATED\r\n  | typeof RATEDTRESHOLD\r\n  | typeof ORIGINALS\r\n  | typeof COOKIES;\r\n\r\nexport interface SimpleMap<V> {\r\n  [key: string]: V;\r\n}\r\n\r\nexport interface SimpleList<V> {\r\n  [key: number]: V;\r\n}\r\n","import produce from \"immer\";\r\nimport {\r\n  PreferenceKey,\r\n  INFINITE,\r\n  RATED,\r\n  RATEDTRESHOLD,\r\n  ORIGINALS,\r\n  COOKIES,\r\n} from \"../../data/types\";\r\nimport { AppAction, SET_OPTION, ALLOW_COOKIES } from \"../actions\";\r\n\r\nexport interface PreferencesState {\r\n  infinite: boolean;\r\n  rated: boolean;\r\n  ratedTreshold: number;\r\n  originals: boolean;\r\n  cookies: boolean;\r\n}\r\n\r\nexport const initialPreferencesState: PreferencesState = {\r\n  infinite: true,\r\n  rated: false,\r\n  ratedTreshold: 1,\r\n  originals: false,\r\n  cookies: false,\r\n};\r\n\r\nconst setOption = (state: PreferencesState, key: PreferenceKey, value: any) =>\r\n  produce(state, (draft) => {\r\n    switch (key) {\r\n      case INFINITE:\r\n        draft.infinite = value;\r\n        break;\r\n      case RATED:\r\n        draft.rated = value;\r\n        break;\r\n      case RATEDTRESHOLD:\r\n        draft.ratedTreshold = value;\r\n        break;\r\n      case ORIGINALS:\r\n        draft.originals = value;\r\n        break;\r\n      case COOKIES:\r\n        draft.cookies = value;\r\n        break;\r\n    }\r\n  });\r\n\r\nexport default (\r\n  state: PreferencesState = initialPreferencesState,\r\n  action: AppAction\r\n): PreferencesState => {\r\n  switch (action.type) {\r\n    case SET_OPTION:\r\n      return setOption(state, action.key, action.value);\r\n    case ALLOW_COOKIES:\r\n      return setOption(state, COOKIES, action.value);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport PostDataClass from \"../../data/Post\";\r\nimport { SET_POSTS, ADD_POSTS, AppAction } from \"../actions\";\r\n\r\nexport interface ResultsState {\r\n  posts: PostDataClass[];\r\n  pageNumber: number;\r\n  count: number;\r\n}\r\n\r\nexport const initialResultsState: ResultsState = {\r\n  posts: [],\r\n  pageNumber: 0,\r\n  count: 0,\r\n};\r\n\r\nconst addPosts = (state: ResultsState, posts: PostDataClass[]) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = [...state.posts, ...posts];\r\n    draft.pageNumber = state.pageNumber + 1;\r\n  });\r\n\r\nconst setPosts = (\r\n  state: ResultsState,\r\n  posts: PostDataClass[],\r\n  postCount: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = posts;\r\n    draft.count = Number(postCount);\r\n    draft.pageNumber = 0;\r\n  });\r\n\r\nexport default (\r\n  state: ResultsState = initialResultsState,\r\n  action: AppAction\r\n): ResultsState => {\r\n  switch (action.type) {\r\n    case ADD_POSTS:\r\n      return addPosts(state, action.posts);\r\n    case SET_POSTS:\r\n      return setPosts(state, action.posts, action.count);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ADD_TAG, AppAction, REMOVE_TAG, ADD_ALIASES } from \"../actions\";\r\n\r\nexport interface TagsState {\r\n  active: SimpleMap<TagDataClass>;\r\n  aliases: SimpleMap<TagDataClass[]>;\r\n}\r\n\r\nexport const initialTagsState: TagsState = {\r\n  active: {},\r\n  aliases: {},\r\n};\r\n\r\nconst addTag = (state: TagsState, newTag: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    draft.active[newTag.name] = { ...state.active[newTag.name], ...newTag };\r\n  });\r\n\r\nconst addAliases = (\r\n  state: TagsState,\r\n  aliases: TagDataClass[],\r\n  forTag: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.aliases[forTag] = aliases;\r\n  });\r\n\r\nconst removeTag = (state: TagsState, tagToRemove: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    delete draft.active[tagToRemove.name];\r\n    delete draft.aliases[tagToRemove.name];\r\n  });\r\n\r\nexport default (\r\n  state: TagsState = initialTagsState,\r\n  action: AppAction\r\n): TagsState => {\r\n  switch (action.type) {\r\n    case ADD_TAG:\r\n      return addTag(state, action.tag);\r\n    case REMOVE_TAG:\r\n      return removeTag(state, action.tag);\r\n    case ADD_ALIASES:\r\n      return addAliases(state, action.aliases, action.forTag);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport misc from \"./misc\";\r\nimport preferences from \"./preferences\";\r\nimport results from \"./results\";\r\nimport tags from \"./tags\";\r\n\r\nexport default combineReducers({ tags, results, preferences, misc });\r\n","import { Modifier, SimpleMap } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { PreferencesState } from \"../redux/reducers/preferences\";\r\n\r\nconst SEARCH = \"r34_search\";\r\nconst ADD_TAG = \"r34_add_tag\";\r\n\r\ninterface SearchEvent {\r\n  id: typeof SEARCH;\r\n  payload: {\r\n    tags: string[];\r\n  };\r\n}\r\n\r\ninterface TagActivateEvent {\r\n  id: typeof ADD_TAG;\r\n  payload: {\r\n    name: string;\r\n    modifier: Modifier | undefined;\r\n  };\r\n}\r\n\r\nexport const searchEvent = (\r\n  activeTags: SimpleMap<TagDataClass>,\r\n  page_number: number,\r\n  preferences: PreferencesState\r\n) => ({\r\n  id: SEARCH,\r\n  payload: {\r\n    active_tags: Object.values(activeTags)\r\n      .map((tag) => `${tag.modifier}${tag.name}`)\r\n      .sort(),\r\n    page_number,\r\n    preferences,\r\n  },\r\n});\r\n\r\nexport const addTagEvent = (tag: TagDataClass) => ({\r\n  id: ADD_TAG,\r\n  payload: {\r\n    name: tag.name,\r\n    modifier: tag.modifier,\r\n  },\r\n});\r\n\r\nexport type EventType = SearchEvent | TagActivateEvent;\r\n","import { TagsState } from \"./reducers/tags\";\r\nimport { MiscState } from \"./reducers/misc\";\r\nimport { ResultsState } from \"./reducers/results\";\r\nimport { PreferencesState } from \"./reducers/preferences\";\r\n\r\ninterface RootState {\r\n  misc: MiscState;\r\n  results: ResultsState;\r\n  preferences: PreferencesState;\r\n  tags: TagsState;\r\n}\r\nexport const selectActiveTags = (state: RootState) => state.tags.active;\r\nexport const selectResults = (state: RootState) => state.results;\r\nexport const selectPosts = (state: RootState) => state.results.posts;\r\nexport const selectCount = (state: RootState) => state.results.count;\r\nexport const selectPageNumber = (state: RootState) => state.results.pageNumber;\r\nexport const selectPreferences = (state: RootState) => state.preferences;\r\nexport const selectInfinite = (state: RootState) => state.preferences.infinite;\r\nexport const selectOriginals = (state: RootState) =>\r\n  state.preferences.originals;\r\nexport const selectRated = (state: RootState) => state.preferences.rated;\r\nexport const selectRatedThreshold = (state: RootState) =>\r\n  state.preferences.ratedTreshold;\r\nexport const selectCookies = (state: RootState) => state.preferences.cookies;\r\nexport const selectActiveMenu = (state: RootState) => state.misc.activeMenu;\r\n\r\nexport const selectAliases = (state: RootState) =>\r\n  Object.values(state.tags.aliases).flat();\r\nexport const selectHasResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length !== 0;\r\nexport const selectOutOfResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length === state.results.count;\r\n\r\nexport const selectAliasesByTagName = (tagName: string) => (state: RootState) =>\r\n  state.tags.aliases[tagName];\r\n","import { ADD_TAG, AppAction, SET_POSTS, ADD_POSTS } from \"../actions\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport { addTagEvent, searchEvent } from \"../../analytics/events\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectPageNumber,\r\n  selectCookies,\r\n} from \"../selectors\";\r\nimport { MiddlewareAPI, Dispatch } from \"redux\";\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyBHdepwE7M4Byu2lFtX2s__9COcMdvXu7Q\",\r\n  authDomain: \"r34-react.firebaseapp.com\",\r\n  databaseURL: \"https://r34-react.firebaseio.com\",\r\n  projectId: \"r34-react\",\r\n  storageBucket: \"r34-react.appspot.com\",\r\n  messagingSenderId: \"844749417844\",\r\n  appId: \"1:844749417844:web:11fa1fda0e14f1ac2dd021\",\r\n  measurementId: \"G-27J3QXZ8YR\",\r\n};\r\n\r\nlet firebaseApp: firebase.app.App;\r\nlet analytics: firebase.analytics.Analytics;\r\n\r\nexport default (store: MiddlewareAPI<any>) => (next: Dispatch<AppAction>) => (\r\n  action: AppAction\r\n) => {\r\n  const cookies = selectCookies(store.getState());\r\n\r\n  if (cookies) {\r\n    if (!firebaseApp) {\r\n      firebaseApp = firebase.initializeApp(config);\r\n      analytics = firebaseApp.analytics();\r\n    }\r\n\r\n    if (action.type === ADD_TAG) {\r\n      const { id, payload } = addTagEvent(action.tag);\r\n      analytics.logEvent<typeof id>(id, payload);\r\n      console.log(\"EVENT:\", id, payload);\r\n    }\r\n\r\n    if (action.type === ADD_POSTS || action.type === SET_POSTS) {\r\n      const activeTags = selectActiveTags(store.getState());\r\n      const pageNumber = selectPageNumber(store.getState());\r\n      const preferences = selectPreferences(store.getState());\r\n      const { id, payload } = searchEvent(\r\n        activeTags,\r\n        action.type === SET_POSTS ? 0 : pageNumber + 1,\r\n        preferences\r\n      );\r\n      analytics.logEvent<typeof id>(id, payload);\r\n      console.log(\"EVENT:\", id, payload);\r\n    }\r\n  }\r\n\r\n  next(action);\r\n};\r\n","import TagDataClass from \"../data/Tag\";\r\nimport { SimpleMap } from \"../data/types\";\r\n\r\nexport const pageSize = 20;\r\nconst apiUrl1 = \"https://r34-json.herokuapp.com\";\r\nconst apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\n// Failover to apiUrl2\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm: string) {\r\n    const res = await fetch(\r\n      `${activeApi}/tags?limit=${pageSize}&name=${searchTerm}*&order_by=posts`\r\n    );\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags: SimpleMap<TagDataClass>, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tagName: string) {\r\n    const res = await fetch(`${activeApi}/alias/${tagName}`);\r\n\r\n    return await res.json();\r\n  },\r\n};\r\n\r\nfunction buildPostUrl(\r\n  page: number,\r\n  tags: SimpleMap<TagDataClass>,\r\n  minScore: number\r\n) {\r\n  const tagString = Object.values(tags)\r\n    .map(\r\n      (tag) =>\r\n        `${tag.modifier === \"-\" ? \"-\" : \"\"}${encodeURIComponent(tag.name)}`\r\n    )\r\n    .join(\"+\");\r\n\r\n  let url = `${activeApi}/posts?pid=${page}&limit=${pageSize}&tags=${tagString}`;\r\n\r\n  if (minScore > 0) {\r\n    url += `+${encodeURIComponent(\"score:>=\" + minScore)}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n","import { RatingType, PostType } from \"./types\";\r\nimport TagDataClass from \"./Tag\";\r\n\r\nexport default class PostDataClass {\r\n  id: number;\r\n\r\n  score: number;\r\n  rating: RatingType;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n\r\n  media_type: PostType;\r\n\r\n  thumbnail_src: string;\r\n  small_src: string;\r\n  big_src: string;\r\n\r\n  width: number;\r\n  height: number;\r\n\r\n  creator_id: number;\r\n  creator_url: string;\r\n\r\n  status: string;\r\n  parent_id: number;\r\n  has_children: boolean;\r\n  has_comments: boolean;\r\n  comments_url: string;\r\n  has_notes: boolean;\r\n  created_at: string;\r\n  change: string;\r\n\r\n  constructor(\r\n    id: number,\r\n    score: number,\r\n    rating: string,\r\n    source: string,\r\n    tags: TagDataClass[],\r\n    media_type: string,\r\n    media_src: any,\r\n    file_url: any,\r\n    thumbnail_src: string,\r\n    width: number,\r\n    height: number,\r\n    creator_id: number,\r\n    creator_url: string,\r\n    status: string,\r\n    parent_id: number,\r\n    has_children: boolean,\r\n    has_comments: boolean,\r\n    comments_url: string,\r\n    has_notes: boolean,\r\n    created_at: string,\r\n    change: string\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating as RatingType;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type as PostType;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","import { TagType, Modifier } from \"./types\";\r\n\r\nexport default class TagDataClass {\r\n  name: string;\r\n  count?: number | null;\r\n  types?: TagType[];\r\n  modifier?: Modifier;\r\n\r\n  constructor(\r\n    name: string,\r\n    types: TagType[] = [],\r\n    count: number | null = null,\r\n    modifier: Modifier = \"+\"\r\n  ) {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import PostDataClass from \"../data/Post\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { TagType, Modifier, RatingType } from \"../data/types\";\r\n\r\ninterface DirtyTag {\r\n  name: string;\r\n  types: string[];\r\n  count: string;\r\n  modifier: string;\r\n}\r\n\r\ninterface DirtyPost {\r\n  id: string;\r\n  type: string;\r\n  score: string;\r\n  rating: string;\r\n  source: string;\r\n  tags: string[];\r\n  file_url: string;\r\n  width: string;\r\n  height: string;\r\n  creator_id: string;\r\n  creator_url: string;\r\n  sample_url: string;\r\n  preview_url: string;\r\n  status: string;\r\n  parent_id: string;\r\n  has_children: string;\r\n  has_comments: string;\r\n  comments_url: string;\r\n  has_notes: string;\r\n  created_at: string;\r\n  change: string;\r\n}\r\n\r\nexport function prepareTag(dirtyTag: DirtyTag) {\r\n  const { name, types, count, modifier } = dirtyTag;\r\n\r\n  return new TagDataClass(\r\n    name,\r\n    types as TagType[],\r\n    Number(count),\r\n    modifier as Modifier\r\n  );\r\n}\r\n\r\nexport function preparePost(post: DirtyPost) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change,\r\n  } = post;\r\n  return new PostDataClass(\r\n    Number(id),\r\n    Number(score),\r\n    rating as RatingType,\r\n    source,\r\n    tags ? tags.map((t) => new TagDataClass(t)) : [],\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    Number(parent_id),\r\n    Boolean(has_children),\r\n    Boolean(has_comments),\r\n    comments_url,\r\n    Boolean(has_notes),\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import { MiddlewareAPI } from \"redux\";\r\nimport { Dispatch } from \"react\";\r\nimport {\r\n  AppAction,\r\n  GET_RESULTS,\r\n  GET_MORE_RESULTS,\r\n  addPosts,\r\n  setPosts,\r\n} from \"../actions\";\r\nimport api from \"../../misc/api\";\r\nimport { preparePost } from \"../../misc/prepare\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectPageNumber,\r\n  selectOutOfResults,\r\n} from \"../selectors\";\r\n\r\nexport default (store: MiddlewareAPI<any>) => (next: Dispatch<AppAction>) => (\r\n  action: AppAction\r\n) => {\r\n  if (action.type === GET_RESULTS) {\r\n    const activeTags = selectActiveTags(store.getState());\r\n    const { rated, ratedTreshold } = selectPreferences(store.getState());\r\n    api.getPosts(activeTags, 0, rated ? ratedTreshold : 0).then((res) => {\r\n      store.dispatch(setPosts(res.posts.map(preparePost), res.count));\r\n    });\r\n  }\r\n\r\n  const isOutOfResults = selectOutOfResults(store.getState());\r\n  if (action.type === GET_MORE_RESULTS && !isOutOfResults) {\r\n    const activeTags = selectActiveTags(store.getState());\r\n    const pageNumber = selectPageNumber(store.getState());\r\n    const { rated, ratedTreshold } = selectPreferences(store.getState());\r\n\r\n    api\r\n      .getPosts(activeTags, pageNumber + 1, rated ? ratedTreshold : 0)\r\n      .then((res) => {\r\n        store.dispatch(addPosts(res.posts.map(preparePost)));\r\n      });\r\n  }\r\n\r\n  next(action);\r\n};\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport rootReducer from \"./reducers\";\r\nimport eventLogging from \"./middleware/eventLogging\";\r\nimport apiRequests from \"./middleware/apiRequests\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nconst persistConfig = {\r\n  key: \"appstate\",\r\n  storage,\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = createStore(\r\n  persistedReducer,\r\n  composeWithDevTools(applyMiddleware(eventLogging, apiRequests))\r\n);\r\nexport const persistor = persistStore(store);\r\n","import React from \"react\";\r\nimport { ThemeType } from \"../misc/theme\";\r\nimport { useTheme } from \"styled-components\";\r\n\r\nexport default function R34Icon(props: { size: number }) {\r\n  const theme = useTheme() as ThemeType;\r\n\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={props.size}\r\n      height={props.size}\r\n      viewBox=\"0 0 12.7 12.7\"\r\n    >\r\n      <g transform=\"translate(0,-284.3)\">\r\n        <circle\r\n          id=\"path18\"\r\n          cx=\"6.3499999\"\r\n          cy=\"290.65002\"\r\n          fill=\"none\"\r\n          stroke={theme.colors.accentColor}\r\n          strokeWidth=\"0.50848764\"\r\n          strokeMiterlimit=\"4\"\r\n          strokeDasharray=\"none\"\r\n          strokeOpacity=\"1\"\r\n          r=\"6.0957561\"\r\n        />\r\n        <text\r\n          fontStyle=\"normal\"\r\n          fontWeight=\"normal\"\r\n          fontSize=\"8.3113203px\"\r\n          fontFamily=\"sansSerif\"\r\n          letterSpacing=\"0px\"\r\n          wordSpacing=\"0px\"\r\n          fill={theme.colors.accentColor}\r\n          fillOpacity=\"1\"\r\n          x=\"2.1363549\"\r\n          y=\"289.02704\"\r\n          id=\"text4533\"\r\n          transform=\"scale(0.98538224,1.0148346)\"\r\n        >\r\n          <tspan\r\n            id=\"tspan4531\"\r\n            x=\"2.1363549\"\r\n            y=\"289.02704\"\r\n            fontStyle=\"normal\"\r\n            fontVariant=\"normal\"\r\n            fontWeight=\"300\"\r\n            fontStretch=\"normal\"\r\n            fontFamily=\"Calibri\"\r\n            fill={theme.colors.accentColor}\r\n            fillOpacity=\"1\"\r\n          >\r\n            34\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport {\r\n  ButtonType,\r\n  TOPLEFT,\r\n  BLOCK,\r\n  INVISIBLE,\r\n  BOTTOMLEFT,\r\n  CENTER,\r\n  MODIFIER,\r\n  ADD,\r\n  MENU,\r\n} from \"../../data/types\";\r\n\r\nconst BasicButton = styled.button`\r\n  font-size: 14px;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst InvisibleButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    border: none;\r\n    border-radius: 1000px;\r\n    padding: 5px;\r\n    filter: ${props.theme.shadow.drop};\r\n    svg {\r\n      transition: all 0.2s ease-in-out;\r\n    }\r\n\r\n    :hover {\r\n      svg {\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n  `\r\n);\r\n\r\nconst MenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst ActiveMenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst BottomLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst CenterButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst RedButton = styled(BasicButton)(\r\n  (props) => css`\r\n    height: 32px;\r\n    font-size: 14px;\r\n    color: ${props.theme.colors.accentColor};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n\r\n    transition: border-color 0.4s ease-in-out;\r\n    transition: color 0.4s ease-in-out;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    :hover {\r\n      background-color: ${props.theme.colors.accentColor};\r\n      color: ${props.theme.colors.backgroundColor};\r\n    }\r\n\r\n    :active,\r\n    :focus {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n\r\n      border-color: ${props.theme.colors.backgroundColor2};\r\n      cursor: pointer;\r\n    }\r\n  `\r\n);\r\n\r\nexport const BlockButton = styled(RedButton)(\r\n  (props) => css`\r\n    width: 100%;\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n  `\r\n);\r\n\r\nexport const AddButton = styled(RedButton)(\r\n  (props) => css`\r\n    border-left-width: 0;\r\n    border-radius: 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius} 0;\r\n  `\r\n);\r\n\r\nexport const ModifierButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    min-width: 48px;\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-right-width: 0;\r\n    border-radius: ${props.theme.dimensions.borderRadius} 0 0\r\n      ${props.theme.dimensions.borderRadius};\r\n    font-weight: bold;\r\n  `\r\n);\r\n\r\nconst getButtonByType = (type: ButtonType, active: boolean) => {\r\n  switch (type) {\r\n    case INVISIBLE:\r\n      return InvisibleButton;\r\n    case BLOCK:\r\n      return BlockButton;\r\n    case TOPLEFT:\r\n      return TopLeftButton;\r\n    case BOTTOMLEFT:\r\n      return BottomLeftButton;\r\n    case CENTER:\r\n      return CenterButton;\r\n    case MODIFIER:\r\n      return ModifierButton;\r\n    case ADD:\r\n      return AddButton;\r\n    case MENU:\r\n      return active ? ActiveMenuButton : MenuButton;\r\n    default:\r\n      return RedButton;\r\n  }\r\n};\r\n\r\ninterface ButtonProps {\r\n  type: ButtonType;\r\n  children: JSX.Element | string;\r\n  onClick: MouseEventHandler;\r\n  active?: boolean;\r\n  disabled?: boolean;\r\n  label: string;\r\n}\r\n\r\nfunction Button(props: ButtonProps) {\r\n  const {\r\n    type,\r\n    children,\r\n    onClick,\r\n    active = false,\r\n    disabled = false,\r\n    label,\r\n  } = props;\r\n  const TypedButton = getButtonByType(type, active);\r\n\r\n  return (\r\n    <TypedButton onClick={onClick} disabled={disabled} aria-label={label}>\r\n      {children}\r\n    </TypedButton>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import styled from \"styled-components\";\r\n\r\nexport default styled.h2`\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\nexport const BigTitle = styled.h1`\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  margin: 0;\r\n`;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { HELP, MENU, SEARCH, SETTINGS } from \"../../data/types\";\r\nimport R34Icon from \"../../icons/R34Icon\";\r\nimport { setActiveMenu } from \"../../redux/actions\";\r\nimport { selectActiveMenu } from \"../../redux/selectors\";\r\nimport Button from \"../common/Button\";\r\nimport { BigTitle } from \"../common/Title\";\r\n\r\nconst HeaderWrapper = styled.header(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 32px;\r\n    margin: 0 ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst TitleBar = styled.div(\r\n  (props) => css`\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n    margin-bottom: ${props.theme.dimensions.bigSpacing};\r\n  `\r\n);\r\n\r\nconst MenuBar = styled.nav`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default function Header() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <HeaderWrapper>\r\n      <TitleBar>\r\n        <BigTitle>\r\n          <R34Icon size={32} />\r\n          <Divider />\r\n          <span style={{ marginTop: 2 }}>\r\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\r\n          </span>\r\n        </BigTitle>\r\n      </TitleBar>\r\n\r\n      <MenuBar>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SEARCH}\r\n          onClick={() => dispatch(setActiveMenu(SEARCH))}\r\n          label={SEARCH}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === HELP}\r\n          onClick={() => dispatch(setActiveMenu(HELP))}\r\n          label={HELP}\r\n        >\r\n          Help\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SETTINGS}\r\n          onClick={() => dispatch(setActiveMenu(SETTINGS))}\r\n          label={SETTINGS}\r\n        >\r\n          Settings\r\n        </Button>\r\n      </MenuBar>\r\n    </HeaderWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst FotterWrapper = styled.footer(\r\n  (props) => css`\r\n    display: grid;\r\n    grid-template-columns: 1fr 1px 1fr 1px 1fr;\r\n    justify-content: space-around;\r\n    padding: ${props.theme.dimensions.spacing};\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 20px;\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst CenteredA = styled.a`\r\n  text-align: center;\r\n`;\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <FotterWrapper>\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md\">\r\n        Report a bug\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react\">\r\n        Github\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md\">\r\n        Feature request\r\n      </CenteredA>\r\n    </FotterWrapper>\r\n  );\r\n}\r\n","import styled, { css } from \"styled-components\";\r\n\r\nexport default styled.div(\r\n  (props) => css`\r\n    padding: ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport const Line = styled.div(\r\n  (props) => css`\r\n    width: 100%;\r\n    height: 1px;\r\n    background: ${props.theme.misc.layer};\r\n  `\r\n);\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst Input = styled.input(\r\n  (props) => css`\r\n    width: 100%;\r\n    border: none;\r\n    outline: none;\r\n    background: none;\r\n    font-size: 14px;\r\n    border-top: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-bottom: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n  `\r\n);\r\n\r\ninterface TagInputProps {\r\n  value: string;\r\n  setValue: (newValue: string) => void;\r\n}\r\n\r\nexport default function TagInput(props: TagInputProps) {\r\n  const { value, setValue } = props;\r\n  return (\r\n    <Input\r\n      id=\"tag-input\"\r\n      value={value}\r\n      onChange={(event) => setValue(event.target.value)}\r\n      placeholder=\"Search for tags\"\r\n      aria-label=\"Search\"\r\n    />\r\n  );\r\n}\r\n","export function prettifyTagname(tagname: string) {\r\n  return tagname.replace(/_/g, \" \");\r\n}\r\n\r\nexport function normalizeTagname(tagname: string) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n","export const formatCount = (numberString: number) => {\r\n  const number = numberString;\r\n\r\n  if (number >= 1e6) {\r\n    return `${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n};\r\n\r\n/**\r\n * @param {String} sourceString\r\n */\r\nexport const formatSource = (sourceString: string) => {\r\n  if (\r\n    sourceString.includes(\"http:\") ||\r\n    sourceString.includes(\"https:\") ||\r\n    sourceString.includes(\"www.\") ||\r\n    sourceString.includes(\".com\")\r\n  ) {\r\n    let semiSanitized = sourceString\r\n      .replace(/https?:\\/\\//, \"\")\r\n      .replace(/ww[w\\d]\\./, \"\")\r\n      .replace(\".com\", \"\")\r\n      .replace(\".org\", \"\")\r\n      .replace(\".net\", \"\");\r\n\r\n    return semiSanitized.substring(0, semiSanitized.indexOf(\"/\"));\r\n  } else {\r\n    return sourceString;\r\n  }\r\n};\r\n","import React, { useState, useEffect, MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { ArrowIcon } from \"../../icons/Icons\";\r\nimport { prettifyTagname } from \"./tagUtils\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectActiveTags,\r\n  selectAliasesByTagName,\r\n} from \"../../redux/selectors\";\r\nimport { addAliases, removeTag, addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst dropdownBorderRadius = (collapsed: boolean, theme: ThemeType) =>\r\n  collapsed\r\n    ? theme.dimensions.borderRadius\r\n    : `${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius} 0 0`;\r\n\r\nconst switchingColors = (active: boolean, theme: ThemeType) => {\r\n  const fg = active ? theme.colors.backgroundColor : theme.colors.accentColor;\r\n  const bg = active ? theme.colors.accentColor : theme.colors.backgroundColor;\r\n\r\n  return css`\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${theme.colors.accentColor} ${theme.dimensions.borderWidth} solid;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    cursor: pointer;\r\n\r\n    :hover,\r\n    :focus,\r\n    :active {\r\n      border-color: ${theme.colors.backgroundColor2};\r\n      color: ${theme.colors.backgroundColor2};\r\n\r\n      i {\r\n        color: ${theme.colors.backgroundColor2};\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nexport const TagWrapper = styled.div(\r\n  (props: {\r\n    active: boolean;\r\n    collapsed: boolean;\r\n    onMouseLeave: MouseEventHandler;\r\n    theme: ThemeType;\r\n  }) =>\r\n    css`\r\n      display: inline-block;\r\n      padding: 0.25rem;\r\n      border-radius: ${dropdownBorderRadius(props.collapsed, props.theme)};\r\n      font-size: 14px;\r\n      line-height: 1.2;\r\n      vertical-align: baseline;\r\n      margin: ${props.theme.dimensions.spacing};\r\n      ${switchingColors(props.active, props.theme)}\r\n    `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left?: boolean; right?: boolean }) => css`\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface TagProps extends TagDataClass {\r\n  loadAliases: boolean;\r\n}\r\n\r\ntype TagLike = {\r\n  name: string;\r\n  posts: number;\r\n};\r\n\r\nfunction Tag(props: TagProps) {\r\n  const { name, count, modifier, types, loadAliases } = props;\r\n  const activeTags = useSelector(selectActiveTags);\r\n  const aliases = useSelector(selectAliasesByTagName(name));\r\n  const [collapsed, setCollapsed] = useState(true);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (activeTags[name])\r\n      api.getAliases(name).then((newAliases: TagLike[]) => {\r\n        newAliases.sort((a, b) => b.posts - a.posts);\r\n        const filtered = newAliases\r\n          .filter((alias) => !activeTags[alias.name])\r\n          .map((alias) => new TagDataClass(alias.name, [], alias.posts));\r\n        dispatch(addAliases(filtered, name));\r\n      });\r\n  }, [name, activeTags, dispatch]);\r\n\r\n  const isActive = Boolean(activeTags[name]);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={isActive}\r\n      collapsed={collapsed}\r\n      onMouseLeave={() => setCollapsed(true)}\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText name={name} count={count} modifier={modifier} types={types} />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={() => setCollapsed(!collapsed)}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, count }) => (\r\n              <Alias key={\"t_\" + name} name={name} count={count} />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nfunction TagText(props: TagDataClass) {\r\n  const { name, count, modifier, types } = props;\r\n  const dispatch = useDispatch();\r\n  const tagname = prettifyTagname(name);\r\n  const text = count ? `${tagname} (${formatCount(count)})` : tagname;\r\n  const activeTags = useSelector(selectActiveTags);\r\n\r\n  const onClick = () =>\r\n    activeTags[name]\r\n      ? dispatch(removeTag(new TagDataClass(name, types, count)))\r\n      : dispatch(addTag(new TagDataClass(name, types, count)));\r\n\r\n  return (\r\n    <span onClick={onClick} onKeyDown={(e) => e.keyCode === 32 && onClick()}>\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias(props: TagDataClass) {\r\n  const { name, count } = props;\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tag;\r\n","import React, { MouseEventHandler, memo } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { TagWrapper } from \"../components/tag/Tag\";\r\nimport { ThemeType } from \"../misc/theme\";\r\n\r\nexport const StyledIcon = styled.i(\r\n  (props) => css`\r\n    ${(props: { color: string; size: number; theme: ThemeType }) => `\r\n    color: ${props.color};\r\n    min-width: ${props.size}px;\r\n    height: ${props.size}px;\r\n\r\n    ${TagWrapper}:hover & {\r\n      color: ${props.theme.colors.accentColor};\r\n    }\r\n\r\n    ${TagWrapper}:active & ,  ${TagWrapper}:focus & {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n    }\r\n  `}\r\n  `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left: boolean; right: boolean }) => css`\r\n    line-height: 16px;\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface IconProps {\r\n  icon: string;\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nconst Icon = (props: IconProps) => {\r\n  const {\r\n    icon,\r\n    className = \"\",\r\n    color = \"black\",\r\n    size = 14,\r\n    onClick = () => {},\r\n    left = false,\r\n    right = false,\r\n  } = props;\r\n  return (\r\n    <IconWrapper onClick={onClick} left={left} right={right}>\r\n      <StyledIcon\r\n        className={`fas ${icon} ${className}`}\r\n        color={color}\r\n        size={size}\r\n      />\r\n    </IconWrapper>\r\n  );\r\n};\r\n\r\nexport const CharacterIcon = styled(Icon).attrs({\r\n  icon: \"fa-user\",\r\n})``;\r\n\r\nexport const ArtistIcon = styled(Icon).attrs({\r\n  icon: \"fa-pen\",\r\n})``;\r\n\r\nexport const CopyrightIcon = styled(Icon).attrs({\r\n  icon: \"fa-copyright\",\r\n})``;\r\n\r\nexport const PlusIcon = styled(Icon).attrs({\r\n  icon: \"fa-plus-circle\",\r\n})``;\r\n\r\nexport const MinusIcon = styled(Icon).attrs({\r\n  icon: \"fa-minus-circle\",\r\n})``;\r\n\r\nexport const CloseIcon = styled(Icon).attrs({\r\n  icon: \"fa-times\",\r\n})``;\r\n\r\nexport const ExpandIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-expand\",\r\n  })``\r\n);\r\n\r\nexport const ArrowIcon = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ExternalLinkIcon = styled(Icon).attrs({\r\n  icon: \"fa-external-link-alt\",\r\n})``;\r\n\r\nexport const SourceIcon = styled(Icon).attrs({\r\n  icon: \"fa-hashtag\",\r\n})``;\r\n\r\nexport const RatingIcon = styled(Icon).attrs({\r\n  icon: \"fa-registered\",\r\n})``;\r\n\r\nexport const HeartIcon = styled(Icon).attrs({\r\n  icon: \"fa-heart\",\r\n})``;\r\n\r\nexport const PlayIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-play\",\r\n  })``\r\n);\r\n\r\nexport const PauseIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-pause\",\r\n  })``\r\n);\r\n\r\nexport const ArrowUp = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ArrowDown = styled(Icon).attrs({\r\n  icon: \"fa-caret-up\",\r\n})``;\r\n","export const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport const VIDEO = \"video\";\r\n\r\nexport const NO_OP = () => {};\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\nimport { NO_OP } from \"../data/constants\";\r\n\r\ninterface TypeIconProps {\r\n  types?: string[];\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nexport default function TypeIcon(props: TypeIconProps) {\r\n  const { types = [], className = \"\", onClick = NO_OP } = props;\r\n  const interestingType = types.find((t) => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon className={className} onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon className={className} onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon className={className} onClick={onClick} left />;\r\n    default:\r\n      return <div className={className}></div>;\r\n  }\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { prettifyTagname } from \"../tag/tagUtils\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { TagType } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nfunction sizeAndPosition(tagSelector: HTMLDivElement | null) {\r\n  if (tagSelector) {\r\n    const { offsetTop, clientHeight, offsetLeft, clientWidth } = tagSelector;\r\n\r\n    return `\r\n      position: absolute;\r\n      top: ${offsetTop + clientHeight - 2}px;\r\n      left: ${offsetLeft}px;\r\n      width: ${clientWidth}px;`;\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nexport const ListWrapper = styled.div(\r\n  (props: { tagSelectorRef: HTMLDivElement | null; theme: ThemeType }) => css`\r\n    ${sizeAndPosition(props.tagSelectorRef)};\r\n    background: white;\r\n    box-sizing: border-box;\r\n    border: ${props.theme.dimensions.borderWidth}\r\n      ${props.theme.colors.accentColor} solid;\r\n    border-radius: 0 0 3px 3px;\r\n    color: black;\r\n    z-index: 1;\r\n  `\r\n);\r\n\r\ninterface DropdownListProps {\r\n  tagSelectorRef: HTMLDivElement | null;\r\n  entries: {\r\n    name: string;\r\n    posts: number;\r\n    types: TagType[];\r\n  }[];\r\n  onClick: (entry: TagDataClass) => void;\r\n}\r\n\r\nexport default function DropdownList(props: DropdownListProps) {\r\n  const { tagSelectorRef, entries, onClick } = props;\r\n\r\n  return entries && entries.length > 0 ? (\r\n    <ListWrapper tagSelectorRef={tagSelectorRef}>\r\n      {entries.map((entry) => (\r\n        <Entry\r\n          key={entry.name}\r\n          onClick={() => onClick(entry)}\r\n          {...entry}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  ) : null;\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  height: 28px;\r\n\r\n  > * {\r\n    margin: auto;\r\n  }\r\n\r\n  &:not(:last-child) {\r\n    border-bottom: 1px grey solid;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TypeWrapper = styled.span`\r\n  flex: 0 0 48px;\r\n  text-align: center;\r\n`;\r\n\r\ninterface EntryProps {\r\n  name: string;\r\n  posts: number;\r\n  types: TagType[];\r\n  onClick: MouseEventHandler;\r\n}\r\n\r\nconst Entry = (props: EntryProps) => {\r\n  const { name, posts, types, onClick } = props;\r\n\r\n  return (\r\n    <EntryWrapper onClick={onClick}>\r\n      <TypeWrapper>\r\n        <TypeIcon types={types} />\r\n      </TypeWrapper>\r\n\r\n      <span style={{ flexGrow: 1 }}>{prettifyTagname(name)}</span>\r\n      <span style={{ paddingRight: 5 }}>{formatCount(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport api from \"../../misc/api\";\r\nimport { prepareTag } from \"../../misc/prepare\";\r\nimport Button, { AddButton, ModifierButton } from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList from \"./DropdownList\";\r\nimport { normalizeTagname } from \"../tag/tagUtils\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagSelectorWrapper = styled.div(\r\n  (props: {\r\n    closed: boolean;\r\n    ref: (ref: HTMLInputElement) => void;\r\n    theme: ThemeType;\r\n  }) => css`\r\n    display: flex;\r\n    background: white;\r\n    ${props.closed\r\n      ? `border-radius: ${props.theme.dimensions.borderRadius};`\r\n      : `\r\n        border-radius: ${props.theme.dimensions.borderRadius} ${props.theme.dimensions.borderRadius} 0 0;\r\n\r\n        > ${AddButton} {\r\n          border-radius: 0 ${props.theme.dimensions.borderRadius} 0 0;\r\n        }\r\n\r\n        > ${ModifierButton} {\r\n          border-radius: ${props.theme.dimensions.borderRadius} 0 0 0;\r\n        }\r\n      `}\r\n  `\r\n);\r\n\r\nexport default function TagSelector() {\r\n  const dispatch = useDispatch();\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const [tagSelectorRef, setTagSelectorRef] = useState<HTMLDivElement | null>(\r\n    null\r\n  );\r\n\r\n  const activateTag = useCallback(\r\n    (suggestion) => {\r\n      dispatch(\r\n        addTag(\r\n          prepareTag({\r\n            name: suggestion.name,\r\n            modifier: modifier,\r\n            count: suggestion.posts,\r\n            types: suggestion.types,\r\n          })\r\n        )\r\n      );\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (value && value !== \"\")\r\n        api.getTags(normalizeTagname(value)).then((newSuggestions) => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 400);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [value]);\r\n\r\n  const onModifierClick = useCallback(\r\n    () => setModifier(modifier === \"+\" ? \"-\" : \"+\"),\r\n    [modifier, setModifier]\r\n  );\r\n\r\n  const onAddClick = useCallback(() => {\r\n    if (value && value.trim() !== \"\") {\r\n      const suggestion =\r\n        suggestions.find((s: { name: string }) => s.name === value) || {};\r\n      activateTag({ ...suggestion, name: value });\r\n    }\r\n  }, [value, activateTag, suggestions]);\r\n\r\n  return (\r\n    <TagSelectorWrapper\r\n      ref={setTagSelectorRef}\r\n      closed={suggestions.length === 0}\r\n    >\r\n      <Button type=\"modifier\" onClick={onModifierClick} label=\"Tag Modifier\">\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button type=\"add\" onClick={onAddClick} label=\"Add Tag\">\r\n        Add\r\n      </Button>\r\n      {suggestions.length > 0 && (\r\n        <DropdownList\r\n          tagSelectorRef={tagSelectorRef}\r\n          entries={suggestions}\r\n          onClick={(entry) => activateTag(entry)}\r\n        />\r\n      )}\r\n    </TagSelectorWrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst Wrapper = styled.div(\r\n  (props) => css`\r\n    border-radius: 30px;\r\n    width: 50px;\r\n    border: ${props.theme.dimensions.borderWidth} solid\r\n      ${props.theme.colors.accentColor};\r\n    background-color: ${props.theme.colors.backgroundColor};\r\n    transition: transform 0.4s ease-in-out;\r\n  `\r\n);\r\n\r\nconst Thumb = styled.div(\r\n  (props: { value: boolean; theme: ThemeType }) => css`\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: ${props.value\r\n      ? props.theme.colors.accentColor\r\n      : props.theme.colors.backgroundColor2};\r\n    border-radius: 50%;\r\n    transition: all 0.2s ease-in-out;\r\n    transform: translate(${props.value ? \"30px\" : \"0px\"});\r\n  `\r\n);\r\n\r\ninterface ToggleProps {\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function Toggle(props: ToggleProps) {\r\n  const { value, onToggle } = props;\r\n\r\n  return (\r\n    <Wrapper onClick={onToggle}>\r\n      <Thumb value={value} />\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Toggle from \"./Toggle\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n`;\r\n\r\nconst Label = styled.span(\r\n  (props) => css`\r\n    margin: auto;\r\n    margin-left: ${props.theme.dimensions.gutter};\r\n  `\r\n);\r\n\r\ninterface LabeledToggleProps {\r\n  children: JSX.Element | string;\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function LabeledToggle(props: LabeledToggleProps) {\r\n  const { children, value, onToggle } = props;\r\n\r\n  return (\r\n    <ToggleWrapper>\r\n      <Toggle value={value} onToggle={onToggle} />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport LabeledToggle from \"../common/LabeledToggle\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\nimport { setOption } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\nimport { INFINITE, RATED, RATEDTRESHOLD, ORIGINALS } from \"../../data/types\";\r\n\r\nconst OptionsWrapper = styled.div(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst StyledInput = styled.input(\r\n  (props: { value: number; theme: ThemeType }) => css`\r\n    background: none;\r\n    border: none;\r\n    outline: none;\r\n    color: ${props.theme.colors.accentColor};\r\n    max-height: 16px;\r\n    width: ${0.57 * String(props.value).length}em;\r\n    text-align: right;\r\n    font-size: 14px;\r\n    margin: -1px 0.2em 0 0.2em;\r\n\r\n    ::-webkit-inner-spin-button,\r\n    ::-webkit-outer-spin-button {\r\n      -webkit-appearance: none;\r\n      margin: 0;\r\n    }\r\n    -moz-appearance: textfield;\r\n  `\r\n);\r\n\r\nexport default function Options() {\r\n  const dispatch = useDispatch();\r\n  const { infinite, rated, ratedTreshold, originals } = useSelector(\r\n    selectPreferences\r\n  );\r\n\r\n  const [ratedInputValue, setRatedInputValue] = useState(ratedTreshold);\r\n\r\n  return (\r\n    <OptionsWrapper>\r\n      <LabeledToggle\r\n        value={infinite}\r\n        onToggle={() => dispatch(setOption(INFINITE, !infinite))}\r\n      >\r\n        Infinite Scroll\r\n      </LabeledToggle>\r\n      <LabeledToggle\r\n        value={rated}\r\n        onToggle={() => dispatch(setOption(RATED, !rated))}\r\n      >\r\n        {rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            Above\r\n            <StyledInput\r\n              type=\"number\"\r\n              value={ratedInputValue}\r\n              onChange={(event) =>\r\n                setRatedInputValue(Number(event.target.value))\r\n              }\r\n              onBlur={() => dispatch(setOption(RATEDTRESHOLD, ratedInputValue))}\r\n            />\r\n            likes\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </LabeledToggle>\r\n\r\n      <LabeledToggle\r\n        value={originals}\r\n        onToggle={() => dispatch(setOption(ORIGINALS, !originals))}\r\n      >\r\n        Load Original Sizes\r\n      </LabeledToggle>\r\n    </OptionsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport Tag from \"./Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagListWrapper = styled.div(\r\n  (props: { padding: boolean; theme: ThemeType }) => css`\r\n    display: inline-flex;\r\n    flex-wrap: wrap;\r\n    margin: calc(\r\n      ${props.padding ? props.theme.dimensions.gutter : \"0px\"} -\r\n        ${props.theme.dimensions.spacing}\r\n    );\r\n  `\r\n);\r\n\r\ninterface TagListProps {\r\n  tags: SimpleMap<TagDataClass>;\r\n  loadAliases?: boolean;\r\n  padding?: boolean;\r\n}\r\n\r\nexport default function TagList(props: TagListProps) {\r\n  const { tags, loadAliases = false, padding = false } = props;\r\n\r\n  return (\r\n    <div>\r\n      <TagListWrapper padding={padding}>\r\n        {Object.entries(tags).map(([key, tag]) => (\r\n          <Tag key={key} {...tag} loadAliases={loadAliases} />\r\n        ))}\r\n      </TagListWrapper>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport Options from \"../components/features/Options\";\r\nimport TagList from \"../components/tag/TagList\";\r\n\r\nexport default function Help() {\r\n  return (\r\n    <>\r\n      <Title>Help</Title>\r\n      <Surface>\r\n        <Title>Searching for Tags</Title>\r\n        <Line />\r\n        <TagSelector />\r\n        <Line />\r\n        <p>\r\n          You can use the Tag Selector to look for tags you like.The Tag\r\n          Selector has 4 parts.\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            The modifier (left) determines wether posts must match a tag or not.\r\n            Putting \"-\" will hide all posts with this tag\r\n          </li>\r\n          <li>\r\n            The Search Box (center) allows you to search for tags. As soon as\r\n            you start typing the Tag Selector will show you relevant tags to\r\n            choose from (4).\r\n          </li>\r\n          <li>\r\n            The Add Button (right) Allows you to add any tag to the current\r\n            filter. Usefull when using wildcards.\r\n          </li>\r\n          <li>\r\n            The Tag Dropdown (left) automatically shows tags that start with\r\n            your input. It also includes The number of posts tagged, to allow\r\n            you to weigh tags against each other.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Options</Title>\r\n        <Line />\r\n        <Options />\r\n        <Line />\r\n        <p>\r\n          Options allow you to customize your experience in various ways. There\r\n          are 3 options available\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            Infinite Scrolling automatically loads new posts when you get close\r\n            to the bottom of the page.\r\n          </li>\r\n          <li>\r\n            Only show Rated posts filters out posts below the specified amount\r\n            of posts.\r\n          </li>\r\n          <li>\r\n            Load original sizes always loads the highest quality of an image.\r\n            This can easily cause extreme data consumption. Don't use with\r\n            mobile data.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Tags</Title>\r\n        <Line />\r\n        <TagList\r\n          tags={{\r\n            \"Tag 1\": { name: \"Tag 1\" },\r\n            \"Tag 2\": { name: \"Tag 2\", types: [\"character\"] },\r\n            \"Tag 3\": {\r\n              name: \"Tag 3\",\r\n              modifier: \"-\",\r\n              types: [\"copyright\"],\r\n              count: 1020,\r\n            },\r\n          }}\r\n        />\r\n        <Line />\r\n        <p>\r\n          This whole application is based on tags. Every Post has multiple tags.\r\n          Usually you can enable/disable a tag just by tapping it. If a tag is\r\n          red it means its active. The icons next to the name show what type of\r\n          tag it is. Not every tag has a type. The number on the right shows how\r\n          many posts there are with that tag.\r\n        </p>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BlockButton } from \"../components/common/Button\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport Title from \"../components/common/Title\";\r\nimport { reset } from \"../redux/actions\";\r\n\r\nexport default function Settings() {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <>\r\n      <Title>Settings</Title>\r\n      <Surface>\r\n        <Title>General</Title>\r\n        <p>nothing yet</p>\r\n        <Line />\r\n        <Title>Developer</Title>\r\n        <BlockButton onClick={() => dispatch(reset())}>\r\n          Reset Application\r\n        </BlockButton>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BLOCK } from \"../../data/types\";\r\nimport { getResults } from \"../../redux/actions\";\r\nimport Button from \"../common/Button\";\r\n\r\nexport default function SearchButton() {\r\n  const dispatch = useDispatch();\r\n\r\n  const search = useCallback(() => {\r\n    dispatch(getResults());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Button type={BLOCK} onClick={search} label=\"Search\">\r\n      Search\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveTags } from \"../../redux/selectors\";\r\nimport TagList from \"../tag/TagList\";\r\n\r\nexport default function ActiveTags() {\r\n  const activeTags = useSelector(selectActiveTags);\r\n\r\n  return Object.keys(activeTags).length > 0 ? (\r\n    <TagList tags={activeTags} loadAliases />\r\n  ) : null;\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport Options from \"./Options\";\r\nimport Title from \"../common/Title\";\r\nimport Surface from \"../common/Surface\";\r\nimport SearchButton from \"./SearchButton\";\r\nimport ActiveTags from \"./ActiveTags\";\r\n\r\nconst ConfigWrapper = styled.section(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function Config() {\r\n  return (\r\n    <ConfigWrapper>\r\n      <Title>\r\n        <label htmlFor=\"tag-input\">Search</label>\r\n      </Title>\r\n      <Surface>\r\n        <TagSelector />\r\n        <ActiveTags />\r\n        <Options />\r\n        <SearchButton />\r\n      </Surface>\r\n    </ConfigWrapper>\r\n  );\r\n}\r\n","import { RatingType } from \"../../../data/types\";\r\nimport React from \"react\";\r\nimport { RatingIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: RatingType }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {props.value[0].toUpperCase()}\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { HeartIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: number }) => (\r\n  <span>\r\n    {props.value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { formatSource } from \"../../../misc/formatting\";\r\nimport { ExternalLinkIcon, SourceIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: string }) =>\r\n  props.value.startsWith(\"http\") ? (\r\n    <a\r\n      href={props.value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      {formatSource(props.value)}\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {props.value}\r\n    </span>\r\n  );\r\n","import React, { useMemo } from \"react\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport TagList, { TagListWrapper } from \"../tag/TagList\";\r\nimport { RatingType } from \"../../data/types\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { listToMap } from \"../../data/utils\";\r\nimport Rating from \"./widgets/Rating\";\r\nimport Score from \"./widgets/Score\";\r\nimport Source from \"./widgets/Source\";\r\n\r\nconst fold = keyframes`\r\n  from {\r\n    max-height: 0px;\r\n  }\r\n\r\n  to {\r\n    max-height: 1500px;\r\n  }\r\n`;\r\n\r\nconst DetailsWrapper = styled.div(\r\n  (props) => css`\r\n    > ${TagListWrapper} {\r\n      padding: ${props.theme.dimensions.spacing};\r\n    }\r\n    max-height: unset;\r\n    animation: ${fold} 0.4s ease-in;\r\n  `\r\n);\r\n\r\nconst Bar = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    background: ${props.theme.misc.layer};\r\n    padding: ${props.theme.dimensions.spacing};\r\n    border-radius: 0 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius};\r\n    ${props.theme.shadow.box};\r\n\r\n    > span,\r\n    > a {\r\n      margin: ${props.theme.dimensions.spacing};\r\n      line-height: 1rem;\r\n      height: 1rem;\r\n    }\r\n  `\r\n);\r\n\r\ninterface DetailsProps {\r\n  rating: RatingType;\r\n  score: number;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n}\r\n\r\nexport default function Details(props: DetailsProps) {\r\n  const { rating, score, source, tags } = props;\r\n  const tagsForRendering = useMemo(() => listToMap(tags, \"name\"), [tags]);\r\n\r\n  return (\r\n    <DetailsWrapper>\r\n      <Bar>\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList tags={tagsForRendering} padding loadAliases={false} />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n","import { SimpleMap } from \"./types\";\r\n\r\nexport const listToMap = <T>(list: T[], keyProp: string): SimpleMap<T> => {\r\n  return list.reduce((result: SimpleMap<T>, current: any) => {\r\n    result[current[keyProp]] = current;\r\n    return result;\r\n  }, {});\r\n};\r\n","import React, { MouseEventHandler, useState } from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, PlayIcon, PauseIcon } from \"../../icons/Icons\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport { NO_OP } from \"../../data/constants\";\r\n\r\nconst fade = keyframes`\r\n  from {\r\n    opacity: 1;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div(\r\n  (props: { isVisible: boolean }) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    ${!props.isVisible\r\n      ? css`\r\n          opacity: 0;\r\n          animation: ${fade} 0.4s ease-in-out;\r\n        `\r\n      : \"\"};\r\n  `\r\n);\r\n\r\nconst ProgressBar = styled.div(\r\n  (props) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    height: 5px;\r\n    background-color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\ninterface OverlayProps {\r\n  onFullscreen?: MouseEventHandler;\r\n  togglePlay?: MouseEventHandler;\r\n  isPaused?: boolean;\r\n  isPlayable: boolean;\r\n  currentTime?: number;\r\n  duration?: number;\r\n}\r\n\r\nfunction Overlay(props: OverlayProps) {\r\n  const {\r\n    onFullscreen = NO_OP,\r\n    togglePlay = NO_OP,\r\n    isPaused = true,\r\n    isPlayable,\r\n    currentTime,\r\n    duration,\r\n  } = props;\r\n\r\n  const [isVisible, setVisible] = useState(false);\r\n\r\n  return (\r\n    <Wrapper\r\n      isVisible={isPaused || isVisible}\r\n      onClick={() => setVisible(!isVisible)}\r\n    >\r\n      {onFullscreen && (\r\n        <Button type=\"topLeft\" onClick={onFullscreen} label=\"Open Fullscreen\">\r\n          <ExpandIcon color=\"white\" />\r\n        </Button>\r\n      )}\r\n\r\n      {isPlayable && (\r\n        <>\r\n          <Button type=\"center\" onClick={togglePlay} label=\"Play/Pause\">\r\n            {isPaused ? (\r\n              <PlayIcon color=\"white\" size={50} />\r\n            ) : (\r\n              <PauseIcon color=\"white\" size={50} />\r\n            )}\r\n          </Button>\r\n          {!!duration && !!currentTime && (\r\n            <ProgressBar\r\n              style={{ width: `${(currentTime / duration) * 100}%` }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nOverlay.defaultProps = {\r\n  onFullscreen: null,\r\n  togglePlay: NO_OP,\r\n  isPaused: true,\r\n  isPlayable: false,\r\n  currentTime: 0,\r\n  duration: null,\r\n};\r\n\r\nexport default Overlay;\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\nimport { openFullscreen } from \"./utils\";\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface VideoProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n}\r\n\r\nexport default function Video(props: VideoProps) {\r\n  const { src, thumbnail_src } = props;\r\n\r\n  const [videoRef, setVideoRef] = useState<HTMLVideoElement | null>(null);\r\n\r\n  const [, setTime] = useState(Date.now());\r\n  const [intervalId, setIntervalId] = useState(0);\r\n\r\n  const play = useCallback(() => {\r\n    videoRef && videoRef.play();\r\n\r\n    // ~30 fps\r\n    const id = setInterval(() => {\r\n      setTime(Date.now());\r\n    }, 34);\r\n\r\n    setIntervalId(id);\r\n  }, [videoRef]);\r\n\r\n  const pause = useCallback(() => {\r\n    videoRef && videoRef.pause();\r\n    clearInterval(intervalId);\r\n    setIntervalId(-1);\r\n  }, [videoRef, intervalId]);\r\n\r\n  const onFullscreen = useCallback(() => videoRef && openFullscreen(videoRef), [\r\n    videoRef,\r\n  ]);\r\n\r\n  const togglePlay = useCallback(\r\n    (event) => {\r\n      event.stopPropagation();\r\n      videoRef && (videoRef.paused ? play() : pause());\r\n    },\r\n    [videoRef, play, pause]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <FlexVideo\r\n        controls={false}\r\n        loop\r\n        src={src}\r\n        poster={thumbnail_src}\r\n        preload=\"metadata\"\r\n        ref={setVideoRef}\r\n      />\r\n      <Overlay\r\n        isPaused={videoRef ? videoRef.paused : true}\r\n        currentTime={videoRef ? videoRef.currentTime : undefined}\r\n        duration={videoRef ? videoRef.duration : undefined}\r\n        onFullscreen={onFullscreen}\r\n        togglePlay={togglePlay}\r\n        isPlayable\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { PostType, VIDEO, GIF, PICTURE } from \"../../data/types\";\r\n\r\nexport const openFullscreen = (elem: HTMLVideoElement) => {\r\n  elem.requestFullscreen();\r\n};\r\n\r\nexport const getMediaType = (type: PostType, src: string) => {\r\n  if (type === VIDEO) {\r\n    return VIDEO;\r\n  }\r\n\r\n  // can't use .endsWith because of queryString\r\n  if (src.includes(\".gif\")) {\r\n    return GIF;\r\n  }\r\n\r\n  return PICTURE;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface GifProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n}\r\n\r\nexport default function Gif(props: GifProps) {\r\n  const { src, thumbnail_src } = props;\r\n\r\n  const [isPaused, setPaused] = useState(true);\r\n  const usedSource = isPaused ? thumbnail_src : src;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={usedSource} alt={usedSource} />\r\n      <Overlay\r\n        isPlayable\r\n        isPaused={isPaused}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          setPaused(!isPaused);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface PictureProps {\r\n  src: string;\r\n}\r\n\r\nexport default function Picture(props: PictureProps) {\r\n  const { src } = props;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={src} alt={src} />\r\n      <Overlay isPlayable={false} />\r\n    </>\r\n  );\r\n}\r\n","import React, { MouseEventHandler, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Video from \"./Video\";\r\nimport Gif from \"./Gif\";\r\nimport Picture from \"./Picture\";\r\nimport { VIDEO, GIF } from \"../../data/constants\";\r\nimport { getMediaType } from \"./utils\";\r\nimport { PostType } from \"../../data/types\";\r\n\r\nconst PlayerWrapper = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\ninterface PlayerProps {\r\n  type: PostType;\r\n  src: string;\r\n  thumbnail_src: string;\r\n  toggleDetails: MouseEventHandler;\r\n}\r\n\r\nconst getMedia = (type: PostType, src: string) => {\r\n  switch (getMediaType(type, src)) {\r\n    case VIDEO:\r\n      return Video;\r\n    case GIF:\r\n      return Gif;\r\n    default:\r\n      return Picture;\r\n  }\r\n};\r\n\r\nexport default function Player(props: PlayerProps) {\r\n  const { toggleDetails, type, src, thumbnail_src } = props;\r\n\r\n  const media = useMemo(() => {\r\n    const MediaComponent = getMedia(type, src);\r\n    return <MediaComponent src={src} thumbnail_src={thumbnail_src} />;\r\n  }, [type, src, thumbnail_src]);\r\n\r\n  return <PlayerWrapper onClick={toggleDetails}>{media}</PlayerWrapper>;\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Details from \"./Details\";\r\nimport Player from \"../player/Player\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectOriginals } from \"../../redux/selectors\";\r\nimport PostDataClass from \"../../data/Post\";\r\n\r\nconst PostWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n    overflow: hidden;\r\n    margin-bottom: ${props.theme.dimensions.bigSpacing};\r\n    box-sizing: border-box;\r\n  `\r\n);\r\n\r\nexport function getCorrectSource(\r\n  loadOriginal: boolean,\r\n  big_src: string,\r\n  small_src: string,\r\n  id: number\r\n) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post(props: PostDataClass) {\r\n  const {\r\n    id,\r\n    media_type,\r\n    small_src,\r\n    big_src,\r\n    thumbnail_src,\r\n    rating,\r\n    score,\r\n    source,\r\n    tags,\r\n  } = props;\r\n  const originals = useSelector(selectOriginals);\r\n  const media_src = getCorrectSource(originals, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  const toggleDetails = useCallback(() => setCollapsed(!collapsed), [\r\n    setCollapsed,\r\n    collapsed,\r\n  ]);\r\n\r\n  return (\r\n    <PostWrapper>\r\n      <Player\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        toggleDetails={toggleDetails}\r\n      />\r\n      {!collapsed && (\r\n        <Details rating={rating} score={score} source={source} tags={tags} />\r\n      )}\r\n    </PostWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Post from \"./Post\";\r\nimport PostDataClass from \"../../data/Post\";\r\n\r\nconst PostListWrapper = styled.div``;\r\n\r\ninterface PostListProps {\r\n  posts: PostDataClass[];\r\n}\r\n\r\nexport default function PostList(props: PostListProps) {\r\n  const { posts } = props;\r\n\r\n  return (\r\n    <PostListWrapper>\r\n      {posts.map((post) => {\r\n        return <Post key={post.id} {...post} />;\r\n      })}\r\n    </PostListWrapper>\r\n  );\r\n}\r\n","import React, { useMemo, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  selectAliases,\r\n  selectInfinite,\r\n  selectOutOfResults,\r\n} from \"../../redux/selectors\";\r\nimport { SimpleMap, BLOCK } from \"../../data/types\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport Button from \"../common/Button\";\r\nimport Surface, { Line } from \"../common/Surface\";\r\nimport Title from \"../common/Title\";\r\nimport TagList from \"../tag/TagList\";\r\nimport { getMoreResults } from \"../../redux/actions\";\r\nimport outOfResultsPicture from \"../../icons/OutOfResults.png\";\r\n\r\nlet concurrencyLock = true;\r\n\r\nconst lock = () => {\r\n  concurrencyLock = false;\r\n};\r\n\r\nconst unlock = () => {\r\n  concurrencyLock = true;\r\n};\r\n\r\nfunction hasReachedEndOfPage() {\r\n  return (\r\n    window.innerHeight + document.documentElement.scrollTop >=\r\n    document.documentElement.scrollHeight - window.innerHeight\r\n  );\r\n}\r\n\r\nexport default function LoadMore() {\r\n  const dispatch = useDispatch();\r\n  const aliases = useSelector(selectAliases);\r\n  const infinite = useSelector(selectInfinite);\r\n\r\n  const isOutOfResults = useSelector(selectOutOfResults);\r\n\r\n  const aliasesForRendering = useMemo(\r\n    () =>\r\n      aliases.reduce((result: SimpleMap<TagDataClass>, alias) => {\r\n        result[alias.name] = alias;\r\n        return result;\r\n      }, {}),\r\n    [aliases]\r\n  );\r\n\r\n  const loadMore = useCallback(() => {\r\n    if (concurrencyLock && !isOutOfResults) {\r\n      lock();\r\n      setTimeout(() => unlock(), 1000);\r\n      dispatch(getMoreResults());\r\n    }\r\n  }, [dispatch, isOutOfResults]);\r\n\r\n  window.onscroll = useCallback(() => {\r\n    if (infinite && hasReachedEndOfPage()) {\r\n      loadMore();\r\n    }\r\n  }, [loadMore, infinite]);\r\n\r\n  return (\r\n    <>\r\n      {!infinite && !isOutOfResults && (\r\n        <Button type={BLOCK} onClick={loadMore} label=\"Load More\">\r\n          Load More\r\n        </Button>\r\n      )}\r\n\r\n      {isOutOfResults && (\r\n        <Surface>\r\n          <img\r\n            src={outOfResultsPicture}\r\n            alt={outOfResultsPicture}\r\n            style={{ width: \"100%\" }}\r\n          />\r\n          <Line />\r\n          <Title>You have reached the end!</Title>\r\n          <p style={{ textAlign: \"center\" }}>Go look for something else!</p>\r\n          {aliases.length > 0 && (\r\n            <>\r\n              <p style={{ textAlign: \"center\" }}>How about some of these?</p>\r\n              <TagList tags={aliasesForRendering} padding />\r\n            </>\r\n          )}\r\n        </Surface>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { selectCount, selectPosts } from \"../../redux/selectors\";\r\nimport Title from \"../common/Title\";\r\nimport PostList from \"../post/PostList\";\r\nimport LoadMore from \"./LoadMore\";\r\n\r\nconst ResultsWrapper = styled.section(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function Results() {\r\n  const posts = useSelector(selectPosts);\r\n  const count = useSelector(selectCount);\r\n\r\n  return (\r\n    <ResultsWrapper className=\"results\">\r\n      <Title>{formatCount(count)} results</Title>\r\n      <PostList posts={posts} />\r\n      <LoadMore />\r\n    </ResultsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Config from \"../components/features/Config\";\r\nimport Results from \"../components/features/Results\";\r\nimport { selectHasResults } from \"../redux/selectors\";\r\n\r\nexport default function Search() {\r\n  const hasResults = useSelector(selectHasResults);\r\n\r\n  return (\r\n    <>\r\n      <Config />\r\n      {hasResults && <Results />}\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Button from \"../common/Button\";\r\nimport { RED } from \"../../data/types\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { allowCookiesAction } from \"../../redux/actions\";\r\n\r\nconst CookieWrapper = styled.div(\r\n  (props) => css`\r\n    position: fixed;\r\n    display: flex;\r\n    bottom: 0;\r\n    bottom: left;\r\n    width: 100%;\r\n    color: ${props.theme.colors.text};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    justify-content: space-between;\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n\r\n    span {\r\n      margin: auto 0;\r\n      margin-left: ${props.theme.dimensions.gutter};\r\n    }\r\n\r\n    button {\r\n      margin-right: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function CookieConfirmation() {\r\n  const dispatch = useDispatch();\r\n\r\n  const onClick = useCallback(() => {\r\n    dispatch(allowCookiesAction());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <CookieWrapper>\r\n      <span>This website uses cookies.</span>\r\n      <Button type={RED} onClick={onClick} label=\"Allow Cookies\">\r\n        Cool\r\n      </Button>\r\n    </CookieWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Header from \"./components/features/Header\";\r\nimport Footer from \"./components/features/Footer\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { MenuType } from \"./data/types\";\r\nimport Help from \"./pages/Help\";\r\nimport Settings from \"./pages/Settings\";\r\nimport Search from \"./pages/Search\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveMenu, selectCookies } from \"./redux/selectors\";\r\nimport CookieConfirmation from \"./components/features/CookieConfirmation\";\r\n\r\nconst Main = styled.main(\r\n  (props) => css`\r\n    flex-grow: 1;\r\n    align-self: strech;\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 0 16px;\r\n    max-width: 1000px;\r\n    margin: auto;\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst AppWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: strech;\r\n    min-height: 100%;\r\n    background: ${props.theme.colors.backgroundColor};\r\n    color: ${props.theme.colors.backgroundColor2};\r\n\r\n    font-size: 14px;\r\n\r\n    a {\r\n      color: ${props.theme.colors.accentColor};\r\n      text-decoration: none;\r\n    }\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nfunction getActivePage(activeMenu: MenuType) {\r\n  switch (activeMenu) {\r\n    case \"help\":\r\n      return <Help />;\r\n    case \"settings\":\r\n      return <Settings />;\r\n    case \"search\":\r\n    default:\r\n      return <Search />;\r\n  }\r\n}\r\n\r\nexport default function AppContent() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const activePage = getActivePage(activeMenu);\r\n  const cookies = useSelector(selectCookies);\r\n\r\n  return (\r\n    <AppWrapper>\r\n      <Header />\r\n      <Main>{activePage}</Main>\r\n      <Footer />\r\n      {!cookies && <CookieConfirmation />}\r\n    </AppWrapper>\r\n  );\r\n}\r\n","const theme = {\r\n  dimensions: {\r\n    borderRadius: \"3px\",\r\n    borderWidth: \"2px\",\r\n\r\n    spacing: \"4px\",\r\n    bigSpacing: \"8px\",\r\n    appMargin: \"16px\",\r\n    gutter: \"8px\",\r\n  },\r\n  colors: {\r\n    accentColor: \"crimson\",\r\n    hoverAccent: \"crimson\",\r\n    backgroundColor: \"#121212\",\r\n    backgroundColor2: \"#fff\",\r\n  },\r\n  shadow: {\r\n    box: \"box-shadow: 0 0 8px #000\",\r\n    drop: \"drop-shadow(0 0 4px #000)\",\r\n  },\r\n  timings: {\r\n    transistionTime: \"0.2s\",\r\n  },\r\n  misc: {\r\n    layer:\r\n      \"#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.2s ease-in-out\",\r\n  },\r\n};\r\n\r\nexport default theme;\r\n\r\nexport type ThemeType = typeof theme;\r\n","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store, persistor } from \"./redux/store\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport AppContent from \"./AppContent\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport theme from \"./misc/theme\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <ThemeProvider theme={theme}>\r\n          <AppContent />\r\n        </ThemeProvider>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"app-root\"));\r\n"],"sourceRoot":""}