{"version":3,"sources":["hooks/useAppState.js","hooks/useLocalStorage.js","components/common/Button.jsx","misc/style.js","icons/Icons.jsx","components/post/Media.jsx","pages/Reader.jsx","misc/api.js","data/post.js","data/tag.js","misc/prepare.js","components/tagSelector/TagInput.jsx","icons/TypeIcon.jsx","misc/numberFormatting.js","components/tagSelector/DropdownList.jsx","components/tagSelector/TagSelector.jsx","components/tag/Tag.jsx","components/tag/TagList.jsx","components/common/Toggle.jsx","components/features/Options.jsx","components/features/Config.jsx","components/post/Details.jsx","components/post/Post.jsx","components/post/PostList.jsx","components/features/Results.jsx","pages/Search.jsx","pages/Main.jsx","pages/Help.jsx","pages/NotFound.jsx","App.js","serviceWorker.js","index.js"],"names":["reducer","state","action","type","addTag","tag","removeTag","toggleTag","addPosts","posts","setPosts","count","setOption","key","value","setFocusedPost","id","undefined","Error","findTag","tags","tagToFind","findIndex","name","newTag","produce","draft","tagIndex","tagToRemove","splice","tagToToggle","results","page","postCount","options","context","focusedPost","initialState","infinite","rated","originals","useAppState","stateString","localStorage","getItem","JSON","parse","newState","setItem","stringify","useLocalStorage","cache","setCache","useReducer","dispatch","useEffect","InvisibleButton","styled","button","TopLeftButton","RedButton","BlockButton","AddButton","ModifierButton","Button","Btn","children","onClick","disabled","StyledIcon","i","color","size","IconWrapper","span","left","right","Icon","className","icon","CharacterIcon","props","ArtistIcon","CopyrightIcon","PlusIcon","MinusIcon","CloseIcon","ExpandIcon","ArrowIcon","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","defaultProps","FlexImage","img","FlexVideo","video","Media","src","thumbnail_src","isFullscreen","onFullscreen","useState","hasMoved","setMoved","onMove","useCallback","onRelease","event","controls","loop","alt","poster","preload","onTouchMove","onTouchEnd","ReaderWrapper","div","Overlay","HiddenImage","Reader","postIndex","p","big_src","media_type","prevSrc","nextSrc","length","prev","next","pageSize","activeApi","fetch","catch","getTags","searchTerm","res","json","getPosts","pageNumber","minScore","buildPostUrl","getAliases","url","map","t","modifier","encodeURIComponent","join","Post","score","rating","source","media_src","file_url","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","this","small_src","Tag","types","obj","Number","prepareTag","post","sample_url","preview_url","preparePost","Input","input","TagInput","setValue","onChange","e","target","placeholder","TypeIcon","find","match","format","numberString","number","toFixed","ListWrapper","inputRef","getBoundingClientRect","top","clientHeight","clientWidth","EntryWrapper","EntryType","Entry","style","flexGrow","paddingRight","DropdownList","entries","entry","Wrapper","closed","TagSelector","setInputRef","setModifier","suggestions","setSuggestions","suggestion","prepare","handle","setTimeout","tagname","api","toLowerCase","replace","then","newSuggestions","clearTimeout","ref","s","TagWrapper","collapsed","active","bg","activeTags","loadAliases","aliases","setAliases","setCollapsed","some","newAliases","sort","a","b","filter","alias","showAliases","onMouseLeave","TagText","Alias","text","TagList","onItemClick","onItemItemClick","ToggleWrapper","label","Label","Toggle","initial","defaultChecked","icons","checked","unchecked","StyledInput","String","Options","localRated","setLocalRated","Boolean","display","onBlur","Config","search","DetailsWrapper","Bar","Details","Source","Rating","toUpperCase","Score","startsWith","href","rel","PostWrapper","loadOriginal","includes","getCorrectSource","PostList","scrollLock","Results","loadMore","window","onscroll","innerHeight","document","documentElement","scrollTop","scrollHeight","Search","withRouter","Component","NotFound","App","basename","to","exact","path","render","component","Help","location","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e0e70ea3.chunk.js","sourcesContent":["import { useReducer, useEffect } from \"react\";\r\nimport produce from \"immer\";\r\nimport useLocalStorage from \"./useLocalStorage\";\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"ADD_TAG\":\r\n      return addTag(state, action.tag);\r\n    case \"REMOVE_TAG\":\r\n      return removeTag(state, action.tag);\r\n    case \"TOGGLE_TAG\":\r\n      return toggleTag(state, action.tag);\r\n    case \"ADD_POSTS\":\r\n      return addPosts(state, action.posts);\r\n    case \"SET_POSTS\":\r\n      return setPosts(state, action.posts, action.count);\r\n    case \"SET_OPTION\":\r\n      return setOption(state, action.key, action.value);\r\n    case \"FOCUS_POST\":\r\n      return setFocusedPost(state, action.id);\r\n    case \"UNFOCUS_POST\":\r\n      return setFocusedPost(state, undefined);\r\n    default:\r\n      throw new Error(`Unrecognized Action: ${action.type}`);\r\n  }\r\n}\r\n\r\nfunction findTag(tags, tagToFind) {\r\n  return tags.findIndex(tag => tag.name === tagToFind.name);\r\n}\r\n\r\nconst addTag = (state, newTag) =>\r\n  produce(state, draft => {\r\n    const tagIndex = findTag(state.tags, newTag);\r\n\r\n    draft.tags = [...state.tags];\r\n\r\n    if (tagIndex !== -1) {\r\n      draft.tags[tagIndex] = newTag;\r\n    } else {\r\n      draft.tags = [...draft.tags, newTag];\r\n    }\r\n  });\r\n\r\nconst removeTag = (state, tagToRemove) =>\r\n  produce(state, draft => {\r\n    const tagIndex = findTag(state.tags, tagToRemove);\r\n\r\n    if (tagIndex !== -1) {\r\n      draft.tags = [...state.tags];\r\n      draft.tags.splice(tagIndex, 1);\r\n    }\r\n  });\r\n\r\nconst toggleTag = (state, tagToToggle) =>\r\n  findTag(state.tags, tagToToggle) !== -1\r\n    ? removeTag(state, tagToToggle)\r\n    : addTag(state, tagToToggle);\r\n\r\nconst addPosts = (state, posts) =>\r\n  produce(state, draft => {\r\n    draft.results.posts = [...state.results.posts, ...posts];\r\n    draft.results.page = state.results.page + 1;\r\n  });\r\n\r\nconst setPosts = (state, posts, postCount) =>\r\n  produce(state, draft => {\r\n    draft.results.posts = [...posts];\r\n    draft.results.count = postCount;\r\n    draft.results.page = 0;\r\n  });\r\n\r\nconst setOption = (state, key, value) =>\r\n  produce(state, draft => {\r\n    draft.options[key] = value;\r\n  });\r\n\r\nconst setFocusedPost = (state, id) =>\r\n  produce(state, draft => {\r\n    draft.context.focusedPost = id;\r\n  });\r\n\r\nconst initialState = {\r\n  results: {\r\n    posts: [],\r\n    page: 0,\r\n    count: undefined\r\n  },\r\n  context: {\r\n    focusedPost: undefined\r\n  },\r\n  tags: [],\r\n  options: {\r\n    infinite: true,\r\n    rated: undefined,\r\n    originals: false\r\n  }\r\n};\r\n\r\n/**\r\n * Creates and manages state\r\n * @return {[{results: {posts: Array, page: Number, count: Number}, tags: Array, context: {focusedPost: String}, options: {originals: Boolean, infinite: Boolean, rated: Boolean}}, dispatch]}\r\n */\r\nexport default function useAppState() {\r\n  const [cache, setCache] = useLocalStorage(initialState);\r\n  const [state, dispatch] = useReducer(reducer, cache);\r\n\r\n  useEffect(() => {\r\n    setCache(state);\r\n  }, [setCache, state]);\r\n\r\n  return [state, dispatch];\r\n}\r\n","export default function useLocalStorage(initialState) {\r\n  const stateString = localStorage.getItem(\"state\");\r\n  const state =\r\n    stateString !== null && stateString !== \"undefined\"\r\n      ? JSON.parse(stateString)\r\n      : initialState;\r\n  const setState = newState =>\r\n    localStorage.setItem(\"state\", JSON.stringify(newState));\r\n\r\n  return [state, setState];\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { node, object, string } from \"prop-types\";\r\nimport { accentColor, backgroundColor, borderRadius } from \"../../misc/style\";\r\n\r\nconst InvisibleButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n`;\r\n\r\nconst RedButton = styled.button`\r\n  color: ${accentColor};\r\n  background: ${backgroundColor};\r\n  border: ${accentColor} thin solid;\r\n\r\n  :hover {\r\n    color: ${backgroundColor};\r\n    background-color: ${accentColor};\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst BlockButton = styled(RedButton)`\r\n  width: 100%;\r\n  border-radius: ${borderRadius};\r\n`;\r\n\r\nconst AddButton = styled(RedButton)`\r\n  border-radius: 0 ${borderRadius} ${borderRadius} 0;\r\n`;\r\n\r\nconst ModifierButton = styled(InvisibleButton)`\r\n  min-width: 26px;\r\n`;\r\n\r\nexport default function Button({ type, children, onClick, disabled }) {\r\n  let Btn;\r\n\r\n  switch (type) {\r\n    case \"invisible\":\r\n      Btn = InvisibleButton;\r\n      break;\r\n    case \"block\":\r\n      Btn = BlockButton;\r\n      break;\r\n    case \"topLeft\":\r\n      Btn = TopLeftButton;\r\n      break;\r\n    case \"modifier\":\r\n      Btn = ModifierButton;\r\n      break;\r\n    case \"add\":\r\n      Btn = AddButton;\r\n      break;\r\n    default:\r\n      Btn = RedButton;\r\n  }\r\n\r\n  return <Btn onClick={onClick}>{children}</Btn>;\r\n}\r\n\r\nButton.propTypes = {\r\n  type: string,\r\n  children: node.isRequired,\r\n  btnProps: object\r\n};\r\n","export const borderRadius = \"3px\";\r\nexport const accentColor = \"red\";\r\nexport const backgroundColor = \"black\";\r\nexport const backgroundColor2 = \"white\";\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const StyledIcon = styled.i`\r\n  ${({ color, size }) => `\r\n    color: ${color};\r\n    width: ${size}px;\r\n    height: ${size}px;\r\n  `}\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  ${({ left }) => (left ? \"margin-right: 5px;\" : \"\")}\r\n  ${({ right }) => (right ? \"margin-left: 5px;\" : \"\")}\r\n`;\r\n\r\nconst Icon = ({ className, icon, color, size, onClick, left, right }) => (\r\n  <IconWrapper onClick={onClick} left={left} right={right}>\r\n    <StyledIcon\r\n      className={`fas ${icon} ${className}`}\r\n      color={color}\r\n      size={size}\r\n    />\r\n  </IconWrapper>\r\n);\r\n\r\nIcon.defaultProps = {\r\n  color: \"black\",\r\n  size: 14\r\n};\r\n\r\nexport function CharacterIcon(props) {\r\n  return <Icon icon=\"fa-user\" {...props} />;\r\n}\r\n\r\nexport function ArtistIcon(props) {\r\n  return <Icon icon=\"fa-pen\" {...props} />;\r\n}\r\n\r\nexport function CopyrightIcon(props) {\r\n  return <Icon icon=\"fa-copyright\" {...props} />;\r\n}\r\n\r\nexport function PlusIcon(props) {\r\n  return <Icon icon=\"fa-plus-circle\" {...props} />;\r\n}\r\n\r\nexport function MinusIcon(props) {\r\n  return <Icon icon=\"fa-minus-circle\" {...props} />;\r\n}\r\n\r\nexport function CloseIcon(props) {\r\n  return <Icon icon=\"fa-times\" {...props} />;\r\n}\r\n\r\nexport function ExpandIcon(props) {\r\n  return <Icon icon=\"fa-expand\" {...props} />;\r\n}\r\n\r\nexport function ArrowIcon(props) {\r\n  return <Icon icon=\"fa-caret-down\" {...props} />;\r\n}\r\n\r\nexport function ExternalLinkIcon(props) {\r\n  return <Icon icon=\"fa-external-link-alt\" {...props} />;\r\n}\r\n\r\nexport function SourceIcon(props) {\r\n  return <Icon icon=\"fa-hashtag\" {...props} />;\r\n}\r\n\r\nexport function RatingIcon(props) {\r\n  return <Icon icon=\"fa-registered\" {...props} />;\r\n}\r\n\r\nexport function HeartIcon(props) {\r\n  return <Icon icon=\"fa-heart\" {...props} />;\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, CloseIcon } from \"../../icons/Icons\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n`;\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n`;\r\n\r\nexport default function Media({\r\n  type,\r\n  src,\r\n  thumbnail_src,\r\n  isFullscreen,\r\n  onFullscreen,\r\n  onClick\r\n}) {\r\n  const [hasMoved, setMoved] = useState();\r\n  const onMove = useCallback(() => {\r\n    setMoved(true);\r\n  }, []);\r\n  const onRelease = useCallback(\r\n    event => {\r\n      if (!hasMoved) {\r\n        onClick(event);\r\n      }\r\n      setMoved(false);\r\n    },\r\n    [hasMoved, onClick]\r\n  );\r\n\r\n  return type === \"video\" ? (\r\n    <FlexVideo\r\n      controls\r\n      loop\r\n      src={src}\r\n      alt={src}\r\n      poster={thumbnail_src}\r\n      preload=\"none\"\r\n      onClick={onClick}\r\n      onTouchMove={onMove}\r\n      onTouchEnd={onRelease}\r\n    />\r\n  ) : (\r\n    <>\r\n      <Button type={\"topLeft\"} onClick={onFullscreen}>\r\n        {isFullscreen ? (\r\n          <CloseIcon color=\"white\" />\r\n        ) : (\r\n          <ExpandIcon color=\"white\" />\r\n        )}\r\n      </Button>\r\n      <FlexImage src={src} alt={src} onClick={onClick} />\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Media from \"../components/post/Media\";\r\nimport { MinusIcon, PlusIcon } from \"../icons/Icons\";\r\n\r\nconst ReaderWrapper = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: scroll;\r\n  background-color: black;\r\n`;\r\nconst Overlay = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n`;\r\n\r\nconst HiddenImage = styled.img`\r\n  position: fixed;\r\n  left: 100%;\r\n  right: 100%;\r\n`;\r\n\r\nexport default function Reader({ focusedPost, posts, dispatch }) {\r\n  const postIndex = posts.findIndex(p => p.id === focusedPost);\r\n  const { big_src, media_type, thumbnail_src } = posts[postIndex];\r\n  const prevSrc = posts[postIndex > 0 ? postIndex - 1 : postIndex].big_src;\r\n  const nextSrc =\r\n    posts[postIndex < posts.length - 1 ? postIndex + 1 : postIndex].big_src;\r\n\r\n  const prev = useCallback(\r\n    () =>\r\n      postIndex > 0 &&\r\n      dispatch({ type: \"FOCUS_POST\", id: posts[postIndex - 1].id }),\r\n    [postIndex, dispatch, posts]\r\n  );\r\n\r\n  const next = useCallback(\r\n    () =>\r\n      postIndex < posts.length - 1 &&\r\n      dispatch({ type: \"FOCUS_POST\", id: posts[postIndex + 1].id }),\r\n    [postIndex, dispatch, posts]\r\n  );\r\n\r\n  return (\r\n    <ReaderWrapper>\r\n      <Media\r\n        type={media_type}\r\n        src={big_src}\r\n        thumbnail_src={thumbnail_src}\r\n        isFullscreen={true}\r\n        onFullscreen={() => dispatch({ type: \"UNFOCUS_POST\" })}\r\n        onClick={() => {}}\r\n      />\r\n      <Overlay>\r\n        <MinusIcon onClick={prev} color=\"white\" />\r\n        <PlusIcon onClick={next} color=\"white\" />\r\n      </Overlay>\r\n      <HiddenImage src={prevSrc} />\r\n      <HiddenImage src={nextSrc} />\r\n    </ReaderWrapper>\r\n  );\r\n}\r\n\r\nReader.propTypes = {\r\n  post: object\r\n};\r\n","const pageSize = 20,\r\n  apiUrl1 = \"https://r34-json.herokuapp.com\",\r\n  apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm) {\r\n    const res = await fetch(\r\n      activeApi +\r\n        \"/tags?limit=\" +\r\n        pageSize +\r\n        \"&name=\" +\r\n        searchTerm +\r\n        \"*&order_by=posts\"\r\n    );\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tag) {\r\n    const res = await fetch(activeApi + \"/alias/\" + tag);\r\n    return await res.json();\r\n  }\r\n};\r\n\r\nfunction buildPostUrl(page, tags, minScore) {\r\n  let url = activeApi + \"/posts\";\r\n  url += \"?pid=\" + page;\r\n  url += \"&limit=\" + pageSize;\r\n  url +=\r\n    \"&tags=\" +\r\n    tags\r\n      .map(t => (t.modifier ? t.modifier : \"\") + encodeURIComponent(t.name))\r\n      .join(\"+\");\r\n  url += encodeURIComponent(\"+score:>=\" + minScore);\r\n  return url;\r\n}\r\n","export default class Post {\r\n  /**\r\n   *\r\n   * @param {*} id\r\n   * @param {*} type\r\n   * @param {*} score\r\n   * @param {*} rating\r\n   * @param {*} source\r\n   * @param {*} tags\r\n   * @param {*} file_url\r\n   * @param {*} width\r\n   * @param {*} height\r\n   * @param {*} creator_id\r\n   * @param {*} creator_url\r\n   * @param {*} preview_url\r\n   * @param {*} preview_width\r\n   * @param {*} preview_height\r\n   * @param {*} sample_url\r\n   * @param {*} sample_width\r\n   * @param {*} sample_height\r\n   * @param {*} status\r\n   * @param {*} parent_id\r\n   * @param {*} has_children\r\n   * @param {*} has_comments\r\n   * @param {*} comments_url\r\n   * @param {*} has_notes\r\n   * @param {*} created_at\r\n   * @param {*} change\r\n   * @param {*} md5\r\n   */\r\n  constructor(\r\n    id,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    media_type,\r\n    media_src,\r\n    file_url,\r\n    thumbnail_src,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","export default class Tag {\r\n  constructor(name, types = [], count, modifier = \"+\") {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import Post from \"../data/post\";\r\nimport Tag from \"../data/tag\";\r\n\r\nexport default function(obj) {\r\n  return obj.name ? prepareTag(obj) : preparePost(obj);\r\n}\r\n\r\nfunction prepareTag({ name, types, count, modifier }) {\r\n  return new Tag(name, types, Number(count), modifier);\r\n}\r\n\r\nfunction preparePost(post) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  } = post;\r\n  return new Post(\r\n    Number(id),\r\n    Number(score),\r\n    rating,\r\n    source,\r\n    tags.map(t => new Tag(t)),\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { string, func } from \"prop-types\";\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  border: none;\r\n  outline: none;\r\n  background: none;\r\n`;\r\n\r\nexport default function TagInput({ value, setValue }) {\r\n  return (\r\n    <Input\r\n      value={value}\r\n      onChange={e => setValue(e.target.value)}\r\n      placeholder=\"Search for tags\"\r\n    />\r\n  );\r\n}\r\n\r\nTagInput.propTypes = {\r\n  value: string,\r\n  setValue: func\r\n};\r\n","import React from \"react\";\r\nimport { array, string } from \"prop-types\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\n\r\nfunction TypeIcon({ types, className, onClick }) {\r\n  const interestingType = types.find(t => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon onClick={onClick} left />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nTypeIcon.propTypes = {\r\n  types: array,\r\n  className: string\r\n};\r\n\r\nTypeIcon.defaultProps = {\r\n  types: []\r\n};\r\n\r\nexport default TypeIcon;\r\n","export default function format(numberString) {\r\n  const number = Number(numberString);\r\n\r\n  if (number >= 1e6) {\r\n    return `~${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `~${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n}\r\n","import React from \"react\";\r\nimport { array, object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport format from \"../../misc/numberFormatting\";\r\n\r\nfunction sizeAndPosition({ inputRef }) {\r\n  return inputRef\r\n    ? `\r\n    top: ${inputRef.getBoundingClientRect().top + inputRef.clientHeight}px;\r\n    left: ${inputRef.getBoundingClientRect().left}px;\r\n    width: ${inputRef.clientWidth}px;\r\n    `\r\n    : \"\";\r\n}\r\n\r\nconst ListWrapper = styled.div`\r\n  position: absolute;\r\n  ${sizeAndPosition};\r\n  background: white;\r\n  border-radius: 0 0 3px 3px;\r\n  color: black;\r\n  z-index: 1;\r\n`;\r\n\r\nfunction DropdownList({ inputRef, entries, onClick }) {\r\n  return (\r\n    <ListWrapper inputRef={inputRef}>\r\n      {entries.map(entry => (\r\n        <Entry\r\n          key={entry.name}\r\n          {...entry}\r\n          onClick={() => onClick(entry)}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  );\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  border-top: 1px grey solid;\r\n  padding: 2px 0;\r\n`;\r\n\r\nconst EntryType = styled(TypeIcon)`\r\n  flex: 0 0 26px;\r\n  padding: 0 5px;\r\n`;\r\n\r\nfunction Entry({ name, posts, types, onClick }) {\r\n  return (\r\n    <EntryWrapper onClick={onClick}>\r\n      <EntryType types={types} />\r\n\r\n      <span style={{ flexGrow: 1 }}>{name}</span>\r\n      <span style={{ paddingRight: 5 }}>{format(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n}\r\n\r\nDropdownList.propTypes = {\r\n  inputRef: object,\r\n  entries: array\r\n};\r\n\r\nexport default DropdownList;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { func } from \"prop-types\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport Button from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList from \"./DropdownList\";\r\nimport { borderRadius, backgroundColor2 } from \"../../misc/style\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  background: ${backgroundColor2};\r\n  border-radius: ${({ closed }) =>\r\n    closed ? borderRadius : `${borderRadius} ${borderRadius} 0 0 `};\r\n`;\r\n\r\nfunction TagSelector({ dispatch }) {\r\n  const [inputRef, setInputRef] = useState();\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const addTag = useCallback(\r\n    suggestion => {\r\n      dispatch({\r\n        type: \"ADD_TAG\",\r\n        tag: prepare({\r\n          name: suggestion.name,\r\n          modifier: modifier,\r\n          count: suggestion.posts,\r\n          types: suggestion.types\r\n        })\r\n      });\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (value && value !== \"\")\r\n        api.getTags(normalize(value)).then(newSuggestions => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 400);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [value]);\r\n\r\n  return (\r\n    <Wrapper ref={setInputRef} closed={suggestions.length === 0}>\r\n      <Button\r\n        type=\"modifier\"\r\n        onClick={() => setModifier(modifier === \"+\" ? \"-\" : \"+\")}\r\n      >\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button\r\n        type=\"add\"\r\n        onClick={() =>\r\n          addTag({ ...suggestions.find(s => s.name === value), name: value })\r\n        }\r\n      >\r\n        Add\r\n      </Button>\r\n      <DropdownList\r\n        inputRef={inputRef}\r\n        entries={suggestions}\r\n        onClick={entry => {\r\n          addTag(entry);\r\n        }}\r\n      ></DropdownList>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nfunction normalize(tagname) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n\r\nTagSelector.propTypes = {\r\n  onSubmitTag: func\r\n};\r\n\r\nexport default TagSelector;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { arrayOf, bool, func, number, object, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport {\r\n  backgroundColor,\r\n  accentColor,\r\n  borderRadius,\r\n  backgroundColor2\r\n} from \"../../misc/style\";\r\nimport { StyledIcon, ArrowIcon } from \"../../icons/Icons\";\r\n\r\nconst dropdownBorderRadius = ({ collapsed }) =>\r\n  collapsed ? borderRadius : `${borderRadius} ${borderRadius} 0 0`;\r\n\r\nconst switchingColors = ({ active }) => {\r\n  const fg = active ? backgroundColor : accentColor;\r\n  const bg = active ? accentColor : backgroundColor;\r\n\r\n  return `\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${accentColor} thin solid;\r\n\r\n    :hover {\r\n      color: ${backgroundColor2};\r\n      border: ${backgroundColor2} thin solid;\r\n\r\n      ${StyledIcon} {\r\n        color: ${backgroundColor2};\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nconst TagWrapper = styled.div`\r\n  display: inline-block;\r\n  padding: 0.25rem 0.4rem;\r\n  border-radius: ${dropdownBorderRadius}\r\n  font-size: 0.8rem;\r\n  line-height: 1.2;\r\n  vertical-align: baseline;\r\n  margin-block-end: 5px;\r\n  margin-inline-end: 5px;\r\n  ${switchingColors}\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  ${({ left }) => (left ? \"margin-right: 5px;\" : \"\")}\r\n  ${({ right }) => (right ? \"margin-left: 5px;\" : \"\")}\r\n`;\r\n\r\nfunction Tag({\r\n  name,\r\n  count,\r\n  modifier,\r\n  types,\r\n  activeTags,\r\n  loadAliases,\r\n  dispatch\r\n}) {\r\n  const [aliases, setAliases] = useState();\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (activeTags.some(t => t.name === name))\r\n      api.getAliases(name).then(newAliases => {\r\n        newAliases.sort((a, b) => Number(b.posts) - Number(a.posts));\r\n        setAliases(\r\n          newAliases.filter(\r\n            alias => !activeTags.some(tag => tag.name === alias.name)\r\n          )\r\n        );\r\n      });\r\n  }, [name, activeTags]);\r\n\r\n  const active = activeTags.some(t => t.name === name);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={active}\r\n      collapsed={collapsed}\r\n      onMouseLeave={() => setCollapsed(true)}\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText\r\n        name={name}\r\n        count={count}\r\n        modifier={modifier}\r\n        types={types}\r\n        activeTags={activeTags}\r\n        dispatch={dispatch}\r\n      />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={() => setCollapsed(!collapsed)}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, posts }) => (\r\n              <Alias\r\n                key={\"t_\" + name}\r\n                name={name}\r\n                count={posts}\r\n                dispatch={dispatch}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nTag.propTypes = {\r\n  name: string,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  active: bool,\r\n  onClick: func\r\n};\r\n\r\nTag.defaultProps = {\r\n  types: [],\r\n  onClick: () => {}\r\n};\r\n\r\nfunction TagText({ name, count, types, modifier, dispatch }) {\r\n  const text = count ? `${name} (${count})` : name;\r\n\r\n  return (\r\n    <span\r\n      onClick={() =>\r\n        dispatch({ type: \"TOGGLE_TAG\", tag: { name, count, types, modifier } })\r\n      }\r\n    >\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias({ name, count, dispatch }) {\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} dispatch={dispatch} />\r\n    </div>\r\n  );\r\n}\r\n\r\nTagText.propTypes = {\r\n  name: string.isRequired,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  activeTags: arrayOf(object),\r\n  onClick: func\r\n};\r\n\r\nTagText.defaultProps = {\r\n  modifier: \"+\",\r\n  types: [],\r\n  activeTags: [],\r\n  onClick: () => {}\r\n};\r\n\r\nexport default Tag;\r\n","import React from \"react\";\r\nimport { arrayOf, shape, string } from \"prop-types\";\r\nimport Tag from \"../tag/Tag\";\r\n\r\nexport function TagList({ tags, activeTags, loadAliases, dispatch }) {\r\n  return (\r\n    <div className=\"tag-list\">\r\n      {tags.map(tag => (\r\n        <Tag\r\n          key={\"t_\" + tag.name}\r\n          {...tag}\r\n          activeTags={activeTags}\r\n          loadAliases={loadAliases}\r\n          dispatch={dispatch}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nTagList.propTypes = {\r\n  tags: arrayOf(\r\n    shape({\r\n      name: string\r\n    })\r\n  ).isRequired,\r\n  activeTags: arrayOf(\r\n    shape({\r\n      name: string\r\n    })\r\n  )\r\n};\r\n\r\nTagList.defaultProps = {\r\n  activeTags: [],\r\n  onItemClick: () => {},\r\n  onItemItemClick: () => {}\r\n};\r\n\r\nexport default TagList;\r\n","import React from \"react\";\r\nimport { bool, func, node } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport ReactToggle from \"react-toggle\";\r\nimport \"./Toggle.css\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n  margin-block-end: 5px;\r\n`;\r\n\r\nconst Label = styled.span`\r\n  margin-inline-start: 5px;\r\n`;\r\n\r\nexport default function Toggle({ children, initial, onChange }) {\r\n  return (\r\n    <ToggleWrapper>\r\n      <ReactToggle\r\n        defaultChecked={initial}\r\n        icons={{\r\n          checked: null,\r\n          unchecked: null\r\n        }}\r\n        onChange={onChange}\r\n      />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n\r\nToggle.propTypes = {\r\n  children: node.isRequired,\r\n  initial: bool,\r\n  onChange: func.isRequired\r\n};\r\n\r\nToggle.defaultProps = {\r\n  initial: false\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { shape, bool, number, func } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Toggle from \"../common/Toggle\";\r\n\r\nconst StyledInput = styled.input`\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  color: red;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n  width: ${({ value }) => 0.57 * String(value).length}em;\r\n  text-align: right;\r\n`;\r\n\r\nexport default function Options({ options, dispatch }) {\r\n  const [localRated, setLocalRated] = useState(1);\r\n\r\n  return (\r\n    <div>\r\n      <Toggle\r\n        initial={options.infinite}\r\n        onChange={() =>\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"infinite\",\r\n            value: !options.infinite\r\n          })\r\n        }\r\n      >\r\n        Infinite Scrolling\r\n      </Toggle>\r\n      <Toggle\r\n        initial={Boolean(options.rated)}\r\n        onChange={() => {\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"rated\",\r\n            value: options.rated ? undefined : localRated\r\n          });\r\n        }}\r\n      >\r\n        {options.rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            Above\r\n            <StyledInput\r\n              type=\"text\"\r\n              value={localRated}\r\n              onChange={event => setLocalRated(Number(event.target.value))}\r\n              onBlur={event =>\r\n                dispatch({\r\n                  type: \"SET_OPTION\",\r\n                  key: \"rated\",\r\n                  value: Number(event.target.value)\r\n                })\r\n              }\r\n            />\r\n            likes\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </Toggle>\r\n\r\n      <Toggle\r\n        initial={options.originals}\r\n        onChange={() =>\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"originals\",\r\n            value: !options.originals\r\n          })\r\n        }\r\n      >\r\n        Load Original Sizes\r\n      </Toggle>\r\n    </div>\r\n  );\r\n}\r\n\r\nOptions.propTypes = {\r\n  options: shape({\r\n    infinite: bool,\r\n    rated: number,\r\n    originals: bool\r\n  }).isRequired,\r\n  dispatch: func.isRequired\r\n};\r\n","import React, { useCallback } from \"react\";\r\nimport { object, array, func } from \"prop-types\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport TagList from \"../tag/TagList\";\r\nimport Options from \"./Options\";\r\nimport Button from \"../common/Button\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\n\r\nfunction Config({ options, tags, dispatch }) {\r\n  const search = useCallback(() => {\r\n    api.getPosts(tags, 0, options.rated).then(res => {\r\n      dispatch({\r\n        type: \"SET_POSTS\",\r\n        posts: res.posts.map(prepare),\r\n        count: Number(res.count)\r\n      });\r\n    });\r\n  }, [dispatch, options.rated, tags]);\r\n\r\n  return (\r\n    <section className=\"search\">\r\n      <h3 className=\"centered\">Search</h3>\r\n      <TagSelector dispatch={dispatch} />\r\n\r\n      {tags.length > 0 ? (\r\n        <label>\r\n          Tags:\r\n          <TagList\r\n            tags={tags}\r\n            activeTags={tags}\r\n            dispatch={dispatch}\r\n            loadAliases\r\n          />\r\n        </label>\r\n      ) : (\r\n        <div className=\"mb-1\" />\r\n      )}\r\n      <Options options={options} dispatch={dispatch} />\r\n      <Button type={\"block\"} onClick={search}>\r\n        Search\r\n      </Button>\r\n    </section>\r\n  );\r\n}\r\n\r\nConfig.propTypes = {\r\n  options: object,\r\n  tags: array,\r\n  dispatch: func\r\n};\r\n\r\nexport default Config;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { number, string, array, func } from \"prop-types\";\r\nimport TagList from \"../tag/TagList\";\r\nimport {\r\n  HeartIcon,\r\n  ExternalLinkIcon,\r\n  SourceIcon,\r\n  RatingIcon\r\n} from \"../../icons/Icons\";\r\n\r\nconst DetailsWrapper = styled.div`\r\n  margin-left: 5px;\r\n`;\r\n\r\nconst Bar = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n`;\r\n\r\nfunction Details({ rating, score, source, tags, activeTags, dispatch }) {\r\n  return (\r\n    <DetailsWrapper>\r\n      <Bar>\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList tags={tags} activeTags={activeTags} dispatch={dispatch} />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n\r\nDetails.propTypes = {\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: array,\r\n  activeTags: array,\r\n  dispatch: func\r\n};\r\n\r\nexport default Details;\r\n\r\nconst Rating = ({ value }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {value[0].toUpperCase()}\r\n  </span>\r\n);\r\n\r\nconst Score = ({ value }) => (\r\n  <span>\r\n    {value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n\r\nfunction Source({ value }) {\r\n  return value.startsWith(\"http\") ? (\r\n    <a\r\n      href={value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      Source\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {value}\r\n    </span>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { arrayOf, func, number, object, string } from \"prop-types\";\r\nimport Media from \"./Media\";\r\nimport Details from \"./Details\";\r\n\r\nconst PostWrapper = styled.div`\r\n  background: #101010;\r\n  transition: height 0.5s ease-in-out;\r\n\r\n  :not(:last-of-type) {\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\n\r\nexport function getCorrectSource(loadOriginal, big_src, small_src, id) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post({\r\n  id,\r\n  media_type,\r\n  small_src,\r\n  big_src,\r\n  thumbnail_src,\r\n  rating,\r\n  score,\r\n  source,\r\n  tags,\r\n  loadOriginal,\r\n  activeTags,\r\n  dispatch\r\n}) {\r\n  const media_src = getCorrectSource(loadOriginal, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  return (\r\n    <PostWrapper>\r\n      <Media\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        isFullscreen={false}\r\n        onFullscreen={() => dispatch({ type: \"FOCUS_POST\", id: id })}\r\n        onClick={() => setCollapsed(!collapsed)}\r\n      />\r\n\r\n      {!collapsed && (\r\n        <Details\r\n          rating={rating}\r\n          score={score}\r\n          source={source}\r\n          tags={tags}\r\n          activeTags={activeTags}\r\n          dispatch={dispatch}\r\n        />\r\n      )}\r\n    </PostWrapper>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  id: number,\r\n  media_type: string,\r\n  media_src: string,\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: arrayOf(object),\r\n  onTagClick: func\r\n};\r\n","import React from \"react\";\r\nimport { arrayOf, object } from \"prop-types\";\r\nimport Post from \"./Post\";\r\n\r\nfunction PostList({ posts, activeTags, loadOriginal, dispatch }) {\r\n  return (\r\n    <div className=\"post-list list-group list-group-flush\">\r\n      {posts.map(post => {\r\n        return (\r\n          <Post\r\n            key={`p_${post.id}`}\r\n            {...post}\r\n            loadOriginal={loadOriginal}\r\n            activeTags={activeTags}\r\n            dispatch={dispatch}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nPostList.propTypes = {\r\n  posts: arrayOf(object)\r\n};\r\n\r\nexport default PostList;\r\n","import React, { useCallback } from \"react\";\r\nimport { object, func, array } from \"prop-types\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport format from \"../../misc/numberFormatting\";\r\nimport PostList from \"../post/PostList\";\r\nimport Button from \"../common/Button\";\r\n\r\nlet scrollLock = true;\r\n\r\nfunction hasReachedEndOfPage() {\r\n  return (\r\n    window.innerHeight + document.documentElement.scrollTop >=\r\n    document.documentElement.scrollHeight - window.innerHeight\r\n  );\r\n}\r\n\r\nfunction Results({ options, dispatch, tags, results }) {\r\n  const loadMore = useCallback(() => {\r\n    api.getPosts(tags, results.page + 1, options.rated).then(res => {\r\n      dispatch({ type: \"ADD_POSTS\", posts: res.posts.map(prepare) });\r\n      scrollLock = true;\r\n    });\r\n  }, [dispatch, options.rated, results.page, tags]);\r\n\r\n  window.onscroll = useCallback(() => {\r\n    if (options.infinite && scrollLock && hasReachedEndOfPage()) {\r\n      scrollLock = false;\r\n      loadMore();\r\n    }\r\n  }, [loadMore, options.infinite]);\r\n\r\n  return (\r\n    <section className=\"results\">\r\n      <h3 className=\"centered\">{format(results.count)} results</h3>\r\n      <PostList\r\n        posts={results.posts}\r\n        activeTags={tags}\r\n        loadOriginal={options.originals}\r\n        dispatch={dispatch}\r\n      />\r\n      {!options.infinite && (\r\n        <Button type={\"block\"} onClick={loadMore}>\r\n          Load More\r\n        </Button>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nResults.propTypes = {\r\n  options: object,\r\n  dispatch: func,\r\n  tags: array,\r\n  results: object\r\n};\r\n\r\nexport default Results;\r\n","import React from \"react\";\r\nimport Config from \"../components/features/Config\";\r\nimport Results from \"../components/features/Results\";\r\n\r\nexport default function Search({ tags, options, results, dispatch }) {\r\n  return (\r\n    <main>\r\n      <Config options={options} tags={tags} dispatch={dispatch} />\r\n      {results.posts.length > 0 && (\r\n        <Results\r\n          options={options}\r\n          dispatch={dispatch}\r\n          tags={tags}\r\n          results={results}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport useAppState from \"../hooks/useAppState\";\r\nimport Reader from \"./Reader\";\r\nimport Search from \"./Search\";\r\n\r\nfunction Main() {\r\n  const [state, dispatch] = useAppState();\r\n  const { results, tags, options, context } = state;\r\n\r\n  return context.focusedPost ? (\r\n    <Reader\r\n      focusedPost={context.focusedPost}\r\n      posts={results.posts}\r\n      dispatch={dispatch}\r\n    />\r\n  ) : (\r\n    <Search\r\n      tags={tags}\r\n      options={options}\r\n      results={results}\r\n      dispatch={dispatch}\r\n    />\r\n  );\r\n}\r\n\r\nexport default withRouter(Main);\r\n","import React, { Component } from 'react';\r\n\r\nclass Search extends Component {   \r\n      render() {\r\n        return (\r\n          <div className=\"app\">\r\n            <main>\r\n              <p>Helpful things</p>\r\n            </main>\r\n          </div>\r\n        )\r\n      }\r\n}\r\n\r\nexport default Search","import React, { Component } from \"react\";\r\n\r\nclass NotFound extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        <header>\r\n          <h1>404 - not found</h1>\r\n        </header>\r\n\r\n        <main>\r\n          <p>Go away</p>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NotFound;\r\n","import React, { Component } from \"react\";\nimport Main from \"./pages/Main\";\nimport Help from \"./pages/Help\";\nimport NotFound from \"./pages/NotFound\";\nimport { Route, Link, Switch, BrowserRouter as Router } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./App.css\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Router basename=\"/r34-react\">\n        <header className=\"centered\">\n          <h1 className=\"centered\">\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\n          </h1>\n          <div className=\"container d-flex justify-content-center menu-bar\">\n            <Link to=\"/\" className=\"menu-item\">\n              Search\n            </Link>\n            <Link to=\"/help\" className=\"menu-item\">\n              Help\n            </Link>\n          </div>\n        </header>\n        <Switch>\n          <Route exact path=\"/\" render={() => <Main />} />\n          <Route exact path=\"/help\" component={Help} />\n          <Route component={NotFound} />\n        </Switch>\n        <div className=\"spacer\" />\n        <footer>\n          <small>\n            <div className=\"d-flex justify-content-center\">\n              <p>\n                <a href=\"https://github.com/kurozenzen/r34\">\n                  Github Repository\n                </a>\n              </p>\n            </div>\n            <div className=\"d-flex justify-content-center\">\n              <p>\n                Please, if you notice{\" \"}\n                <a href=\"https://github.com/kurozenzen/r34/issues/new?template=bug_report.md\">\n                  {\" \"}\n                  something isn't right\n                </a>\n                , or you{\" \"}\n                <a href=\"https://github.com/kurozenzen/r34/issues/new?template=feature_request.md\">\n                  want a feature\n                </a>{\" \"}\n                to be implemented take the time to let me know.\n              </p>\n            </div>\n            <div className=\"d-flex justify-content-center\">\n              <p>Hosted with Github Pages.</p>\n            </div>\n          </small>\n        </footer>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}