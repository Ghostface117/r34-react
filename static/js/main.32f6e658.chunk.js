(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(75)},33:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},62:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),i=n.n(c),s=(n(33),n(3)),o=n(10),l=n(12),u=n(11),m=n(13),f=n(17),p=n(1),h=n(5),d=n(24),g=n.n(d);n(41);var b=function(e){var t=e.text,n=e.initial,a=e.onChange;return r.a.createElement("label",{className:"toggle-wrapper"},r.a.createElement(g.a,{defaultChecked:n||!1,icons:{checked:null,unchecked:null},onChange:a}),r.a.createElement("span",{className:"toggle-text"},t))},v=(n(43),n(9)),E=n.n(v),O=n(16),j=20,N="https://custom-r34-api.herokuapp.com";fetch(N).catch(function(){return N="https://r34-api-clone.herokuapp.com"});var S={getTags:function(){var e=Object(O.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N+"/tags?limit="+j+"&name="+t+"*&order_by=posts");case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getPosts:function(){var e=Object(O.a)(E.a.mark(function e(t){var n,a,r,c=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:0,a=c.length>2&&void 0!==c[2]?c[2]:0,e.next=4,fetch(w(n,t,a));case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getAliases:function(){var e=Object(O.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N+"/alias/"+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()};function w(e,t,n){var a=N+"/posts";return a+="?pid="+e,a+="&limit="+j,a+="&tags="+t.map(function(e){return(e.modifier?e.modifier:"")+encodeURIComponent(e.name)}).join("+"),a+=encodeURIComponent("+score:>="+n)}var k=function(e){var t=e.name,n=e.count,c=e.modifier,i=e.types,s=e.active,o=e.onClick,l=Object(a.useState)(),u=Object(p.a)(l,2),m=u[0],f=u[1],h=Object(a.useState)(!0),d=Object(p.a)(h,2),g=d[0],b=d[1];Object(a.useEffect)(function(){S.getAliases(t).then(function(e){e.sort(function(e,t){return Number(t.posts)-Number(e.posts)}),f(e)})},[t]);var v="-"===c,E=i.includes("character"),O=i.includes("artist"),j=m&&m.length>0;return r.a.createElement("div",{className:"tag"+(s?" active":"")+(v?" exclude":"")+(E?" character":"")+(O?" artist":"")},r.a.createElement("span",{onClick:function(){return o({name:t,count:n,types:i,modifier:c})}},n?"".concat(t," (").concat(n,")"):t),j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{class:"caret fas fa-caret-down",onClick:function(){return b(!g)}}),r.a.createElement("div",{className:"dropdown-list"+(g?"":" visible")},m.map(function(e){return r.a.createElement("div",null,e.posts?"".concat(e.name," (").concat(e.posts,")"):e.name)}))))};function y(e){var t=e.tags,n=e.activeTags,a=e.onItemClick;return r.a.createElement("div",{className:"tag-list"},t.map(function(e){return r.a.createElement(k,Object.assign({key:"t_"+e.name},e,{active:C(e,n),onClick:a}))}))}var _=y;function C(e,t){return t.some(function(t){return t.name===e.name})}n(47);var x=function(e){var t,n=e.id,c=e.media_type,i=e.preview_src,s=e.original_src,o=e.thumbnail_src,l=e.rating,u=e.score,m=e.source,f=e.tags,h=e.loadOriginal,d=e.activeTags,g=e.onTagClick;h?t=s:(t="".concat(i,"?").concat(n)).includes("//images")&&(t=t.replace("//images","/images"));var b=Object(a.useState)(!0),v=Object(p.a)(b,2),E=v[0],O=v[1];return r.a.createElement("li",{id:n,className:"list-group-item post gray"},r.a.createElement(T,{type:c,src:t,thumbnail_src:o,onClick:function(){return O(!E)}}),r.a.createElement("div",{className:"details collapse"+(E?"":".show")},r.a.createElement("div",{className:"d-flex justify-content-between info-bar"},r.a.createElement(I,{value:l}),r.a.createElement(J,{value:u}),r.a.createElement(R,{value:m})),r.a.createElement("div",{className:"pl-1"},r.a.createElement(y,{tags:f,activeTags:d,onItemClick:g}))))};function T(e){var t=e.type,n=e.src,a=e.thumbnail_src,c=e.onClick,i=!1;switch(t){case"image":return r.a.createElement("img",{src:n,alt:n,className:"img-fluid",onClick:c});case"video":return r.a.createElement("video",{controls:!0,loop:!0,src:n,alt:n,poster:a,className:"video-fluid",preload:"none",onClick:c,onTouchMove:function(){i=!0},onTouchEnd:function(e){i||c(e),i=!1}});default:return null}}function I(e){var t=e.value;return r.a.createElement("span",{className:"rating"},t[0].toUpperCase())}function J(e){var t=e.value;return r.a.createElement("span",{className:"score"},t)}function R(e){var t=e.value;return t?t.startsWith("http")?r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"source"},"Source"):r.a.createElement("span",{className:"source"},t):null}n(49);var z=function(e){var t=e.posts,n=e.activeTags,a=e.loadOriginal,c=e.onTagClick;return r.a.createElement("ul",{className:"post-list list-group list-group-flush"},t.map(function(e){return r.a.createElement(x,Object.assign({key:"p_".concat(e.id)},e,{loadOriginal:a,activeTags:n,onTagClick:c}))}))},H=n(25),P=n.n(H),q=(n(62),function e(t,n,a,r,c,i,o,l,u,m,f,p,h,d,g,b,v,E,O,j,N){Object(s.a)(this,e),this.id=t,this.score=n,this.rating=a,this.source=r,this.tags=c,this.media_type=i,this.preview_src=o,this.original_src=l,this.thumbnail_src=u,this.width=m,this.height=f,this.creator_id=p,this.creator_url=h,this.status=d,this.parent_id=g,this.has_children=b,this.has_comments=v,this.comments_url=E,this.has_notes=O,this.created_at=j,this.change=N}),A=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"+";Object(s.a)(this,e),this.name=t,this.types=n,this.count=a,this.modifier=r},B=function(e){return e.name?function(e){var t=e.name,n=e.types,a=e.count,r=e.modifier;return new A(t,n,Number(a),r)}(e):function(e){var t=e.id,n=e.type,a=e.score,r=e.rating,c=e.source,i=e.tags,s=e.file_url,o=e.width,l=e.height,u=e.creator_id,m=e.creator_url,f=e.sample_url,p=e.preview_url,h=e.status,d=e.parent_id,g=e.has_children,b=e.has_comments,v=e.comments_url,E=e.has_notes,O=e.created_at,j=e.change;return new q(Number(t),Number(a),r,c,i.map(function(e){return new A(e)}),n,f,s,p,Number(o),Number(l),u,m,h,d,g,b,v,E,O,j)}(e)};var G=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(p.a)(n,2),i=c[0],s=c[1],o=Object(a.useState)("+"),l=Object(p.a)(o,2),u=l[0],m=l[1],f=Object(a.useState)([]),h=Object(p.a)(f,2),d=h[0],g=h[1],b=Object(a.useState)([]),v=Object(p.a)(b,2),E=v[0],O=v[1];Object(a.useEffect)(function(){d&&d.length>0&&O(d.filter(function(){return!0}))},[d]);var j={placeholder:"Search for tags",value:i,onChange:function(e,t){var n=t.newValue;return s(n)}};return r.a.createElement("form",{onSubmit:function(e){var n=E.find(function(e){return e.name===i})||{};t(B({name:i,count:n.posts,types:n.types,modifier:u})),s(""),e.preventDefault()},className:"d-flex input-group tag-selector"},r.a.createElement("div",{className:"input-group-prepend left-append"},r.a.createElement("select",{className:"form-control select-modifier",value:u,onChange:function(e){return m(e.target.value)}},r.a.createElement("option",null,"+"),r.a.createElement("option",null,"-"))),r.a.createElement(P.a,{suggestions:d,onSuggestionsFetchRequested:function(e){var t,n=e.value;S.getTags((t=n,t.toLowerCase().replace(" ","_"))).then(function(e){g(e)})},onSuggestionsClearRequested:function(){return g([])},getSuggestionValue:function(e){return e.name},renderSuggestion:function(e){var t=e.name,n=e.posts;return r.a.createElement("span",null,"".concat(t," (").concat(n,")"))},inputProps:j}),r.a.createElement("div",{className:"input-group-append right-append"},r.a.createElement("input",{type:"submit",value:"Add",className:"btn btn-red btn-add-tag"})))},L=!0;var U=Object(h.e)(function(e){var t=e.initialState,n=t.infinite,c=t.rated,i=t.originals,s=t.activeTags,o=Object(a.useState)(n),l=Object(p.a)(o,2),u=l[0],m=l[1],h=Object(a.useState)(c),d=Object(p.a)(h,2),g=d[0],v=d[1],E=Object(a.useState)(0),O=Object(p.a)(E,2),j=O[0],N=O[1],w=Object(a.useState)(i),k=Object(p.a)(w,2),y=k[0],C=k[1],x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(a.useState)(e),n=Object(p.a)(t,2),r=n[0],c=n[1],i=function(e){r.find(function(t){return t.name===e.name})&&s(e),c([].concat(Object(f.a)(r),[e]))},s=function(e){c(r.filter(function(t){return t.name!==e.name}))};return[r,function(e){r.find(function(t){return t.name===e.name})?s(e):i(e)},i,s]}(s),T=Object(p.a)(x,4),I=T[0],J=T[1],R=T[2],H=T[3],P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(a.useState)(e),n=Object(p.a)(t,2),r=n[0],c=n[1];return[r,c,function(e){return c([].concat(Object(f.a)(r),Object(f.a)(e)))}]}([]),q=Object(p.a)(P,3),A=q[0],U=q[1],W=q[2];!function(e,t,n,r){Object(a.useEffect)(function(){localStorage.setItem("infinteScroll",JSON.stringify(e))},[e]),Object(a.useEffect)(function(){localStorage.setItem("showRated",JSON.stringify(t))},[t]),Object(a.useEffect)(function(){localStorage.setItem("originalSizes",JSON.stringify(n))},[n]),Object(a.useEffect)(function(){localStorage.setItem("tags",JSON.stringify(r))},[r])}(u,g,y,I);var F=function(){S.getPosts(I,j+1,g?1:void 0).then(function(e){W(e.map(B)),N(j+1),L=!0})};return window.onscroll=function(){u&&L&&window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-window.innerHeight&&(L=!1,F())},r.a.createElement("main",null,r.a.createElement("section",{className:"search"},r.a.createElement("h3",{className:"centered"},"Search"),r.a.createElement(G,{onSubmit:R,className:"centered"}),I.length>0?r.a.createElement("label",null,"Tags:",r.a.createElement(_,{tags:I,activeTags:I,onItemClick:H})):r.a.createElement("div",{className:"mb-1"}),r.a.createElement(b,{text:"Infinite Scroll",initial:u,onChange:function(){return m(!u)}}),r.a.createElement(b,{text:"Only show Rated",initial:g,onChange:function(){return v(!g)}}),r.a.createElement(b,{text:"Load Original Sizes",initial:y,onChange:function(){return C(!y)}}),r.a.createElement("button",{className:"btn btn-block btn-red",onClick:function(){S.getPosts(I,0,g?1:void 0).then(function(e){U(e.map(B)),N(0)})}},"Search")),A.length>0?r.a.createElement("section",{className:"results"},r.a.createElement("h3",{className:"centered"},"Results"),r.a.createElement(z,{posts:A,activeTags:I,loadOriginal:y,onTagClick:J}),!u&&r.a.createElement("button",{className:"btn btn-block btn-red",onClick:F},"Load More")):null)}),W=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("main",null,r.a.createElement("p",null,"Helpful things")))}}]),t}(a.Component),F=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"404 - not found")),r.a.createElement("main",null,r.a.createElement("p",null,"Go away")))}}]),t}(a.Component),M=n(15),V=(n(71),n(73),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"loadStorage",value:function(){var e=JSON.parse(localStorage.getItem("tags")),t=JSON.parse(localStorage.getItem("infinteScroll")),n=JSON.parse(localStorage.getItem("showRated")),a=JSON.parse(localStorage.getItem("originalSizes"));return{activeTags:null===e?[]:e,infinite:null!==t&&t,rated:null!==n&&n,originals:null!==a&&a}}},{key:"render",value:function(){var e=this;return r.a.createElement(M.a,{basename:"/r34-react"},r.a.createElement("header",{className:"centered"},r.a.createElement("h1",{className:"centered"},"Browse ",r.a.createElement("a",{href:"https://rule34.xxx"},"Rule34")),r.a.createElement("div",{className:"container d-flex justify-content-center menu-bar"},r.a.createElement(M.b,{to:"/",className:"menu-item"},"Search"),r.a.createElement(M.b,{to:"/help",className:"menu-item"},"Help"))),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(U,{initialState:e.loadStorage()})}}),r.a.createElement(h.a,{exact:!0,path:"/help",component:W}),r.a.createElement(h.a,{component:F})),r.a.createElement("div",{className:"spacer"}),r.a.createElement("footer",null,r.a.createElement("small",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/kurozenzen/r34"},"Github Repository"))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,"Please, if you notice"," ",r.a.createElement("a",{href:"https://github.com/kurozenzen/r34/issues/new?template=bug_report.md"}," ","something isn't right"),", or you"," ",r.a.createElement("a",{href:"https://github.com/kurozenzen/r34/issues/new?template=feature_request.md"},"want a feature")," ","to be implemented take the time to let me know.")),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,"Hosted with Github Pages.")))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V,null),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.32f6e658.chunk.js.map