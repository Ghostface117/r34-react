{"version":3,"sources":["components/layout/infinite/InfiniteColumn.tsx","components/post/Rating.tsx","components/post/Score.tsx","components/post/source/FallbackSource.tsx","components/common/ColoredIconLink.tsx","components/post/source/LinkSource.tsx","components/post/source/SpecialLinkSource.tsx","components/post/source/Source.tsx","components/post/Details.tsx","data/utils.ts","components/player/FlexVideo.tsx","components/styled/animations.tsx","components/player/Overlay.tsx","components/player/Video.tsx","components/player/FlexImage.tsx","components/player/Gif.tsx","components/player/Picture.tsx","components/player/Player.tsx","components/player/utils.ts","components/post/Post.tsx","components/features/SearchButton.tsx","components/features/ActiveTags.tsx","components/features/Config.tsx","components/features/KofiButton.tsx","components/common/RandomTip.tsx","components/layout/LayoutHeader.tsx","icons/OutOfResults.png","components/layout/LayoutOutOfItems.tsx","components/layout/LayoutLoadingItem.tsx","components/layout/pages/PageNavigation.tsx","components/layout/pages/PageLayout.tsx","components/reader/Reader.tsx","components/pages/Search.tsx","components/common/SmallInput.tsx"],"names":["InifinteColumn","props","Header","items","LoadingItem","hasMoreRows","ItemComponent","loadMore","OutOfItems","isLoading","setLoading","useState","listRef","setListRef","cache","useMemo","CellMeasurerCache","fixedWidth","prependedRows","rowCount","length","isRowLoaded","useCallback","index","useEffect","listener","measureAllRows","recomputeRowHeights","forceUpdateGrid","window","addEventListener","removeEventListener","rowRenderer","key","parent","style","columnIndex","rowIndex","measure","registerChild","virtualRef","onLoad","console","warn","loadMoreRows","params","Promise","reject","resolve","setTimeout","onRowsRendered","ref","child","deferredMeasurementCache","overscanRowCount","rowHeight","width","innerWidth","height","innerHeight","Rating","FlexPair","color","value","toUpperCase","Score","FallbackSource","ColoredIconLink","styled","a","theme","css","dimensions","gutter","DefaultLinkSource","useTheme","colors","accentColor","title","formatSource","href","target","rel","className","SpecialLinkSource","icon","extractFirstElement","split","sources","path","startsWith","extractSecondElement","Source","isLink","links","map","link","source","Object","keys","find","includes","getTitle","Bar","div","layer","hugeSpacing","borderRadius","DetailsTagList","TagList","Details","rating","score","tags","tagsForRendering","listToMap","keyProp","reduce","result","current","loadAliases","FlexVideo","video","flexMedia","preserveAspectRatio","fadeOut","keyframes","Wrapper","isVisible","ProgressBar","OverlayButton","InvisButton","bigSpacing","FullScreenButton","OpenExternalButton","PlayButton","PreviousButton","NextButton","LengthDisplay","span","Overlay","togglePlay","NO_OP","isPaused","isPlayable","currentTime","duration","externalSrc","mediaRef","postId","posts","useSelector","selectPosts","useToggle","toggleVisible","isReaderOpen","selectFullsceenState","dispatch","useDispatch","onExpandClick","event","preventDefault","stopPropagation","exitFullscreen","enterFullscreen","selectedIndex","findIndex","post","id","selectPostAt","postAtindex","setFullScreenPost","hasNext","selectNext","hasPrevious","selectPrevious","onClick","aria-label","size","isNaN","formatDuration","Video","src","videoRef","setVideoRef","Date","now","setTime","intervalId","setIntervalId","play","setInterval","pause","clearInterval","paused","preloadVideos","selectPreferences","controls","loop","preload","FlexImage","img","Gif","thumbnail_src","setPaused","usedSource","alt","loading","Picture","getMedia","type","PostType","VIDEO","MediaType","GIF","PICTURE","getMediaType","Player","URL","searchParams","get","getUrlParameter","MediaComponent","ItemWrapper","PositonWrapper","bodyWidth","PostWrapper","misc","getCorrectSource","loadOriginal","big_src","small_src","Post","media_type","originals","collapsed","toggleCollapsed","media_src","role","SearchButton","search","useAction","getResults","ActiveTags","onChange","activeTags","selectActiveTags","numberOfActiveTags","selectNumberOfActiveTags","ConfigWrapper","section","flexColum","centeredMaxWidth","Config","htmlFor","Surface","TagSelector","Options","Container","AButton","layerBg","Text","Image","KofiButton","label","tips","Span","Faded","RandomTip","tip","Math","floor","random","Placeholder","LayoutHeader","fullNumber","toggleFullNumber","count","selectCount","toLocaleString","formatCount","Div","StyledSurface","StyledImage","LayoutOutOfItems","aliases","selectAliasesAsList","aliasesForRendering","alias","name","outOfResultsPicture","padding","LayoutLoadingItem","Loading","PageRow","PageNumber","RedButton","CurrentNumber","SmallNumberInput","PageNavigation","currentPage","loadPage","lastPage","selectLastPage","loadSpecificPage","newPage","Number","loadFirst","loadLast","loadPrevious","loadNext","onSubmit","FlexColumn","BaseFlexColumn","PageLayout","header","scrollAndLoadPage","document","getElementsByClassName","scrollIntoView","item","FullScreenDiv","backgroundColor","Reader","fullScreenPostId","selectFullsceenPostId","getMoreResults","fullScreenPost","fullScreenIndex","indexOf","useThrottledEffect","Search","hasMorePosts","selectHasMoreResults","resultsLayout","pageSize","pageNumber","selectPageNumber","ResultLayout","INFINITE_COLUMN","hasMorePages","StyledInput","input","defaultBorder","backgroundColor2","defaultBlock","toString","internalValue","setInternalValue","onBlur","onKeyDown"],"mappings":"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","file":"static/js/7.8ab593d6.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport { CellMeasurer, CellMeasurerCache, IndexRange, InfiniteLoader, List } from 'react-virtualized'\nimport LayoutElementProps from '../LayoutElementProps'\n\ninterface InfiniteColumnProps<T> {\n  Header?: (props: LayoutElementProps) => JSX.Element\n  OutOfItems?: (props: LayoutElementProps) => JSX.Element\n  items?: T[]\n  LoadingItem: (props: LayoutElementProps) => JSX.Element\n  hasMoreRows: boolean\n  loadMore: () => void\n  ItemComponent: (props: T & LayoutElementProps) => JSX.Element\n  isLoading: boolean\n  setLoading: (value: boolean) => void\n}\n\nexport default function InifinteColumn<T>(props: InfiniteColumnProps<T>) {\n  const {\n    Header,\n    items = [],\n    LoadingItem,\n    hasMoreRows,\n    ItemComponent,\n    loadMore,\n    OutOfItems,\n    isLoading,\n    setLoading,\n  } = props\n\n  const [listRef, setListRef] = useState<List | null>(null)\n\n  const cache = useMemo(\n    () =>\n      new CellMeasurerCache({\n        fixedWidth: true,\n      }),\n    []\n  )\n\n  const prependedRows = Header ? 1 : 0\n  const loadingRows = 1\n\n  const rowCount = items.length + prependedRows + loadingRows\n\n  const isRowLoaded = useCallback(\n    ({ index }: { index: number }) => index < prependedRows + items.length + (hasMoreRows ? 0 : 1),\n    [hasMoreRows, items.length, prependedRows]\n  )\n\n  useEffect(() => {\n    if (listRef) {\n      const listener = () => {\n        listRef.measureAllRows()\n        listRef.recomputeRowHeights()\n        listRef.forceUpdateGrid()\n      }\n\n      window.addEventListener('resize', listener)\n\n      return () => {\n        window.removeEventListener('resize', listener)\n      }\n    }\n  }, [listRef])\n\n  const rowRenderer = useCallback(\n    ({ index, key, parent, style }: { index: number; key: any; parent: any; style: any }) => {\n      return (\n        <CellMeasurer cache={cache} columnIndex={0} key={key} rowIndex={index} parent={parent}>\n          {({ measure, registerChild }) => {\n            // Index 0\n            if (Header && index < prependedRows) {\n              return <Header style={style} virtualRef={registerChild} onLoad={measure} />\n            }\n\n            // Index 1\n            if (index < prependedRows + items.length) {\n              return (\n                <ItemComponent\n                  style={style}\n                  virtualRef={registerChild}\n                  onLoad={measure}\n                  {...items[index - prependedRows]}\n                />\n              )\n            }\n\n            // Index 2\n            if (index < prependedRows + items.length + loadingRows) {\n              return hasMoreRows || isLoading ? (\n                <LoadingItem style={style} virtualRef={registerChild} onLoad={measure} />\n              ) : OutOfItems && items.length > 0 ? (\n                <OutOfItems style={style} virtualRef={registerChild} onLoad={measure} />\n              ) : (\n                <div></div>\n              )\n            }\n\n            console.warn('index not found / out of bounds. INDEX:', index)\n            return null\n          }}\n        </CellMeasurer>\n      )\n    },\n    [cache, Header, prependedRows, items, ItemComponent, hasMoreRows, isLoading, LoadingItem, OutOfItems]\n  )\n\n  const loadMoreRows = (params: IndexRange) => {\n    if (isLoading || !hasMoreRows) {\n      return Promise.reject(0)\n    }\n\n    setLoading(true)\n    loadMore()\n\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        setLoading(false)\n        resolve(1)\n      }, 1000)\n    })\n  }\n\n  return (\n    <InfiniteLoader isRowLoaded={isRowLoaded} loadMoreRows={loadMoreRows} rowCount={rowCount}>\n      {({ onRowsRendered, registerChild }) => {\n        const registerChildHereAswell = (child: List) => {\n          setListRef(child)\n          registerChild(child)\n        }\n        return (\n          <List\n            ref={registerChildHereAswell}\n            onRowsRendered={onRowsRendered}\n            rowRenderer={rowRenderer}\n            deferredMeasurementCache={cache}\n            overscanRowCount={10}\n            rowCount={items.length + prependedRows + loadingRows}\n            rowHeight={cache.rowHeight}\n            width={window.innerWidth}\n            height={window.innerHeight}\n          />\n        )\n      }}\n    </InfiniteLoader>\n  )\n}\n","import { RatingType } from '../../data/types'\nimport React from 'react'\nimport { RatingIcon } from '../../icons/Icons'\nimport FlexPair from '../common/FlexPair'\n\nexport default function Rating(props: { value: RatingType }) {\n  return (\n    <FlexPair>\n      <RatingIcon color='white' />\n      <span>{props.value[0].toUpperCase()}</span>\n    </FlexPair>\n  )\n}\n","import React from 'react'\nimport { HeartIcon } from '../../icons/Icons'\nimport FlexPair from '../common/FlexPair'\n\nexport default function Score(props: { value: number }) {\n  return (\n    <FlexPair>\n      <HeartIcon color='white' />\n      <span>{props.value}</span>\n    </FlexPair>\n  )\n}\n","import React from 'react'\r\nimport { SourceIcon } from '../../../icons/Icons'\r\nimport FlexPair from '../../common/FlexPair'\r\nimport SourceProps from './SourceProps'\r\n\r\nexport default function FallbackSource({ value }: SourceProps) {\r\n  return (\r\n    <FlexPair>\r\n      <SourceIcon color='white' />\r\n      <span>{value}</span>\r\n    </FlexPair>\r\n  )\r\n}\r\n","import styled, { css } from 'styled-components'\r\n\r\nconst ColoredIconLink = styled.a(\r\n  ({ color, theme }) => css`\r\n    ${color\r\n      ? css`\r\n          color: ${color} !important;\r\n        `\r\n      : ''};\r\n    display: flex;\r\n    align-items: center;\r\n    gap: ${theme.dimensions.gutter};\r\n  `\r\n)\r\n\r\nexport default ColoredIconLink\r\n","import React from 'react'\r\nimport { useTheme } from 'styled-components'\r\nimport { LinkIcon } from '../../../icons/Icons'\r\nimport { formatSource } from '../../../misc/formatting'\r\nimport ColoredIconLink from '../../common/ColoredIconLink'\r\nimport SourceProps from './SourceProps'\r\n\r\nexport default function DefaultLinkSource({ value }: SourceProps) {\r\n  const color = useTheme().colors.accentColor\r\n  const title = formatSource(value)\r\n\r\n  return (\r\n    <ColoredIconLink color={color} href={value} target='_blank' rel='noopener noreferrer' className='source'>\r\n      <LinkIcon color={color} />\r\n      {title}\r\n    </ColoredIconLink>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { BrandIcon } from '../../../icons/Icons'\r\nimport ColoredIconLink from '../../common/ColoredIconLink'\r\n\r\ninterface SpecialLinkSourceProps {\r\n  value: string\r\n  color: string\r\n  icon: string\r\n  title: string\r\n}\r\n\r\nexport default function SpecialLinkSource(props: SpecialLinkSourceProps) {\r\n  const { value, color, icon, title } = props\r\n  return (\r\n    <ColoredIconLink href={value} target='_blank' rel='noopener noreferrer' className='source' color={color}>\r\n      <BrandIcon color={color} icon={icon} />\r\n      {title}\r\n    </ColoredIconLink>\r\n  )\r\n}\r\n","import React from 'react'\nimport FallbackSource from './FallbackSource'\nimport DefaultLinkSource from './LinkSource'\nimport SourceProps from './SourceProps'\nimport SpecialLinkSource from './SpecialLinkSource'\n\n/**\n * Returns true when the value is a hyperlink\n */\nfunction isLink(value: string) {\n  return value.startsWith('http')\n}\n\n/**\n * Cut away all the unnecessary parts of the link\n */\nfunction extractFirstElement(value: string) {\n  return value.split(' ')[0].split('?')[0].split('/')[0]\n}\n\nfunction extractSecondElement(value: string) {\n  return value.split(' ')[0].split('?')[0].split('/')[1]\n}\n\ntype SourceMapping = [string, string, (value: string) => string]\n\nconst sources: Record<string, SourceMapping> = {\n  'twitter.com/': ['#1da1f2', 'fa-twitter', (value) => extractFirstElement(value.split('twitter.com/')[1])],\n  'pixiv.net/': ['#0096FA', 'pixiv', () => 'Pixiv'],\n  'patreon.com/': [\n    '#FF424D',\n    'fa-patreon',\n    (value) => {\n      const path = value.split('patreon.com/')[1]\n\n      return path.startsWith('posts/') ? extractSecondElement(path) : extractFirstElement(path)\n    },\n  ],\n  'deviantart.com/': ['#00e59b', 'fa-deviantart', (value) => extractFirstElement(value.split('deviantart.com/')[1])],\n  'discordapp.com/': ['#7289DA', 'fa-discord', () => 'Discord'],\n}\n\nexport default function Source({ value }: SourceProps) {\n  if (isLink(value)) {\n    // Sources can contain multiple links\n    const links = value.split(' ')\n    return (\n      <>\n        {links.map((link) => {\n          const source = Object.keys(sources).find((key) => link.includes(key))\n\n          if (source) {\n            const [color, icon, getTitle] = sources[source]\n\n            return <SpecialLinkSource key={link} value={link} color={color} icon={icon} title={getTitle(link)} />\n          }\n\n          return <DefaultLinkSource key={link} value={link} />\n        })}\n      </>\n    )\n  }\n\n  return <FallbackSource value={value} />\n}\n","import React, { useMemo } from 'react'\nimport styled, { css } from 'styled-components'\nimport TagList from '../tag/TagList'\nimport { RatingType } from '../../data/types'\nimport TagDataClass from '../../data/Tag'\nimport { listToMap } from '../../data/utils'\nimport Rating from './Rating'\nimport Score from './Score'\nimport Source from './source/Source'\nimport { layer } from '../../styled/mixins'\n\nconst Bar = styled.div(\n  ({ theme }) => css`\n    grid-row: 2/3;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    ${layer({ theme })}\n    padding: ${theme.dimensions.gutter};\n    gap: ${theme.dimensions.hugeSpacing};\n    border-radius: 0 0 ${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius};\n  `\n)\n\nconst DetailsTagList = styled(TagList)(\n  ({ theme }) => css`\n    grid-row: 3/4;\n    padding: ${theme.dimensions.gutter};\n  `\n)\n\ninterface DetailsProps {\n  rating: RatingType\n  score: number\n  source: string\n  tags: TagDataClass[]\n}\n\nexport default function Details(props: DetailsProps) {\n  const { rating, score, source, tags } = props\n  const tagsForRendering = useMemo(() => listToMap(tags, 'name'), [tags])\n\n  return (\n    <>\n      <Bar>\n        {!!rating && <Rating value={rating} />}\n        {!!score && <Score value={score} />}\n        {!!source && <Source value={source} />}\n      </Bar>\n      <DetailsTagList tags={tagsForRendering} loadAliases={false} />\n    </>\n  )\n}\n","/**\n * Converts a list of objects into a map.\n * @param list The original list\n * @param keyProp The keyProp parameter defines which property of the objects will be used as the index for the map\n */\nexport const listToMap = <T>(list: T[], keyProp: string): Record<string, T> => {\n  return list.reduce((result: Record<string, T>, current: any) => {\n    result[current[keyProp]] = current\n    return result\n  }, {})\n}\n","import styled from 'styled-components'\nimport { flexMedia, preserveAspectRatio } from '../../styled/mixins'\n\nconst FlexVideo = styled.video`\n  ${flexMedia}\n  ${preserveAspectRatio}\n  grid-area: 1/1/2/2;\n`\n\nexport default FlexVideo\n","import { keyframes } from 'styled-components'\n\nexport const fadeOut = keyframes`\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n`\n\nexport const kofiWiggle = keyframes`\n  0% {\n    transform: rotate(0) scale(1);\n  }\n  60% {\n    transform: rotate(0) scale(1);\n  }\n  75% {\n    transform: rotate(0) scale(1.12);\n  }\n  80% {\n    transform: rotate(0) scale(1.1);\n  }\n  84% {\n    transform: rotate(-10deg) scale(1.1);\n  }\n  88% {\n    transform: rotate(10deg) scale(1.1);\n  }\n  92% {\n    transform: rotate(-10deg) scale(1.1);\n  }\n  96% {\n    transform: rotate(10deg) scale(1.1);\n  }\n  100% {\n    transform: rotate(0) scale(1);\n  }\n`\n","import React, { MouseEventHandler, useCallback, useMemo } from 'react'\n\nimport { ExpandIcon, PlayIcon, PauseIcon, ExternalLinkIcon, CloseIcon } from '../../icons/Icons'\nimport styled, { css } from 'styled-components'\nimport useToggle from '../../hooks/useToggle'\nimport { fadeOut } from '../styled/animations'\nimport { InvisButton } from '../common/Buttons'\nimport { NO_OP } from '../../data/types'\nimport { formatDuration } from '../../misc/formatting'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { selectFullsceenState, selectPosts } from '../../redux/selectors'\nimport { enterFullscreen, exitFullscreen, setFullScreenPost } from '../../redux/actions'\n\nconst Wrapper = styled.div(\n  (props: { isVisible: boolean }) => css`\n    grid-area: 1/1/2/2;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: auto 1fr auto auto;\n    z-index: 1;\n\n    ${!props.isVisible\n      ? css`\n          opacity: 0;\n          animation: ${fadeOut} 0.4s ease-in-out;\n        `\n      : ''};\n  `\n)\n\nconst ProgressBar = styled.div(\n  (props) => css`\n    grid-area: 4/1/4/4;\n    height: 5px;\n    background-color: ${props.theme.colors.accentColor};\n  `\n)\n\nconst OverlayButton = styled(InvisButton)(\n  (props) => css`\n    width: max-content;\n    height: max-content;\n    padding: ${props.theme.dimensions.bigSpacing};\n  `\n)\n\nconst FullScreenButton = styled(OverlayButton)`\n  grid-area: 1/1/2/2;\n  place-self: start start;\n`\n\nconst OpenExternalButton = styled(OverlayButton)`\n  grid-area: 3/1/4/1;\n  place-self: end start;\n`\n\nconst PlayButton = styled(OverlayButton)`\n  grid-area: 2/2/3/3;\n  place-self: center center;\n`\n\nconst PreviousButton = styled.div`\n  grid-area: 2/1/3/2;\n`\n\nconst NextButton = styled.div`\n  grid-area: 2/3/3/4;\n`\n\nconst LengthDisplay = styled.span(\n  (props) => css`\n    grid-area: 3/3/4/4;\n    place-self: end end;\n    background: #00000080;\n    border-radius: 4px;\n    padding: ${props.theme.dimensions.gutter};\n    margin: ${props.theme.dimensions.gutter};\n  `\n)\n\ninterface OverlayProps {\n  postId: number\n  externalSrc: string\n  togglePlay?: MouseEventHandler\n  isPaused?: boolean\n  isPlayable: boolean\n  currentTime?: number\n  duration?: number\n  mediaRef?: HTMLVideoElement | null\n}\n\nfunction Overlay(props: OverlayProps) {\n  const {\n    togglePlay = NO_OP,\n    isPaused = true,\n    isPlayable = false,\n    currentTime = 0,\n    duration = null,\n    externalSrc,\n    mediaRef,\n    postId,\n  } = props\n\n  const posts = useSelector(selectPosts)\n  const [isVisible, toggleVisible] = useToggle()\n  const isReaderOpen = useSelector(selectFullsceenState)\n\n  const dispatch = useDispatch()\n  const onExpandClick: MouseEventHandler = useCallback(\n    (event) => {\n      event.preventDefault()\n      event.stopPropagation()\n      if (isReaderOpen) {\n        dispatch(exitFullscreen())\n      } else {\n        dispatch(enterFullscreen(postId))\n      }\n    },\n    [dispatch, isReaderOpen, postId]\n  )\n\n  const selectedIndex = useMemo(() => posts.findIndex((post) => post.id === postId), [postId, posts])\n\n  const selectPostAt = useCallback(\n    (index: number) => {\n      const postAtindex = posts[index]\n\n      if (postAtindex) {\n        dispatch(setFullScreenPost(postAtindex.id))\n      }\n    },\n    [dispatch, posts]\n  )\n\n  const hasNext = selectedIndex + 1 < posts.length\n  const selectNext = useCallback(() => {\n    selectPostAt(selectedIndex + 1)\n  }, [selectPostAt, selectedIndex])\n\n  const hasPrevious = selectedIndex > 0\n  const selectPrevious = useCallback(() => {\n    selectPostAt(selectedIndex - 1)\n  }, [selectPostAt, selectedIndex])\n\n  return (\n    <Wrapper isVisible={isPaused || isVisible} onClick={toggleVisible}>\n      <FullScreenButton onClick={onExpandClick} aria-label='Open Fullscreen'>\n        {isReaderOpen ? <CloseIcon color='white' /> : <ExpandIcon color='white' />}\n      </FullScreenButton>\n\n      <OpenExternalButton>\n        <a href={externalSrc} target='_blank' rel='noopener noreferrer' aria-label='Open In New Tab'>\n          <ExternalLinkIcon color='white' />\n        </a>\n      </OpenExternalButton>\n\n      {isPlayable && (\n        <>\n          <PlayButton onClick={togglePlay} aria-label='Play/Pause'>\n            {isPaused ? <PlayIcon color='white' size={50} /> : <PauseIcon color='white' size={50} />}\n          </PlayButton>\n          {!!duration && !!currentTime && <ProgressBar style={{ width: `${(currentTime / duration) * 100}%` }} />}\n\n          {mediaRef && !isNaN(mediaRef.duration) && <LengthDisplay>{formatDuration(mediaRef.duration)}</LengthDisplay>}\n          {externalSrc.includes('.gif') && <LengthDisplay>gif</LengthDisplay>}\n        </>\n      )}\n\n      {isReaderOpen && hasPrevious && <PreviousButton onClick={selectPrevious}></PreviousButton>}\n      {isReaderOpen && hasNext && <NextButton onClick={selectNext}></NextButton>}\n    </Wrapper>\n  )\n}\n\nexport default Overlay\n","import React, { useState, useCallback } from 'react'\nimport { useSelector } from 'react-redux'\nimport { NO_OP } from '../../data/types'\nimport { selectPreferences } from '../../redux/selectors'\nimport FlexVideo from './FlexVideo'\nimport MediaProps from './MediaProps'\nimport Overlay from './Overlay'\n\nexport default function Video(props: MediaProps) {\n  const { src, onLoad = NO_OP, externalSrc, postId, width, height } = props\n\n  const [videoRef, setVideoRef] = useState<HTMLVideoElement | null>(null)\n\n  const [, setTime] = useState(Date.now())\n  const [intervalId, setIntervalId] = useState<NodeJS.Timeout | null>(null)\n\n  const play = useCallback(() => {\n    videoRef && videoRef.play()\n\n    // ~30 fps\n    const id = setInterval(() => {\n      setTime(Date.now())\n    }, 34)\n\n    setIntervalId(id)\n  }, [videoRef])\n\n  const pause = useCallback(() => {\n    videoRef && videoRef.pause()\n    clearInterval(intervalId as NodeJS.Timeout)\n    setIntervalId(null)\n  }, [videoRef, intervalId])\n\n  const togglePlay = useCallback(\n    (event) => {\n      event.stopPropagation()\n      videoRef && (videoRef.paused ? play() : pause())\n    },\n    [videoRef, play, pause]\n  )\n\n  const { preloadVideos } = useSelector(selectPreferences)\n\n  return (\n    <>\n      <FlexVideo\n        controls={false}\n        loop\n        preload={preloadVideos ? 'auto' : 'metadata'}\n        ref={setVideoRef}\n        onLoad={onLoad}\n        width={width}\n        height={height}\n      >\n        <source src={src} />\n      </FlexVideo>\n      <Overlay\n        mediaRef={videoRef}\n        isPaused={videoRef ? videoRef.paused : true}\n        currentTime={videoRef?.currentTime}\n        duration={videoRef?.duration}\n        postId={postId}\n        togglePlay={togglePlay}\n        externalSrc={externalSrc}\n        isPlayable\n      />\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport { preserveAspectRatio, flexMedia } from '../../styled/mixins'\n\nconst FlexImage = styled.img`\n  ${flexMedia}\n  ${preserveAspectRatio}\n  grid-area: 1/1/2/2;\n`\n\nexport default FlexImage\n","import React, { useState } from 'react'\nimport { NO_OP } from '../../data/types'\nimport FlexImage from './FlexImage'\nimport MediaProps from './MediaProps'\nimport Overlay from './Overlay'\n\nexport default function Gif(props: MediaProps) {\n  const { src, thumbnail_src, onLoad = NO_OP, externalSrc, postId, width, height } = props\n\n  const [isPaused, setPaused] = useState(true)\n  const usedSource = isPaused ? thumbnail_src : src\n\n  return (\n    <>\n      <FlexImage src={usedSource} alt={usedSource} loading='lazy' onLoad={onLoad} width={width} height={height} />\n      <Overlay\n        isPlayable\n        isPaused={isPaused}\n        togglePlay={(event) => {\n          event.stopPropagation()\n          setPaused(!isPaused)\n        }}\n        externalSrc={externalSrc}\n        postId={postId}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport { NO_OP } from '../../data/types'\nimport FlexImage from './FlexImage'\nimport MediaProps from './MediaProps'\nimport Overlay from './Overlay'\n\nexport default function Picture(props: MediaProps) {\n  const { src, onLoad = NO_OP, externalSrc, postId, width, height } = props\n\n  return (\n    <>\n      <FlexImage src={src} alt={src} onLoad={onLoad} loading='lazy' width={width} height={height} />\n      <Overlay isPlayable={false} externalSrc={externalSrc} postId={postId} />\n    </>\n  )\n}\n","import React, { useMemo } from 'react'\nimport Video from './Video'\nimport Gif from './Gif'\nimport Picture from './Picture'\n\nimport { getMediaType, getUrlParameter } from './utils'\nimport { MediaType, PostType } from '../../data/types'\n\ninterface PlayerProps {\n  postId: number\n  type: PostType\n  src: string\n  thumbnail_src: string\n  onLoad: () => void\n  width: number\n  height: number\n}\n\nconst getMedia = (type: PostType, src: string) => {\n  switch (getMediaType(type, src)) {\n    case MediaType.VIDEO:\n      return Video\n    case MediaType.GIF:\n      return Gif\n    default:\n      return Picture\n  }\n}\n\nexport default function Player(props: PlayerProps) {\n  const { type, src, thumbnail_src, onLoad, postId, width, height } = props\n\n  const externalSrc = useMemo(() => getUrlParameter(src), [src])\n  const MediaComponent = getMedia(type, src)\n\n  return (\n    <MediaComponent\n      src={src}\n      thumbnail_src={thumbnail_src}\n      onLoad={onLoad}\n      externalSrc={externalSrc}\n      postId={postId}\n      width={width}\n      height={height}\n    />\n  )\n}\n","import { PostType, MediaType } from '../../data/types'\n\nexport const openFullscreen = (elem: HTMLVideoElement) => {\n  elem.requestFullscreen()\n}\n\nexport const getMediaType = (type: PostType, src: string) => {\n  if (type === PostType.VIDEO) {\n    return MediaType.VIDEO\n  }\n\n  // can't use .endsWith because of queryString\n  if (src.includes('.gif')) {\n    return MediaType.GIF\n  }\n\n  return MediaType.PICTURE\n}\n\nexport function getUrlParameter(src: string) {\n  return new URL(src).searchParams.get('url') || ''\n}\n","import React, { useEffect, useMemo } from 'react'\nimport styled, { css } from 'styled-components'\nimport Details from './Details'\nimport Player from '../player/Player'\nimport { useSelector } from 'react-redux'\nimport { selectPreferences } from '../../redux/selectors'\nimport PostDataClass from '../../data/Post'\nimport LayoutElementProps from '../layout/LayoutElementProps'\nimport { NO_OP } from '../../data/types'\nimport useToggle from '../../hooks/useToggle'\n\nconst ItemWrapper = styled.div(\n  ({ theme }) => css`\n    padding-top: ${theme.dimensions.gutter};\n  `\n)\n\nconst PositonWrapper = styled.div(\n  ({ theme }) => css`\n    padding: 0 ${theme.dimensions.gutter};\n    width: 100%;\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n  `\n)\n\nconst PostWrapper = styled.div(\n  ({ theme }) => css`\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto auto auto;\n    border-radius: ${theme.dimensions.borderRadius};\n    overflow: hidden;\n    background: ${theme.misc.layer};\n  `\n)\n\nexport function getCorrectSource(loadOriginal: boolean, big_src: string, small_src: string) {\n  return loadOriginal ? big_src : small_src\n}\n\nexport default function Post(props: PostDataClass & LayoutElementProps) {\n  const {\n    media_type,\n    small_src,\n    big_src,\n    thumbnail_src,\n    rating,\n    score,\n    source,\n    tags,\n    style,\n    onLoad = NO_OP,\n    virtualRef,\n    id,\n    width,\n    height,\n  } = props\n\n  const { originals } = useSelector(selectPreferences)\n\n  const [collapsed, toggleCollapsed] = useToggle(true)\n\n  const media_src = useMemo(() => getCorrectSource(originals, big_src, small_src), [big_src, originals, small_src])\n\n  // re-measure when collapsed state changes\n  useEffect(() => {\n    onLoad()\n  }, [onLoad, collapsed])\n\n  return (\n    <ItemWrapper style={style} ref={virtualRef} className='list-div'>\n      <PositonWrapper>\n        <PostWrapper onClick={toggleCollapsed} role='row'>\n          <Player\n            onLoad={onLoad}\n            type={media_type}\n            src={media_src}\n            thumbnail_src={thumbnail_src}\n            postId={id}\n            width={width}\n            height={height}\n          />\n          {!collapsed && <Details rating={rating} score={score} source={source} tags={tags} />}\n        </PostWrapper>\n      </PositonWrapper>\n    </ItemWrapper>\n  )\n}\n","import React from 'react'\nimport useAction from '../../hooks/useAction'\nimport { getResults } from '../../redux/actions'\nimport { BlockButton } from '../common/Buttons'\n\nexport default function SearchButton() {\n  const search = useAction(getResults)\n\n  return (\n    <BlockButton onClick={search} aria-label='Search'>\n      Search\n    </BlockButton>\n  )\n}\n","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { selectActiveTags, selectNumberOfActiveTags } from '../../redux/selectors'\nimport TagList from '../tag/TagList'\n\ninterface ActiveTagsProps {\n  onChange: () => void\n}\n\nexport default function ActiveTags(props: ActiveTagsProps) {\n  const { onChange } = props\n  const activeTags = useSelector(selectActiveTags)\n  const numberOfActiveTags = useSelector(selectNumberOfActiveTags)\n\n  // Fire change event when tags change\n  // This is used to re-measure the height\n  useEffect(() => onChange(), [onChange, activeTags])\n\n  return numberOfActiveTags > 0 ? <TagList tags={activeTags} loadAliases /> : null\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport TagSelector from '../tagSelector/TagSelector'\nimport Options from './Options'\nimport { Title } from '../common/Text'\nimport Surface from '../common/Surface'\nimport SearchButton from './SearchButton'\nimport ActiveTags from './ActiveTags'\nimport { flexColum, gutter, centeredMaxWidth } from '../../styled/mixins'\n\nconst ConfigWrapper = styled.section`\n  ${flexColum}\n  ${gutter}\n  ${centeredMaxWidth}\n`\n\nexport default function Config(props: { onLoad: () => void }) {\n  const { onLoad } = props\n\n  return (\n    <ConfigWrapper>\n      <Title>\n        <label htmlFor='tag-input'>Search</label>\n      </Title>\n      <Surface>\n        <TagSelector />\n        <ActiveTags onChange={onLoad} />\n        <Options />\n        <SearchButton />\n      </Surface>\n    </ConfigWrapper>\n  )\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\n\nconst Container = styled.div`\n  display: inline-block;\n  white-space: nowrap;\n  min-width: 160px;\n`\n\nconst AButton = styled.a(\n  ({ theme }) => css`\n    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.2);\n    line-height: 36px !important;\n    min-width: 150px;\n    display: inline-block !important;\n    background-color: ${theme.colors.layerBg};\n    padding: 2px 12px !important;\n    text-align: center !important;\n    border-radius: 3px;\n    color: #fff;\n    cursor: pointer;\n    overflow-wrap: break-word;\n    vertical-align: middle;\n    border: 0 none #fff !important;\n    font-family: 'Quicksand', Helvetica, Century Gothic, sans-serif !important;\n    text-decoration: none;\n    text-shadow: none;\n    font-weight: 700 !important;\n    font-size: 14px !important;\n\n    :visited {\n      color: #fff !important;\n      text-decoration: none !important;\n    }\n\n    :hover {\n      opacity: 0.85;\n      color: #f5f5f5 !important;\n      text-decoration: none !important;\n    }\n\n    :active {\n      color: #f5f5f5 !important;\n      text-decoration: none !important;\n    }\n  `\n)\n\nconst Text = styled.span`\n  color: #fff !important;\n  letter-spacing: -0.15px !important;\n  vertical-align: middle;\n  line-height: 33px !important;\n  padding: 0;\n  text-align: center;\n  text-decoration: none !important;\n  text-shadow: 0 1px 1px rgba(34, 34, 34, 0.05);\n\n  a {\n    color: #fff !important;\n    text-decoration: none !important;\n  }\n\n  a:hover {\n    color: #fff !important;\n    text-decoration: none;\n  }\n`\n\nconst Image = styled.img`\n  display: initial !important;\n  vertical-align: middle;\n  height: 13px !important;\n  width: 20px !important;\n  padding-top: 0;\n  padding-bottom: 0;\n  border: none;\n  margin-top: 0;\n  margin-right: 5px;\n  margin-left: 0;\n  margin-bottom: 3px;\n  content: url('https://ko-fi.com/img/cup-border.png');\n\n  :after {\n    vertical-align: middle;\n    height: 25px;\n    padding-top: 0;\n    padding-bottom: 0;\n    border: none;\n    margin-top: 0;\n    margin-right: 6px;\n    margin-left: 0;\n    margin-bottom: 4px !important;\n    content: url('https://ko-fi.com/img/whitelogo.svg');\n\n    height: 15px !important;\n    width: 22px !important;\n    display: initial;\n    animation: kofi-wiggle 3s infinite;\n  }\n`\n\ninterface KofiButtonProps {\n  id: string\n  label: string\n}\n\nexport default function KofiButton(props: KofiButtonProps) {\n  const { id, label } = props\n\n  return (\n    <Container>\n      <AButton title={label} href={'https://ko-fi.com/' + id} target='_blank' rel='noopener noreferrer'>\n        <Text>\n          <Image src='https://ko-fi.com/img/cup-border.png' className='kofiimg' alt='Ko-Fi button' />\n          {label}\n        </Text>\n      </AButton>\n    </Container>\n  )\n}\n","import React, { useMemo } from 'react'\nimport styled, { css } from 'styled-components'\nimport { Faded } from './Text'\n\nconst tips = [\n  'Try tapping the little plus in the tag search.',\n  \"You can exclude tags with the '-' modifier.\",\n  \"Each result will have at least one of your '~' tags.\",\n  'Check out the settings. There are lots of uesful options there.',\n  'Starting a tag search with a * gives more results.',\n  'When filtering rated posts, you can configure the minimum score by taping the red number.',\n  'You can get more info about a post be tapping it once.',\n  'Tapping on a tag below a post adds it to your active tags.',\n  \"Large gifs and videos can take a while to load in the app. Try clicking the 'Open in new tab' icon in the bottom left corner for faster loading times.\",\n  'If anything stops working or gets weird. Reset the app in the settings.',\n  'I hope you are having a nice day!',\n  'If a tag is ambiguous, it will have a little arrow on the right. Tapping it shows related tags.',\n  'Tapping the icon in the top left of posts brings you into fullscreen mode.',\n]\n\nconst Span = styled(Faded)(\n  ({ theme }) => css`\n    text-align: center;\n    font-size: 16px;\n    padding: ${theme.dimensions.hugeSpacing};\n    max-width: ${theme.dimensions.bodyWidth};\n  `\n)\n\nexport default function RandomTip() {\n  const tip = useMemo(() => tips[Math.floor(Math.random() * tips.length)], [])\n\n  return <Span>{tip}</Span>\n}\n","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { formatCount } from '../../misc/formatting'\nimport useToggle from '../../hooks/useToggle'\nimport { selectCount } from '../../redux/selectors'\nimport { Title } from '../common/Text'\nimport Config from '../features/Config'\nimport Header from '../features/Header'\nimport LayoutElementProps from './LayoutElementProps'\nimport KofiButton from '../features/KofiButton'\nimport styled, { css } from 'styled-components'\nimport { NO_OP } from '../../data/types'\nimport RandomTip from '../common/RandomTip'\nimport { flexColum } from '../../styled/mixins'\n\nconst Placeholder = styled.div(\n  ({ theme }) => css`\n    ${flexColum()}\n    gap: ${theme.dimensions.hugeSpacing};\n    align-items: center;\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n\n    height: calc(100vh - 400px);\n    padding: 0 10%;\n  `\n)\n\nexport default function LayoutHeader({ onLoad = NO_OP, virtualRef, style }: LayoutElementProps) {\n  const [fullNumber, toggleFullNumber] = useToggle()\n  const count = useSelector(selectCount)\n\n  // Trigger load event when count is > 0\n  // This is used to re-measure the element\n  useEffect(() => {\n    count > 0 && onLoad()\n  }, [count, onLoad])\n\n  return (\n    <div onLoad={onLoad} ref={virtualRef} style={style} role='row'>\n      <Header />\n      <Config onLoad={onLoad} />\n      {count > 0 ? (\n        <Title onClick={toggleFullNumber}>\n          {(fullNumber ? count.toLocaleString() : formatCount(count)) + ' results'}\n        </Title>\n      ) : (\n        <Placeholder>\n          <RandomTip />\n\n          <KofiButton id='V7V73PWW9' label='Support Me on Ko-fi' />\n        </Placeholder>\n      )}\n    </div>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/OutOfResults.9c71691c.png\";","import React, { useMemo } from 'react'\nimport Surface from '../common/Surface'\nimport { Title } from '../common/Text'\nimport TagList from '../tag/TagList'\nimport outOfResultsPicture from '../../icons/OutOfResults.png'\nimport { useSelector } from 'react-redux'\nimport { selectAliasesAsList } from '../../redux/selectors'\nimport TagDataClass from '../../data/Tag'\nimport { NO_OP } from '../../data/types'\nimport LayoutElementProps from './LayoutElementProps'\nimport { HorizontalLine } from '../common/Lines'\nimport styled, { css } from 'styled-components'\nimport FlexImage from '../player/FlexImage'\n\nconst Div = styled.div(\n  ({ theme }) => css`\n    padding: ${theme.dimensions.gutter};\n  `\n)\n\nconst StyledSurface = styled(Surface)(\n  ({ theme }) => css`\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n    text-align: center;\n  `\n)\n\nconst StyledImage = styled(FlexImage)`\n  max-height: 50vh;\n`\n\nexport default function LayoutOutOfItems({ onLoad = NO_OP, virtualRef, style }: LayoutElementProps) {\n  const aliases = useSelector(selectAliasesAsList)\n  const aliasesForRendering = useMemo(\n    () =>\n      aliases.reduce((result: Record<string, TagDataClass>, alias) => {\n        result[alias.name] = alias\n        return result\n      }, {}),\n    [aliases]\n  )\n\n  return (\n    <Div style={style} ref={virtualRef} onLoad={onLoad} role='row'>\n      <StyledSurface>\n        <StyledImage src={outOfResultsPicture} alt='Shironeko does not understand' />\n        <HorizontalLine />\n        <Title>You have reached the end!</Title>\n        <p>Go look for something else!</p>\n        {aliases.length > 0 && (\n          <>\n            <p>How about some of these?</p>\n            <TagList tags={aliasesForRendering} padding />\n          </>\n        )}\n      </StyledSurface>\n    </Div>\n  )\n}\n","import React from 'react'\nimport LayoutElementProps from './LayoutElementProps'\nimport LoadingIcon from '../../icons/Loading'\nimport styled from 'styled-components'\nimport { NO_OP } from '../../data/types'\n\nconst Wrapper = styled.div`\n  display: grid;\n  place-items: center;\n`\n\nexport default function LayoutLoadingItem({ onLoad = NO_OP, virtualRef, style }: LayoutElementProps) {\n  return (\n    <Wrapper onLoad={onLoad} ref={virtualRef} style={style} role='row'>\n      <LoadingIcon />\n    </Wrapper>\n  )\n}\n","import React, { MouseEventHandler, useCallback } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport { selectLastPage } from '../../../redux/selectors'\nimport { RedButton } from '../../common/Buttons'\nimport { SmallNumberInput } from '../../common/SmallInput'\n\nconst PageRow = styled.div(\n  ({ theme }) => css`\n    display: grid;\n    grid-template-columns: repeat(5, 1fr);\n    justify-content: center;\n    place-items: center;\n    gap: ${theme.dimensions.gutter};\n    padding: ${theme.dimensions.gutter};\n    padding-bottom: 0;\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n  `\n)\n\nconst PageNumber = styled(RedButton)``\n\nconst CurrentNumber = styled(SmallNumberInput)``\n\ninterface PageNavigationProps {\n  currentPage: number\n  loadPage: (pageNumber: number) => void\n}\n\nexport default function PageNavigation(props: PageNavigationProps) {\n  const { currentPage, loadPage } = props\n\n  const lastPage = useSelector(selectLastPage)\n\n  const loadSpecificPage = useCallback((newPage: number | string) => loadPage(Number(newPage)), [loadPage])\n  const loadFirst: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(0), [loadPage])\n  const loadLast: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(lastPage), [loadPage, lastPage])\n  const loadPrevious: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(currentPage - 1), [\n    currentPage,\n    loadPage,\n  ])\n  const loadNext: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(currentPage + 1), [\n    currentPage,\n    loadPage,\n  ])\n\n  // Render Empty divs to keep everything lined up\n  // Could achive the same with grid-column (might do that in the future)\n  return (\n    <PageRow className='page-navigation'>\n      {currentPage > 1 ? <PageNumber onClick={loadFirst}>0</PageNumber> : <div></div>}\n      {currentPage > 0 ? <PageNumber onClick={loadPrevious}>{currentPage - 1}</PageNumber> : <div></div>}\n      <CurrentNumber value={currentPage} onSubmit={loadSpecificPage} />\n      {currentPage < lastPage ? <PageNumber onClick={loadNext}>{currentPage + 1}</PageNumber> : <div></div>}\n      {currentPage < lastPage - 1 ? <PageNumber onClick={loadLast}>{lastPage}</PageNumber> : <div></div>}\n    </PageRow>\n  )\n}\n","import React, { useCallback } from 'react'\nimport styled, { css } from 'styled-components'\nimport PostDataClass from '../../../data/Post'\nimport BaseFlexColumn from '../../common/FlexColumn'\nimport PageNavigation from './PageNavigation'\n\nconst FlexColumn = styled(BaseFlexColumn)(\n  ({ theme }) => css`\n    padding-bottom: ${theme.dimensions.gutter};\n  `\n)\n\ninterface PageLayoutProps<T> {\n  header?: JSX.Element\n  outOfItems?: JSX.Element\n  items?: T[]\n  pageSize: number\n  currentPage: number\n  hasMorePages: boolean\n  loadPage: (pageNumber: number) => void\n  ItemComponent: (props: T) => JSX.Element\n  isLoading: boolean\n  setLoading: (value: boolean) => void\n}\n\nexport default function PageLayout(props: PageLayoutProps<PostDataClass>) {\n  const { header, items, ItemComponent, currentPage, loadPage } = props\n\n  const scrollAndLoadPage = useCallback(\n    (value: number) => {\n      loadPage(value)\n      document.getElementsByClassName('page-navigation')[0].scrollIntoView()\n    },\n    [loadPage]\n  )\n\n  return (\n    <FlexColumn>\n      {header}\n      {items && items.length > 0 && (\n        <>\n          <PageNavigation currentPage={currentPage} loadPage={loadPage} />\n          {items?.map((item) => (\n            <ItemComponent key={item.id} {...item} />\n          ))}\n          <PageNavigation currentPage={currentPage} loadPage={scrollAndLoadPage} />\n        </>\n      )}\n    </FlexColumn>\n  )\n}\n","import React, { useMemo } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport PostDataClass from '../../data/Post'\nimport { NO_OP } from '../../data/types'\nimport useAction from '../../hooks/useAction'\nimport useThrottledEffect from '../../hooks/useThrottledEffect'\nimport { getMoreResults } from '../../redux/actions'\nimport { selectFullsceenPostId, selectFullsceenState, selectPosts, selectPreferences } from '../../redux/selectors'\nimport Player from '../player/Player'\nimport { getCorrectSource } from '../post/Post'\n\nconst FullScreenDiv = styled.div(\n  ({ theme }) => css`\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    left: 0;\n    top: 0;\n\n    display: grid;\n    grid-template-columns: 100vw;\n    grid-template-rows: 100vh;\n\n    background: ${theme.colors.backgroundColor};\n\n    z-index: 5;\n  `\n)\n\nexport default function Reader() {\n  const posts = useSelector(selectPosts)\n  const { originals } = useSelector(selectPreferences)\n  const isReaderOpen = useSelector(selectFullsceenState)\n  const fullScreenPostId = useSelector(selectFullsceenPostId)\n  const loadMore = useAction(getMoreResults)\n\n  const fullScreenPost = useMemo(() => posts.find((post) => post.id === fullScreenPostId) as PostDataClass, [\n    fullScreenPostId,\n    posts,\n  ])\n\n  const fullScreenIndex = posts.indexOf(fullScreenPost)\n\n  useThrottledEffect(\n    () => {\n      if (fullScreenIndex + 3 > posts.length) {\n        loadMore()\n      }\n    },\n    2000,\n    [fullScreenIndex, loadMore, posts.length]\n  )\n\n  if (!isReaderOpen) {\n    return null\n  }\n\n  const { media_type, small_src, big_src, thumbnail_src, id, width, height } = fullScreenPost\n  const media_src = getCorrectSource(originals, big_src, small_src)\n\n  return (\n    <FullScreenDiv>\n      <Player\n        onLoad={NO_OP}\n        type={media_type}\n        src={media_src}\n        thumbnail_src={thumbnail_src}\n        postId={id}\n        width={width}\n        height={height}\n      />\n    </FullScreenDiv>\n  )\n}\n","import React, { useCallback, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport InifinteColumn from '../layout/infinite/InfiniteColumn'\nimport Post from '../post/Post'\nimport { getMoreResults, getResults } from '../../redux/actions'\nimport { selectHasMoreResults, selectPageNumber, selectPosts, selectPreferences } from '../../redux/selectors'\nimport LayoutHeader from '../layout/LayoutHeader'\nimport LayoutOutOfItems from '../layout/LayoutOutOfItems'\nimport LayoutLoadingItem from '../layout/LayoutLoadingItem'\nimport useAction from '../../hooks/useAction'\nimport { ResultLayout } from '../../data/types'\nimport PageLayout from '../layout/pages/PageLayout'\n\nimport Reader from '../reader/Reader'\n\nexport default function Search() {\n  const [isLoading, setLoading] = useState(false)\n\n  const posts = useSelector(selectPosts)\n  const hasMorePosts = useSelector(selectHasMoreResults)\n  const { resultsLayout, pageSize } = useSelector(selectPreferences)\n  const pageNumber = useSelector(selectPageNumber)\n\n  const dispatch = useDispatch()\n  const loadMore = useAction(getMoreResults)\n  const loadPage = useCallback((index: number) => dispatch(getResults(index)), [dispatch])\n\n  return (\n    <>\n      <Reader />\n      {resultsLayout === ResultLayout.INFINITE_COLUMN ? (\n        <InifinteColumn\n          Header={LayoutHeader}\n          OutOfItems={LayoutOutOfItems}\n          items={posts}\n          LoadingItem={LayoutLoadingItem}\n          hasMoreRows={hasMorePosts}\n          ItemComponent={Post}\n          loadMore={loadMore}\n          isLoading={isLoading}\n          setLoading={setLoading}\n        />\n      ) : (\n        <PageLayout\n          header={<LayoutHeader />}\n          pageSize={pageSize}\n          currentPage={pageNumber}\n          hasMorePages={hasMorePosts}\n          loadPage={loadPage}\n          ItemComponent={Post}\n          isLoading={isLoading}\n          setLoading={setLoading}\n          items={posts}\n        />\n      )}\n    </>\n  )\n}\n","import React, { ChangeEventHandler, KeyboardEventHandler, useCallback, useEffect, useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { defaultBorder, defaultBlock } from '../../styled/mixins'\n\nconst StyledInput = styled.input(\n  ({ theme }) => css`\n    width: 50px;\n    ${defaultBorder({ theme })}\n    background-color: ${theme.colors.backgroundColor2};\n    ${defaultBlock({ theme })}\n    text-align: center;\n  `\n)\n\ninterface SmallInputProps<T> {\n  value: T\n  onSubmit: (value: T) => void\n}\n\nexport function SmallTextInput(props: SmallInputProps<string>) {\n  const { value, onSubmit } = props\n  const [internalValue, setInternalValue] = useState(value)\n\n  useEffect(() => {\n    setInternalValue(value)\n  }, [value])\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((event) => {\n    setInternalValue(event.target.value)\n  }, [])\n\n  const onBlur = useCallback(() => {\n    onSubmit(internalValue)\n  }, [internalValue, onSubmit])\n\n  const onKeyDown: KeyboardEventHandler = useCallback(\n    (event) => {\n      if (event.key === 'Enter') {\n        onSubmit(internalValue)\n      }\n    },\n    [internalValue, onSubmit]\n  )\n\n  return <StyledInput type='text' value={internalValue} onChange={onChange} onBlur={onBlur} onKeyDown={onKeyDown} />\n}\n\nexport function SmallNumberInput(props: SmallInputProps<number>) {\n  const { value, onSubmit } = props\n  const [internalValue, setInternalValue] = useState(value.toString())\n\n  useEffect(() => {\n    setInternalValue(value.toString())\n  }, [value])\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((event) => {\n    setInternalValue(event.target.value)\n  }, [])\n\n  const onBlur = useCallback(() => {\n    onSubmit(Number(internalValue))\n  }, [internalValue, onSubmit])\n\n  const onKeyDown: KeyboardEventHandler = useCallback(\n    (event) => {\n      if (event.key === 'Enter') {\n        onSubmit(Number(internalValue))\n      }\n    },\n    [internalValue, onSubmit]\n  )\n\n  return <StyledInput type='number' value={internalValue} onChange={onChange} onBlur={onBlur} onKeyDown={onKeyDown} />\n}\n"],"sourceRoot":""}