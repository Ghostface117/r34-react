{"version":3,"sources":["icons/FontAwesomeIcons.ts","styled/animations.tsx","components/common/Select.tsx","components/common/SmallInput.tsx","components/common/Toggle.tsx","components/widgets/KofiButton.tsx","components/layout/infinite/InfiniteColumn.tsx","icons/TypeIcon.tsx","hooks/useToggle.ts","components/tag/TagWrapper.tsx","components/tag/TagName.tsx","components/tag/Alias.tsx","components/tag/AliasesList.tsx","components/tag/Tag.tsx","components/tag/TagList.tsx","components/common/FlexPair.tsx","components/post/source/FallbackSource.tsx","components/common/ColoredIconLink.tsx","components/post/source/LinkSource.tsx","components/post/source/SpecialLinkSource.tsx","components/post/source/Source.tsx","icons/PixivIcon.tsx","components/post/details/AdditonalDetails.tsx","components/post/details/Comments.tsx","components/post/details/Metadata.tsx","components/post/details/Rating.tsx","components/post/details/Score.tsx","components/post/details/Details.tsx","components/player/ProgressBar.tsx","icons/PlayPauseIcon.tsx","components/player/Overlay.tsx","components/styled/FlexVideo.tsx","components/player/media/StyledMedia.ts","hooks/useIsOnScreen.tsx","components/player/media/Video.tsx","components/player/media/Gif.tsx","components/player/media/Picture.tsx","components/player/Player.tsx","components/post/Post.tsx","hooks/useModifier.tsx","components/tagSelector/DropdownListEntry.tsx","components/tagSelector/DropdownList.tsx","components/tagSelector/TagInput.tsx","components/tagSelector/TagSelector.tsx","components/common/LabeledToggle.tsx","components/features/Options.tsx","hooks/useAction.tsx","components/widgets/SearchButton.tsx","components/widgets/SupertagModal.tsx","components/widgets/ActiveTags.tsx","components/features/Config.tsx","components/widgets/RandomTip.tsx","components/widgets/UpdateHighlight.tsx","components/widgets/SearchPlaceholder.tsx","components/widgets/ResultsTitle.tsx","components/layout/LayoutHeader.tsx","components/layout/LayoutOutOfItems.tsx","components/layout/LayoutLoadingItem.tsx","components/layout/pages/PageNavigation.tsx","components/layout/pages/PageLayout.tsx","components/reader/Reader.tsx","hooks/useFullscreenCloseEffect.tsx","components/pages/Search.tsx"],"names":["CharacterIcon","styled","FontAwesomeIcon","attrs","icon","faUser","ArtistIcon","faPen","CopyrightIcon","faCopyright","MetaDataIcon","faInfoCircle","CloseIcon","faTimes","ExpandIcon","faExpand","ExternalLinkIcon","faExternalLinkAlt","DownloadIcon","faDownload","SourceIcon","faHashtag","RatingIcon","faRegistered","HeartIcon","faHeart","LinkIcon","faLink","ArrowDown","faCaretDown","CodeBranchIcon","faCodeBranch","GithubIcon","faGithub","PatreonIcon","faPatreon","TwitterIcon","faTwitter","DeviantArtIcon","faDeviantart","DiscordIcon","faDiscord","TumblrIcon","faTumblr","CalendarIcon","faCalendarDay","CheckIcon","faCheckSquare","ImageIcon","faImage","GoogleIcon","faGoogle","WrenchIcon","faWrench","SearchIcon","faSearch","SupertagIcon","faTags","fadeOut","keyframes","kofiWiggle","Wrapper","div","theme","css","dimensions","blockHeight","StyledSelect","select","defaultBorder","defaultBlock","colors","backgroundColor2","Option","option","Select","props","options","value","onChange","Object","entries","map","optionKey","optionValue","StyledInput","input","SmallNumberInput","onSubmit","className","useState","toString","internalValue","setInternalValue","useEffect","useCallback","event","target","onBlur","Number","onKeyDown","key","type","Track","backgroundColor","timings","longTransitionTime","Thumb","supportsAspectRatio","accentColor","Toggle","onToggle","onClick","Container","AButton","a","layerBg","borderRadius","text","Text","span","Image","img","KofiButton","id","label","title","href","rel","src","alt","cache","CellMeasurerCache","fixedWidth","InifinteColumn","Header","items","LoadingItem","hasMoreRows","ItemComponent","loadMore","OutOfItems","isLoading","setLoading","prependedRows","rowCount","length","isRowLoaded","index","rowRenderer","parent","style","columnIndex","rowIndex","measure","registerChild","virtualRef","onLoad","console","warn","handleResize","size","clearAll","loadMoreRows","params","Promise","reject","resolve","setTimeout","onRowsRendered","onResize","height","width","ref","deferredMeasurementCache","overscanRowCount","rowHeight","TypeIcon","types","NO_OP","useMemo","find","t","match","TagType","CHARACTER","COPYRIGHT","ARTIST","RATING","SOURCE","METADATA","SUPERTAG","useToggle","initialValue","setValue","toggleValue","resetValue","TagWrapper","flexRowWithGap","active","fg","bg","borderWidth","transitionTime","switchingColors","gutter","collapsed","fontSizes","content","modifierToStyle","Modifier","PLUS","MINUS","OR","TagNameSpan","modifier","TagName","name","count","formatTagnameAndCount","tabIndex","AliasWrapper","bigSpacing","Alias","dispatch","useDispatch","handleClick","stopPropagation","tag","TagDataClass","addTag","ListWrapper","parentRef","offsetTop","clientHeight","offsetLeft","clientWidth","AliasesList","aliases","DropdownArrow","$collapsed","Tag","detailed","tagRef","setTagRef","toggleCollapsed","resetCollapsed","activeTags","useSelector","selectActiveTags","selectAliasesByTagName","filteredAliases","filter","alias","isActive","hasAliases","removeTag","handleArrowClick","handleEnter","onMouseLeave","TagListWrapper","flexRowGap","flexColumnGap","TagList","tags","children","FlexPair","FallbackSource","color","ColoredIconLink","DefaultLinkSource","useTheme","formatSource","SpecialLinkSource","Icon","extractFirstElement","split","sources","viewBox","xmlns","fill","d","path","startsWith","extractSecondElement","URL","hostname","Source","parseUrl","links","link","source","keys","includes","getTitle","AdditionalDetails","flexColumnWithGap","Comment","Username","Message","Faded","Comments","comments","comment","creator","body","Entry","Metadata","created_at","status","formatDateTime","Date","formatTime","now","Rating","toUpperCase","ScorePair","$liked","liked","Score","postId","selectLikedByPostId","likePost","boolToNumber","Bar","layer","hugeSpacing","Menu","MenuEntry","DetailsTagList","Details","activeTab","setActiveTab","selectPostById","rating","score","tagsForRendering","listToMap","showMetadata","selectShowMetadata","showComments","selectShowComments","commentsLength","setTags","setComments","setMetadata","metadata","Slider","commonStyle","MorphSvg","svg","isVisible","VideoProgressBar","maxValue","handleChange","log","newValue","chromePercentage","Math","round","step","min","max","backgroundImage","ExpandButton","dropShadow","CloseButton","LinkList","ScrollHint","PlayButton","isPaused","x","y","PreviousButton","NextButton","LengthDisplay","spacing","Overlay","togglePlay","isPlayable","currentTime","duration","mediaRef","toggleVisible","post","posts","selectPosts","isReaderOpen","selectFullsceenState","useCorsProxy","selectUseCorsProxy","nextIndex","selectNextIndex","previousIndex","selectPreviousIndex","downloadSrc","getCorrectSourceOrigin","big_src","onDownloadClick","download","onExpandClick","exitFullscreen","pause","enterFullscreen","handlePlayPressed","selectPostAt","postAtindex","setFullScreenPost","selectNext","undefined","selectPrevious","onSeek","aria-label","isNaN","formatDuration","FlexVideo","video","flexMedia","preserveAspectRatio","PostVideo","mediaStyle","PostImage","FlexImage","useIsOnScreen","isOnScreen","setOnScreen","handleOnScreenChange","entry","isIntersecting","observer","IntersectionObserver","threshold","root","observe","unobserve","Video","autoPlay","selectAutoPlay","videoRef","setVideoRef","setTime","intervalId","setIntervalId","play","setInterval","clearInterval","paused","preload","selectPreloadVideos","controls","loop","onLoadedMetadata","Gif","thumbnail_src","setPaused","gifRef","setGifRef","usedSource","loading","Picture","Player","MediaComponent","getMediaType","MediaType","VIDEO","GIF","getMedia","small_src","usedThumbnail","usedSrc","ItemWrapper","PositonWrapper","bodyWidth","PostWrapper","Post","media_type","has_comments","originals","selectOriginals","media_src","getCorrectSource","fetchComments","role","order","EntryWrapper","Name","Count","DropdownListEntry","unit","formatTagname","formatCount","tagSelectorRef","flexColumn","tagSelector","sizeAndPosition","DropdownList","Input","TagInput","placeholder","TagSelectorWrapper","closed","AddButton","ModifierButton","TagSelector","setTagSelectorRef","setModifier","nextModifier","currentIndex","indexOf","useModifier","suggestions","selectSuggestions","activateTag","getSupertags","then","supertags","forEach","prepareTag","setSuggestions","useThrottledEffect","fetchSuggestions","handleAddClick","trim","sanitizedTagname","serializeTagname","suggestion","s","LabeledToggle","OptionsWrapper","gridWithGap","RatedRow","SortRow","sortOptions","SortType","SCORE","DATE","Options","usePreference","PreferenceKey","RATED","rated","setRated","RATED_THRESHOLD","ratedThreshold","setRatedThreshold","SORT","sort","setSort","toggleRated","ratedThresholdInternal","setRatedThresholdInternal","handleSortChange","useAction","actionCreator","SearchButton","search","getResults","ModalSurface","Surface","layerBgSolid","SupertagModal","onClose","setName","desc","setDesc","reduce","result","handleCreateTagList","addSupertag","e","ActiveTags","offerSupertags","isModalOpen","setModalOpen","numberOfActiveTags","selectNumberOfActiveTags","openModal","closeModal","ConfigWrapper","section","centeredMaxWidth","Config","useFirebaseAuthState","isSignedIn","htmlFor","tips","Span","RandomTip","tip","floor","random","deadline","UpdateHighlight","Placeholder","SearchPlaceholder","ResultsTitle","fullNumber","toggleFullNumber","selectCount","formattedCount","toLocaleString","LayoutHeader","Div","StyledSurface","StyledImage","LayoutOutOfItems","selectAliasesAsList","aliasesForRendering","outOfResultsPicture","LayoutLoadingItem","Loading","PageRow","Left","Right","PageNumber","RedButton","CurrentNumber","PageNavigation","currentPage","loadPage","lastPage","selectLastPage","loadSpecificPage","newPage","loadFirst","loadLast","loadPrevious","loadNext","FlexColumn","BaseFlexColumn","PageLayout","header","scrollAndLoadPage","document","getElementsByClassName","scrollIntoView","item","FullScreenDiv","Reader","fullScreenPost","selectFullScreenPost","fullScreenIndex","selectFullScreenIndex","getMoreResults","readerRef","setReaderRef","fullscreenElement","openFullscreen","effect","exit","handler","data","addEventListener","removeEventListener","Search","hasMorePosts","selectHasMoreResults","resultsLayout","selectResultsLayout","pageSize","selectPageSize","pageNumber","selectPageNumber","ResultLayout","INFINITE_COLUMN","hasMorePages"],"mappings":"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","file":"static/js/5.2bddfb7c.chunk.js","sourcesContent":["import {\r\n  faDeviantart,\r\n  faDiscord,\r\n  faGithub,\r\n  faGoogle,\r\n  faPatreon,\r\n  faTumblr,\r\n  faTwitter,\r\n} from '@fortawesome/free-brands-svg-icons'\r\nimport {\r\n  faCalendarDay,\r\n  faCaretDown,\r\n  faCheckSquare,\r\n  faCodeBranch,\r\n  faCopyright,\r\n  faDownload,\r\n  faExpand,\r\n  faExternalLinkAlt,\r\n  faHashtag,\r\n  faHeart,\r\n  faImage,\r\n  faInfoCircle,\r\n  faLink,\r\n  faPen,\r\n  faRegistered,\r\n  faSearch,\r\n  faTags,\r\n  faTimes,\r\n  faUser,\r\n  faWrench,\r\n} from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport styled from 'styled-components'\r\n\r\nexport const CharacterIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faUser,\r\n})``\r\n\r\nexport const ArtistIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faPen,\r\n})``\r\n\r\nexport const CopyrightIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCopyright,\r\n})``\r\n\r\nexport const MetaDataIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faInfoCircle,\r\n})``\r\n\r\nexport const CloseIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTimes,\r\n})``\r\n\r\nexport const ExpandIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faExpand,\r\n})``\r\n\r\nexport const ExternalLinkIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faExternalLinkAlt,\r\n})``\r\n\r\nexport const DownloadIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faDownload,\r\n})``\r\n\r\nexport const SourceIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faHashtag,\r\n})``\r\n\r\nexport const RatingIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faRegistered,\r\n})``\r\n\r\nexport const HeartIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faHeart,\r\n})``\r\n\r\nexport const LinkIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faLink,\r\n})``\r\n\r\nexport const ArrowDown = styled(FontAwesomeIcon).attrs({\r\n  icon: faCaretDown,\r\n})``\r\n\r\nexport const CodeBranchIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCodeBranch,\r\n})``\r\n\r\nexport const GithubIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faGithub,\r\n})``\r\n\r\nexport const PatreonIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faPatreon,\r\n})``\r\n\r\nexport const TwitterIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTwitter,\r\n})``\r\n\r\nexport const DeviantArtIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faDeviantart,\r\n})``\r\n\r\nexport const DiscordIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faDiscord,\r\n})``\r\n\r\nexport const TumblrIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTumblr,\r\n})``\r\n\r\nexport const CalendarIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCalendarDay,\r\n})``\r\n\r\nexport const CheckIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCheckSquare,\r\n})``\r\n\r\nexport const ImageIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faImage,\r\n})``\r\n\r\nexport const GoogleIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faGoogle,\r\n})``\r\n\r\nexport const WrenchIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faWrench,\r\n})``\r\n\r\nexport const SearchIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faSearch,\r\n})``\r\n\r\nexport const SupertagIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTags,\r\n})``\r\n","import { keyframes } from 'styled-components'\n\nexport const fadeOut = keyframes`\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n`\n\nexport const kofiWiggle = keyframes`\n  0% {\n    transform: rotate(0) scale(1);\n  }\n  60% {\n    transform: rotate(0) scale(1);\n  }\n  75% {\n    transform: rotate(0) scale(1.12);\n  }\n  80% {\n    transform: rotate(0) scale(1.1);\n  }\n  84% {\n    transform: rotate(-10deg) scale(1.1);\n  }\n  88% {\n    transform: rotate(10deg) scale(1.1);\n  }\n  92% {\n    transform: rotate(-10deg) scale(1.1);\n  }\n  96% {\n    transform: rotate(10deg) scale(1.1);\n  }\n  100% {\n    transform: rotate(0) scale(1);\n  }\n`\n","import React, { ChangeEventHandler } from 'react'\nimport styled, { css } from 'styled-components'\nimport { defaultBorder, defaultBlock } from '../../styled/mixins'\n\nconst Wrapper = styled.div(\n  ({ theme }) => css`\n    width: 100px;\n    height: ${theme.dimensions.blockHeight};\n  `\n)\n\nconst StyledSelect = styled.select(\n  ({ theme }) => css`\n    ${defaultBorder({ theme })}\n    ${defaultBlock({ theme })}\n    width: 100%;\n    height: 100%;\n    background-color: ${theme.colors.backgroundColor2};\n  `\n)\n\nconst Option = styled.option(\n  ({ theme }) => css`\n    ${defaultBorder({ theme })}\n    background-color: ${theme.colors.backgroundColor2};\n    ${defaultBlock({ theme })}\n  `\n)\n\ninterface SelectProps {\n  options: Record<string, string>\n  value: string\n  onChange: ChangeEventHandler\n}\n\nexport default function Select(props: SelectProps) {\n  const { options, value, onChange } = props\n\n  return (\n    <Wrapper>\n      <StyledSelect value={value} onChange={onChange}>\n        {Object.entries(options).map(([optionKey, optionValue]) => (\n          <Option key={optionKey} value={optionKey}>\n            {optionValue}\n          </Option>\n        ))}\n      </StyledSelect>\n    </Wrapper>\n  )\n}\n","import React, { ChangeEventHandler, KeyboardEventHandler, useCallback, useEffect, useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { defaultBorder, defaultBlock } from '../../styled/mixins'\n\nconst StyledInput = styled.input(\n  ({ theme }) => css`\n    width: 70px;\n    ${defaultBorder({ theme })}\n    background-color: ${theme.colors.backgroundColor2};\n    ${defaultBlock({ theme })}\n    text-align: left;\n  `\n)\n\ninterface SmallInputProps<T> {\n  value: T\n  onSubmit: (value: T) => void\n  className?: string\n}\n\nexport function SmallTextInput(props: SmallInputProps<string>) {\n  const { value, onSubmit, className } = props\n  const [internalValue, setInternalValue] = useState(value)\n\n  useEffect(() => {\n    setInternalValue(value)\n  }, [value])\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((event) => {\n    setInternalValue(event.target.value)\n  }, [])\n\n  const onBlur = useCallback(() => {\n    onSubmit(internalValue)\n  }, [internalValue, onSubmit])\n\n  const onKeyDown: KeyboardEventHandler = useCallback(\n    (event) => {\n      if (event.key === 'Enter') {\n        onSubmit(internalValue)\n      }\n    },\n    [internalValue, onSubmit]\n  )\n\n  return (\n    <StyledInput\n      type='text'\n      value={internalValue}\n      onChange={onChange}\n      onBlur={onBlur}\n      onKeyDown={onKeyDown}\n      className={className}\n    />\n  )\n}\n\nexport function SmallNumberInput(props: SmallInputProps<number>) {\n  const { value, onSubmit, className } = props\n  const [internalValue, setInternalValue] = useState(value.toString())\n\n  useEffect(() => {\n    if (typeof value === 'number') {\n      setInternalValue(value.toString())\n    }\n  }, [value])\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback((event) => {\n    setInternalValue(event.target.value)\n  }, [])\n\n  const onBlur = useCallback(() => {\n    onSubmit(Number(internalValue))\n  }, [internalValue, onSubmit])\n\n  const onKeyDown: KeyboardEventHandler = useCallback(\n    (event) => {\n      if (event.key === 'Enter') {\n        onSubmit(Number(internalValue))\n      }\n    },\n    [internalValue, onSubmit]\n  )\n\n  return (\n    <StyledInput\n      type='number'\n      value={internalValue}\n      onChange={onChange}\n      onBlur={onBlur}\n      onKeyDown={onKeyDown}\n      className={className}\n    />\n  )\n}\n","import React, { MouseEventHandler } from 'react'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport { supportsAspectRatio } from '../../data/browserUtils'\nimport { defaultBorder } from '../../styled/mixins'\n\nconst Track = styled.div(\n  (props) => css`\n    height: 24px;\n    width: 50px;\n    ${defaultBorder(props)}\n    border-radius: 30px;\n    background-color: ${props.theme.colors.backgroundColor};\n    transition: transform ${props.theme.timings.longTransitionTime} ease-in-out;\n  `\n)\n\nfunction circle() {\n  return supportsAspectRatio\n    ? css`\n        height: 100%;\n        aspect-ratio: 1/1;\n      `\n    : css`\n        height: 100%;\n        width: 22px;\n      `\n}\n\nconst Thumb = styled.div(\n  (props: { value: boolean; theme: DefaultTheme }) => css`\n    ${circle()}\n    background-color: ${props.value ? props.theme.colors.accentColor : props.theme.colors.backgroundColor2};\n    border-radius: 100px;\n    transition: all 0.2s ease-in-out;\n    transform: translate(${props.value ? '26px' : '0px'});\n  `\n)\n\ninterface ToggleProps {\n  value: boolean\n  onToggle: MouseEventHandler\n}\n\nexport default function Toggle(props: ToggleProps) {\n  const { value, onToggle } = props\n\n  return (\n    <Track onClick={onToggle}>\n      <Thumb value={value} />\n    </Track>\n  )\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { kofiWiggle } from '../../styled/animations'\n\nconst Container = styled.div`\n  display: inline-block;\n  white-space: nowrap;\n`\n\nexport const AButton = styled.a(\n  ({ theme }) => css`\n    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.2);\n    line-height: 36px;\n    display: inline-block;\n    background-color: ${theme.colors.layerBg};\n    padding: 2px 12px;\n    text-align: center;\n    border-radius: ${theme.dimensions.borderRadius};\n    color: ${theme.colors.text};\n    cursor: pointer;\n    overflow-wrap: break-word;\n    vertical-align: middle;\n    border: 0 none #fff;\n    font-family: 'Quicksand', Helvetica, Century Gothic, sans-serif !important;\n    text-decoration: none;\n    text-shadow: none;\n    font-weight: 700;\n    font-size: 14px;\n\n    :visited {\n      color: ${theme.colors.text} !important;\n      text-decoration: none !important;\n    }\n\n    :hover {\n      opacity: 0.8;\n      text-decoration: none !important;\n    }\n\n    :active {\n      opacity: 0.6;\n      text-decoration: none !important;\n    }\n  `\n)\n\nconst Text = styled.span`\n  letter-spacing: -0.15px !important;\n  vertical-align: middle;\n  line-height: 33px !important;\n  padding: 0;\n  text-align: center;\n  text-decoration: none !important;\n  text-shadow: 0 1px 1px rgba(34, 34, 34, 0.05);\n\n  a {\n    text-decoration: none !important;\n  }\n\n  a:hover {\n    text-decoration: none;\n  }\n`\n\nconst Image = styled.img`\n  display: initial !important;\n  vertical-align: middle;\n  height: 13px !important;\n  width: 20px !important;\n  padding-top: 0;\n  padding-bottom: 0;\n  border: none;\n  margin-top: 0;\n  margin-right: 5px;\n  margin-left: 0;\n  margin-bottom: 3px;\n  content: url('https://ko-fi.com/img/cup-border.png');\n\n  :after {\n    vertical-align: middle;\n    height: 25px;\n    padding-top: 0;\n    padding-bottom: 0;\n    border: none;\n    margin-top: 0;\n    margin-right: 6px;\n    margin-left: 0;\n    margin-bottom: 4px !important;\n    content: url('https://ko-fi.com/img/whitelogo.svg');\n\n    height: 15px !important;\n    width: 22px !important;\n    display: initial;\n    animation: ${kofiWiggle} 3s infinite;\n  }\n`\n\ninterface KofiButtonProps {\n  id: string\n  label: string\n}\n\nexport default function KofiButton(props: KofiButtonProps) {\n  const { id, label } = props\n\n  return (\n    <Container>\n      <AButton title={label} href={'https://ko-fi.com/' + id} target='_blank' rel='noopener noreferrer'>\n        <Text>\n          <Image src='https://ko-fi.com/img/cup-border.png' className='kofiimg' alt='Ko-Fi button' />\n          {label}\n        </Text>\n      </AButton>\n    </Container>\n  )\n}\n","import React, { useCallback } from 'react'\nimport { AutoSizer, CellMeasurer, CellMeasurerCache, IndexRange, InfiniteLoader, List } from 'react-virtualized'\nimport LayoutElementProps from '../LayoutElementProps'\n\nconst cache = new CellMeasurerCache({\n  fixedWidth: true,\n})\n\ninterface InfiniteColumnProps<T> {\n  Header?: (props: LayoutElementProps) => JSX.Element\n  OutOfItems?: (props: LayoutElementProps) => JSX.Element\n  items?: T[]\n  LoadingItem: (props: LayoutElementProps) => JSX.Element\n  hasMoreRows: boolean\n  loadMore: () => void\n  ItemComponent: (props: T & LayoutElementProps) => JSX.Element\n  isLoading: boolean\n  setLoading: (value: boolean) => void\n}\n\nexport default function InifinteColumn<T>(props: InfiniteColumnProps<T>) {\n  const {\n    Header,\n    items = [],\n    LoadingItem,\n    hasMoreRows,\n    ItemComponent,\n    loadMore,\n    OutOfItems,\n    isLoading,\n    setLoading,\n  } = props\n\n  const prependedRows = Header ? 1 : 0\n  const loadingRows = 1\n  const rowCount = items.length + prependedRows + loadingRows\n\n  const isRowLoaded = useCallback(\n    ({ index }: { index: number }) => index < prependedRows + items.length + (hasMoreRows ? 0 : 1),\n    [hasMoreRows, items.length, prependedRows]\n  )\n\n  const rowRenderer = useCallback(\n    ({ index, key, parent, style }: { index: number; key: any; parent: any; style: any }) => {\n      return (\n        <CellMeasurer cache={cache} columnIndex={0} key={key} rowIndex={index} parent={parent}>\n          {({ measure, registerChild }) => {\n            // Index 0\n            if (Header && index < prependedRows) {\n              return <Header style={style} virtualRef={registerChild} onLoad={measure} />\n            }\n\n            // Index 1\n            if (index < prependedRows + items.length) {\n              return (\n                <ItemComponent\n                  style={style}\n                  virtualRef={registerChild}\n                  onLoad={measure}\n                  {...items[index - prependedRows]}\n                />\n              )\n            }\n\n            // Index 2\n            if (index < prependedRows + items.length + loadingRows) {\n              return hasMoreRows || isLoading ? (\n                <LoadingItem style={style} virtualRef={registerChild} onLoad={measure} />\n              ) : OutOfItems && items.length > 0 ? (\n                <OutOfItems style={style} virtualRef={registerChild} onLoad={measure} />\n              ) : (\n                <div></div>\n              )\n            }\n\n            console.warn('index not found / out of bounds. INDEX:', index)\n            return null\n          }}\n        </CellMeasurer>\n      )\n    },\n    [Header, prependedRows, items, ItemComponent, hasMoreRows, isLoading, LoadingItem, OutOfItems]\n  )\n\n  const loadMoreRows = (params: IndexRange) => {\n    if (isLoading || !hasMoreRows) {\n      return Promise.reject(0)\n    }\n\n    setLoading(true)\n    loadMore()\n\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        setLoading(false)\n        resolve(1)\n      }, 1000)\n    })\n  }\n\n  const handleResize = useCallback((size) => {\n    cache.clearAll()\n  }, [])\n\n  return (\n    <InfiniteLoader isRowLoaded={isRowLoaded} loadMoreRows={loadMoreRows} rowCount={rowCount}>\n      {({ onRowsRendered, registerChild }) => {\n        return (\n          <AutoSizer onResize={handleResize}>\n            {({ height, width }) => {\n              return (\n                <List\n                  ref={registerChild}\n                  onRowsRendered={onRowsRendered}\n                  rowRenderer={rowRenderer}\n                  deferredMeasurementCache={cache}\n                  overscanRowCount={10}\n                  rowCount={items.length + prependedRows + loadingRows}\n                  rowHeight={cache.rowHeight}\n                  width={width}\n                  height={height}\n                />\n              )\n            }}\n          </AutoSizer>\n        )\n      }}\n    </InfiniteLoader>\n  )\n}\n","import React, { MouseEventHandler, useMemo } from 'react'\nimport { NO_OP, TagType } from '../data/types'\nimport {\n  CharacterIcon,\n  CopyrightIcon,\n  ArtistIcon,\n  RatingIcon,\n  SourceIcon,\n  MetaDataIcon,\n  SupertagIcon,\n} from './FontAwesomeIcons'\n\ninterface TypeIconProps {\n  types?: string[]\n  className?: string\n  color?: string\n  size?: number\n  onClick?: MouseEventHandler\n  left?: boolean\n  right?: boolean\n}\n\nexport default function TypeIcon(props: TypeIconProps) {\n  const { types = [], className = '', onClick = NO_OP } = props\n  const interestingType = useMemo(() => types.find((t) => !t.match(/^[general|ambiguous]$/)), [types])\n\n  switch (interestingType) {\n    case TagType.CHARACTER:\n      return <CharacterIcon className={className} onClick={onClick} />\n    case TagType.COPYRIGHT:\n      return <CopyrightIcon className={className} onClick={onClick} />\n    case TagType.ARTIST:\n      return <ArtistIcon className={className} onClick={onClick} />\n    case TagType.RATING:\n      return <RatingIcon className={className} onClick={onClick} />\n    case TagType.SOURCE:\n      return <SourceIcon className={className} onClick={onClick} />\n    case TagType.METADATA:\n      return <MetaDataIcon className={className} onClick={onClick} />\n    case TagType.SUPERTAG:\n      return <SupertagIcon className={className} onClick={onClick} />\n    default:\n      return null\n  }\n}\n","import { useCallback, useState } from 'react'\n\n/**\n * A small wrapper for a useState<boolean> that is primarily used for toggling.\n * Saves me a few useCallbacks.\n */\nexport default function useToggle(initialValue = false): [boolean, () => void, () => void] {\n  const [value, setValue] = useState<boolean>(initialValue)\n  const toggleValue = useCallback(() => setValue(!value), [value])\n  const resetValue = useCallback(() => setValue(initialValue), [initialValue])\n\n  return [value, toggleValue, resetValue]\n}\n","import { MouseEventHandler } from 'react'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport { flexRowWithGap } from '../../styled/mixins'\n\nconst dropdownBorderRadius = (collapsed: boolean, theme: DefaultTheme) =>\n  collapsed ? theme.dimensions.borderRadius : `${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius} 0 0`\n\nconst switchingColors = (active: boolean, theme: DefaultTheme) => {\n  const fg = active ? theme.colors.backgroundColor : theme.colors.accentColor\n  const bg = active ? theme.colors.accentColor : theme.colors.backgroundColor\n\n  return css`\n    color: ${fg};\n    background-color: ${bg};\n    border: ${theme.colors.accentColor} ${theme.dimensions.borderWidth} solid;\n    transition: all ${theme.timings.transitionTime} ease-out;\n\n    svg {\n      color: ${fg};\n    }\n\n    cursor: pointer;\n\n    :hover,\n    :focus,\n    :active {\n      border-color: ${theme.colors.backgroundColor2};\n      color: ${theme.colors.backgroundColor2};\n\n      svg {\n        color: ${theme.colors.backgroundColor2};\n      }\n    }\n\n    :active {\n      transform: scale(1.05);\n    }\n  `\n}\n\nconst TagWrapper = styled.div(\n  (props: { active: boolean; collapsed: boolean; onMouseLeave: MouseEventHandler; theme: DefaultTheme }) =>\n    css`\n      ${flexRowWithGap({ theme: props.theme })}\n      ${switchingColors(props.active, props.theme)}\n      padding: 0 ${props.theme.dimensions.gutter};\n      height: ${props.theme.dimensions.blockHeight};\n      border-radius: ${dropdownBorderRadius(props.collapsed, props.theme)};\n      font-size: ${props.theme.fontSizes.content};\n    `\n)\n\nexport default TagWrapper\n","import styled, { css } from 'styled-components'\nimport { Modifier, TagType } from '../../data/types'\nimport { formatTagnameAndCount } from '../../misc/formatting'\n\ninterface TagNameProps {\n  modifier: Modifier\n  name: string\n  count?: number | null\n  types?: TagType[]\n}\n\nconst modifierToStyle = {\n  [Modifier.PLUS]: css``,\n  [Modifier.MINUS]: css`\n    text-decoration: line-through;\n  `,\n  [Modifier.OR]: css`\n    font-style: italic;\n  `,\n}\n\nconst TagNameSpan = styled.span(\n  ({ modifier = Modifier.PLUS }: Pick<TagNameProps, 'modifier'>) => modifierToStyle[modifier]\n)\n\nexport default function TagName(props: TagNameProps) {\n  const { modifier, name, count } = props\n\n  const text = formatTagnameAndCount(name, count)\n\n  return (\n    <TagNameSpan modifier={modifier} tabIndex={0}>\n      {text}\n    </TagNameSpan>\n  )\n}\n","import React, { MouseEventHandler, useCallback } from 'react'\nimport { useDispatch } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport TagDataClass from '../../data/TagDataClass'\nimport { Modifier } from '../../data/types'\nimport { addTag } from '../../redux/actions'\nimport { flexRowWithGap } from '../../styled/mixins'\nimport TagName from './TagName'\n\ninterface AliasProps {\n  modifier: Modifier\n  name: string\n  count?: number | null\n}\n\nconst AliasWrapper = styled.div(\n  ({ theme }) => css`\n    ${flexRowWithGap({ theme })}\n    padding: 0 ${theme.dimensions.bigSpacing};\n    height: ${theme.dimensions.blockHeight};\n    font-size: ${theme.fontSizes.content};\n  `\n)\n\nexport default function Alias(props: AliasProps) {\n  const { modifier, name, count } = props\n\n  const dispatch = useDispatch()\n\n  const handleClick: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n      const tag = new TagDataClass(name, [], count, modifier)\n\n      dispatch(addTag(tag))\n    },\n    [count, dispatch, modifier, name]\n  )\n\n  return (\n    <AliasWrapper onClick={handleClick}>\n      <TagName modifier={modifier} name={name} count={count} />\n    </AliasWrapper>\n  )\n}\n","import React from 'react'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport TagDataClass from '../../data/TagDataClass'\nimport { Modifier } from '../../data/types'\nimport Alias from './Alias'\n\nconst ListWrapper = styled.div(\n  ({ theme, parentRef }: { theme: DefaultTheme; parentRef: HTMLDivElement }) => css`\n    position: absolute;\n    top: ${parentRef.offsetTop + parentRef.clientHeight + 4}px;\n    left: ${parentRef.offsetLeft}px;\n    width: ${parentRef.clientWidth + 5}px;\n\n    display: flex;\n    flex-direction: column;\n\n    border-bottom-left-radius: ${theme.dimensions.borderRadius};\n    border-bottom-right-radius: ${theme.dimensions.borderRadius};\n    border: ${theme.dimensions.borderWidth} solid ${theme.colors.accentColor};\n    border-top: none;\n\n    background: ${theme.colors.backgroundColor};\n    z-index: 3;\n    color: ${theme.colors.accentColor};\n\n    > :not(:last-child) {\n      border-bottom: ${theme.dimensions.borderWidth} solid ${theme.colors.accentColor};\n    }\n  `\n)\n\ninterface AliasesListProps {\n  aliases: TagDataClass[]\n  modifier: Modifier\n  parentRef: HTMLDivElement\n}\n\nexport default function AliasesList(props: AliasesListProps) {\n  const { aliases, modifier, parentRef } = props\n\n  return (\n    <ListWrapper parentRef={parentRef}>\n      {aliases.map(({ name, count }) => (\n        <Alias key={'a_' + name} modifier={modifier} name={name} count={count} />\n      ))}\n    </ListWrapper>\n  )\n}\n","import React, { KeyboardEventHandler, MouseEventHandler, useCallback, useMemo, useState } from 'react'\r\nimport TypeIcon from '../../icons/TypeIcon'\r\nimport { ArrowDown } from '../../icons/FontAwesomeIcons'\r\nimport TagDataClass from '../../data/TagDataClass'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { selectActiveTags, selectAliasesByTagName } from '../../redux/selectors'\r\nimport { addTag, removeTag } from '../../redux/actions'\r\nimport useToggle from '../../hooks/useToggle'\r\nimport TagWrapper from './TagWrapper'\r\nimport TagName from './TagName'\r\nimport { Modifier } from '../../data/types'\r\nimport AliasesList from './AliasesList'\r\nimport styled, { css, DefaultTheme } from 'styled-components'\r\n\r\nconst DropdownArrow = styled(ArrowDown)(\r\n  ({ $collapsed, theme }: { $collapsed: boolean; theme: DefaultTheme }) => css`\r\n    transition: all ${theme.timings.transitionTime} ease-out;\r\n    height: 32px;\r\n    width: 32px !important;\r\n    padding: 8px;\r\n    margin: 0 -8px;\r\n    ${$collapsed\r\n      ? css``\r\n      : css`\r\n          transform: rotate(180deg);\r\n        `}\r\n  `\r\n)\r\n\r\ninterface TagProps extends TagDataClass {\r\n  detailed: boolean\r\n}\r\n\r\nexport default function Tag(props: TagProps) {\r\n  const { name, count, modifier = Modifier.PLUS, types, detailed } = props\r\n\r\n  const [tagRef, setTagRef] = useState<HTMLDivElement | null>(null)\r\n  const [collapsed, toggleCollapsed, resetCollapsed] = useToggle(true)\r\n\r\n  const dispatch = useDispatch()\r\n  const activeTags = useSelector(selectActiveTags)\r\n  const aliases = useSelector(selectAliasesByTagName(name))\r\n\r\n  const filteredAliases = useMemo(() => (aliases ? aliases.filter((alias) => !(alias.name in activeTags)) : []), [\r\n    activeTags,\r\n    aliases,\r\n  ])\r\n\r\n  const isActive = name in activeTags\r\n  const hasAliases = filteredAliases?.length > 0\r\n\r\n  const handleClick = useCallback(\r\n    (event: React.MouseEvent | React.KeyboardEvent) => {\r\n      event.stopPropagation()\r\n      const tag = new TagDataClass(name, types, count, modifier)\r\n\r\n      if (isActive) {\r\n        dispatch(removeTag(tag))\r\n      } else {\r\n        dispatch(addTag(tag))\r\n      }\r\n    },\r\n    [count, dispatch, isActive, modifier, name, types]\r\n  )\r\n\r\n  const handleArrowClick: MouseEventHandler = useCallback(\r\n    (event) => {\r\n      event.stopPropagation()\r\n      toggleCollapsed()\r\n    },\r\n    [toggleCollapsed]\r\n  )\r\n\r\n  const handleEnter: KeyboardEventHandler = useCallback(\r\n    (event) => {\r\n      if (event.key === 'Enter') {\r\n        handleClick(event)\r\n      }\r\n    },\r\n    [handleClick]\r\n  )\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={isActive}\r\n      collapsed={collapsed}\r\n      onClick={handleClick}\r\n      onKeyDown={handleEnter}\r\n      onMouseLeave={resetCollapsed}\r\n      ref={setTagRef}\r\n    >\r\n      {detailed && <TypeIcon types={types} />}\r\n      <TagName modifier={modifier} name={name} count={count} />\r\n      {detailed && hasAliases && (\r\n        <>\r\n          <DropdownArrow onClick={handleArrowClick} $collapsed={collapsed} />\r\n          {!collapsed && tagRef && <AliasesList aliases={filteredAliases} modifier={modifier} parentRef={tagRef} />}\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport TagDataClass from '../../data/TagDataClass'\r\nimport { flexRowGap, flexColumnGap } from '../../styled/mixins'\r\nimport Tag from './Tag'\r\n\r\nconst TagListWrapper = styled.div(\r\n  ({ theme }) => css`\r\n    display: inline-flex;\r\n    flex-wrap: wrap;\r\n    ${flexRowGap(theme.dimensions.gutter)}\r\n    ${flexColumnGap(theme.dimensions.gutter)}\r\n  `\r\n)\r\n\r\ninterface TagListProps {\r\n  tags: Record<string, TagDataClass>\r\n  className?: string\r\n  detailed: boolean\r\n  children?: React.ReactNode\r\n}\r\n\r\nexport default function TagList(props: TagListProps) {\r\n  const { tags, className, detailed, children = null } = props\r\n\r\n  return (\r\n    <TagListWrapper className={className}>\r\n      {Object.entries(tags).map(([key, tag]) => (\r\n        <Tag key={key} detailed={detailed} {...tag} />\r\n      ))}\r\n      {children}\r\n    </TagListWrapper>\r\n  )\r\n}\r\n","import styled from 'styled-components'\nimport { flexRowWithGap } from '../../styled/mixins'\n\nconst FlexPair = styled.div`\n  ${flexRowWithGap}\n`\n\nexport default FlexPair\n","import React from 'react'\r\nimport { SourceIcon } from '../../../icons/FontAwesomeIcons'\r\nimport FlexPair from '../../common/FlexPair'\r\nimport SourceProps from './SourceProps'\r\n\r\nexport default function FallbackSource({ value }: SourceProps) {\r\n  return (\r\n    <FlexPair>\r\n      <SourceIcon color='white' />\r\n      <span>{value}</span>\r\n    </FlexPair>\r\n  )\r\n}\r\n","import styled, { css } from 'styled-components'\r\nimport { flexRowWithGap } from '../../styled/mixins'\r\n\r\nconst ColoredIconLink = styled.a(\r\n  ({ color, theme }) => css`\r\n    ${flexRowWithGap({ theme })}\r\n    ${color\r\n      ? css`\r\n          color: ${color} !important;\r\n        `\r\n      : ''};\r\n    white-space: nowrap;\r\n\r\n    svg {\r\n      height: 16px;\r\n    }\r\n  `\r\n)\r\n\r\nexport default ColoredIconLink\r\n","import React from 'react'\r\nimport { useTheme } from 'styled-components'\r\nimport { LinkIcon } from '../../../icons/FontAwesomeIcons'\r\nimport { formatSource } from '../../../misc/formatting'\r\nimport ColoredIconLink from '../../common/ColoredIconLink'\r\nimport SourceProps from './SourceProps'\r\n\r\nexport default function DefaultLinkSource({ value }: SourceProps) {\r\n  const color = useTheme().colors.accentColor\r\n  const title = formatSource(value)\r\n\r\n  return (\r\n    <ColoredIconLink color={color} href={value} target='_blank' rel='noopener noreferrer' className='source'>\r\n      <LinkIcon color={color} />\r\n      {title}\r\n    </ColoredIconLink>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ColoredIconLink from '../../common/ColoredIconLink'\r\n\r\ninterface SpecialLinkSourceProps {\r\n  value: string\r\n  color: string\r\n  Icon: (props: unknown) => JSX.Element\r\n  title: string\r\n}\r\n\r\nexport default function SpecialLinkSource(props: SpecialLinkSourceProps) {\r\n  const { value, color, Icon, title } = props\r\n  return (\r\n    <ColoredIconLink href={value} target='_blank' rel='noopener noreferrer' className='source' color={color}>\r\n      <Icon />\r\n      {title}\r\n    </ColoredIconLink>\r\n  )\r\n}\r\n","import React from 'react'\nimport { parseUrl } from '../../../data/utils'\nimport { DeviantArtIcon, DiscordIcon, PatreonIcon, TumblrIcon, TwitterIcon } from '../../../icons/FontAwesomeIcons'\nimport { PixivIcon } from '../../../icons/PixivIcon'\nimport FallbackSource from './FallbackSource'\nimport DefaultLinkSource from './LinkSource'\nimport SourceProps from './SourceProps'\nimport SpecialLinkSource from './SpecialLinkSource'\n\n/**\n * Cut away all the unnecessary parts of the link\n */\nfunction extractFirstElement(value: string) {\n  return value.split(' ')[0].split('?')[0].split('/')[0]\n}\n\nfunction extractSecondElement(value: string) {\n  return value.split(' ')[0].split('?')[0].split('/')[1]\n}\n\ntype SourceMapping = [string, (props: any) => JSX.Element, (value: string) => string]\n\nconst sources: Record<string, SourceMapping> = {\n  'twitter.com/': ['#1da1f2', TwitterIcon, (value) => extractFirstElement(value.split('twitter.com/')[1])],\n  'pixiv.net/': ['#0096FA', PixivIcon, () => 'Pixiv'],\n  'patreon.com/': [\n    '#FF424D',\n    PatreonIcon,\n    (value) => {\n      const path = value.split('patreon.com/')[1]\n\n      return path.startsWith('posts/') ? extractSecondElement(path) : extractFirstElement(path)\n    },\n  ],\n  'deviantart.com/': ['#00e59b', DeviantArtIcon, (value) => extractFirstElement(value.split('deviantart.com/')[1])],\n  'discordapp.com/': ['#7289DA', DiscordIcon, () => 'Discord'],\n  'tumblr.com': ['#75869C', TumblrIcon, (value) => new URL(value).hostname.split('.')[0]],\n}\n\nexport default function Source({ value }: SourceProps) {\n  if (parseUrl(value)) {\n    // Sources can contain multiple links\n    const links = value.split(' ')\n    return (\n      <>\n        {links.map((link) => {\n          const source = Object.keys(sources).find((key) => link.includes(key))\n\n          if (source) {\n            const [color, Icon, getTitle] = sources[source]\n\n            return <SpecialLinkSource key={link} value={link} color={color} Icon={Icon} title={getTitle(link)} />\n          }\n\n          return <DefaultLinkSource key={link} value={link} />\n        })}\n      </>\n    )\n  }\n\n  return <FallbackSource value={value} />\n}\n","import React, { SVGProps } from 'react'\n\nexport function PixivIcon(props: SVGProps<SVGElement>) {\n  return (\n    <svg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <path\n        fill='currentColor'\n        d='M4.935 0A4.924 4.924 0 0 0 0 4.935v14.13A4.924 4.924 0 0 0 4.935 24h14.13A4.924 4.924 0 0 0 24 19.065V4.935A4.924 4.924 0 0 0 19.065 0zm7.81 4.547c2.181 0 4.058.676 5.399 1.847a6.118 6.118 0 0 1 2.116 4.66c.005 1.854-.88 3.476-2.257 4.563-1.375 1.092-3.225 1.697-5.258 1.697-2.314 0-4.46-.842-4.46-.842v2.718c.397.116 1.048.365.635.779H5.79c-.41-.41.19-.65.644-.779V7.666c-1.053.81-1.593 1.51-1.868 2.031.32 1.02-.284.969-.284.969l-1.09-1.73s3.868-4.39 9.553-4.39zm-.19.971c-1.423-.003-3.184.473-4.27 1.244v8.646c.988.487 2.484.832 4.26.832h.01c1.596 0 2.98-.593 3.93-1.533.952-.948 1.486-2.183 1.492-3.683-.005-1.54-.504-2.864-1.42-3.86-.918-.992-2.274-1.645-4.002-1.646Z'\n      />\n    </svg>\n  )\n}\n","import styled from 'styled-components'\r\nimport { flexColumnWithGap, gutter } from '../../../styled/mixins'\r\n\r\nexport const AdditionalDetails = styled.div`\r\n  ${flexColumnWithGap}\r\n  ${gutter}\r\n  \r\n  flex-wrap: wrap;\r\n  padding-top: 0;\r\n  grid-row: 4/5;\r\n`\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport CommentDataClass from '../../../data/CommentDataClass'\r\nimport { flexColumnGap } from '../../../styled/mixins'\r\nimport { Faded } from '../../common/Text'\r\nimport { AdditionalDetails } from './AdditonalDetails'\r\n\r\nconst Comment = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  ${flexColumnGap('4px')}\r\n`\r\n\r\nconst Username = styled.span`\r\n  line-height: 20px;\r\n`\r\n\r\nconst Message = styled(Faded)`\r\n  line-height: 20px;\r\n`\r\n\r\ninterface CommentsProps {\r\n  comments?: CommentDataClass[]\r\n}\r\n\r\nexport default function Comments(props: CommentsProps) {\r\n  const { comments = [] } = props\r\n\r\n  return (\r\n    <AdditionalDetails>\r\n      {comments &&\r\n        comments.map((comment, index) => (\r\n          <Comment key={index}>\r\n            <Username>{comment.creator}</Username>\r\n            <Message>{comment.body}</Message>\r\n          </Comment>\r\n        ))}\r\n    </AdditionalDetails>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport PostDataClass from '../../../data/PostDataClass'\r\nimport { CalendarIcon, CheckIcon, ImageIcon, SourceIcon } from '../../../icons/FontAwesomeIcons'\r\nimport { formatDateTime, formatTime } from '../../../misc/formatting'\r\nimport FlexPair from '../../common/FlexPair'\r\nimport { Faded } from '../../common/Text'\r\nimport { AdditionalDetails } from './AdditonalDetails'\r\n\r\nconst Entry = styled(Faded)`\r\n  white-space: nowrap;\r\n`\r\n\r\ntype MetadataProps = Pick<PostDataClass, 'created_at' | 'status' | 'width' | 'height' | 'id'>\r\n\r\nexport default function Metadata(props: MetadataProps) {\r\n  const { created_at, status, width, height, id } = props\r\n\r\n  // Status icon is static for now as I don't know what other statuses there are...Probably \"deleted\" or something..\r\n  return (\r\n    <AdditionalDetails>\r\n      <FlexPair>\r\n        <SourceIcon />\r\n        <Entry>{id}</Entry>\r\n      </FlexPair>\r\n      <FlexPair>\r\n        <CalendarIcon />\r\n        <Entry>\r\n          {formatDateTime(new Date(created_at))} ({formatTime(Date.now() - created_at)} ago)\r\n        </Entry>\r\n      </FlexPair>\r\n\r\n      <FlexPair>\r\n        <CheckIcon />\r\n        <Entry>{status}</Entry>\r\n      </FlexPair>\r\n\r\n      <FlexPair>\r\n        <ImageIcon />\r\n        <Entry>\r\n          {width} x {height}\r\n        </Entry>\r\n      </FlexPair>\r\n    </AdditionalDetails>\r\n  )\r\n}\r\n","import React from 'react'\nimport { RatingType } from '../../../data/types'\nimport { RatingIcon } from '../../../icons/FontAwesomeIcons'\nimport FlexPair from '../../common/FlexPair'\n\nexport default function Rating(props: { value: RatingType }) {\n  return (\n    <FlexPair>\n      <RatingIcon color='white' />\n      <span>{props.value[0].toUpperCase()}</span>\n    </FlexPair>\n  )\n}\n","import React, { MouseEventHandler, useCallback } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport { boolToNumber } from '../../../data/utils'\nimport { HeartIcon } from '../../../icons/FontAwesomeIcons'\nimport { likePost } from '../../../redux/actions'\nimport { selectLikedByPostId } from '../../../redux/selectors'\nimport FlexPair from '../../common/FlexPair'\n\nconst ScorePair = styled(FlexPair)(\n  ({ $liked, theme }: { $liked: boolean; theme: DefaultTheme }) => css`\n    transition: transform 0.1s ease-out;\n\n    ${$liked\n      ? css`\n          color: ${theme.colors.liked};\n\n          svg {\n            color: ${theme.colors.liked};\n          }\n        `\n      : css``}\n\n    :active {\n      transform: scale(1.1);\n    }\n  `\n)\n\nexport default function Score(props: { value: number; postId: number }) {\n  const { value, postId } = props\n\n  const dispatch = useDispatch()\n\n  const liked = useSelector(selectLikedByPostId(postId))\n  const handleClick: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n\n      if (!liked) {\n        dispatch(likePost(postId))\n      }\n    },\n    [dispatch, liked, postId]\n  )\n\n  return (\n    <ScorePair onClick={handleClick} $liked={liked}>\n      <HeartIcon color='white' />\n      <span>{value + boolToNumber(liked)}</span>\n    </ScorePair>\n  )\n}\n","import React, { MouseEventHandler, useCallback, useEffect, useMemo } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport PostDataClass from '../../../data/PostDataClass'\nimport { ActiveTab, NO_OP } from '../../../data/types'\nimport { listToMap } from '../../../data/utils'\nimport { selectPostById, selectShowComments, selectShowMetadata } from '../../../redux/selectors'\nimport { flexRowGap, flexRowWithGap, gutter, layer } from '../../../styled/mixins'\nimport TagList from '../../tag/TagList'\nimport Source from '../source/Source'\nimport Comments from './Comments'\nimport Metadata from './Metadata'\nimport Rating from './Rating'\nimport Score from './Score'\n\nconst Bar = styled.div(\n  ({ theme }) => css`\n    grid-row: 2/3;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-wrap: nowrap;\n    overflow-x: auto;\n    ${layer({ theme })}\n    padding: ${theme.dimensions.gutter};\n    ${flexRowGap(theme.dimensions.hugeSpacing)}\n    border-radius: 0 0 ${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius};\n  `\n)\n\nconst Menu = styled.div`\n  ${flexRowWithGap}\n  ${gutter}\n  justify-content: space-around;\n  margin-top: 8px;\n  grid-row: 3/4;\n`\n\nconst MenuEntry = styled.span`\n  ${({ active, theme }: { active: boolean; theme: DefaultTheme }) =>\n    active\n      ? css`\n          color: ${theme.colors.accentColor};\n        `\n      : ''}\n`\n\nconst DetailsTagList = styled(TagList)(\n  ({ theme }) => css`\n    grid-row: 4/5;\n    padding: ${theme.dimensions.gutter};\n  `\n)\n\ninterface DetailsProps {\n  postId: number\n  onLoad?: () => void\n  activeTab: ActiveTab\n  setActiveTab: React.Dispatch<React.SetStateAction<ActiveTab>>\n}\n\nexport default function Details(props: DetailsProps) {\n  const { postId, onLoad = NO_OP, activeTab, setActiveTab } = props\n  const { rating, score, tags, source, created_at, status, height, width, comments } = useSelector(\n    selectPostById(postId)\n  ) as PostDataClass\n  const tagsForRendering = useMemo(() => listToMap(tags, 'name'), [tags])\n  const showMetadata = useSelector(selectShowMetadata)\n  const showComments = useSelector(selectShowComments)\n\n  const commentsLength = comments?.length || 0\n\n  const setTags: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setActiveTab('tags')\n    },\n    [setActiveTab]\n  )\n\n  const setComments: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setActiveTab('comments')\n    },\n    [setActiveTab]\n  )\n\n  const setMetadata: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setActiveTab('metadata')\n    },\n    [setActiveTab]\n  )\n\n  useEffect(() => {\n    onLoad()\n  }, [onLoad, activeTab])\n\n  return (\n    <>\n      <Bar>\n        <Rating value={rating} />\n        <Score value={score} postId={postId} />\n        {!!source && <Source value={source} />}\n      </Bar>\n      {((showComments && commentsLength > 0) || showMetadata) && (\n        <Menu>\n          <MenuEntry active={activeTab === 'tags'} onClick={setTags}>\n            Tags\n          </MenuEntry>\n          {showComments && commentsLength > 0 && (\n            <MenuEntry active={activeTab === 'comments'} onClick={setComments}>\n              Comments\n            </MenuEntry>\n          )}\n          {showMetadata && (\n            <MenuEntry active={activeTab === 'metadata'} onClick={setMetadata}>\n              Metadata\n            </MenuEntry>\n          )}\n        </Menu>\n      )}\n\n      {\n        {\n          tags: <DetailsTagList tags={tagsForRendering} detailed={false} />,\n          comments: <Comments comments={comments} />,\n          metadata: <Metadata created_at={created_at} status={status} width={width} height={height} id={postId} />,\n        }[activeTab]\n      }\n    </>\n  )\n}\n","import React, { ChangeEventHandler, MouseEventHandler, useCallback, useEffect, useState } from 'react'\r\nimport styled, { css, useTheme } from 'styled-components'\r\n\r\nfunction thumbStyle() {\r\n  const commonStyle = css`\r\n    height: 16px;\r\n    width: 16px;\r\n    border-radius: 100px;\r\n    background: #ffffff;\r\n    cursor: pointer;\r\n  `\r\n\r\n  return css`\r\n    &::-webkit-slider-thumb {\r\n      -webkit-appearance: none;\r\n      ${commonStyle}\r\n    }\r\n\r\n    &::-moz-range-thumb {\r\n      ${commonStyle}\r\n    }\r\n\r\n    &::-ms-thumb {\r\n      ${commonStyle}\r\n    }\r\n  `\r\n}\r\n\r\nfunction trackStyle() {\r\n  return css`\r\n    -webkit-appearance: none;\r\n    width: 100%;\r\n    background: transparent;\r\n    border-radius: 100px;\r\n    height: 6px;\r\n\r\n    &::-moz-range-progress {\r\n      background-color: ${(props) => props.theme.colors.accentColor};\r\n    }\r\n\r\n    &::-ms-fill-lower {\r\n      background-color: ${(props) => props.theme.colors.accentColor};\r\n    }\r\n  `\r\n}\r\n\r\nconst Slider = styled.input`\r\n  ${trackStyle}\r\n  ${thumbStyle}\r\n`\r\n\r\ninterface ProgressBarProps {\r\n  value: number\r\n  maxValue: number\r\n  onChange: (newValue: number) => void\r\n  className?: string\r\n}\r\n\r\nexport default function ProgressBar(props: ProgressBarProps) {\r\n  const { value, maxValue, className, onChange } = props\r\n\r\n  const [internalValue, setInternalValue] = useState(value)\r\n\r\n  const handleChange: ChangeEventHandler<HTMLInputElement> = useCallback(\r\n    (event) => {\r\n      console.log('update')\r\n      const newValue = Number(event.target.value)\r\n      setInternalValue(newValue)\r\n      onChange(newValue)\r\n    },\r\n    [onChange]\r\n  )\r\n\r\n  const handleClick: MouseEventHandler = useCallback((event) => {\r\n    event.stopPropagation()\r\n  }, [])\r\n\r\n  // This hook ensures the parent component can control the state\r\n  useEffect(() => {\r\n    if (value !== internalValue) {\r\n      setInternalValue(value)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [value])\r\n\r\n  const theme = useTheme()\r\n  const chromePercentage = Math.round((internalValue / maxValue) * 100)\r\n\r\n  return (\r\n    <Slider\r\n      type='range'\r\n      step={0.034}\r\n      min={0}\r\n      max={maxValue}\r\n      value={internalValue}\r\n      onChange={handleChange}\r\n      className={className}\r\n      onClick={handleClick}\r\n      style={{\r\n        backgroundImage: `linear-gradient(90deg, ${theme.colors.accentColor} ${chromePercentage}%, transparent ${chromePercentage}%\r\n      )`,\r\n      }}\r\n    />\r\n  )\r\n}\r\n","import React, { MouseEventHandler } from 'react'\r\nimport styled from 'styled-components'\r\nimport { NO_OP } from '../data/types'\r\n\r\ninterface PlayPauseIconProps {\r\n  className?: string\r\n  isPaused: boolean\r\n  onClick: MouseEventHandler<SVGElement>\r\n}\r\n\r\nconst MorphSvg = styled.svg`\r\n  > rect {\r\n    transition: all 0.2s ease-in;\r\n  }\r\n\r\n  &.play {\r\n    .left {\r\n      clip-path: path('M1.61 0 L10.1 4.9 L10.1 19.1 L1.61 24');\r\n    }\r\n\r\n    .right {\r\n      clip-path: path('M22.39 12 L9.9 4.79 L9.9 19.21 L22.39 12');\r\n    }\r\n  }\r\n\r\n  &.pause {\r\n    .left {\r\n      clip-path: path('M4.8 0 L10 0 L10 24 L4.8 24');\r\n    }\r\n\r\n    .right {\r\n      clip-path: path('M19.2 0 L14 0 L14 24 L19.2 24');\r\n    }\r\n  }\r\n`\r\n\r\n/**\r\n * A button that fluidly transforms between a Play and a Pause icon based on isPaused.\r\n * Use onClick to update isPaused.\r\n * Additionally, this component takes a classname\r\n */\r\nexport function PlayPauseIcon(props: PlayPauseIconProps) {\r\n  const { onClick = NO_OP, className = '', isPaused } = props\r\n\r\n  return (\r\n    <MorphSvg\r\n      viewBox='0 0 24 24'\r\n      xmlns='http://www.w3.org/2000/svg'\r\n      onClick={onClick}\r\n      className={`${className} ${isPaused ? 'play' : 'pause'}`}\r\n    >\r\n      <rect className='left' color='currentColor' x='0' y='0' width='24' height=' 24' />\r\n      <rect className='right' color='currentColor' x='0' y='0' width='24' height=' 24' />\r\n    </MorphSvg>\r\n  )\r\n}\r\n","import React, { MouseEventHandler, useCallback } from 'react'\n\nimport { ExpandIcon, ExternalLinkIcon, CloseIcon, DownloadIcon, ArrowDown } from '../../icons/FontAwesomeIcons'\nimport styled, { css } from 'styled-components'\nimport useToggle from '../../hooks/useToggle'\nimport { fadeOut } from '../../styled/animations'\nimport { NO_OP } from '../../data/types'\nimport { formatDuration } from '../../misc/formatting'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  selectFullsceenState,\n  selectNextIndex,\n  selectPreviousIndex,\n  selectPostById,\n  selectPosts,\n  selectUseCorsProxy,\n} from '../../redux/selectors'\nimport { enterFullscreen, exitFullscreen, setFullScreenPost } from '../../redux/actions'\nimport PostDataClass from '../../data/PostDataClass'\nimport { download, getCorrectSourceOrigin } from '../../data/utils'\nimport ProgressBar from './ProgressBar'\nimport { dropShadow, gutter } from '../../styled/mixins'\nimport { PlayPauseIcon } from '../../icons/PlayPauseIcon'\n\nfunction overlayVisibility({ isVisible }: { isVisible: boolean }) {\n  return isVisible\n    ? css``\n    : css`\n        opacity: 0;\n        animation: ${fadeOut} 0.4s ease-in;\n      `\n}\n\nconst Wrapper = styled.div`\n  grid-area: 1/1/2/2;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: auto 1fr auto auto;\n  z-index: 1;\n\n  ${overlayVisibility};\n`\n\nconst VideoProgressBar = styled(ProgressBar)`\n  grid-area: 4/1/4/4;\n`\n\nconst ExpandButton = styled(ExpandIcon)(\n  ({ theme }) => css`\n    grid-area: 1/1/2/2;\n    place-self: start start;\n    ${dropShadow}\n    margin: ${theme.dimensions.gutter};\n  `\n)\n\nconst CloseButton = styled(CloseIcon)(\n  ({ theme }) => css`\n    grid-area: 1/1/2/2;\n    place-self: start start;\n    ${dropShadow}\n    margin: ${theme.dimensions.gutter};\n  `\n)\n\nconst LinkList = styled.div`\n  grid-area: 3/1/4/2;\n  place-self: end stretch;\n  display: flex;\n  place-items: start center;\n  ${gutter}\n\n  > svg {\n    ${dropShadow}\n  }\n`\n\nconst ScrollHint = styled(ArrowDown)`\n  grid-area: 3/2/4/3;\n  place-self: end center;\n  height: 32px;\n  width: 32px;\n`\n\nconst PlayButton = styled(PlayPauseIcon)`\n  height: 50px;\n  width: 50px;\n  grid-area: 2/2/3/3;\n  place-self: center center;\n  fill: white;\n  ${dropShadow}\n`\n\nconst PreviousButton = styled.div`\n  grid-area: 2/1/3/2;\n`\n\nconst NextButton = styled.div`\n  grid-area: 2/3/3/4;\n`\n\nconst LengthDisplay = styled.span(\n  (props) => css`\n    grid-area: 3/3/4/4;\n    place-self: end end;\n    background: #00000080;\n    border-radius: 4px;\n    padding: ${props.theme.dimensions.spacing};\n    margin: ${props.theme.dimensions.gutter};\n  `\n)\n\ninterface OverlayProps {\n  postId: number\n  togglePlay?: () => void\n  isPaused?: boolean\n  isPlayable: boolean\n  currentTime?: number\n  duration?: number\n  mediaRef?: HTMLVideoElement | null\n}\n\nfunction Overlay(props: OverlayProps) {\n  const {\n    togglePlay = NO_OP,\n    isPaused = true,\n    isPlayable = false,\n    currentTime = 0,\n    duration = null,\n    mediaRef,\n    postId,\n  } = props\n\n  const dispatch = useDispatch()\n\n  const [isVisible, toggleVisible] = useToggle()\n\n  const post = useSelector(selectPostById(postId)) as PostDataClass\n  const posts = useSelector(selectPosts)\n  const isReaderOpen = useSelector(selectFullsceenState)\n  const useCorsProxy = useSelector(selectUseCorsProxy)\n\n  const nextIndex = useSelector(selectNextIndex)\n  const previousIndex = useSelector(selectPreviousIndex)\n\n  const downloadSrc = getCorrectSourceOrigin(useCorsProxy, post.big_src)\n\n  const onDownloadClick = useCallback<MouseEventHandler>(\n    (event) => {\n      event.stopPropagation()\n      download(downloadSrc)\n    },\n    [downloadSrc]\n  )\n\n  const onExpandClick = useCallback<MouseEventHandler>(\n    (event) => {\n      event.stopPropagation()\n\n      if (isReaderOpen) {\n        dispatch(exitFullscreen())\n      } else {\n        mediaRef && mediaRef.pause()\n        dispatch(enterFullscreen(postId))\n      }\n    },\n    [dispatch, isReaderOpen, mediaRef, postId]\n  )\n\n  const handlePlayPressed: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n      togglePlay()\n    },\n    [togglePlay]\n  )\n\n  const selectPostAt = useCallback(\n    (index: number) => {\n      const postAtindex = posts[index]\n\n      if (postAtindex) {\n        dispatch(setFullScreenPost(postAtindex.id))\n      }\n    },\n    [dispatch, posts]\n  )\n\n  const selectNext = useCallback(() => {\n    if (nextIndex !== undefined) {\n      selectPostAt(nextIndex)\n    }\n  }, [selectPostAt, nextIndex])\n\n  const selectPrevious = useCallback(() => {\n    if (previousIndex !== undefined) {\n      selectPostAt(previousIndex)\n    }\n  }, [selectPostAt, previousIndex])\n\n  const onSeek = useCallback(\n    (value: number) => {\n      if (mediaRef) {\n        mediaRef.currentTime = value\n      }\n    },\n    [mediaRef]\n  )\n\n  return (\n    <Wrapper isVisible={isPaused || isVisible} onClick={toggleVisible}>\n      {isReaderOpen ? (\n        <CloseButton color='white' onClick={onExpandClick} aria-label='Open Fullscreen' />\n      ) : (\n        <ExpandButton color='white' onClick={onExpandClick} aria-label='Open Fullscreen' />\n      )}\n\n      <LinkList>\n        <a\n          href={downloadSrc}\n          target='_blank'\n          rel='noopener noreferrer'\n          aria-label='Open In New Tab'\n          title={downloadSrc}\n        >\n          <ExternalLinkIcon color='white' />\n        </a>\n\n        <DownloadIcon color='white' aria-label='Download Image' onClick={onDownloadClick} title={downloadSrc} />\n      </LinkList>\n\n      {isPlayable && (\n        <>\n          <PlayButton isPaused={isPaused} onClick={handlePlayPressed} aria-label='Play/Pause' />\n\n          {!!duration && !!currentTime && (\n            <VideoProgressBar value={currentTime} maxValue={duration} onChange={onSeek} />\n          )}\n\n          {mediaRef && !isNaN(mediaRef.duration) && <LengthDisplay>{formatDuration(mediaRef.duration)}</LengthDisplay>}\n          {downloadSrc.includes('.gif') && <LengthDisplay>GIF</LengthDisplay>}\n        </>\n      )}\n\n      {isReaderOpen && <PreviousButton onClick={selectPrevious}></PreviousButton>}\n      {isReaderOpen && <NextButton onClick={selectNext}></NextButton>}\n      {isReaderOpen && <ScrollHint />}\n    </Wrapper>\n  )\n}\n\nexport default Overlay\n","import styled from 'styled-components'\nimport { flexMedia, preserveAspectRatio } from '../../styled/mixins'\n\nconst FlexVideo = styled.video`\n  ${flexMedia}\n  ${preserveAspectRatio}\n  grid-area: 1/1/2/2;\n`\n\nexport default FlexVideo\n","import styled from 'styled-components'\r\nimport { mediaStyle } from '../../../styled/mixins'\r\nimport FlexImage from '../../styled/FlexImage'\r\nimport FlexVideo from '../../styled/FlexVideo'\r\n\r\nexport const PostVideo = styled(FlexVideo)`\r\n  ${mediaStyle}\r\n`\r\n\r\nexport const PostImage = styled(FlexImage)`\r\n  ${mediaStyle}\r\n`\r\n","import { useCallback, useEffect, useState } from 'react'\r\n\r\nexport default function useIsOnScreen(target: Element | null, options?: IntersectionObserverInit) {\r\n  const [isOnScreen, setOnScreen] = useState(false)\r\n\r\n  const handleOnScreenChange = useCallback((entries: IntersectionObserverEntry[]) => {\r\n    const [entry] = entries\r\n    setOnScreen(entry.isIntersecting)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(handleOnScreenChange, options || { threshold: 1, root: null })\r\n\r\n    if (target) {\r\n      observer.observe(target)\r\n    }\r\n\r\n    return () => {\r\n      if (target) {\r\n        observer.unobserve(target)\r\n      }\r\n    }\r\n  }, [handleOnScreenChange, options, target])\r\n\r\n  return [isOnScreen]\r\n}\r\n","import React, { useState, useCallback, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { NO_OP } from '../../../data/types'\nimport { selectAutoPlay, selectPreloadVideos } from '../../../redux/selectors'\nimport MediaProps from './MediaProps'\nimport Overlay from '../Overlay'\nimport { PostVideo } from './StyledMedia'\nimport useIsOnScreen from '../../../hooks/useIsOnScreen'\n\nexport default function Video(props: MediaProps) {\n  const { src, onLoad = NO_OP, postId, width, height } = props\n\n  const autoPlay = useSelector(selectAutoPlay)\n\n  const [videoRef, setVideoRef] = useState<HTMLVideoElement | null>(null)\n\n  const [, setTime] = useState(Date.now())\n  const [intervalId, setIntervalId] = useState<NodeJS.Timeout | null>(null)\n\n  const play = useCallback(() => {\n    videoRef && videoRef.play()\n\n    // ~30 fps\n    const id = setInterval(() => {\n      setTime(Date.now())\n    }, 34)\n\n    setIntervalId(id)\n  }, [videoRef])\n\n  const pause = useCallback(() => {\n    videoRef && videoRef.pause()\n    clearInterval(intervalId as NodeJS.Timeout)\n    setIntervalId(null)\n  }, [videoRef, intervalId])\n\n  const togglePlay = useCallback(() => {\n    videoRef && (videoRef.paused ? play() : pause())\n  }, [videoRef, play, pause])\n\n  const preload = useSelector(selectPreloadVideos) ? 'auto' : 'metadata'\n\n  const [isOnScreen] = useIsOnScreen(videoRef)\n\n  useEffect(() => {\n    if (videoRef && autoPlay) {\n      if (videoRef.paused && isOnScreen) {\n        play()\n      }\n    }\n  }, [autoPlay, isOnScreen, play, videoRef])\n\n  useEffect(() => {\n    if (videoRef && !videoRef.paused && !isOnScreen) {\n      pause()\n    }\n  }, [isOnScreen, pause, videoRef])\n\n  return (\n    <>\n      <PostVideo\n        controls={false}\n        loop\n        preload={preload}\n        ref={setVideoRef}\n        onLoadedMetadata={onLoad}\n        width={width}\n        height={height}\n        src={src}\n      />\n      <Overlay\n        mediaRef={videoRef}\n        isPaused={videoRef ? videoRef.paused : true}\n        currentTime={videoRef?.currentTime}\n        duration={videoRef?.duration}\n        postId={postId}\n        togglePlay={togglePlay}\n        isPlayable\n      />\n    </>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { NO_OP } from '../../../data/types'\nimport MediaProps from './MediaProps'\nimport Overlay from '../Overlay'\nimport { PostImage } from './StyledMedia'\nimport useIsOnScreen from '../../../hooks/useIsOnScreen'\nimport { useSelector } from 'react-redux'\nimport { selectAutoPlay } from '../../../redux/selectors'\n\nexport default function Gif(props: MediaProps) {\n  const { src, thumbnail_src, onLoad = NO_OP, postId, width, height } = props\n\n  const autoPlay = useSelector(selectAutoPlay)\n\n  const [isPaused, setPaused] = useState(true)\n  const [gifRef, setGifRef] = useState<HTMLImageElement | null>(null)\n\n  const [isOnScreen] = useIsOnScreen(gifRef)\n\n  const usedSource = isPaused ? thumbnail_src : src\n\n  useEffect(() => {\n    if (autoPlay && isOnScreen) {\n      setPaused(false)\n    }\n  }, [autoPlay, isOnScreen])\n\n  useEffect(() => {\n    if (!isOnScreen) {\n      setPaused(true)\n    }\n  }, [isOnScreen])\n\n  return (\n    <>\n      <PostImage\n        ref={setGifRef}\n        src={usedSource}\n        alt={usedSource}\n        loading='lazy'\n        onLoad={onLoad}\n        width={width}\n        height={height}\n      />\n      <Overlay\n        isPlayable\n        isPaused={isPaused}\n        togglePlay={() => {\n          setPaused(!isPaused)\n        }}\n        postId={postId}\n      />\n    </>\n  )\n}\n","import React from 'react'\r\nimport { NO_OP } from '../../../data/types'\r\nimport MediaProps from './MediaProps'\r\nimport Overlay from '../Overlay'\r\nimport { PostImage } from './StyledMedia'\r\n\r\nexport default function Picture(props: MediaProps) {\r\n  const { src, onLoad = NO_OP, postId, width, height } = props\r\n\r\n  return (\r\n    <>\r\n      <PostImage src={src} alt={src} onLoad={onLoad} loading='lazy' width={width} height={height} />\r\n      <Overlay isPlayable={false} postId={postId} />\r\n    </>\r\n  )\r\n}\r\n","import React, { useMemo } from 'react'\nimport Video from './media/Video'\nimport Gif from './media/Gif'\nimport Picture from './media/Picture'\n\nimport { getMediaType } from '../../data/utils'\nimport { MediaType, PostType } from '../../data/types'\nimport { useSelector } from 'react-redux'\nimport PostDataClass from '../../data/PostDataClass'\nimport { selectPostById } from '../../redux/selectors'\n\ninterface PlayerProps {\n  postId: number\n  type: PostType\n  src: string\n  thumbnail_src: string\n  onLoad: () => void\n  width: number\n  height: number\n}\n\nconst getMedia = (type: PostType, post: PostDataClass) => {\n  switch (getMediaType(type, post)) {\n    case MediaType.VIDEO:\n      return Video\n    case MediaType.GIF:\n      return Gif\n    default:\n      return Picture\n  }\n}\n\nexport default function Player(props: PlayerProps) {\n  const { type, src, thumbnail_src, onLoad, postId, width, height } = props\n\n  const post = useSelector(selectPostById(postId)) as PostDataClass\n\n  const MediaComponent = getMedia(type, post)\n\n  const [usedThumbnail, usedSrc] = useMemo(() => {\n    if (getMediaType(type, post) === MediaType.GIF) {\n      // Choose the bigger image that is not a gif\n      const thumbnail = post.small_src.includes('.gif') ? thumbnail_src : post.small_src\n\n      // fallback to big_src in case the sample is not a gif\n      const source = src.includes('.gif') ? src : post.big_src\n\n      return [thumbnail, source]\n    }\n\n    return [thumbnail_src, src]\n  }, [post, src, thumbnail_src, type])\n\n  return (\n    <MediaComponent\n      src={usedSrc}\n      thumbnail_src={usedThumbnail}\n      onLoad={onLoad}\n      postId={postId}\n      width={width}\n      height={height}\n    />\n  )\n}\n","import React, { useEffect, useMemo, useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport Details from './details/Details'\nimport Player from '../player/Player'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { selectOriginals, selectShowComments, selectUseCorsProxy } from '../../redux/selectors'\nimport PostDataClass from '../../data/PostDataClass'\nimport LayoutElementProps from '../layout/LayoutElementProps'\nimport { ActiveTab, NO_OP } from '../../data/types'\nimport useToggle from '../../hooks/useToggle'\nimport { layer } from '../../styled/mixins'\nimport { getCorrectSource } from '../../data/utils'\nimport { fetchComments } from '../../redux/actions'\n\nconst ItemWrapper = styled.div(\n  ({ theme }) => css`\n    padding-top: ${theme.dimensions.gutter};\n  `\n)\n\nconst PositonWrapper = styled.div(\n  ({ theme }) => css`\n    padding: 0 ${theme.dimensions.gutter};\n    width: 100%;\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n  `\n)\n\nconst PostWrapper = styled.div(\n  ({ theme }) => css`\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto auto auto auto;\n    border-radius: ${theme.dimensions.borderRadius};\n    ${layer({ theme })}\n  `\n)\n\nexport default function Post(props: PostDataClass & LayoutElementProps) {\n  const {\n    media_type,\n    small_src,\n    big_src,\n    thumbnail_src,\n    style,\n    onLoad = NO_OP,\n    virtualRef,\n    id,\n    width,\n    height,\n    comments,\n    has_comments,\n  } = props\n\n  const dispatch = useDispatch()\n\n  const [collapsed, toggleCollapsed] = useToggle(true)\n\n  const originals = useSelector(selectOriginals)\n  const useCorsProxy = useSelector(selectUseCorsProxy)\n  const showComments = useSelector(selectShowComments)\n\n  const media_src = useMemo(() => {\n    return getCorrectSource(originals, useCorsProxy, big_src, small_src)\n  }, [big_src, originals, small_src, useCorsProxy])\n\n  // re-measure when collapsed state changes\n  useEffect(() => {\n    onLoad()\n  }, [onLoad, collapsed])\n\n  // Loads comments if conditions are met\n  useEffect(() => {\n    if (!collapsed && showComments && has_comments && !comments) {\n      dispatch(fetchComments(id))\n    }\n  }, [collapsed, showComments, has_comments, comments, dispatch, id])\n\n  const [activeTab, setActiveTab] = useState<ActiveTab>('tags')\n\n  return (\n    <ItemWrapper style={style} ref={virtualRef} className='list-div'>\n      <PositonWrapper>\n        <PostWrapper onClick={toggleCollapsed} role='row'>\n          <Player\n            onLoad={onLoad}\n            type={media_type}\n            src={media_src}\n            thumbnail_src={thumbnail_src}\n            postId={id}\n            width={width}\n            height={height}\n          />\n          {!collapsed && <Details postId={id} onLoad={onLoad} activeTab={activeTab} setActiveTab={setActiveTab} />}\n        </PostWrapper>\n      </PositonWrapper>\n    </ItemWrapper>\n  )\n}\n","import { useCallback, useState } from 'react'\nimport { Modifier } from '../data/types'\n\nconst order = [Modifier.PLUS, Modifier.MINUS, Modifier.OR]\n\n/**\n * Small utility hook to abstract the rotating modifier away\n */\nexport default function useModifier(initialValue: Modifier = Modifier.PLUS): [Modifier, () => void] {\n  const [modifier, setModifier] = useState(initialValue)\n\n  const nextModifier = useCallback(() => {\n    const currentIndex = order.indexOf(modifier)\n    const nextIndex = currentIndex + 1\n\n    // make the value rotate\n    setModifier(order[nextIndex % order.length])\n  }, [modifier])\n\n  return [modifier, nextModifier]\n}\n","import React, { MouseEventHandler } from 'react'\nimport styled, { css } from 'styled-components'\nimport { TagType } from '../../data/types'\nimport TypeIcon from '../../icons/TypeIcon'\nimport { formatCount, formatTagname } from '../../misc/formatting'\n\ninterface EntryProps {\n  name: string\n  posts: number\n  types: TagType[]\n  onClick: MouseEventHandler\n}\n\nconst EntryWrapper = styled.div(\n  ({ theme }) => css`\n    display: grid;\n    grid-template-columns: 48px 1fr auto;\n    min-height: ${theme.dimensions.blockHeight}; // COMPAT: Kiwi Browser\n    height: ${theme.dimensions.blockHeight};\n    background: white;\n    align-items: center;\n    cursor: pointer;\n  `\n)\n\nconst Name = styled.span`\n  grid-column: 2/3;\n`\n\nconst Count = styled.span(\n  ({ theme }) => css`\n    grid-column: 3/4;\n    padding-right: ${theme.dimensions.bigSpacing};\n  `\n)\n\nconst Icon = styled.div`\n  grid-column: 1/2;\n  text-align: center;\n`\n\nexport default function DropdownListEntry(props: EntryProps) {\n  const { name, posts, types, onClick } = props\n\n  const unit = types.includes(TagType.SUPERTAG) ? 'tags' : 'posts'\n\n  return (\n    <EntryWrapper onClick={onClick}>\n      <Icon>\n        <TypeIcon types={types} />\n      </Icon>\n      <Name>{formatTagname(name)}</Name>\n      <Count>\n        {formatCount(posts)} {unit}\n      </Count>\n    </EntryWrapper>\n  )\n}\n","import React from 'react'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport DropdownListEntry from './DropdownListEntry'\nimport { TagLike } from '../../data/types'\nimport { flexColumn, flexColumnGap } from '../../styled/mixins'\n\nfunction sizeAndPosition(tagSelector: HTMLDivElement | null) {\n  if (tagSelector) {\n    const { offsetTop, clientHeight, offsetLeft, clientWidth } = tagSelector\n\n    return css`\n      position: absolute;\n      top: ${offsetTop + clientHeight}px;\n      left: ${offsetLeft}px;\n      width: ${clientWidth}px;\n      max-height: 50vh;\n    `\n  }\n\n  return ''\n}\n\nconst ListWrapper = styled.div(\n  ({ theme, tagSelectorRef }: { tagSelectorRef: HTMLDivElement | null; theme: DefaultTheme }) => css`\n    ${flexColumn()}\n    ${flexColumnGap('1px')}\n    ${sizeAndPosition(tagSelectorRef)};\n    background: lightgrey;\n    box-sizing: border-box;\n    border: ${theme.dimensions.borderWidth} ${theme.colors.accentColor} solid;\n    border-top: none;\n    border-radius: 0 0 3px 3px;\n    color: black;\n    overflow-y: auto;\n    z-index: 3;\n\n    ::-webkit-scrollbar {\n      width: 8px;\n\n      :hover {\n        background: ${theme.colors.layerBg};\n      }\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n      background: ${theme.colors.backgroundColor2};\n      border-left: 1px lightgray solid;\n    }\n\n    /* Handle */\n    :hover {\n      ::-webkit-scrollbar {\n        background: ${theme.colors.backgroundColor}20;\n      }\n    }\n\n    ::-webkit-scrollbar-thumb {\n      background: ${theme.colors.backgroundColor}40;\n      border-radius: 1000px;\n\n      :hover {\n        background: ${theme.colors.backgroundColor}30;\n      }\n    }\n  `\n)\n\ninterface DropdownListProps {\n  tagSelectorRef: HTMLDivElement | null\n  entries: TagLike[]\n  onClick: (entry: TagLike) => void\n}\n\nexport default function DropdownList(props: DropdownListProps) {\n  const { tagSelectorRef, entries, onClick } = props\n\n  return entries && entries.length > 0 ? (\n    <ListWrapper tagSelectorRef={tagSelectorRef}>\n      {entries.map((entry) => (\n        <DropdownListEntry\n          key={entry.name}\n          onClick={() => onClick(entry)}\n          name={entry.name}\n          types={entry.types}\n          posts={entry.count || entry.posts || 0}\n        />\n      ))}\n    </ListWrapper>\n  ) : null\n}\n","import React, { ChangeEventHandler, KeyboardEventHandler, useCallback } from 'react'\nimport styled, { css } from 'styled-components'\n\nconst Input = styled.input(\n  (props) => css`\n    width: 100%;\n    border: none;\n    outline: none;\n    background: none;\n    font-size: ${props.theme.fontSizes.content};\n    border-top: ${props.theme.colors.accentColor} ${props.theme.dimensions.borderWidth} solid;\n    border-bottom: ${props.theme.colors.accentColor} ${props.theme.dimensions.borderWidth} solid;\n  `\n)\n\ninterface TagInputProps {\n  value: string\n  setValue: (newValue: string) => void\n  onSubmit: () => void\n}\n\nexport default function TagInput(props: TagInputProps) {\n  const { value, setValue, onSubmit } = props\n\n  const handleChange: ChangeEventHandler<HTMLInputElement> = useCallback(\n    (event) => {\n      setValue(event.target.value)\n    },\n    [setValue]\n  )\n\n  const handleEnter: KeyboardEventHandler = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onSubmit()\n      }\n    },\n    [onSubmit]\n  )\n\n  return (\n    <Input\n      id='tag-input'\n      value={value}\n      onChange={handleChange}\n      onKeyDown={handleEnter}\n      placeholder='Search for tags'\n      aria-label='Search'\n    />\n  )\n}\n","import React, { useCallback, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport useThrottledEffect from 'use-throttled-effect'\nimport { getSupertags } from '../../firebase'\nimport { TagLike, TagType, Modifier } from '../../data/types'\nimport useModifier from '../../hooks/useModifier'\nimport { serializeTagname } from '../../misc/formatting'\nimport { prepareTag } from '../../misc/prepare'\nimport { addTag, fetchSuggestions, setSuggestions } from '../../redux/actions'\nimport { selectSuggestions } from '../../redux/selectors'\nimport { AddButton, ModifierButton } from '../common/Buttons'\nimport DropdownList from './DropdownList'\nimport TagInput from './TagInput'\n\nconst TagSelectorWrapper = styled.div(\n  (props: { closed: boolean; ref: (ref: HTMLInputElement) => void; theme: DefaultTheme }) => css`\n    display: flex;\n    background: white;\n    ${props.closed\n      ? css`\n          border-radius: ${props.theme.dimensions.borderRadius};\n        `\n      : css`\n          border-radius: ${props.theme.dimensions.borderRadius} ${props.theme.dimensions.borderRadius} 0 0;\n\n          > ${AddButton} {\n            border-radius: 0 ${props.theme.dimensions.borderRadius} 0 0;\n          }\n\n          > ${ModifierButton} {\n            border-radius: ${props.theme.dimensions.borderRadius} 0 0 0;\n          }\n        `}\n  `\n)\n\nexport default function TagSelector() {\n  const dispatch = useDispatch()\n\n  const [value, setValue] = useState('')\n  const [tagSelectorRef, setTagSelectorRef] = useState<HTMLDivElement | null>(null)\n  const [modifier, nextModifier] = useModifier()\n\n  const suggestions = useSelector(selectSuggestions)\n\n  const activateTag = useCallback(\n    ({ name, posts, count, types }: TagLike) => {\n      if (types?.includes(TagType.SUPERTAG)) {\n        getSupertags().then((supertags) => {\n          if (supertags) {\n            Object.entries(supertags[name].tags).forEach(([name, modifier]) => {\n              const tag = prepareTag({\n                name,\n                types: [],\n                count: '0',\n                modifier: modifier as Modifier,\n              })\n\n              dispatch(addTag(tag))\n            })\n          }\n        })\n      } else {\n        const tag = prepareTag({\n          name,\n          types,\n          modifier,\n          count: (count || posts || 0).toString(),\n        })\n\n        dispatch(addTag(tag))\n      }\n\n      setValue('')\n      dispatch(setSuggestions([]))\n    },\n    [dispatch, modifier]\n  )\n\n  // This effect fetches suggestions for the input value if the value\n  //is empty, it ensures the suggestions are as well\n  useThrottledEffect(\n    () => {\n      if (value === '') {\n        if (suggestions.length > 0) {\n          // Reset Suggestions\n          dispatch(setSuggestions([]))\n        }\n      } else {\n        // Fetch Suggestions\n        dispatch(fetchSuggestions(value))\n      }\n    },\n    300,\n    [value]\n  )\n\n  const handleAddClick = useCallback(() => {\n    if (value && value.trim()) {\n      const sanitizedTagname = serializeTagname(value)\n      const suggestion: TagLike | undefined = suggestions.find((s) => s.name === sanitizedTagname)\n\n      if (suggestion) {\n        activateTag(suggestion)\n      }\n    }\n  }, [value, activateTag, suggestions])\n\n  return (\n    <TagSelectorWrapper ref={setTagSelectorRef} closed={suggestions.length === 0}>\n      <ModifierButton onClick={nextModifier} aria-label='Tag Modifier'>\n        {modifier}\n      </ModifierButton>\n      <TagInput value={value} setValue={setValue} onSubmit={handleAddClick} />\n      <AddButton onClick={handleAddClick} aria-label='Add Tag'>\n        Add\n      </AddButton>\n      {suggestions.length > 0 && (\n        <DropdownList tagSelectorRef={tagSelectorRef} entries={suggestions} onClick={activateTag} />\n      )}\n    </TagSelectorWrapper>\n  )\n}\n","import React, { MouseEventHandler } from 'react'\nimport FlexPair from './FlexPair'\nimport Toggle from './Toggle'\n\ninterface LabeledToggleProps {\n  children: React.ReactNode\n  value: boolean\n  onToggle: MouseEventHandler\n}\n\nexport default function LabeledToggle(props: LabeledToggleProps) {\n  const { children, value, onToggle } = props\n\n  return (\n    <FlexPair>\n      <Toggle value={value} onToggle={onToggle} />\n      <span>{children}</span>\n    </FlexPair>\n  )\n}\n","import React, { ChangeEventHandler, useCallback, useState } from 'react'\nimport styled, { css, DefaultTheme } from 'styled-components'\nimport LabeledToggle from '../common/LabeledToggle'\nimport { PreferenceKey, SortType } from '../../data/types'\nimport usePreference from '../../hooks/usePreference'\nimport { borderRadius, flexRowWithGap, gridWithGap, PropsWithTheme } from '../../styled/mixins'\nimport Select from '../common/Select'\n\nconst OptionsWrapper = styled.div`\n  ${gridWithGap}\n`\n\nconst StyledInput = styled.input(\n  (props: { value: string; theme: DefaultTheme }) => css`\n    background: ${props.theme.colors.backgroundColor};\n    padding: ${props.theme.dimensions.spacing};\n    ${borderRadius}\n    border: none;\n    outline: none;\n    color: ${props.theme.colors.accentColor};\n    width: 3.4rem;\n    text-align: right;\n    font-size: ${props.theme.fontSizes.content};\n\n    ::-webkit-inner-spin-button,\n    ::-webkit-outer-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n    -moz-appearance: textfield;\n  `\n)\n\nconst RatedRow = styled.div`\n  ${flexRowWithGap}\n`\n\nconst SortRow = styled.div`\n  ${flexRowWithGap}\n  height: ${({ theme }: PropsWithTheme) => theme.dimensions.blockHeight};\n`\n\nconst sortOptions = {\n  [SortType.SCORE]: 'Score',\n  [SortType.DATE]: 'Date',\n}\n\nexport default function Options() {\n  const [rated, setRated] = usePreference(PreferenceKey.RATED)\n  const [ratedThreshold, setRatedThreshold] = usePreference(PreferenceKey.RATED_THRESHOLD)\n  const [sort, setSort] = usePreference(PreferenceKey.SORT)\n\n  const toggleRated = useCallback(() => setRated(!rated), [rated, setRated])\n\n  const [ratedThresholdInternal, setRatedThresholdInternal] = useState(ratedThreshold ? ratedThreshold.toString() : '1')\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback(\n    (event) => setRatedThresholdInternal(event.target.value),\n    []\n  )\n  const onBlur = useCallback(\n    () => setRatedThreshold(Number(ratedThresholdInternal)),\n    [ratedThresholdInternal, setRatedThreshold]\n  )\n\n  const handleSortChange: ChangeEventHandler<HTMLSelectElement> = useCallback(\n    (event) => setSort(event.target.value as SortType),\n    [setSort]\n  )\n\n  return (\n    <OptionsWrapper>\n      <LabeledToggle value={rated} onToggle={toggleRated}>\n        {rated ? (\n          <RatedRow>\n            <span>More than</span>\n            <StyledInput type='text' value={ratedThresholdInternal} onChange={onChange} onBlur={onBlur} />\n            <span>likes</span>\n          </RatedRow>\n        ) : (\n          'Only show Rated Posts'\n        )}\n      </LabeledToggle>\n      <SortRow>\n        <span>Sort by:</span>\n        <Select options={sortOptions} value={sort} onChange={handleSortChange} />\n      </SortRow>\n    </OptionsWrapper>\n  )\n}\n","import { useCallback } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { AnyAction } from 'redux'\n\n/**\n * A hook that simplifies usage of simple (unparameterized) Redux actions\n */\nexport default function useAction<T extends () => AnyAction>(actionCreator: T) {\n  const dispatch = useDispatch()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useCallback(() => dispatch(actionCreator()), [actionCreator, dispatch])\n}\n","import React from 'react'\nimport useAction from '../../hooks/useAction'\nimport { SearchIcon } from '../../icons/FontAwesomeIcons'\nimport { getResults } from '../../redux/actions'\nimport { BlockButton } from '../common/Buttons'\n\nexport default function SearchButton() {\n  const search = useAction(getResults)\n\n  return (\n    <BlockButton onClick={search} aria-label='Search'>\n      <SearchIcon />\n      Search\n    </BlockButton>\n  )\n}\n","import React, { useCallback, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport styled, { css } from 'styled-components'\r\nimport { Modifier } from '../../data/types'\r\nimport { addSupertag } from '../../firebase'\r\nimport { selectActiveTags } from '../../redux/selectors'\r\nimport { defaultBlock, defaultBorder } from '../../styled/mixins'\r\nimport { BlockButton } from '../common/Buttons'\r\nimport { HorizontalLine } from '../common/Lines'\r\nimport Surface from '../common/Surface'\r\nimport { Title } from '../common/Text'\r\nimport TagSelector from '../tagSelector/TagSelector'\r\nimport ActiveTags from './ActiveTags'\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  display: grid;\r\n  place-items: center;\r\n\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  padding: 20px;\r\n\r\n  z-index: 1000;\r\n\r\n  background: #000000d0;\r\n`\r\n\r\nconst ModalSurface = styled(Surface)`\r\n  max-width: 500px;\r\n  background-color: ${(props) => props.theme.colors.layerBgSolid};\r\n`\r\n\r\nconst StyledInput = styled.input(\r\n  ({ theme }) => css`\r\n    ${defaultBorder}\r\n    background-color: ${theme.colors.backgroundColor2};\r\n    ${defaultBlock}\r\n    text-align: left;\r\n  `\r\n)\r\n\r\ninterface SupertagModalProps {\r\n  onClose: () => void\r\n}\r\n\r\nexport default function SupertagModal(props: SupertagModalProps) {\r\n  const { onClose } = props\r\n  const [name, setName] = useState('')\r\n  const [desc, setDesc] = useState('')\r\n  const activeTags = useSelector(selectActiveTags)\r\n\r\n  const tags: Record<string, Modifier> = Object.entries(activeTags).reduce(\r\n    (result, [name, tag]) => ({ ...result, [name]: tag.modifier }),\r\n    {}\r\n  )\r\n\r\n  const handleCreateTagList = useCallback(() => {\r\n    addSupertag(name, desc, tags)\r\n    onClose()\r\n  }, [desc, name, onClose, tags])\r\n\r\n  return (\r\n    <Wrapper onClick={onClose}>\r\n      <ModalSurface onClick={(e) => e.stopPropagation()}>\r\n        <Title>Create Supertag</Title>\r\n        <HorizontalLine />\r\n        <StyledInput type='text' placeholder='Name' value={name} onChange={(e) => setName(e.target.value)} />\r\n        <StyledInput type='text' placeholder='Description' value={desc} onChange={(e) => setDesc(e.target.value)} />\r\n        <TagSelector />\r\n        <ActiveTags />\r\n        <BlockButton onClick={handleCreateTagList}>Create</BlockButton>\r\n      </ModalSurface>\r\n    </Wrapper>\r\n  )\r\n}\r\n","import React, { useCallback, useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { NO_OP } from '../../data/types'\nimport { SupertagIcon } from '../../icons/FontAwesomeIcons'\nimport { selectActiveTags, selectNumberOfActiveTags } from '../../redux/selectors'\nimport { RedButton } from '../common/Buttons'\nimport TagList from '../tag/TagList'\nimport SupertagModal from './SupertagModal'\n\ninterface ActiveTagsProps {\n  onChange?: () => void\n  offerSupertags?: boolean\n}\n\nexport default function ActiveTags(props: ActiveTagsProps) {\n  const { onChange = NO_OP, offerSupertags = false } = props\n\n  const [isModalOpen, setModalOpen] = useState(false)\n\n  const activeTags = useSelector(selectActiveTags)\n  const numberOfActiveTags = useSelector(selectNumberOfActiveTags)\n\n  const openModal = useCallback(() => {\n    setModalOpen(true)\n  }, [])\n\n  const closeModal = useCallback(() => {\n    setModalOpen(false)\n  }, [])\n\n  // Fire change event when tags change\n  // This is used to re-measure the height\n  useEffect(() => onChange(), [onChange, activeTags])\n\n  return numberOfActiveTags > 0 ? (\n    <TagList tags={activeTags} detailed={true}>\n      {offerSupertags && Object.keys(activeTags).length > 1 && (\n        <RedButton onClick={openModal} title='Create a supertag'>\n          <SupertagIcon />\n        </RedButton>\n      )}\n      {isModalOpen && <SupertagModal onClose={closeModal} />}\n    </TagList>\n  ) : null\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport TagSelector from '../tagSelector/TagSelector'\nimport Options from './Options'\nimport { Title } from '../common/Text'\nimport Surface from '../common/Surface'\nimport SearchButton from '../widgets/SearchButton'\nimport ActiveTags from '../widgets/ActiveTags'\nimport { flexColumn, gutter, centeredMaxWidth } from '../../styled/mixins'\nimport useFirebaseAuthState from '../../hooks/useFirebaseAuthState'\n\nconst ConfigWrapper = styled.section`\n  ${flexColumn}\n  ${gutter}\n  ${centeredMaxWidth}\n`\n\nexport default function Config(props: { onLoad: () => void }) {\n  const { onLoad } = props\n\n  const [isSignedIn] = useFirebaseAuthState()\n\n  return (\n    <ConfigWrapper>\n      <Title>\n        <label htmlFor='tag-input'>Search</label>\n      </Title>\n      <Surface>\n        <TagSelector />\n        <ActiveTags onChange={onLoad} offerSupertags={isSignedIn} />\n        <Options />\n        <SearchButton />\n      </Surface>\n    </ConfigWrapper>\n  )\n}\n","import React, { useMemo } from 'react'\nimport styled, { css } from 'styled-components'\nimport { Faded } from '../common/Text'\n\nconst tips = [\n  'Try tapping the little plus in the tag search.',\n  \"You can exclude tags with the '-' modifier.\",\n  \"Each result will have at least one of your '~' tags.\",\n  'Check out the settings. There are lots of uesful options there.',\n  'Starting a tag search with a * gives more results.',\n  'When filtering rated posts, you can configure the minimum score by taping the red number.',\n  'You can get more info about a post be tapping it once.',\n  'Tapping on a tag below a post adds it to your active tags.',\n  \"Large gifs and videos can take a while to load in the app. Try clicking the 'Open in new tab' icon in the bottom left corner for faster loading times.\",\n  'If anything stops working or gets weird. Reset the app in the settings.',\n  'I hope you are having a nice day!',\n  'If a tag is ambiguous, it will have a little arrow on the right. Tapping it shows related tags.',\n  'Tapping the icon in the top left of posts brings you into fullscreen mode.',\n  'Searching for nothing returns ALL posts ever made.',\n  'Results are sorted chronologically. Newest first.',\n  \"You can search for safe posts by entering 'rating:safe' in the search field. The same works for questionable and explicit.\",\n  \"You can search for posts from a specific website by entering 'source:*twitter* for example.\",\n  'You can upvote a post by tapping its score in the details.',\n  'Wanna know more about a post? Enable \"Show post metadata\" in the options.',\n  'Every time you reload the page, a random tip will be shown here.',\n  'You can enable comments in the settings. Not all post have comments though.',\n  'You can save and share your settings across devices if you log in with your Google account.',\n  'Tapping the number of results displays the exact number instead of an approximation.',\n  'You can create supertags once you have two or more active tags.',\n  'Supertags are collections of tags that you can add together.',\n  'Supertags retain the modifiers of the tags they contain.',\n]\n\nconst Span = styled(Faded)(\n  ({ theme }) => css`\n    text-align: center;\n    font-size: 16px;\n    padding: ${theme.dimensions.hugeSpacing} 10%;\n    max-width: ${theme.dimensions.bodyWidth};\n  `\n)\n\nexport default function RandomTip() {\n  const tip = useMemo(() => tips[Math.floor(Math.random() * tips.length)], [])\n\n  return <Span>{tip}</Span>\n}\n","import React from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { WrenchIcon } from '../../icons/FontAwesomeIcons'\r\nimport { borderRadius, layer } from '../../styled/mixins'\r\nimport FlexPair from '../common/FlexPair'\r\n\r\nconst Wrapper = styled(FlexPair)(\r\n  ({ theme }) => css`\r\n    ${borderRadius}\r\n    ${layer}\r\n    width: 100%;\r\n    padding: ${theme.dimensions.hugeSpacing};\r\n    max-width: ${theme.dimensions.bodyWidth};\r\n  `\r\n)\r\n\r\nconst deadline = new Date('2021-08-01')\r\n\r\nexport default function UpdateHighlight() {\r\n  if (new Date() > deadline) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <WrenchIcon size={'lg'} />\r\n      <span>\r\n        Hey there! I added an experimental account system. This enables saving and loading preferences as well as\r\n        sharing them across different devices. Check it out in <a href='#settings'>Settings</a> and let me know what you\r\n        think of it.\r\n      </span>\r\n    </Wrapper>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport KofiButton from './KofiButton'\r\nimport styled, { css } from 'styled-components'\r\nimport RandomTip from './RandomTip'\r\nimport { flexColumn, flexColumnGap } from '../../styled/mixins'\r\nimport UpdateHighlight from './UpdateHighlight'\r\n\r\nconst Placeholder = styled.div(\r\n  ({ theme }) => css`\r\n    ${flexColumn()}\r\n    ${flexColumnGap(theme.dimensions.hugeSpacing)}\r\n    align-items: center;\r\n    max-width: ${theme.dimensions.bodyWidth};\r\n    margin: auto;\r\n\r\n    height: calc(100vh - 400px);\r\n    padding: 0 ${theme.dimensions.gutter};\r\n  `\r\n)\r\n\r\nexport default function SearchPlaceholder() {\r\n  return (\r\n    <Placeholder>\r\n      <UpdateHighlight />\r\n      <RandomTip />\r\n      <KofiButton id='V7V73PWW9' label='Support Me on Ko-fi' />\r\n    </Placeholder>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport useToggle from '../../hooks/useToggle'\r\nimport { formatCount } from '../../misc/formatting'\r\nimport { selectCount } from '../../redux/selectors'\r\nimport { Title } from '../common/Text'\r\n\r\nexport default function ResultsTitle() {\r\n  const [fullNumber, toggleFullNumber] = useToggle()\r\n  const count = useSelector(selectCount)\r\n\r\n  const formattedCount = fullNumber ? count.toLocaleString() : formatCount(count)\r\n\r\n  return <Title onClick={toggleFullNumber}>{formattedCount} results</Title>\r\n}\r\n","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { selectCount } from '../../redux/selectors'\nimport Config from '../features/Config'\nimport Header from '../features/Header'\nimport LayoutElementProps from './LayoutElementProps'\nimport { NO_OP } from '../../data/types'\nimport SearchPlaceholder from '../widgets/SearchPlaceholder'\nimport ResultsTitle from '../widgets/ResultsTitle'\n\nexport default function LayoutHeader({ onLoad = NO_OP, virtualRef, style }: LayoutElementProps) {\n  const count = useSelector(selectCount)\n\n  // Trigger load event when count is > 0\n  // This is used to re-measure the element\n  useEffect(() => {\n    count > 0 && onLoad()\n  }, [count, onLoad])\n\n  return (\n    <div onLoad={onLoad} ref={virtualRef} style={style} role='row'>\n      <Header />\n      <Config onLoad={onLoad} />\n      {count > 0 ? <ResultsTitle /> : <SearchPlaceholder />}\n    </div>\n  )\n}\n","import React, { useMemo } from 'react'\nimport Surface from '../common/Surface'\nimport { SmallTitle } from '../common/Text'\nimport TagList from '../tag/TagList'\nimport outOfResultsPicture from '../../icons/OutOfResults.png'\nimport { useSelector } from 'react-redux'\nimport { selectAliasesAsList } from '../../redux/selectors'\nimport TagDataClass from '../../data/TagDataClass'\nimport { NO_OP } from '../../data/types'\nimport LayoutElementProps from './LayoutElementProps'\nimport { HorizontalLine } from '../common/Lines'\nimport styled, { css } from 'styled-components'\nimport FlexImage from '../styled/FlexImage'\n\nconst Div = styled.div(\n  ({ theme }) => css`\n    padding: ${theme.dimensions.gutter};\n  `\n)\n\nconst StyledSurface = styled(Surface)(\n  ({ theme }) => css`\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n    text-align: center;\n  `\n)\n\nconst StyledImage = styled(FlexImage)`\n  max-height: 50vh;\n`\n\nexport default function LayoutOutOfItems({ onLoad = NO_OP, virtualRef, style }: LayoutElementProps) {\n  const aliases = useSelector(selectAliasesAsList)\n  const aliasesForRendering = useMemo(\n    () =>\n      aliases.reduce((result: Record<string, TagDataClass>, alias) => {\n        result[alias.name] = alias\n        return result\n      }, {}),\n    [aliases]\n  )\n\n  return (\n    <Div style={style} ref={virtualRef} onLoad={onLoad} role='row'>\n      <StyledSurface>\n        <StyledImage src={outOfResultsPicture} alt='Shironeko does not understand' />\n        <HorizontalLine />\n        <SmallTitle>You have reached the end!</SmallTitle>\n        <p>Go look for something else!</p>\n        {aliases.length > 0 && (\n          <>\n            <p>How about some of these?</p>\n            <TagList tags={aliasesForRendering} detailed />\n          </>\n        )}\n      </StyledSurface>\n    </Div>\n  )\n}\n","import React from 'react'\nimport LayoutElementProps from './LayoutElementProps'\nimport LoadingIcon from '../../icons/Loading'\nimport styled from 'styled-components'\nimport { NO_OP } from '../../data/types'\n\nconst Wrapper = styled.div`\n  display: grid;\n  place-items: center;\n`\n\nexport default function LayoutLoadingItem({ onLoad = NO_OP, virtualRef, style }: LayoutElementProps) {\n  return (\n    <Wrapper onLoad={onLoad} ref={virtualRef} style={style} role='row'>\n      <LoadingIcon />\n    </Wrapper>\n  )\n}\n","import React, { MouseEventHandler, useCallback } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport { selectLastPage } from '../../../redux/selectors'\nimport { RedButton } from '../../common/Buttons'\nimport { SmallNumberInput } from '../../common/SmallInput'\n\nconst PageRow = styled.div(\n  ({ theme }) => css`\n    display: grid;\n    grid-template-columns: 1fr auto 1fr;\n    justify-content: center;\n    place-items: center;\n    gap: ${theme.dimensions.gutter};\n    padding: ${theme.dimensions.gutter};\n    padding-bottom: 0;\n    max-width: ${theme.dimensions.bodyWidth};\n    margin: auto;\n  `\n)\nconst Left = styled.div`\n  display: flex;\n  place-self: flex-end;\n  gap: 8px;\n`\nconst Right = styled.div`\n  display: flex;\n  place-self: flex-start;\n  gap: 8px;\n`\n\nconst PageNumber = styled(RedButton)`\n  min-width: 50px;\n`\n\nconst CurrentNumber = styled(SmallNumberInput)`\n  min-width: 50px;\n`\n\ninterface PageNavigationProps {\n  currentPage: number\n  loadPage: (pageNumber: number) => void\n}\n\nexport default function PageNavigation(props: PageNavigationProps) {\n  const { currentPage, loadPage } = props\n\n  const lastPage = useSelector(selectLastPage)\n\n  const loadSpecificPage = useCallback((newPage: number | string) => loadPage(Number(newPage)), [loadPage])\n  const loadFirst: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(0), [loadPage])\n  const loadLast: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(lastPage), [loadPage, lastPage])\n  const loadPrevious: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(currentPage - 1), [\n    currentPage,\n    loadPage,\n  ])\n  const loadNext: MouseEventHandler<HTMLButtonElement> = useCallback(() => loadPage(currentPage + 1), [\n    currentPage,\n    loadPage,\n  ])\n\n  // Render Empty divs to keep everything lined up\n  // Could achive the same with grid-column (might do that in the future)\n  return (\n    <PageRow className='page-navigation'>\n      <Left>\n        {currentPage > 1 && <PageNumber onClick={loadFirst}>0</PageNumber>}\n        {currentPage > 0 && <PageNumber onClick={loadPrevious}>{currentPage - 1}</PageNumber>}\n      </Left>\n      <CurrentNumber value={currentPage} onSubmit={loadSpecificPage} />\n      <Right>\n        {currentPage < lastPage && <PageNumber onClick={loadNext}>{currentPage + 1}</PageNumber>}\n        {currentPage < lastPage - 1 && <PageNumber onClick={loadLast}>{lastPage}</PageNumber>}\n      </Right>\n    </PageRow>\n  )\n}\n","import React, { ReactNode, useCallback } from 'react'\nimport styled, { css } from 'styled-components'\nimport PostDataClass from '../../../data/PostDataClass'\nimport BaseFlexColumn from '../../common/FlexColumn'\nimport PageNavigation from './PageNavigation'\n\nconst FlexColumn = styled(BaseFlexColumn)(\n  ({ theme }) => css`\n    padding-bottom: ${theme.dimensions.gutter};\n  `\n)\n\ninterface PageLayoutProps<T> {\n  header?: ReactNode\n  outOfItems?: ReactNode\n  items?: T[]\n  pageSize: number\n  currentPage: number\n  hasMorePages: boolean\n  loadPage: (pageNumber: number) => void\n  ItemComponent: (props: T) => JSX.Element\n  isLoading: boolean\n  setLoading: (value: boolean) => void\n}\n\nexport default function PageLayout(props: PageLayoutProps<PostDataClass>) {\n  const { header, items, ItemComponent, currentPage, loadPage } = props\n\n  const scrollAndLoadPage = useCallback(\n    (value: number) => {\n      loadPage(value)\n      document.getElementsByClassName('page-navigation')[0].scrollIntoView()\n    },\n    [loadPage]\n  )\n\n  return (\n    <FlexColumn>\n      {header}\n      {items && items.length > 0 && (\n        <>\n          <PageNavigation currentPage={currentPage} loadPage={loadPage} />\n          {items?.map((item) => (\n            <ItemComponent key={item.id} {...item} />\n          ))}\n          <PageNavigation currentPage={currentPage} loadPage={scrollAndLoadPage} />\n        </>\n      )}\n    </FlexColumn>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport useThrottledEffect from 'use-throttled-effect'\nimport { openFullscreen } from '../../data/browserUtils'\nimport PostDataClass from '../../data/PostDataClass'\nimport { ActiveTab, NO_OP } from '../../data/types'\nimport { getCorrectSource } from '../../data/utils'\nimport useAction from '../../hooks/useAction'\nimport useFullScreenCloseEffect from '../../hooks/useFullscreenCloseEffect'\nimport { exitFullscreen, getMoreResults } from '../../redux/actions'\nimport {\n  selectFullsceenState,\n  selectFullScreenIndex,\n  selectFullScreenPost,\n  selectOriginals,\n  selectPosts,\n  selectUseCorsProxy,\n} from '../../redux/selectors'\nimport Player from '../player/Player'\nimport Details from '../post/details/Details'\n\nconst FullScreenDiv = styled.div(\n  ({ theme }) => css`\n    position: fixed;\n    width: 100vw;\n    height: 200vh;\n    left: 0;\n    top: 0;\n\n    display: grid;\n    grid-template-columns: 100vw;\n    grid-template-rows: 100vh 40px auto;\n    overflow: auto;\n\n    background: ${theme.colors.backgroundColor};\n\n    z-index: 5;\n\n    scroll-snap-type: y mandatory;\n    //scroll-snap-points-y: 0vh 100vh;\n\n    > * {\n      scroll-snap-align: start;\n    }\n  `\n)\n\nexport default function Reader() {\n  const posts = useSelector(selectPosts)\n  const originals = useSelector(selectOriginals)\n  const isReaderOpen = useSelector(selectFullsceenState)\n  const fullScreenPost = useSelector(selectFullScreenPost) as PostDataClass\n  const fullScreenIndex = useSelector(selectFullScreenIndex)\n  const useCorsProxy = useSelector(selectUseCorsProxy)\n\n  const loadMore = useAction(getMoreResults)\n\n  const [readerRef, setReaderRef] = useState<HTMLDivElement | null>(null)\n\n  useThrottledEffect(\n    () => {\n      if (fullScreenIndex + 3 > posts.length) {\n        loadMore()\n      }\n    },\n    2000,\n    [fullScreenIndex, loadMore, posts.length]\n  )\n\n  useEffect(() => {\n    if (isReaderOpen && readerRef && readerRef !== document.fullscreenElement) {\n      openFullscreen(readerRef)\n    }\n  }, [isReaderOpen, readerRef])\n\n  const [activeTab, setActiveTab] = useState<ActiveTab>('tags')\n\n  const exit = useAction(exitFullscreen)\n\n  useFullScreenCloseEffect(exit)\n\n  if (!isReaderOpen) {\n    return null\n  }\n\n  const { media_type, small_src, big_src, thumbnail_src, id, width, height } = fullScreenPost\n  const media_src = getCorrectSource(originals, useCorsProxy, big_src, small_src)\n\n  return (\n    <FullScreenDiv ref={setReaderRef}>\n      <Player\n        onLoad={NO_OP}\n        type={media_type}\n        src={media_src}\n        thumbnail_src={thumbnail_src}\n        postId={id}\n        width={width}\n        height={height}\n      />\n      <Details postId={id} activeTab={activeTab} setActiveTab={setActiveTab} />\n    </FullScreenDiv>\n  )\n}\n","import { useEffect } from 'react'\r\n\r\nexport default function useFullScreenCloseEffect(effect: () => void) {\r\n  useEffect(() => {\r\n    const handler = (data: any) => {\r\n      console.log(document.fullscreenElement)\r\n      if (!document.fullscreenElement) {\r\n        effect()\r\n      }\r\n    }\r\n\r\n    document.addEventListener('fullscreenchange', handler)\r\n\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handler)\r\n    }\r\n  }, [effect])\r\n}\r\n","import React, { useCallback, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport InifinteColumn from '../layout/infinite/InfiniteColumn'\r\nimport Post from '../post/Post'\r\nimport { getMoreResults, getResults } from '../../redux/actions'\r\nimport {\r\n  selectHasMoreResults,\r\n  selectPageNumber,\r\n  selectPageSize,\r\n  selectPosts,\r\n  selectResultsLayout,\r\n} from '../../redux/selectors'\r\nimport LayoutHeader from '../layout/LayoutHeader'\r\nimport LayoutOutOfItems from '../layout/LayoutOutOfItems'\r\nimport LayoutLoadingItem from '../layout/LayoutLoadingItem'\r\nimport useAction from '../../hooks/useAction'\r\nimport { ResultLayout } from '../../data/types'\r\nimport PageLayout from '../layout/pages/PageLayout'\r\n\r\nimport Reader from '../reader/Reader'\r\n\r\nexport default function Search() {\r\n  const [isLoading, setLoading] = useState(false)\r\n\r\n  const posts = useSelector(selectPosts)\r\n  const hasMorePosts = useSelector(selectHasMoreResults)\r\n  const resultsLayout = useSelector(selectResultsLayout)\r\n  const pageSize = useSelector(selectPageSize)\r\n  const pageNumber = useSelector(selectPageNumber)\r\n\r\n  const dispatch = useDispatch()\r\n  const loadMore = useAction(getMoreResults)\r\n  const loadPage = useCallback((index: number) => dispatch(getResults(index)), [dispatch])\r\n\r\n  document.title = 'R34 React'\r\n\r\n  return (\r\n    <>\r\n      <Reader />\r\n      {resultsLayout === ResultLayout.INFINITE_COLUMN ? (\r\n        <InifinteColumn\r\n          Header={LayoutHeader}\r\n          OutOfItems={LayoutOutOfItems}\r\n          items={posts}\r\n          LoadingItem={LayoutLoadingItem}\r\n          hasMoreRows={hasMorePosts}\r\n          ItemComponent={Post}\r\n          loadMore={loadMore}\r\n          isLoading={isLoading}\r\n          setLoading={setLoading}\r\n        />\r\n      ) : (\r\n        <PageLayout\r\n          header={<LayoutHeader />}\r\n          pageSize={pageSize}\r\n          currentPage={pageNumber}\r\n          hasMorePages={hasMorePosts}\r\n          loadPage={loadPage}\r\n          ItemComponent={Post}\r\n          isLoading={isLoading}\r\n          setLoading={setLoading}\r\n          items={posts}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"sourceRoot":""}