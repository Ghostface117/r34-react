{"version":3,"sources":["components/toggle/Toggle.jsx","misc/api.js","components/tag/Tag.jsx","components/tagList/TagList.jsx","components/post/Post.jsx","components/postList/PostList.jsx","data/post.js","data/tag.js","misc/prepare.js","components/tagSelector/TagSelector.jsx","pages/Main.jsx","pages/Help.jsx","pages/NotFound.jsx","App.js","serviceWorker.js","index.js"],"names":["Toggle","_ref","text","initial","onChange","react_default","a","createElement","className","component_default","defaultChecked","icons","checked","unchecked","pageSize","activeApi","fetch","catch","api","getTags","_getTags","Object","asyncToGenerator","regenerator_default","mark","_callee","searchTerm","res","wrap","_context","prev","next","sent","json","abrupt","stop","this","_x","apply","arguments","getPosts","_getPosts","_callee2","tags","pageNumber","minScore","_args2","_context2","length","undefined","buildPostUrl","_x2","getAliases","_getAliases","_callee3","tag","_context3","_x3","page","url","map","t","modifier","encodeURIComponent","name","join","Tag","count","types","active","onClick","_useState","useState","_useState2","slicedToArray","aliases","setAliases","_useState3","_useState4","collapsed","setCollapsed","useEffect","then","newAliases","sort","b","Number","posts","exclude","character","includes","artist","showAliases","concat","Fragment","class","alias","TagList","activeTags","onItemClick","components_tag_Tag","assign","key","isTagActive","some","Post","props","media_src","id","media_type","preview_src","original_src","thumbnail_src","rating","score","source","loadOriginal","onTagClick","replace","Media","type","src","Rating","value","Score","Source","hasMoved","alt","controls","loop","poster","preload","onTouchMove","onTouchEnd","event","_ref2","toUpperCase","_ref3","_ref4","startsWith","href","target","rel","PostList","post","components_post_Post","file_url","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","classCallCheck","prepare","obj","prepareTag","sample_url","preview_url","preparePost","TagSelector","onSubmit","setValue","setModifier","_useState5","_useState6","suggestions","setSuggestions","_useState7","_useState8","oldSuggestions","setOldSuggestions","filter","inputProps","placeholder","newValue","tagObject","find","s","preventDefault","e","dist_default","onSuggestionsFetchRequested","tagname","toLowerCase","newSuggestions","onSuggestionsClearRequested","getSuggestionValue","suggestion","renderSuggestion","scrollLock","withRouter","initialState","infinite","rated","originals","infiniteScroll","setInfiniteScroll","filterRated","setFilterRated","_useState9","_useState10","setPageNumber","_useState11","_useState12","setLoadOriginal","_useTags","initialValue","setTags","addTag","newTag","removeTag","toConsumableArray","tagToRemove","tagToToggle","useTags","_useTags2","toggleTag","_usePosts","setPosts","newPosts","usePosts","_usePosts2","addPosts","localStorage","setItem","JSON","stringify","useLocalStorageUpdates","loadMore","window","onscroll","innerHeight","document","documentElement","scrollTop","scrollHeight","tagSelector_TagSelector","tagList_TagList","toggle_Toggle","postList_PostList","Search","Component","NotFound","App","parse","getItem","_this","react_router_dom","basename","to","react_router","exact","path","render","pages_Main","loadStorage","component","Help","Boolean","location","hostname","match","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.32f6e658.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { bool, func, string } from \"prop-types\";\r\nimport ReactToggle from \"react-toggle\";\r\nimport \"./Toggle.css\";\r\n\r\nfunction Toggle({ text, initial, onChange }) {\r\n  return (\r\n    <label className=\"toggle-wrapper\">\r\n      <ReactToggle\r\n        defaultChecked={initial || false}\r\n        icons={{\r\n          checked: null,\r\n          unchecked: null\r\n        }}\r\n        onChange={onChange}\r\n      />\r\n      <span className=\"toggle-text\">{text}</span>\r\n    </label>\r\n  );\r\n}\r\n\r\nToggle.propTypes = {\r\n  text: string.isRequired,\r\n  initial: bool,\r\n  onChange: func.isRequired\r\n};\r\n\r\nexport default Toggle;\r\n","const pageSize = 20,\r\n  apiUrl1 = \"https://custom-r34-api.herokuapp.com\",\r\n  apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm) {\r\n    const res = await fetch(\r\n      activeApi +\r\n        \"/tags?limit=\" +\r\n        pageSize +\r\n        \"&name=\" +\r\n        searchTerm +\r\n        \"*&order_by=posts\"\r\n    );\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tag) {\r\n    const res = await fetch(activeApi + \"/alias/\" + tag);\r\n    return await res.json();\r\n  }\r\n};\r\n\r\nfunction buildPostUrl(page, tags, minScore) {\r\n  let url = activeApi + \"/posts\";\r\n  url += \"?pid=\" + page;\r\n  url += \"&limit=\" + pageSize;\r\n  url +=\r\n    \"&tags=\" +\r\n    tags\r\n      .map(t => (t.modifier ? t.modifier : \"\") + encodeURIComponent(t.name))\r\n      .join(\"+\");\r\n  url += encodeURIComponent(\"+score:>=\" + minScore);\r\n  return url;\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { arrayOf, bool, func, number, string } from \"prop-types\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\n\r\nfunction Tag({ name, count, modifier, types, active, onClick }) {\r\n  const [aliases, setAliases] = useState();\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    api.getAliases(name).then(newAliases => {\r\n      newAliases.sort((a, b) => Number(b.posts) - Number(a.posts));\r\n      setAliases(newAliases);\r\n    });\r\n  }, [name]);\r\n\r\n  const onAction = () => onClick({ name, count, types, modifier });\r\n\r\n  const exclude = modifier === \"-\";\r\n  const character = types.includes(\"character\");\r\n  const artist = types.includes(\"artist\");\r\n  const showAliases = aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        \"tag\" +\r\n        (active ? \" active\" : \"\") +\r\n        (exclude ? \" exclude\" : \"\") +\r\n        (character ? \" character\" : \"\") +\r\n        (artist ? \" artist\" : \"\")\r\n      }\r\n    >\r\n      <span onClick={onAction}>{count ? `${name} (${count})` : name}</span>\r\n      {showAliases && (\r\n        <>\r\n          <i\r\n            class=\"caret fas fa-caret-down\"\r\n            onClick={() => setCollapsed(!collapsed)}\r\n          />\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(alias => (\r\n              <div>\r\n                {alias.posts ? `${alias.name} (${alias.posts})` : alias.name}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTag.propTypes = {\r\n  name: string,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  active: bool,\r\n  onClick: func\r\n};\r\n\r\nexport default Tag;\r\n","import React from \"react\";\r\nimport { arrayOf, func, object } from \"prop-types\";\r\nimport Tag from \"../tag/Tag\";\r\n\r\nexport function TagList({ tags, activeTags, onItemClick }) {\r\n  return (\r\n    <div className=\"tag-list\">\r\n      {tags.map(tag => (\r\n        <Tag\r\n          key={\"t_\" + tag.name}\r\n          {...tag}\r\n          active={isTagActive(tag, activeTags)}\r\n          onClick={onItemClick}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nTagList.propTypes = {\r\n  tags: arrayOf(object),\r\n  onItemClick: func\r\n};\r\n\r\nexport default TagList;\r\n\r\nfunction isTagActive(tag, activeTags) {\r\n  return activeTags.some(t => t.name === tag.name);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { arrayOf, func, number, object, string } from \"prop-types\";\r\nimport { TagList } from \"../tagList/TagList\";\r\nimport \"./Post.css\";\r\n\r\nfunction Post(props) {\r\n  let {\r\n    id,\r\n    media_type,\r\n    preview_src,\r\n    original_src,\r\n    thumbnail_src,\r\n    rating,\r\n    score,\r\n    source,\r\n    tags,\r\n    loadOriginal,\r\n    activeTags,\r\n    onTagClick\r\n  } = props;\r\n\r\n  let media_src;\r\n  if (loadOriginal) {\r\n    media_src = original_src;\r\n  } else {\r\n    media_src = `${preview_src}?${id}`;\r\n    if (media_src.includes(\"//images\")) {\r\n      media_src = media_src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  //TODO: smooth collapse\r\n  let [collapsed, setCollapsed] = useState(true);\r\n  return (\r\n    <li id={id} className=\"list-group-item post gray\">\r\n      <Media\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        onClick={() => setCollapsed(!collapsed)}\r\n      />\r\n\r\n      <div className={\"details collapse\" + (collapsed ? \"\" : \".show\")}>\r\n        <div className=\"d-flex justify-content-between info-bar\">\r\n          <Rating value={rating} />\r\n          <Score value={score} />\r\n          <Source value={source} />\r\n        </div>\r\n        <div className=\"pl-1\">\r\n          <TagList\r\n            tags={tags}\r\n            activeTags={activeTags}\r\n            onItemClick={onTagClick}\r\n          />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  id: number,\r\n  media_type: string,\r\n  media_src: string,\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: arrayOf(object),\r\n  onTagClick: func\r\n};\r\n\r\nexport default Post;\r\n\r\nfunction Media({ type, src, thumbnail_src, onClick }) {\r\n  let hasMoved = false;\r\n  const onMove = () => {\r\n    hasMoved = true;\r\n  };\r\n  const onRelease = event => {\r\n    if (!hasMoved) onClick(event);\r\n    hasMoved = false;\r\n  };\r\n\r\n  switch (type) {\r\n    case \"image\":\r\n      return (\r\n        <img src={src} alt={src} className=\"img-fluid\" onClick={onClick} />\r\n      );\r\n    case \"video\":\r\n      return (\r\n        <video\r\n          controls\r\n          loop\r\n          src={src}\r\n          alt={src}\r\n          poster={thumbnail_src}\r\n          className=\"video-fluid\"\r\n          preload=\"none\"\r\n          onClick={onClick}\r\n          onTouchMove={onMove}\r\n          onTouchEnd={onRelease}\r\n        />\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction Rating({ value }) {\r\n  return <span className=\"rating\">{value[0].toUpperCase()}</span>;\r\n}\r\n\r\nfunction Score({ value }) {\r\n  return <span className=\"score\">{value}</span>;\r\n}\r\n\r\nfunction Source({ value }) {\r\n  if (value)\r\n    if (value.startsWith(\"http\"))\r\n      return (\r\n        <a\r\n          href={value}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"source\"\r\n        >\r\n          Source\r\n        </a>\r\n      );\r\n    else return <span className=\"source\">{value}</span>;\r\n  else return null;\r\n}\r\n","import React from \"react\";\r\nimport { arrayOf, object } from \"prop-types\";\r\nimport Post from \"../post/Post\";\r\nimport \"./PostList.css\";\r\n\r\nfunction PostList({ posts, activeTags, loadOriginal, onTagClick }) {\r\n  return (\r\n    <ul className=\"post-list list-group list-group-flush\">\r\n      {posts.map(post => {\r\n        return (\r\n          <Post\r\n            key={`p_${post.id}`}\r\n            {...post}\r\n            loadOriginal={loadOriginal}\r\n            activeTags={activeTags}\r\n            onTagClick={onTagClick}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nPostList.propTypes = {\r\n  posts: arrayOf(object)\r\n};\r\n\r\nexport default PostList;\r\n","export default class Post {\r\n  /**\r\n   *\r\n   * @param {*} id\r\n   * @param {*} type\r\n   * @param {*} score\r\n   * @param {*} rating\r\n   * @param {*} source\r\n   * @param {*} tags\r\n   * @param {*} file_url\r\n   * @param {*} width\r\n   * @param {*} height\r\n   * @param {*} creator_id\r\n   * @param {*} creator_url\r\n   * @param {*} preview_url\r\n   * @param {*} preview_width\r\n   * @param {*} preview_height\r\n   * @param {*} sample_url\r\n   * @param {*} sample_width\r\n   * @param {*} sample_height\r\n   * @param {*} status\r\n   * @param {*} parent_id\r\n   * @param {*} has_children\r\n   * @param {*} has_comments\r\n   * @param {*} comments_url\r\n   * @param {*} has_notes\r\n   * @param {*} created_at\r\n   * @param {*} change\r\n   * @param {*} md5\r\n   */\r\n  constructor(\r\n    id,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    media_type,\r\n    media_src,\r\n    file_url,\r\n    thumbnail_src,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type;\r\n    this.preview_src = media_src;\r\n    this.original_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","export default class Tag {\r\n  constructor(name, types = [], count, modifier = \"+\") {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import Post from \"../data/post\";\r\nimport Tag from \"../data/tag\";\r\n\r\nexport default function(obj) {\r\n  return obj.name ? prepareTag(obj) : preparePost(obj);\r\n}\r\n\r\nfunction prepareTag({ name, types, count, modifier }) {\r\n  return new Tag(name, types, Number(count), modifier);\r\n}\r\n\r\nfunction preparePost(post) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  } = post;\r\n  return new Post(\r\n    Number(id),\r\n    Number(score),\r\n    rating,\r\n    source,\r\n    tags.map(t => new Tag(t)),\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    creator_id,\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { func } from \"prop-types\";\r\nimport Autosuggest from \"react-autosuggest\";\r\nimport api from \"../../misc/api\";\r\nimport \"./TagSelector.css\";\r\nimport prepare from \"../../misc/prepare\";\r\n\r\nfunction TagSelector({ onSubmit }) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [oldSuggestions, setOldSuggestions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (suggestions && suggestions.length > 0)\r\n      setOldSuggestions(suggestions.filter(() => true));\r\n  }, [suggestions]);\r\n\r\n  const onSubmitTag = event => {\r\n    const tagObject = oldSuggestions.find(s => s.name === value) || {};\r\n\r\n    onSubmit(\r\n      prepare({\r\n        name: value,\r\n        count: tagObject.posts,\r\n        types: tagObject.types,\r\n        modifier: modifier\r\n      })\r\n    );\r\n\r\n    setValue(\"\");\r\n\r\n    event.preventDefault();\r\n  };\r\n  const onValueChange = (event, { newValue }) => setValue(newValue);\r\n  const onSuggestionsFetchRequested = ({ value }) => {\r\n    api.getTags(normalize(value)).then(newSuggestions => {\r\n      setSuggestions(newSuggestions);\r\n    });\r\n  };\r\n\r\n  const inputProps = {\r\n    placeholder: \"Search for tags\",\r\n    value,\r\n    onChange: onValueChange\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={onSubmitTag} className=\"d-flex input-group tag-selector\">\r\n      <div className=\"input-group-prepend left-append\">\r\n        <select\r\n          className=\"form-control select-modifier\"\r\n          value={modifier}\r\n          onChange={e => setModifier(e.target.value)}\r\n        >\r\n          <option>+</option>\r\n          <option>-</option>\r\n        </select>\r\n      </div>\r\n      <Autosuggest\r\n        suggestions={suggestions}\r\n        onSuggestionsFetchRequested={onSuggestionsFetchRequested}\r\n        onSuggestionsClearRequested={() => setSuggestions([])}\r\n        getSuggestionValue={suggestion => suggestion.name}\r\n        renderSuggestion={({ name, posts }) => (\r\n          <span>{`${name} (${posts})`}</span>\r\n        )}\r\n        inputProps={inputProps}\r\n      />\r\n      <div className=\"input-group-append right-append\">\r\n        <input type=\"submit\" value=\"Add\" className=\"btn btn-red btn-add-tag\" />\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction normalize(tagname) {\r\n  return tagname.toLowerCase().replace(\" \", \"_\");\r\n}\r\n\r\nTagSelector.propTypes = {\r\n  onSubmitTag: func\r\n};\r\n\r\nexport default TagSelector;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Toggle from \"../components/toggle/Toggle\";\r\nimport TagList from \"../components/tagList/TagList\";\r\nimport PostList from \"../components/postList/PostList\";\r\nimport api from \"../misc/api\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport prepare from \"../misc/prepare\";\r\n\r\nlet scrollLock = true;\r\n\r\nfunction useTags(initialValue = []) {\r\n  const [tags, setTags] = useState(initialValue);\r\n\r\n  const addTag = newTag => {\r\n    if (tags.find(tag => tag.name === newTag.name)) removeTag(newTag);\r\n    setTags([...tags, newTag]);\r\n  };\r\n\r\n  const removeTag = tagToRemove => {\r\n    setTags(tags.filter(tag => tag.name !== tagToRemove.name));\r\n  };\r\n\r\n  const toggleTag = tagToToggle => {\r\n    if (tags.find(tag => tag.name === tagToToggle.name)) removeTag(tagToToggle);\r\n    else addTag(tagToToggle);\r\n  };\r\n\r\n  return [tags, toggleTag, addTag, removeTag];\r\n}\r\n\r\nfunction usePosts(initialValue = []) {\r\n  const [posts, setPosts] = useState(initialValue);\r\n\r\n  const addPosts = newPosts => setPosts([...posts, ...newPosts]);\r\n\r\n  return [posts, setPosts, addPosts];\r\n}\r\n\r\nfunction useLocalStorageUpdates(\r\n  infiniteScroll,\r\n  filterRated,\r\n  loadOriginal,\r\n  activeTags\r\n) {\r\n  useEffect(() => {\r\n    localStorage.setItem(\"infinteScroll\", JSON.stringify(infiniteScroll));\r\n  }, [infiniteScroll]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"showRated\", JSON.stringify(filterRated));\r\n  }, [filterRated]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"originalSizes\", JSON.stringify(loadOriginal));\r\n  }, [loadOriginal]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"tags\", JSON.stringify(activeTags));\r\n  }, [activeTags]);\r\n}\r\n\r\nfunction Main({ initialState }) {\r\n  const { infinite, rated, originals, activeTags } = initialState;\r\n  //TODO: add suggested tags | filters\r\n  const [infiniteScroll, setInfiniteScroll] = useState(infinite);\r\n  const [filterRated, setFilterRated] = useState(rated);\r\n  const [pageNumber, setPageNumber] = useState(0);\r\n  const [loadOriginal, setLoadOriginal] = useState(originals);\r\n  const [tags, toggleTag, addTag, removeTag] = useTags(activeTags);\r\n  const [posts, setPosts, addPosts] = usePosts([]);\r\n\r\n  useLocalStorageUpdates(infiniteScroll, filterRated, loadOriginal, tags);\r\n\r\n  // SEARCH\r\n  const search = () => {\r\n    api.getPosts(tags, 0, filterRated ? 1 : undefined).then(newPosts => {\r\n      setPosts(newPosts.map(prepare));\r\n      setPageNumber(0);\r\n    });\r\n  };\r\n  const loadMore = () => {\r\n    api\r\n      .getPosts(tags, pageNumber + 1, filterRated ? 1 : undefined)\r\n      .then(newPosts => {\r\n        addPosts(newPosts.map(prepare));\r\n        setPageNumber(pageNumber + 1);\r\n        scrollLock = true;\r\n      });\r\n  };\r\n\r\n  // SCROLL\r\n  const endOfPage = () =>\r\n    window.innerHeight + document.documentElement.scrollTop >=\r\n    document.documentElement.scrollHeight - window.innerHeight;\r\n\r\n  window.onscroll = () => {\r\n    if (infiniteScroll && scrollLock && endOfPage()) {\r\n      scrollLock = false;\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"search\">\r\n        <h3 className=\"centered\">Search</h3>\r\n        <TagSelector onSubmit={addTag} className=\"centered\" />\r\n\r\n        {tags.length > 0 ? (\r\n          <label>\r\n            Tags:\r\n            <TagList tags={tags} activeTags={tags} onItemClick={removeTag} />\r\n          </label>\r\n        ) : (\r\n          <div className=\"mb-1\" />\r\n        )}\r\n\r\n        <Toggle\r\n          text=\"Infinite Scroll\"\r\n          initial={infiniteScroll}\r\n          onChange={() => setInfiniteScroll(!infiniteScroll)}\r\n        />\r\n        <Toggle\r\n          text=\"Only show Rated\"\r\n          initial={filterRated}\r\n          onChange={() => setFilterRated(!filterRated)}\r\n        />\r\n        <Toggle\r\n          text=\"Load Original Sizes\"\r\n          initial={loadOriginal}\r\n          onChange={() => setLoadOriginal(!loadOriginal)}\r\n        />\r\n\r\n        <button className=\"btn btn-block btn-red\" onClick={search}>\r\n          Search\r\n        </button>\r\n      </section>\r\n\r\n      {posts.length > 0 ? (\r\n        <section className=\"results\">\r\n          <h3 className=\"centered\">Results</h3>\r\n          <PostList\r\n            posts={posts}\r\n            activeTags={tags}\r\n            loadOriginal={loadOriginal}\r\n            onTagClick={toggleTag}\r\n          />\r\n          {!infiniteScroll && (\r\n            <button className=\"btn btn-block btn-red\" onClick={loadMore}>\r\n              Load More\r\n            </button>\r\n          )}\r\n        </section>\r\n      ) : null}\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default withRouter(Main);\r\n","import React, { Component } from 'react';\r\n\r\nclass Search extends Component {   \r\n      render() {\r\n        return (\r\n          <div className=\"app\">\r\n            <main>\r\n              <p>Helpful things</p>\r\n            </main>\r\n          </div>\r\n        )\r\n      }\r\n}\r\n\r\nexport default Search","import React, { Component } from 'react';\r\n\r\nclass NotFound extends Component {   \r\n      render() {\r\n        return (\r\n          <div className=\"app\">\r\n            <header>\r\n              <h1>404 - not found</h1>\r\n            </header>\r\n    \r\n            <main>\r\n              <p>Go away</p>\r\n            </main>\r\n          </div>\r\n        )\r\n      }\r\n}\r\n\r\nexport default NotFound","import React, { Component } from \"react\";\nimport Main from \"./pages/Main\";\nimport Help from \"./pages/Help\";\nimport NotFound from \"./pages/NotFound\";\nimport { Route, Link, Switch, BrowserRouter as Router } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./App.css\";\n\nclass App extends Component {\n  loadStorage() {\n    const activeTags = JSON.parse(localStorage.getItem(\"tags\"));\n    const infinite = JSON.parse(localStorage.getItem(\"infinteScroll\"));\n    const rated = JSON.parse(localStorage.getItem(\"showRated\"));\n    const originals = JSON.parse(localStorage.getItem(\"originalSizes\"));\n\n    return {\n      activeTags: activeTags === null ? [] : activeTags,\n      infinite: infinite === null ? false : infinite,\n      rated: rated === null ? false : rated,\n      originals: originals === null ? false : originals\n    };\n  }\n\n  render() {\n    return (\n      <Router basename=\"/r34-react\">\n        <header className=\"centered\">\n          <h1 className=\"centered\">\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\n          </h1>\n          <div className=\"container d-flex justify-content-center menu-bar\">\n            <Link to=\"/\" className=\"menu-item\">\n              Search\n            </Link>\n            <Link to=\"/help\" className=\"menu-item\">\n              Help\n            </Link>\n          </div>\n        </header>\n        <Switch>\n          <Route\n            exact\n            path=\"/\"\n            render={() => <Main initialState={this.loadStorage()} />}\n          />\n          <Route exact path=\"/help\" component={Help} />\n          <Route component={NotFound} />\n        </Switch>\n        <div className=\"spacer\" />\n        <footer>\n          <small>\n            <div className=\"d-flex justify-content-center\">\n              <p>\n                <a href=\"https://github.com/kurozenzen/r34\">\n                  Github Repository\n                </a>\n              </p>\n            </div>\n            <div className=\"d-flex justify-content-center\">\n              <p>\n                Please, if you notice{\" \"}\n                <a href=\"https://github.com/kurozenzen/r34/issues/new?template=bug_report.md\">\n                  {\" \"}\n                  something isn't right\n                </a>\n                , or you{\" \"}\n                <a href=\"https://github.com/kurozenzen/r34/issues/new?template=feature_request.md\">\n                  want a feature\n                </a>{\" \"}\n                to be implemented take the time to let me know.\n              </p>\n            </div>\n            <div className=\"d-flex justify-content-center\">\n              <p>Hosted with Github Pages.</p>\n            </div>\n          </small>\n        </footer>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}