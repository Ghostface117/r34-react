{"version":3,"sources":["components/common/Surface.tsx","misc/formatting.ts","components/features/Header.tsx","icons/R34Icon.tsx","components/common/FlexColumn.tsx","components/common/FlexPair.tsx","hooks/useToggle.ts","components/tag/TagWrapper.tsx","components/tag/TagName.tsx","components/tag/Alias.tsx","components/tag/AliasesList.tsx","components/tag/Tag.tsx","components/tag/TagList.tsx","components/common/Toggle.tsx","hooks/usePreference.tsx","components/common/Select.tsx","icons/TypeIcon.tsx","hooks/useModifier.tsx","components/tagSelector/DropdownListEntry.tsx","components/tagSelector/DropdownList.tsx","components/tagSelector/TagInput.tsx","components/tagSelector/TagSelector.tsx","components/common/LabeledToggle.tsx","components/features/Options.tsx","components/common/Text.tsx","icons/FontAwesomeIcons.ts","components/common/Lines.tsx"],"names":["styled","div","gutter","layer","boxShadow","borderRadius","formatCount","numberString","number","toFixed","formatSource","source","url","parseUrl","host","formatDuration","duration","min","Math","trunc","sec","formatTagname","tagname","replace","serializeTagname","toLowerCase","formatTagnameAndCount","name","count","formatDateTime","date","toLocaleDateString","toLocaleTimeString","formatTime","milliseconds","formatUnit","value","unitSize","unit","result","unitString","HeaderWrapper","header","theme","css","flexColumn","flexColumnGap","dimensions","bigSpacing","TitleBar","flexRowWithGap","colors","layerBgSolid","MenuBar","nav","flexRowGap","hugeSpacing","LocationStyledLink","Link","to","current","accentColor","backgroundColor2","Header","useLocation","pathname","role","size","href","RouteName","SEARCH","HELP","SETTINGS","ABOUT","R34Icon","props","useTheme","xmlns","width","height","viewBox","className","transform","id","cx","cy","fill","stroke","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","x","y","fontVariant","fontStretch","FlexColumn","FlexColumnWithSpacing","centeredMaxWidth","FlexPair","useToggle","initialValue","useState","setValue","toggleValue","useCallback","resetValue","TagWrapper","active","fg","backgroundColor","bg","borderWidth","timings","transitionTime","switchingColors","blockHeight","collapsed","fontSizes","content","modifierToStyle","Modifier","PLUS","MINUS","OR","TagNameSpan","span","modifier","TagName","text","tabIndex","AliasWrapper","Alias","dispatch","useDispatch","handleClick","event","stopPropagation","tag","TagDataClass","addTag","onClick","ListWrapper","parentRef","offsetTop","clientHeight","offsetLeft","clientWidth","AliasesList","aliases","map","DropdownArrow","ArrowDown","$collapsed","Tag","types","detailed","tagRef","setTagRef","toggleCollapsed","resetCollapsed","activeTags","useSelector","selectActiveTags","selectAliasesByTagName","filteredAliases","useMemo","filter","alias","isActive","hasAliases","length","removeTag","handleArrowClick","handleEnter","key","onKeyDown","onMouseLeave","ref","TypeIcon","TagListWrapper","TagList","tags","Object","entries","Track","defaultBorder","longTransitionTime","Thumb","supportsAspectRatio","Toggle","onToggle","usePreference","preferences","selectPreferences","setPreference","setOption","Wrapper","StyledSelect","select","defaultBlock","Option","option","Select","options","onChange","optionKey","optionValue","NO_OP","find","t","match","TagType","CHARACTER","COPYRIGHT","ARTIST","RATING","SOURCE","METADATA","order","EntryWrapper","Name","Count","Icon","DropdownListEntry","posts","tagSelectorRef","tagSelector","sizeAndPosition","layerBg","DropdownList","entry","Input","input","TagInput","onSubmit","handleChange","target","placeholder","aria-label","TagSelectorWrapper","closed","AddButton","ModifierButton","TagSelector","suggestions","setSuggestions","setTagSelectorRef","setModifier","nextModifier","currentIndex","indexOf","useModifier","tagSuggestionsCount","selectTagSuggestionCount","activateTag","prepareTag","useThrottledEffect","a","api","getTags","newSuggestions","onAddClick","trim","sanitizedTagname","suggestion","s","LabeledToggle","children","OptionsWrapper","gridWithGap","StyledInput","SortRow","sortOptions","score","Options","PreferenceKey","RATED","rated","setRated","RATEDThreshold","ratedThreshold","setRatedThreshold","SORT","sort","setSort","toggleRated","toString","ratedThresholdInternal","setRatedThresholdInternal","onBlur","Number","handleSortChange","style","display","type","Title","h2","bigTitle","BigTitle","h1","SmallTitle","h3","Faded","subduedText","CharacterIcon","FontAwesomeIcon","attrs","icon","faUser","ArtistIcon","faPen","CopyrightIcon","faCopyright","MetaDataIcon","faInfoCircle","CloseIcon","faTimes","ExpandIcon","faExpand","ExternalLinkIcon","faExternalLinkAlt","DownloadIcon","faDownload","SourceIcon","faHashtag","RatingIcon","faRegistered","HeartIcon","faHeart","LinkIcon","faLink","faCaretDown","CodeBranchIcon","faCodeBranch","GithubIcon","faGithub","PatreonIcon","faPatreon","TwitterIcon","faTwitter","DeviantArtIcon","faDeviantart","DiscordIcon","faDiscord","TumblrIcon","faTumblr","CalendarIcon","faCalendarDay","CheckIcon","faCheckSquare","ImageIcon","faImage","HorizontalLine","VerticalLine"],"mappings":"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","file":"static/js/1.7bd4de44.chunk.js","sourcesContent":["import styled from 'styled-components'\nimport { borderRadius, boxShadow, gutter, layer } from '../../styled/mixins'\n\nexport default styled.div`\n  display: grid;\n  ${gutter}\n  ${layer}\n  ${boxShadow}\n  ${borderRadius}\n  width: 100%;\n`\n","import { parseUrl } from '../data/utils'\n\n/**\n * Transforms a number into a shortened version for rendering.\n * Useful as it takes up less space.\n */\nexport const formatCount = (numberString: number) => {\n  const number = numberString\n\n  if (number >= 1e6) {\n    return `${(number / 1e6).toFixed(0)}M`\n  }\n\n  if (number >= 1e3) {\n    return `${(number / 1e3).toFixed(0)}K`\n  }\n\n  return number\n}\n\n/**\n * Formats source strings for rendering\n */\nexport const formatSource = (source: string) => {\n  const url = parseUrl(source)\n  return url ? url.host : source\n}\n\n/**\n * Seconds to mm:ss formatter\n */\nexport function formatDuration(duration: number) {\n  const min = Math.trunc(duration / 60)\n  const sec = Math.trunc(duration % 60)\n\n  return min + ':' + (sec < 10 ? '0' : '') + sec\n}\n\n/**\n * Formats tag names for rendering.\n */\nexport function formatTagname(tagname: string) {\n  return tagname\n    .replace(/_/g, ' ')\n    .replace(/source:/g, ' ')\n    .replace(/rating:/g, ' ')\n}\n\n/**\n * Serializes tag names for use in api requests.\n */\nexport function serializeTagname(tagname: string) {\n  return tagname.toLowerCase().replace(/ /g, '_')\n}\n\n/**\n * Formats tags with their count if possible\n */\nexport function formatTagnameAndCount(name: string, count?: number | null) {\n  return count ? `${formatTagname(name)} (${formatCount(count)})` : formatTagname(name)\n}\n\nexport function formatDateTime(date: Date) {\n  return `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`\n}\n\nexport function formatTime(milliseconds: number) {\n  if (milliseconds >= 315576e5) {\n    return formatUnit(milliseconds, 315576e5, 'year')\n  }\n  if (milliseconds >= 26297568e2) {\n    return formatUnit(milliseconds, 26297568e2, 'month')\n  }\n\n  if (milliseconds >= 6048e5) {\n    return formatUnit(milliseconds, 6048e5, 'week')\n  }\n\n  if (milliseconds >= 854e5) {\n    return formatUnit(milliseconds, 854e5, 'day')\n  }\n\n  if (milliseconds >= 36e5) {\n    return formatUnit(milliseconds, 36e5, 'hour')\n  }\n\n  if (milliseconds >= 6e4) {\n    return formatUnit(milliseconds, 6e4, 'minute')\n  }\n\n  if (milliseconds >= 1e3) {\n    return formatUnit(milliseconds, 1e3, 'second')\n  }\n\n  return `${milliseconds} ms`\n}\n\nfunction formatUnit(value: number, unitSize: number, unit: string) {\n  const result = (value / unitSize).toFixed(0)\n\n  const unitString = result === '1' ? unit : `${unit}s`\n\n  return `${result} ${unitString}`\n}\n","import React, { RefAttributes } from 'react'\nimport { Link, LinkProps, useLocation } from 'react-router-dom'\nimport styled, { css, ThemeProps } from 'styled-components'\nimport { RouteName } from '../../data/types'\nimport R34Icon from '../../icons/R34Icon'\nimport { boxShadow, flexColumn, flexColumnGap, flexRowGap, flexRowWithGap } from '../../styled/mixins'\nimport { VerticalLine } from '../common/Lines'\nimport { BigTitle } from '../common/Text'\n\nconst HeaderWrapper = styled.header(\n  ({ theme }) => css`\n    ${flexColumn()}\n    ${flexColumnGap(theme.dimensions.bigSpacing)}\n  `\n)\n\nconst TitleBar = styled.div(\n  ({ theme }) => css`\n    ${flexRowWithGap({ theme })}\n    justify-content: center;\n    background: ${theme.colors.layerBgSolid};\n    padding: ${theme.dimensions.gutter} 0;\n    ${boxShadow({ theme })}\n  `\n)\n\nconst MenuBar = styled.nav(\n  ({ theme }) => css`\n    display: flex;\n    justify-content: center;\n    padding: ${theme.dimensions.bigSpacing};\n    ${flexRowGap(theme.dimensions.hugeSpacing)}\n  `\n)\n\ntype LocationStyledLinkProps = LinkProps<unknown> &\n  RefAttributes<HTMLAnchorElement> &\n  ThemeProps<any> & { current: string }\n\nconst LocationStyledLink = styled(Link)(\n  ({ to, current, theme }: LocationStyledLinkProps) => css`\n    color: ${to === current ? theme.colors.accentColor : theme.colors.backgroundColor2};\n  `\n)\n\nexport default function Header() {\n  const current = useLocation().pathname\n\n  return (\n    <HeaderWrapper role='cell'>\n      <TitleBar>\n        <R34Icon size={32} />\n        <VerticalLine />\n        <BigTitle>\n          <span>Browse</span> <a href='https://rule34.xxx'>Rule34</a>\n        </BigTitle>\n      </TitleBar>\n\n      <MenuBar role='cell'>\n        <LocationStyledLink current={current} to={RouteName.SEARCH}>\n          Search\n        </LocationStyledLink>\n        <VerticalLine />\n        <LocationStyledLink current={current} to={RouteName.HELP}>\n          Help\n        </LocationStyledLink>\n        <VerticalLine />\n        <LocationStyledLink current={current} to={RouteName.SETTINGS}>\n          Settings\n        </LocationStyledLink>\n        <VerticalLine />\n        <LocationStyledLink current={current} to={RouteName.ABOUT}>\n          About\n        </LocationStyledLink>\n      </MenuBar>\n    </HeaderWrapper>\n  )\n}\n","import { useTheme } from 'styled-components'\n\nexport default function R34Icon(props: { size: number; className?: string }) {\n  const theme = useTheme()\n\n  return (\n    <svg\n      xmlns='http://www.w3.org/2000/svg'\n      width={props.size}\n      height={props.size}\n      viewBox='0 0 12.7 12.7'\n      className={props.className}\n    >\n      <g transform='translate(0,-284.3)'>\n        <circle\n          id='path18'\n          cx='6.3499999'\n          cy='290.65002'\n          fill='none'\n          stroke={theme.colors.accentColor}\n          strokeWidth='0.50848764'\n          strokeMiterlimit='4'\n          strokeDasharray='none'\n          strokeOpacity='1'\n          r='6.0957561'\n        />\n        <text\n          fontStyle='normal'\n          fontWeight='normal'\n          fontSize='8.3113203px'\n          fontFamily='sansSerif'\n          letterSpacing='0px'\n          wordSpacing='0px'\n          fill={theme.colors.accentColor}\n          fillOpacity='1'\n          x='2.1363549'\n          y='289.02704'\n          id='text4533'\n          transform='scale(0.98538224,1.0148346)'\n        >\n          <tspan\n            id='tspan4531'\n            x='2'\n            y='289.1'\n            fontStyle='normal'\n            fontVariant='normal'\n            fontWeight='300'\n            fontStretch='normal'\n            fontFamily='Calibri'\n            fill={theme.colors.accentColor}\n            fillOpacity='1'\n          >\n            34\n          </tspan>\n        </text>\n      </g>\n    </svg>\n  )\n}\n","import styled from 'styled-components'\nimport { flexColumn, gutter, centeredMaxWidth } from '../../styled/mixins'\n\nconst FlexColumn = styled.div`\n  ${flexColumn}\n  width: 100%;\n  min-height: 100%;\n`\n\nexport default FlexColumn\n\nexport const FlexColumnWithSpacing = styled(FlexColumn)`\n  ${gutter}\n  ${centeredMaxWidth}\n`\n","import styled from 'styled-components'\nimport { flexRowWithGap } from '../../styled/mixins'\n\nconst FlexPair = styled.div`\n  ${flexRowWithGap}\n`\n\nexport default FlexPair\n","import { useCallback, useState } from 'react'\n\n/**\n * A small wrapper for a useState<boolean> that is primarily used for toggling.\n * Saves me a few useCallbacks.\n */\nexport default function useToggle(initialValue = false): [boolean, () => void, () => void] {\n  const [value, setValue] = useState<boolean>(initialValue)\n  const toggleValue = useCallback(() => setValue(!value), [value])\n  const resetValue = useCallback(() => setValue(initialValue), [initialValue])\n\n  return [value, toggleValue, resetValue]\n}\n","import { MouseEventHandler } from 'react'\nimport styled, { css, DefaultTheme } from 'styled-components'\n\nimport { ThemeType } from '../../misc/theme'\nimport { flexRowWithGap } from '../../styled/mixins'\n\nconst dropdownBorderRadius = (collapsed: boolean, theme: ThemeType) =>\n  collapsed ? theme.dimensions.borderRadius : `${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius} 0 0`\n\nconst switchingColors = (active: boolean, theme: ThemeType) => {\n  const fg = active ? theme.colors.backgroundColor : theme.colors.accentColor\n  const bg = active ? theme.colors.accentColor : theme.colors.backgroundColor\n\n  return css`\n    color: ${fg};\n    background-color: ${bg};\n    border: ${theme.colors.accentColor} ${theme.dimensions.borderWidth} solid;\n    transition: all ${theme.timings.transitionTime} ease-out;\n\n    svg {\n      color: ${fg};\n    }\n\n    cursor: pointer;\n\n    :hover,\n    :focus,\n    :active {\n      border-color: ${theme.colors.backgroundColor2};\n      color: ${theme.colors.backgroundColor2};\n\n      svg {\n        color: ${theme.colors.backgroundColor2};\n      }\n    }\n\n    :active {\n      transform: scale(1.05);\n    }\n  `\n}\n\nconst TagWrapper = styled.div(\n  (props: { active: boolean; collapsed: boolean; onMouseLeave: MouseEventHandler; theme: DefaultTheme }) =>\n    css`\n      ${flexRowWithGap({ theme: props.theme })}\n      ${switchingColors(props.active, props.theme)}\n      padding: 0 ${props.theme.dimensions.gutter};\n      height: ${props.theme.dimensions.blockHeight};\n      border-radius: ${dropdownBorderRadius(props.collapsed, props.theme)};\n      font-size: ${props.theme.fontSizes.content};\n    `\n)\n\nexport default TagWrapper\n","import styled, { css } from 'styled-components'\nimport { Modifier, TagType } from '../../data/types'\nimport { formatTagnameAndCount } from '../../misc/formatting'\n\ninterface TagNameProps {\n  modifier: Modifier\n  name: string\n  count?: number | null\n  types?: TagType[]\n}\n\nconst modifierToStyle = {\n  [Modifier.PLUS]: css``,\n  [Modifier.MINUS]: css`\n    text-decoration: line-through;\n  `,\n  [Modifier.OR]: css`\n    font-style: italic;\n  `,\n}\n\nconst TagNameSpan = styled.span(\n  ({ modifier = Modifier.PLUS }: Pick<TagNameProps, 'modifier'>) => modifierToStyle[modifier]\n)\n\nexport default function TagName(props: TagNameProps) {\n  const { modifier, name, count } = props\n\n  const text = formatTagnameAndCount(name, count)\n\n  return (\n    <TagNameSpan modifier={modifier} tabIndex={0}>\n      {text}\n    </TagNameSpan>\n  )\n}\n","import React, { MouseEventHandler, useCallback } from 'react'\nimport { useDispatch } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport TagDataClass from '../../data/TagDataClass'\nimport { Modifier } from '../../data/types'\nimport { addTag } from '../../redux/actions'\nimport { flexRowWithGap } from '../../styled/mixins'\nimport TagName from './TagName'\n\ninterface AliasProps {\n  modifier: Modifier\n  name: string\n  count?: number | null\n}\n\nconst AliasWrapper = styled.div(\n  ({ theme }) => css`\n    ${flexRowWithGap({ theme })}\n    padding: 0 ${theme.dimensions.bigSpacing};\n    height: ${theme.dimensions.blockHeight};\n    font-size: ${theme.fontSizes.content};\n  `\n)\n\nexport default function Alias(props: AliasProps) {\n  const { modifier, name, count } = props\n\n  const dispatch = useDispatch()\n\n  const handleClick: MouseEventHandler = useCallback(\n    (event) => {\n      event.stopPropagation()\n      const tag = new TagDataClass(name, [], count, modifier)\n\n      dispatch(addTag(tag))\n    },\n    [count, dispatch, modifier, name]\n  )\n\n  return (\n    <AliasWrapper onClick={handleClick}>\n      <TagName modifier={modifier} name={name} count={count} />\n    </AliasWrapper>\n  )\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport TagDataClass from '../../data/TagDataClass'\nimport { Modifier } from '../../data/types'\nimport Alias from './Alias'\nimport { ThemeType } from '../../misc/theme'\n\nconst ListWrapper = styled.div(\n  ({ theme, parentRef }: { theme: ThemeType; parentRef: HTMLDivElement }) => css`\n    position: absolute;\n    top: ${parentRef.offsetTop + parentRef.clientHeight + 4}px;\n    left: ${parentRef.offsetLeft}px;\n    width: ${parentRef.clientWidth + 5}px;\n\n    display: flex;\n    flex-direction: column;\n\n    border-bottom-left-radius: ${theme.dimensions.borderRadius};\n    border-bottom-right-radius: ${theme.dimensions.borderRadius};\n    border: ${theme.dimensions.borderWidth} solid ${theme.colors.accentColor};\n    border-top: none;\n\n    background: ${theme.colors.backgroundColor};\n    z-index: 3;\n    color: ${theme.colors.accentColor};\n\n    > :not(:last-child) {\n      border-bottom: ${theme.dimensions.borderWidth} solid ${theme.colors.accentColor};\n    }\n  `\n)\n\ninterface AliasesListProps {\n  aliases: TagDataClass[]\n  modifier: Modifier\n  parentRef: HTMLDivElement\n}\n\nexport default function AliasesList(props: AliasesListProps) {\n  const { aliases, modifier, parentRef } = props\n\n  return (\n    <ListWrapper parentRef={parentRef}>\n      {aliases.map(({ name, count }) => (\n        <Alias key={'a_' + name} modifier={modifier} name={name} count={count} />\n      ))}\n    </ListWrapper>\n  )\n}\n","import React, { KeyboardEventHandler, MouseEventHandler, useCallback, useMemo, useState } from 'react'\r\nimport TypeIcon from '../../icons/TypeIcon'\r\nimport { ArrowDown } from '../../icons/FontAwesomeIcons'\r\nimport TagDataClass from '../../data/TagDataClass'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { selectActiveTags, selectAliasesByTagName } from '../../redux/selectors'\r\nimport { addTag, removeTag } from '../../redux/actions'\r\nimport useToggle from '../../hooks/useToggle'\r\nimport TagWrapper from './TagWrapper'\r\nimport TagName from './TagName'\r\nimport { Modifier } from '../../data/types'\r\nimport AliasesList from './AliasesList'\r\nimport styled, { css, DefaultTheme } from 'styled-components'\r\n\r\nconst DropdownArrow = styled(ArrowDown)(\r\n  ({ $collapsed, theme }: { $collapsed: boolean; theme: DefaultTheme }) => css`\r\n    transition: all ${theme.timings.transitionTime} ease-out;\r\n    height: 32px;\r\n    width: 32px !important;\r\n    padding: 8px;\r\n    margin: 0 -8px;\r\n    ${$collapsed\r\n      ? css``\r\n      : css`\r\n          transform: rotate(180deg);\r\n        `}\r\n  `\r\n)\r\n\r\ninterface TagProps extends TagDataClass {\r\n  detailed: boolean\r\n}\r\n\r\nexport default function Tag(props: TagProps) {\r\n  const { name, count, modifier = Modifier.PLUS, types, detailed } = props\r\n\r\n  const [tagRef, setTagRef] = useState<HTMLDivElement | null>(null)\r\n  const [collapsed, toggleCollapsed, resetCollapsed] = useToggle(true)\r\n\r\n  const dispatch = useDispatch()\r\n  const activeTags = useSelector(selectActiveTags)\r\n  const aliases = useSelector(selectAliasesByTagName(name))\r\n\r\n  const filteredAliases = useMemo(() => (aliases ? aliases.filter((alias) => !(alias.name in activeTags)) : []), [\r\n    activeTags,\r\n    aliases,\r\n  ])\r\n\r\n  const isActive = name in activeTags\r\n  const hasAliases = filteredAliases?.length > 0\r\n\r\n  const handleClick = useCallback(\r\n    (event: React.MouseEvent | React.KeyboardEvent) => {\r\n      event.stopPropagation()\r\n      const tag = new TagDataClass(name, types, count, modifier)\r\n\r\n      if (isActive) {\r\n        dispatch(removeTag(tag))\r\n      } else {\r\n        dispatch(addTag(tag))\r\n      }\r\n    },\r\n    [count, dispatch, isActive, modifier, name, types]\r\n  )\r\n\r\n  const handleArrowClick: MouseEventHandler = useCallback(\r\n    (event) => {\r\n      event.stopPropagation()\r\n      toggleCollapsed()\r\n    },\r\n    [toggleCollapsed]\r\n  )\r\n\r\n  const handleEnter: KeyboardEventHandler = useCallback(\r\n    (event) => {\r\n      if (event.key === 'Enter') {\r\n        handleClick(event)\r\n      }\r\n    },\r\n    [handleClick]\r\n  )\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={isActive}\r\n      collapsed={collapsed}\r\n      onClick={handleClick}\r\n      onKeyDown={handleEnter}\r\n      onMouseLeave={resetCollapsed}\r\n      ref={setTagRef}\r\n    >\r\n      {detailed && <TypeIcon types={types} />}\r\n      <TagName modifier={modifier} name={name} count={count} />\r\n      {detailed && hasAliases && (\r\n        <>\r\n          <DropdownArrow onClick={handleArrowClick} $collapsed={collapsed} />\r\n          {!collapsed && tagRef && <AliasesList aliases={filteredAliases} modifier={modifier} parentRef={tagRef} />}\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport TagDataClass from '../../data/TagDataClass'\r\nimport { flexRowGap, flexColumnGap } from '../../styled/mixins'\r\nimport Tag from './Tag'\r\n\r\nconst TagListWrapper = styled.div(\r\n  ({ theme }) => css`\r\n    display: inline-flex;\r\n    flex-wrap: wrap;\r\n    ${flexRowGap(theme.dimensions.gutter)}\r\n    ${flexColumnGap(theme.dimensions.gutter)}\r\n  `\r\n)\r\n\r\ninterface TagListProps {\r\n  tags: Record<string, TagDataClass>\r\n  className?: string\r\n  detailed: boolean\r\n}\r\n\r\nexport default function TagList(props: TagListProps) {\r\n  const { tags, className, detailed } = props\r\n\r\n  return (\r\n    <TagListWrapper className={className}>\r\n      {Object.entries(tags).map(([key, tag]) => (\r\n        <Tag key={key} detailed={detailed} {...tag} />\r\n      ))}\r\n    </TagListWrapper>\r\n  )\r\n}\r\n","import React, { MouseEventHandler } from 'react'\nimport styled, { css } from 'styled-components'\nimport { supportsAspectRatio } from '../../data/browserUtils'\nimport { ThemeType } from '../../misc/theme'\nimport { defaultBorder } from '../../styled/mixins'\n\nconst Track = styled.div(\n  (props) => css`\n    height: 24px;\n    width: 50px;\n    ${defaultBorder(props)}\n    border-radius: 30px;\n    background-color: ${props.theme.colors.backgroundColor};\n    transition: transform ${props.theme.timings.longTransitionTime} ease-in-out;\n  `\n)\n\nfunction circle() {\n  return supportsAspectRatio\n    ? css`\n        height: 100%;\n        aspect-ratio: 1/1;\n      `\n    : css`\n        height: 100%;\n        width: 22px;\n      `\n}\n\nconst Thumb = styled.div(\n  (props: { value: boolean; theme: ThemeType }) => css`\n    ${circle()}\n    background-color: ${props.value ? props.theme.colors.accentColor : props.theme.colors.backgroundColor2};\n    border-radius: 100px;\n    transition: all 0.2s ease-in-out;\n    transform: translate(${props.value ? '26px' : '0px'});\n  `\n)\n\ninterface ToggleProps {\n  value: boolean\n  onToggle: MouseEventHandler\n}\n\nexport default function Toggle(props: ToggleProps) {\n  const { value, onToggle } = props\n\n  return (\n    <Track onClick={onToggle}>\n      <Thumb value={value} />\n    </Track>\n  )\n}\n","import { useCallback } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { PreferenceKey } from '../data/types'\nimport { setOption } from '../redux/actions'\nimport { PreferencesState } from '../redux/reducers/preferences'\nimport { selectPreferences } from '../redux/selectors'\n\n/**\n * useState for preferences using redux instead of local state.\n */\nexport default function usePreference<T extends PreferenceKey>(\n  key: T\n): [PreferencesState[T], (value: PreferencesState[T]) => void] {\n  const dispatch = useDispatch()\n  const preferences = useSelector(selectPreferences)\n  const setPreference = useCallback((value: any) => dispatch(setOption(key, value)), [dispatch, key])\n\n  return [preferences[key], setPreference]\n}\n","import React, { ChangeEventHandler } from 'react'\nimport styled, { css } from 'styled-components'\nimport { defaultBorder, defaultBlock } from '../../styled/mixins'\n\nconst Wrapper = styled.div(\n  ({ theme }) => css`\n    width: 100px;\n    height: ${theme.dimensions.blockHeight};\n  `\n)\n\nconst StyledSelect = styled.select(\n  ({ theme }) => css`\n    ${defaultBorder({ theme })}\n    ${defaultBlock({ theme })}\n    width: 100%;\n    height: 100%;\n    background-color: ${theme.colors.backgroundColor2};\n  `\n)\n\nconst Option = styled.option(\n  ({ theme }) => css`\n    ${defaultBorder({ theme })}\n    background-color: ${theme.colors.backgroundColor2};\n    ${defaultBlock({ theme })}\n  `\n)\n\ninterface SelectProps {\n  options: Record<string, string>\n  value: string\n  onChange: ChangeEventHandler\n}\n\nexport default function Select(props: SelectProps) {\n  const { options, value, onChange } = props\n\n  return (\n    <Wrapper>\n      <StyledSelect value={value} onChange={onChange}>\n        {Object.entries(options).map(([optionKey, optionValue]) => (\n          <Option key={optionKey} value={optionKey}>\n            {optionValue}\n          </Option>\n        ))}\n      </StyledSelect>\n    </Wrapper>\n  )\n}\n","import React, { MouseEventHandler, useMemo } from 'react'\nimport { NO_OP, TagType } from '../data/types'\nimport { CharacterIcon, CopyrightIcon, ArtistIcon, RatingIcon, SourceIcon, MetaDataIcon } from './FontAwesomeIcons'\n\ninterface TypeIconProps {\n  types?: string[]\n  className?: string\n  color?: string\n  size?: number\n  onClick?: MouseEventHandler\n  left?: boolean\n  right?: boolean\n}\n\nexport default function TypeIcon(props: TypeIconProps) {\n  const { types = [], className = '', onClick = NO_OP } = props\n  const interestingType = useMemo(() => types.find((t) => !t.match(/^[general|ambiguous]$/)), [types])\n\n  switch (interestingType) {\n    case TagType.CHARACTER:\n      return <CharacterIcon className={className} onClick={onClick} />\n    case TagType.COPYRIGHT:\n      return <CopyrightIcon className={className} onClick={onClick} />\n    case TagType.ARTIST:\n      return <ArtistIcon className={className} onClick={onClick} />\n    case TagType.RATING:\n      return <RatingIcon className={className} onClick={onClick} />\n    case TagType.SOURCE:\n      return <SourceIcon className={className} onClick={onClick} />\n    case TagType.METADATA:\n      return <MetaDataIcon className={className} onClick={onClick} />\n    default:\n      return null\n  }\n}\n","import { useCallback, useState } from 'react'\nimport { Modifier } from '../data/types'\n\nconst order = [Modifier.PLUS, Modifier.MINUS, Modifier.OR]\n\n/**\n * Small utility hook to abstract the rotating modifier away\n */\nexport default function useModifier(initialValue: Modifier = Modifier.PLUS): [Modifier, () => void] {\n  const [modifier, setModifier] = useState(initialValue)\n\n  const nextModifier = useCallback(() => {\n    const currentIndex = order.indexOf(modifier)\n    const nextIndex = currentIndex + 1\n\n    // make the value rotate\n    setModifier(order[nextIndex % order.length])\n  }, [modifier])\n\n  return [modifier, nextModifier]\n}\n","import React, { MouseEventHandler } from 'react'\nimport styled, { css } from 'styled-components'\nimport { TagType } from '../../data/types'\nimport TypeIcon from '../../icons/TypeIcon'\nimport { formatCount, formatTagname } from '../../misc/formatting'\n\ninterface EntryProps {\n  name: string\n  posts: number\n  types: TagType[]\n  onClick: MouseEventHandler\n}\n\nconst EntryWrapper = styled.div(\n  ({ theme }) => css`\n    display: grid;\n    grid-template-columns: 48px 1fr auto;\n    min-height: ${theme.dimensions.blockHeight}; // COMPAT: Kiwi Browser\n    height: ${theme.dimensions.blockHeight};\n    background: white;\n    align-items: center;\n  `\n)\n\nconst Name = styled.span`\n  grid-column: 2/3;\n`\n\nconst Count = styled.span(\n  ({ theme }) => css`\n    grid-column: 3/4;\n    padding-right: ${theme.dimensions.bigSpacing};\n  `\n)\n\nconst Icon = styled.div`\n  grid-column: 1/2;\n  text-align: center;\n`\n\nexport default function DropdownListEntry(props: EntryProps) {\n  const { name, posts, types, onClick } = props\n\n  return (\n    <EntryWrapper onClick={onClick}>\n      <Icon>\n        <TypeIcon types={types} />\n      </Icon>\n      <Name>{formatTagname(name)}</Name>\n      <Count>{formatCount(posts)} posts</Count>\n    </EntryWrapper>\n  )\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport DropdownListEntry from './DropdownListEntry'\nimport TagDataClass from '../../data/TagDataClass'\nimport { TagType } from '../../data/types'\nimport { ThemeType } from '../../misc/theme'\nimport { flexColumn, flexColumnGap } from '../../styled/mixins'\n\nfunction sizeAndPosition(tagSelector: HTMLDivElement | null) {\n  if (tagSelector) {\n    const { offsetTop, clientHeight, offsetLeft, clientWidth } = tagSelector\n\n    return css`\n      position: absolute;\n      top: ${offsetTop + clientHeight}px;\n      left: ${offsetLeft}px;\n      width: ${clientWidth}px;\n      max-height: 50vh;\n    `\n  }\n\n  return ''\n}\n\nconst ListWrapper = styled.div(\n  ({ theme, tagSelectorRef }: { tagSelectorRef: HTMLDivElement | null; theme: ThemeType }) => css`\n    ${flexColumn()}\n    ${flexColumnGap('1px')}\n    ${sizeAndPosition(tagSelectorRef)};\n    background: lightgrey;\n    box-sizing: border-box;\n    border: ${theme.dimensions.borderWidth} ${theme.colors.accentColor} solid;\n    border-top: none;\n    border-radius: 0 0 3px 3px;\n    color: black;\n    overflow-y: auto;\n    z-index: 3;\n\n    ::-webkit-scrollbar {\n      width: 8px;\n\n      :hover {\n        background: ${theme.colors.layerBg};\n      }\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n      background: ${theme.colors.backgroundColor2};\n      border-left: 1px lightgray solid;\n    }\n\n    /* Handle */\n    :hover {\n      ::-webkit-scrollbar {\n        background: ${theme.colors.backgroundColor}20;\n      }\n    }\n\n    ::-webkit-scrollbar-thumb {\n      background: ${theme.colors.backgroundColor}40;\n      border-radius: 1000px;\n\n      :hover {\n        background: ${theme.colors.backgroundColor}30;\n      }\n    }\n  `\n)\n\ninterface DropdownListProps {\n  tagSelectorRef: HTMLDivElement | null\n  entries: {\n    name: string\n    posts: number\n    types: TagType[]\n  }[]\n  onClick: (entry: TagDataClass) => void\n}\n\nexport default function DropdownList(props: DropdownListProps) {\n  const { tagSelectorRef, entries, onClick } = props\n\n  return entries && entries.length > 0 ? (\n    <ListWrapper tagSelectorRef={tagSelectorRef}>\n      {entries.map((entry) => (\n        <DropdownListEntry key={entry.name} onClick={() => onClick(entry)} {...entry} />\n      ))}\n    </ListWrapper>\n  ) : null\n}\n","import React, { ChangeEventHandler, KeyboardEventHandler, useCallback } from 'react'\nimport styled, { css } from 'styled-components'\n\nconst Input = styled.input(\n  (props) => css`\n    width: 100%;\n    border: none;\n    outline: none;\n    background: none;\n    font-size: ${props.theme.fontSizes.content};\n    border-top: ${props.theme.colors.accentColor} ${props.theme.dimensions.borderWidth} solid;\n    border-bottom: ${props.theme.colors.accentColor} ${props.theme.dimensions.borderWidth} solid;\n  `\n)\n\ninterface TagInputProps {\n  value: string\n  setValue: (newValue: string) => void\n  onSubmit: () => void\n}\n\nexport default function TagInput(props: TagInputProps) {\n  const { value, setValue, onSubmit } = props\n\n  const handleChange: ChangeEventHandler<HTMLInputElement> = useCallback(\n    (event) => {\n      setValue(event.target.value)\n    },\n    [setValue]\n  )\n\n  const handleEnter: KeyboardEventHandler = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onSubmit()\n      }\n    },\n    [onSubmit]\n  )\n\n  return (\n    <Input\n      id='tag-input'\n      value={value}\n      onChange={handleChange}\n      onKeyDown={handleEnter}\n      placeholder='Search for tags'\n      aria-label='Search'\n    />\n  )\n}\n","import React, { useCallback, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styled, { css } from 'styled-components'\nimport useThrottledEffect from 'use-throttled-effect'\nimport { TagLike } from '../../data/types'\nimport useModifier from '../../hooks/useModifier'\nimport api from '../../misc/api'\nimport { serializeTagname } from '../../misc/formatting'\nimport { prepareTag } from '../../misc/prepare'\nimport { ThemeType } from '../../misc/theme'\nimport { addTag } from '../../redux/actions'\nimport { selectTagSuggestionCount } from '../../redux/selectors'\nimport { AddButton, ModifierButton } from '../common/Buttons'\nimport DropdownList from './DropdownList'\nimport TagInput from './TagInput'\n\nconst TagSelectorWrapper = styled.div(\n  (props: { closed: boolean; ref: (ref: HTMLInputElement) => void; theme: ThemeType }) => css`\n    display: flex;\n    background: white;\n    ${props.closed\n      ? css`\n          border-radius: ${props.theme.dimensions.borderRadius};\n        `\n      : css`\n          border-radius: ${props.theme.dimensions.borderRadius} ${props.theme.dimensions.borderRadius} 0 0;\n\n          > ${AddButton} {\n            border-radius: 0 ${props.theme.dimensions.borderRadius} 0 0;\n          }\n\n          > ${ModifierButton} {\n            border-radius: ${props.theme.dimensions.borderRadius} 0 0 0;\n          }\n        `}\n  `\n)\n\nexport default function TagSelector() {\n  const dispatch = useDispatch()\n\n  const [value, setValue] = useState('')\n  const [suggestions, setSuggestions] = useState<TagLike[]>([])\n  const [tagSelectorRef, setTagSelectorRef] = useState<HTMLDivElement | null>(null)\n  const [modifier, nextModifier] = useModifier()\n\n  const tagSuggestionsCount = useSelector(selectTagSuggestionCount)\n\n  const activateTag = useCallback(\n    ({ name, posts, types }) => {\n      dispatch(\n        addTag(\n          prepareTag({\n            name,\n            types,\n            modifier,\n            count: posts,\n          })\n        )\n      )\n\n      setValue('')\n      setSuggestions([])\n    },\n    [dispatch, modifier]\n  )\n\n  useThrottledEffect(\n    async () => {\n      if (!value) {\n        setSuggestions([])\n        return\n      }\n\n      const newSuggestions = await api.getTags(serializeTagname(value), tagSuggestionsCount)\n\n      setSuggestions(newSuggestions)\n    },\n    300,\n    [tagSuggestionsCount, value]\n  )\n\n  const onAddClick = useCallback(() => {\n    if (value && value.trim()) {\n      const sanitizedTagname = serializeTagname(value)\n      const suggestion = suggestions.find((s) => s.name === sanitizedTagname) || {}\n      activateTag({ ...suggestion, name: value })\n    }\n  }, [value, activateTag, suggestions])\n\n  return (\n    <TagSelectorWrapper ref={setTagSelectorRef} closed={suggestions.length === 0}>\n      <ModifierButton onClick={nextModifier} aria-label='Tag Modifier'>\n        {modifier}\n      </ModifierButton>\n      <TagInput value={value} setValue={setValue} onSubmit={onAddClick} />\n      <AddButton onClick={onAddClick} aria-label='Add Tag'>\n        Add\n      </AddButton>\n      {suggestions.length > 0 && (\n        <DropdownList tagSelectorRef={tagSelectorRef} entries={suggestions} onClick={activateTag} />\n      )}\n    </TagSelectorWrapper>\n  )\n}\n","import React, { MouseEventHandler } from 'react'\nimport FlexPair from './FlexPair'\nimport Toggle from './Toggle'\n\ninterface LabeledToggleProps {\n  children: JSX.Element | string\n  value: boolean\n  onToggle: MouseEventHandler\n}\n\nexport default function LabeledToggle(props: LabeledToggleProps) {\n  const { children, value, onToggle } = props\n\n  return (\n    <FlexPair>\n      <Toggle value={value} onToggle={onToggle} />\n      <span>{children}</span>\n    </FlexPair>\n  )\n}\n","import React, { ChangeEventHandler, useCallback, useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport LabeledToggle from '../common/LabeledToggle'\nimport { ThemeType } from '../../misc/theme'\nimport { PreferenceKey } from '../../data/types'\nimport usePreference from '../../hooks/usePreference'\nimport { flexRowWithGap, gridWithGap, PropsWithTheme } from '../../styled/mixins'\nimport Select from '../common/Select'\n\nconst OptionsWrapper = styled.div`\n  ${gridWithGap}\n`\n\nconst StyledInput = styled.input(\n  (props: { value: string; theme: ThemeType }) => css`\n    background: none;\n    border: none;\n    outline: none;\n    color: ${props.theme.colors.accentColor};\n    width: ${0.65 * props.value.length}em;\n    text-align: right;\n    font-size: ${props.theme.fontSizes.content};\n    margin: -1px 0.2em 0 0.2em;\n\n    ::-webkit-inner-spin-button,\n    ::-webkit-outer-spin-button {\n      -webkit-appearance: none;\n      margin: 0;\n    }\n    -moz-appearance: textfield;\n  `\n)\n\nconst SortRow = styled.div`\n  ${flexRowWithGap}\n  height: ${({ theme }: PropsWithTheme) => theme.dimensions.blockHeight};\n`\n\nconst sortOptions = {\n  score: 'Score',\n  date: 'Date',\n}\n\nexport default function Options() {\n  const [rated, setRated] = usePreference(PreferenceKey.RATED)\n  const [ratedThreshold, setRatedThreshold] = usePreference(PreferenceKey.RATEDThreshold)\n  const [sort, setSort] = usePreference(PreferenceKey.SORT)\n\n  const toggleRated = useCallback(() => setRated(!rated), [rated, setRated])\n\n  const [ratedThresholdInternal, setRatedThresholdInternal] = useState(ratedThreshold ? ratedThreshold.toString() : '1')\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = useCallback(\n    (event) => setRatedThresholdInternal(event.target.value),\n    []\n  )\n  const onBlur = useCallback(() => setRatedThreshold(Number(ratedThresholdInternal)), [\n    ratedThresholdInternal,\n    setRatedThreshold,\n  ])\n\n  const handleSortChange: ChangeEventHandler<HTMLSelectElement> = useCallback(\n    (event) => setSort(event.target.value as 'score' | 'date'),\n    [setSort]\n  )\n\n  return (\n    <OptionsWrapper>\n      <LabeledToggle value={rated} onToggle={toggleRated}>\n        {rated ? (\n          <div style={{ display: 'flex' }}>\n            <span>More than</span>\n            <StyledInput type='text' value={ratedThresholdInternal} onChange={onChange} onBlur={onBlur} />\n            <span>likes</span>\n          </div>\n        ) : (\n          'Only show Rated Posts'\n        )}\n      </LabeledToggle>\n      <SortRow>\n        <span>Sort by:</span>\n        <Select options={sortOptions} value={sort} onChange={handleSortChange} />\n      </SortRow>\n    </OptionsWrapper>\n  )\n}\n","import styled, { css } from 'styled-components'\nimport { flexRowWithGap } from '../../styled/mixins'\n\nexport const Title = styled.h2(\n  ({ theme }) => css`\n    font-size: ${theme.fontSizes.bigTitle};\n    font-weight: lighter;\n    text-align: center;\n  `\n)\n\nexport const BigTitle = styled.h1(\n  ({ theme }) => css`\n    ${flexRowWithGap({ theme })}\n\n    justify-content: center;\n    font-size: ${theme.fontSizes.bigTitle};\n    font-weight: lighter;\n    text-align: center;\n  `\n)\n\nexport const SmallTitle = styled.h3(\n  ({ theme }) => css`\n    font-size: ${theme.fontSizes.content};\n  `\n)\n\nexport const Faded = styled.span(\n  ({ theme }) => css`\n    color: ${theme.colors.subduedText};\n  `\n)\n","import { faDeviantart, faDiscord, faGithub, faPatreon, faTumblr, faTwitter } from '@fortawesome/free-brands-svg-icons'\r\nimport {\r\n  faCalendarDay,\r\n  faCaretDown,\r\n  faCheckSquare,\r\n  faCodeBranch,\r\n  faCopyright,\r\n  faDownload,\r\n  faExpand,\r\n  faExternalLinkAlt,\r\n  faHashtag,\r\n  faHeart,\r\n  faImage,\r\n  faInfoCircle,\r\n  faLink,\r\n  faPen,\r\n  faRegistered,\r\n  faTimes,\r\n  faUser,\r\n} from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport styled from 'styled-components'\r\n\r\nexport const CharacterIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faUser,\r\n})``\r\n\r\nexport const ArtistIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faPen,\r\n})``\r\n\r\nexport const CopyrightIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCopyright,\r\n})``\r\n\r\nexport const MetaDataIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faInfoCircle,\r\n})``\r\n\r\nexport const CloseIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTimes,\r\n})``\r\n\r\nexport const ExpandIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faExpand,\r\n})``\r\n\r\nexport const ExternalLinkIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faExternalLinkAlt,\r\n})``\r\n\r\nexport const DownloadIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faDownload,\r\n})``\r\n\r\nexport const SourceIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faHashtag,\r\n})``\r\n\r\nexport const RatingIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faRegistered,\r\n})``\r\n\r\nexport const HeartIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faHeart,\r\n})``\r\n\r\nexport const LinkIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faLink,\r\n})``\r\n\r\nexport const ArrowDown = styled(FontAwesomeIcon).attrs({\r\n  icon: faCaretDown,\r\n})``\r\n\r\nexport const CodeBranchIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCodeBranch,\r\n})``\r\n\r\nexport const GithubIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faGithub,\r\n})``\r\n\r\nexport const PatreonIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faPatreon,\r\n})``\r\n\r\nexport const TwitterIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTwitter,\r\n})``\r\n\r\nexport const DeviantArtIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faDeviantart,\r\n})``\r\n\r\nexport const DiscordIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faDiscord,\r\n})``\r\n\r\nexport const TumblrIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faTumblr,\r\n})``\r\n\r\nexport const CalendarIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCalendarDay,\r\n})``\r\n\r\nexport const CheckIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faCheckSquare,\r\n})``\r\n\r\nexport const ImageIcon = styled(FontAwesomeIcon).attrs({\r\n  icon: faImage,\r\n})``\r\n","import styled, { css } from 'styled-components'\n\nexport const HorizontalLine = styled.div(\n  (props) => css`\n    align-self: stretch;\n    height: 1px;\n    background: ${props.theme.colors.layerBg};\n  `\n)\n\nexport const VerticalLine = styled.div(\n  (props) => css`\n    width: 1px;\n    align-self: stretch;\n    background: ${props.theme.colors.layerBg};\n  `\n)\n"],"sourceRoot":""}