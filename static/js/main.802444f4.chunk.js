(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(75)},33:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},62:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),i=n.n(c),o=(n(33),n(6)),s=n(8),l=n(11),u=n(9),m=n(12),h=n(16),p=n(2),f=n(10),d=n(24),g=n.n(d);n(41);var b=function(e){var t=e.text,n=e.initial,a=e.onChange;return r.a.createElement("label",{className:"toggle-wrapper"},r.a.createElement(g.a,{defaultChecked:n||!1,icons:{checked:null,unchecked:null},onChange:a}),r.a.createElement("span",{className:"toggle-text"},t))};n(43);var v=function(e){var t=e.name,n=e.count,a=e.modifier,c=e.types,i=e.active,o=e.onClick,s="-"===a,l=c.includes("character"),u=c.includes("artist");return r.a.createElement("span",{className:"badge badge-tag"+(i?" active":"")+(s?" exclude":"")+(l?" character":"")+(u?" artist":""),onClick:function(){return o({name:t,count:n,types:c,modifier:a})}},n?"".concat(t," (").concat(n,")"):t)};function E(e){var t=e.tags,n=e.activeTags,a=e.onItemClick;return r.a.createElement("div",{className:"tag-list"},t.map(function(e){return r.a.createElement(v,Object.assign({key:"t_"+e.name},e,{active:O(e,n),onClick:a}))}))}var j=E;function O(e,t){return t.some(function(t){return t.name===e.name})}n(45);var N=function(e){var t,n=e.id,c=e.media_type,i=e.preview_src,o=e.original_src,s=e.rating,l=e.score,u=e.source,m=e.tags,h=e.loadOriginal,f=e.activeTags,d=e.onTagClick;h?t=o:(t="".concat(i,"?").concat(n)).includes("//images")&&(t=t.replace("//images","/images"));var g=Object(a.useState)(!0),b=Object(p.a)(g,2),v=b[0],j=b[1];return r.a.createElement("li",{id:n,className:"list-group-item post gray"},r.a.createElement(w,{type:c,src:t,onClick:function(){return j(!v)}}),r.a.createElement("div",{className:"details collapse"+(v?"":".show")},r.a.createElement("div",{className:"d-flex justify-content-between info-bar"},r.a.createElement(k,{value:s}),r.a.createElement(y,{value:l}),r.a.createElement(C,{value:u})),r.a.createElement("div",{className:"pl-1"},r.a.createElement(E,{tags:m,activeTags:f,onItemClick:d}))))};function w(e){var t=e.type,n=e.src,a=e.onClick,c=!1;switch(t){case"image":return r.a.createElement("img",{src:n,alt:n,className:"img-fluid",onClick:a});case"video":return r.a.createElement("video",{controls:!0,loop:!0,src:n,alt:n,className:"img-fluid",onClick:a,onTouchMove:function(){c=!0},onTouchEnd:function(e){c||a(e),c=!1}});default:return null}}function k(e){var t=e.value;return r.a.createElement("span",{className:"rating"},t[0].toUpperCase())}function y(e){var t=e.value;return r.a.createElement("span",{className:"score"},t)}function C(e){var t=e.value;return t?t.startsWith("http")?r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"source"},"Source"):r.a.createElement("span",{className:"source"},t):null}n(47);var _=function(e){var t=e.posts,n=e.activeTags,a=e.loadOriginal,c=e.onTagClick;return r.a.createElement("ul",{className:"post-list list-group list-group-flush"},t.map(function(e){return r.a.createElement(N,Object.assign({key:"p_".concat(e.id)},e,{loadOriginal:a,activeTags:n,onTagClick:c}))}))},S=n(15),x=n.n(S),T=n(18),R=20,z="https://custom-r34-api.herokuapp.com";fetch(z).catch(function(){return z="https://r34-api-clone.herokuapp.com"});var I={getTags:function(){var e=Object(T.a)(x.a.mark(function e(t){var n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z+"/tags?limit="+R+"&name="+t+"*&order_by=posts");case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getPosts:function(){var e=Object(T.a)(x.a.mark(function e(t){var n,a,r,c=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:0,a=c.length>2&&void 0!==c[2]?c[2]:0,e.next=4,fetch(H(n,t,a));case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()};function H(e,t,n){var a=z+"/posts";return a+="?pid="+e,a+="&limit="+R,a+="&tags="+t.map(function(e){return(e.modifier?e.modifier:"")+encodeURIComponent(e.name)}).join("+"),a+=encodeURIComponent("+score:>="+n)}var P=n(25),q=n.n(P),B=(n(62),function e(t,n,a,r,c,i,s,l,u,m,h,p,f,d,g,b,v,E,j,O){Object(o.a)(this,e),this.id=t,this.score=n,this.rating=a,this.source=r,this.tags=c,this.media_type=i,this.preview_src=s,this.original_src=l,this.width=u,this.height=m,this.creator_id=h,this.creator_url=p,this.status=f,this.parent_id=d,this.has_children=g,this.has_comments=b,this.comments_url=v,this.has_notes=E,this.created_at=j,this.change=O}),G=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"+";Object(o.a)(this,e),this.name=t,this.types=n,this.count=a,this.modifier=r},L=function(e){return e.name?function(e){var t=e.name,n=e.types,a=e.count,r=e.modifier;return new G(t,n,Number(a),r)}(e):function(e){var t=e.id,n=e.type,a=e.score,r=e.rating,c=e.source,i=e.tags,o=e.file_url,s=e.width,l=e.height,u=e.creator_id,m=e.creator_url,h=e.sample_url,p=e.status,f=e.parent_id,d=e.has_children,g=e.has_comments,b=e.comments_url,v=e.has_notes,E=e.created_at,j=e.change;return new B(Number(t),Number(a),r,c,i.map(function(e){return new G(e)}),n,h,o,Number(s),Number(l),u,m,p,f,d,g,b,v,E,j)}(e)};var U=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(p.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)("+"),l=Object(p.a)(s,2),u=l[0],m=l[1],h=Object(a.useState)([]),f=Object(p.a)(h,2),d=f[0],g=f[1],b=Object(a.useState)([]),v=Object(p.a)(b,2),E=v[0],j=v[1];Object(a.useEffect)(function(){d&&d.length>0&&j(d.filter(function(){return!0}))},[d]);var O={placeholder:"Search for tags",value:i,onChange:function(e,t){var n=t.newValue;return o(n)}};return r.a.createElement("form",{onSubmit:function(e){var n=E.find(function(e){return e.name===i})||{};t(L({name:i,count:n.posts,types:n.types,modifier:u})),o(""),e.preventDefault()},className:"d-flex input-group tag-selector"},r.a.createElement("div",{className:"input-group-prepend left-append"},r.a.createElement("select",{className:"form-control select-modifier",value:u,onChange:function(e){return m(e.target.value)}},r.a.createElement("option",null,"+"),r.a.createElement("option",null,"-"))),r.a.createElement(q.a,{suggestions:d,onSuggestionsFetchRequested:function(e){var t,n=e.value;I.getTags((t=n,t.toLowerCase().replace(" ","_"))).then(function(e){g(e)})},onSuggestionsClearRequested:function(){return g([])},getSuggestionValue:function(e){return e.name},renderSuggestion:function(e){var t=e.name,n=e.posts;return r.a.createElement("span",null,"".concat(t," (").concat(n,")"))},inputProps:O}),r.a.createElement("div",{className:"input-group-append right-append"},r.a.createElement("input",{type:"submit",value:"Add",className:"btn btn-red btn-add-tag"})))},W=!0;var J=Object(f.e)(function(e){var t=Object(a.useState)(!1),n=Object(p.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(!1),s=Object(p.a)(o,2),l=s[0],u=s[1],m=Object(a.useState)(0),f=Object(p.a)(m,2),d=f[0],g=f[1],v=Object(a.useState)(!1),E=Object(p.a)(v,2),O=E[0],N=E[1],w=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],c=function(e){n.find(function(t){return t.name===e.name})&&i(e),r([].concat(Object(h.a)(n),[e]))},i=function(e){r(n.filter(function(t){return t.name!==e.name}))};return[n,function(e){n.find(function(t){return t.name===e.name})?i(e):c(e)},c,i]}(),k=Object(p.a)(w,4),y=k[0],C=k[1],S=k[2],x=k[3],T=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1];return[n,r,function(e){return r([].concat(Object(h.a)(n),Object(h.a)(e)))}]}(),R=Object(p.a)(T,3),z=R[0],H=R[1],P=R[2],q=function(){I.getPosts(y,d+1,l?1:void 0).then(function(e){P(e.map(L)),g(d+1),W=!0})};return window.onscroll=function(){c&&W&&window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-window.innerHeight&&(W=!1,q())},r.a.createElement("main",null,r.a.createElement("section",{className:"search"},r.a.createElement("h3",{className:"centered"},"Search"),r.a.createElement(U,{onSubmit:S,className:"centered"}),y.length>0?r.a.createElement("label",null,"Tags:",r.a.createElement(j,{tags:y,activeTags:y,onItemClick:x})):r.a.createElement("div",{className:"mb-1"}),r.a.createElement(b,{text:"Infinite Scroll",initial:c,onChange:function(){return i(!c)}}),r.a.createElement(b,{text:"Only show Rated",initial:l,onChange:function(){return u(!l)}}),r.a.createElement(b,{text:"Load Original Sizes",initial:O,onChange:function(){return N(!O)}}),r.a.createElement("button",{className:"btn btn-block btn-red",onClick:function(){I.getPosts(y,0,l?1:void 0).then(function(e){H(e.map(L)),g(0)})}},"Search")),z.length>0?r.a.createElement("section",{className:"results"},r.a.createElement("h3",{className:"centered"},"Results"),r.a.createElement(_,{posts:z,activeTags:y,loadOriginal:O,onTagClick:C}),!c&&r.a.createElement("button",{className:"btn btn-block btn-red",onClick:q},"Load More")):null)}),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("main",null,r.a.createElement("p",null,"Helpful things")))}}]),t}(a.Component),V=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"404 - not found")),r.a.createElement("main",null,r.a.createElement("p",null,"Go away")))}}]),t}(a.Component),A=n(14),D=(n(71),n(73),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,{basename:"/r34-react"},r.a.createElement("header",{className:"centered"},r.a.createElement("h1",{className:"centered"},"Browse ",r.a.createElement("a",{href:"https://rule34.xxx"},"Rule34")),r.a.createElement("div",{className:"container d-flex justify-content-center menu-bar"},r.a.createElement(A.b,{to:"/",className:"menu-item"},"Search"),r.a.createElement(A.b,{to:"/help",className:"menu-item"},"Help"))),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:J}),r.a.createElement(f.a,{exact:!0,path:"/help",component:M}),r.a.createElement(f.a,{component:V})),r.a.createElement("div",{className:"spacer"}),r.a.createElement("footer",null,r.a.createElement("small",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/kurozenzen/r34"},"Github Repository"))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,"Please, if you notice ",r.a.createElement("a",{href:"https://github.com/kurozenzen/r34/issues/new?template=bug_report.md"}," something isn't right"),", or you ",r.a.createElement("a",{href:"https://github.com/kurozenzen/r34/issues/new?template=feature_request.md"},"want a feature")," to be implemented take the time to let me know.")),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,"Hosted with Github Pages.")))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(D,null),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.802444f4.chunk.js.map