{"version":3,"sources":["components/common/Title.jsx","misc/style.js","components/common/Surface.jsx","misc/api.js","data/post.js","data/tag.js","misc/prepare.js","components/common/Button.jsx","components/tagSelector/TagInput.jsx","components/tag/tagUtils.js","components/tag/Tag.jsx","icons/Icons.jsx","icons/TypeIcon.jsx","misc/numberFormatting.js","components/tagSelector/DropdownList.jsx","components/tagSelector/TagSelector.jsx","components/common/Toggle.jsx","components/features/Options.jsx","components/tag/TagList.jsx","pages/Help.jsx","components/features/Config.jsx","components/post/Image.jsx","components/post/Video.jsx","components/post/Media.jsx","components/post/Details.jsx","components/post/Post.jsx","components/post/PostList.jsx","components/features/Results.jsx","pages/Search.jsx","pages/Reader.jsx","icons/R34Icon.jsx","components/features/Header.jsx","hooks/useAppState.js","hooks/useLocalStorage.js","components/features/Footer.jsx","pages/Settings.jsx","App.jsx","serviceWorker.js","index.js"],"names":["BigTitle","styled","h1","MediumTitle","h2","Title","size","children","accentColor","layer","shadow","gutter","Surface","div","Line","pageSize","activeApi","fetch","catch","getTags","searchTerm","res","json","getPosts","tags","pageNumber","minScore","buildPostUrl","getAliases","tag","page","url","map","t","modifier","encodeURIComponent","name","join","Post","id","score","rating","source","media_type","media_src","file_url","thumbnail_src","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","this","small_src","big_src","Tag","types","count","obj","Number","prepareTag","post","type","sample_url","preview_url","preparePost","BasicButton","button","InvisibleButton","MenuButton","active","TopLeftButton","RedButton","BlockButton","AddButton","ModifierButton","Button","Btn","onClick","disabled","label","aria-label","Input","input","TagInput","value","setValue","onChange","e","target","placeholder","prettifyTagname","tagname","replace","TagWrapper","collapsed","fg","bg","IconWrapper","span","left","right","activeTags","loadAliases","dispatch","useState","aliases","setAliases","setCollapsed","useEffect","some","api","then","newAliases","sort","a","b","posts","filter","alias","showAliases","length","onMouseLeave","tabIndex","TagText","ArrowIcon","className","Alias","key","text","onKeyDown","keyCode","defaultProps","StyledIcon","i","color","Icon","icon","CharacterIcon","props","ArtistIcon","CopyrightIcon","PlusIcon","MinusIcon","CloseIcon","ExpandIcon","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","TypeIcon","find","match","format","numberString","number","toFixed","ListWrapper","inputRef","offsetTop","clientHeight","offsetLeft","clientWidth","EntryWrapper","TypeWrapper","Entry","style","flexGrow","paddingRight","DropdownList","entries","entry","TagSelectorWrapper","closed","TagSelector","setInputRef","setModifier","suggestions","setSuggestions","addTag","useCallback","suggestion","prepare","handle","setTimeout","toLowerCase","newSuggestions","clearTimeout","ref","trim","s","ToggleWrapper","Label","Toggle","initial","defaultChecked","icons","checked","unchecked","OptionsWrapper","StyledInput","String","Options","options","localRated","setLocalRated","infinite","Boolean","rated","undefined","display","event","onBlur","originals","TagListWrapper","padding","TagList","onItemClick","onItemItemClick","Search","Component","ConfigWrapper","section","Config","search","htmlFor","FlexImage","img","Image","src","alt","hasMoved","FlexVideo","video","Video","touchEnd","touchMove","controls","loop","poster","preload","onTouchMove","onTouchEnd","Media","isFullscreen","onFullscreen","DetailsWrapper","Bar","Details","Source","Rating","toUpperCase","Score","startsWith","href","rel","PostWrapper","loadOriginal","includes","getCorrectSource","PostListWrapper","PostList","ResultsWrapper","scrollLock","Results","results","loadMore","window","onscroll","innerHeight","document","documentElement","scrollTop","scrollHeight","ReaderWrapper","Overlay","HiddenImage","Reader","focusedPost","postIndex","findIndex","p","prevSrc","nextSrc","prev","next","R34Icon","xmlns","viewBox","transform","cx","cy","fill","stroke","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","x","y","fontVariant","fontStretch","HeaderWrapper","header","Divider","TitleBar","MenuBar","nav","Header","activeMenu","marginTop","menu","reducer","state","action","removeTag","toggleTag","addPosts","setPosts","setOption","setFocusedPost","setActiveMenu","reset","Error","findTag","tagToFind","newTag","produce","draft","tagIndex","tagToRemove","splice","tagToToggle","postCount","context","Object","assign","initialState","useAppState","stateString","localStorage","getItem","JSON","parse","newState","setItem","stringify","useLocalStorage","cache","setCache","useReducer","FotterWrapper","footer","Footer","Settings","Main","main","AppWrapper","location","hostname","ReactDOM","render","activePage","Help","getActivePage","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.283a338b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { oneOf, node } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\nconst BigTitle = styled.h1`\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  margin: 0;\r\n`;\r\n\r\nconst MediumTitle = styled.h2`\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\nfunction Title({ size, children }) {\r\n  switch (size) {\r\n    case \"large\":\r\n      return <BigTitle>{children}</BigTitle>;\r\n    case \"medium\":\r\n    default:\r\n      return <MediumTitle>{children}</MediumTitle>;\r\n  }\r\n}\r\n\r\nTitle.propTypes = {\r\n  size: oneOf([\"large\", \"medium\", \"small\"]),\r\n  children: node\r\n};\r\n\r\nexport default Title;\r\n","export const borderRadius = \"3px\";\r\nexport const borderWidth = \"2px\";\r\nexport const accentColor = \"#ef3322\";\r\nexport const hoverAccent = \"#eb4131\";\r\nexport const spacing = \"4px\";\r\nexport const bigSpacing = \"8px\";\r\nexport const backgroundColor = \"#121212\";\r\nexport const layer =\r\n  \"#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.4s ease-in-out\";\r\nexport const backgroundColor2 = \"white\";\r\nexport const shadow = \"box-shadow: 0 0 8px rgba(0, 0, 0, 1)\";\r\n\r\nexport const appMargin = \"16px\";\r\nexport const gutter = \"8px\";\r\n","import styled from \"styled-components\";\r\nimport { gutter, layer, shadow, borderRadius } from \"../../misc/style\";\r\n\r\nconst Surface = styled.div`\r\n  padding: ${gutter};\r\n  background: ${layer};\r\n  ${shadow};\r\n  border-radius: ${borderRadius};\r\n\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nexport default Surface;\r\n\r\nexport const Line = styled.div`\r\n  width: 100%;\r\n  height: 1px;\r\n  background: ${layer};\r\n`;\r\n","const pageSize = 20,\r\n  apiUrl1 = \"https://r34-json.herokuapp.com\",\r\n  apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm) {\r\n    const res = await fetch(\r\n      activeApi +\r\n        \"/tags?limit=\" +\r\n        pageSize +\r\n        \"&name=\" +\r\n        searchTerm +\r\n        \"*&order_by=posts\"\r\n    );\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tag) {\r\n    const res = await fetch(activeApi + \"/alias/\" + tag);\r\n    return await res.json();\r\n  }\r\n};\r\n\r\nfunction buildPostUrl(page, tags, minScore) {\r\n  let url = activeApi + \"/posts\";\r\n  url += \"?pid=\" + page;\r\n  url += \"&limit=\" + pageSize;\r\n  url +=\r\n    \"&tags=\" +\r\n    tags\r\n      .map(t => (t.modifier ? t.modifier : \"\") + encodeURIComponent(t.name))\r\n      .join(\"+\");\r\n  url += encodeURIComponent(\"+score:>=\" + minScore);\r\n  return url;\r\n}\r\n","export default class Post {\r\n  /**\r\n   *\r\n   * @param {*} id\r\n   * @param {*} type\r\n   * @param {*} score\r\n   * @param {*} rating\r\n   * @param {*} source\r\n   * @param {*} tags\r\n   * @param {*} file_url\r\n   * @param {*} width\r\n   * @param {*} height\r\n   * @param {*} creator_id\r\n   * @param {*} creator_url\r\n   * @param {*} preview_url\r\n   * @param {*} preview_width\r\n   * @param {*} preview_height\r\n   * @param {*} sample_url\r\n   * @param {*} sample_width\r\n   * @param {*} sample_height\r\n   * @param {*} status\r\n   * @param {*} parent_id\r\n   * @param {*} has_children\r\n   * @param {*} has_comments\r\n   * @param {*} comments_url\r\n   * @param {*} has_notes\r\n   * @param {*} created_at\r\n   * @param {*} change\r\n   * @param {*} md5\r\n   */\r\n  constructor(\r\n    id,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    media_type,\r\n    media_src,\r\n    file_url,\r\n    thumbnail_src,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","export default class Tag {\r\n  constructor(name, types = [], count, modifier = \"+\") {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import Post from \"../data/post\";\r\nimport Tag from \"../data/tag\";\r\n\r\nexport default function(obj) {\r\n  return obj.name ? prepareTag(obj) : preparePost(obj);\r\n}\r\n\r\nfunction prepareTag({ name, types, count, modifier }) {\r\n  return new Tag(name, types, Number(count), modifier);\r\n}\r\n\r\nfunction preparePost(post) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  } = post;\r\n  return new Post(\r\n    Number(id),\r\n    Number(score),\r\n    rating,\r\n    source,\r\n    tags ? tags.map(t => new Tag(t)) : [],\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { node, object, string } from \"prop-types\";\r\nimport {\r\n  accentColor,\r\n  backgroundColor,\r\n  borderRadius,\r\n  spacing,\r\n  backgroundColor2,\r\n  borderWidth\r\n} from \"../../misc/style\";\r\n\r\nconst BasicButton = styled.button`\r\n  font-size: 14px;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst InvisibleButton = styled(BasicButton)`\r\n  background: none;\r\n  border: none;\r\n  padding: ${spacing};\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst MenuButton = styled(InvisibleButton)`\r\n  color: ${({ active }) => (active ? accentColor : backgroundColor2)};\r\n`;\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n`;\r\n\r\nconst RedButton = styled(BasicButton)`\r\n  height: 32px;\r\n  font-size: 14px;\r\n  color: ${accentColor};\r\n  background: ${backgroundColor};\r\n  border: ${accentColor} ${borderWidth} solid;\r\n\r\n  transition: border-color 0.4s ease-in-out;\r\n  transition: color 0.4s ease-in-out;\r\n  transition: background-color 0.4s ease-in-out;\r\n\r\n  :hover {\r\n    background-color: ${accentColor};\r\n    color: ${backgroundColor};\r\n  }\r\n\r\n  :active,\r\n  :focus {\r\n    color: ${backgroundColor2};\r\n\r\n    border-color: ${backgroundColor2};\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const BlockButton = styled(RedButton)`\r\n  width: 100%;\r\n  border-radius: ${borderRadius};\r\n`;\r\n\r\nexport const AddButton = styled(RedButton)`\r\n  border-left-width: 0;\r\n  border-radius: 0 ${borderRadius} ${borderRadius} 0;\r\n`;\r\n\r\nexport const ModifierButton = styled(InvisibleButton)`\r\n  min-width: 48px;\r\n  border: ${accentColor} ${borderWidth} solid;\r\n  border-right-width: 0;\r\n  border-radius: ${borderRadius} 0 0 ${borderRadius};\r\n`;\r\n\r\nexport default function Button({\r\n  type,\r\n  children,\r\n  onClick,\r\n  active,\r\n  disabled,\r\n  label\r\n}) {\r\n  let Btn;\r\n\r\n  switch (type) {\r\n    case \"invisible\":\r\n      Btn = InvisibleButton;\r\n      break;\r\n    case \"block\":\r\n      Btn = BlockButton;\r\n      break;\r\n    case \"topLeft\":\r\n      Btn = TopLeftButton;\r\n      break;\r\n    case \"modifier\":\r\n      Btn = ModifierButton;\r\n      break;\r\n    case \"add\":\r\n      Btn = AddButton;\r\n      break;\r\n    case \"menu\":\r\n      Btn = MenuButton;\r\n      break;\r\n    default:\r\n      Btn = RedButton;\r\n  }\r\n\r\n  return (\r\n    <Btn\r\n      onClick={onClick}\r\n      active={active}\r\n      disabled={disabled}\r\n      aria-label={label}\r\n    >\r\n      {children}\r\n    </Btn>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  type: string,\r\n  children: node.isRequired,\r\n  btnProps: object\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { string, func } from \"prop-types\";\r\nimport { accentColor, borderWidth } from \"../../misc/style\";\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  border: none;\r\n  outline: none;\r\n  background: none;\r\n  font-size: 14px;\r\n  border-top: ${accentColor} ${borderWidth} solid;\r\n  border-bottom: ${accentColor} ${borderWidth} solid;\r\n`;\r\n\r\nexport default function TagInput({ value, setValue }) {\r\n  return (\r\n    <Input\r\n      id=\"tag-input\"\r\n      value={value}\r\n      onChange={e => setValue(e.target.value)}\r\n      placeholder=\"Search for tags\"\r\n    />\r\n  );\r\n}\r\n\r\nTagInput.propTypes = {\r\n  value: string,\r\n  setValue: func\r\n};\r\n","export function prettifyTagname(tagname) {\r\n  return tagname.replace(/_/g, \" \");\r\n}\r\n\r\nexport function normalizeTagname(tagname) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { arrayOf, bool, func, number, object, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport {\r\n  backgroundColor,\r\n  accentColor,\r\n  borderRadius,\r\n  backgroundColor2,\r\n  spacing,\r\n  borderWidth\r\n} from \"../../misc/style\";\r\nimport { ArrowIcon } from \"../../icons/Icons\";\r\nimport { prettifyTagname } from \"./tagUtils\";\r\n\r\nconst dropdownBorderRadius = ({ collapsed }) =>\r\n  collapsed ? borderRadius : `${borderRadius} ${borderRadius} 0 0`;\r\n\r\nconst switchingColors = ({ active }) => {\r\n  const fg = active ? backgroundColor : accentColor;\r\n  const bg = active ? accentColor : backgroundColor;\r\n\r\n  return `\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${accentColor} ${borderWidth} solid;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    cursor: pointer;\r\n\r\n    :hover {\r\n      background-color: ${fg};\r\n      color: ${bg};\r\n      \r\n      i {\r\n        color: ${bg};\r\n      }\r\n    }\r\n\r\n    :focus, :active {\r\n      color: ${backgroundColor2};\r\n      border-color: ${backgroundColor2}\r\n    }\r\n  `;\r\n};\r\n\r\nexport const TagWrapper = styled.div`\r\n  display: inline-block;\r\n  padding: 0.25rem;\r\n  border-radius: ${dropdownBorderRadius}\r\n  font-size: 14px;\r\n  line-height: 1.2;\r\n  vertical-align: baseline;\r\n  margin: ${() => spacing};\r\n  ${switchingColors}\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  ${({ left }) => (left ? \"margin-right: 5px;\" : \"\")}\r\n  ${({ right }) => (right ? \"margin-left: 5px;\" : \"\")}\r\n`;\r\n\r\nfunction Tag({\r\n  name,\r\n  count,\r\n  modifier,\r\n  types,\r\n  activeTags,\r\n  loadAliases,\r\n  dispatch\r\n}) {\r\n  const [aliases, setAliases] = useState();\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (activeTags.some(t => t.name === name))\r\n      api.getAliases(name).then(newAliases => {\r\n        newAliases.sort((a, b) => Number(b.posts) - Number(a.posts));\r\n        setAliases(\r\n          newAliases.filter(\r\n            alias => !activeTags.some(tag => tag.name === alias.name)\r\n          )\r\n        );\r\n      });\r\n  }, [name, activeTags]);\r\n\r\n  const active = activeTags.some(t => t.name === name);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={active}\r\n      collapsed={collapsed}\r\n      onMouseLeave={() => setCollapsed(true)}\r\n      tabIndex=\"0\"\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText\r\n        name={name}\r\n        count={count}\r\n        modifier={modifier}\r\n        types={types}\r\n        activeTags={activeTags}\r\n        dispatch={dispatch}\r\n      />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={() => setCollapsed(!collapsed)}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, posts }) => (\r\n              <Alias\r\n                key={\"t_\" + name}\r\n                name={name}\r\n                count={posts}\r\n                dispatch={dispatch}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nTag.propTypes = {\r\n  name: string,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  active: bool,\r\n  onClick: func\r\n};\r\n\r\nTag.defaultProps = {\r\n  types: [],\r\n  onClick: () => {}\r\n};\r\n\r\nfunction TagText({ name, count, types, modifier, dispatch }) {\r\n  const tagname = prettifyTagname(name);\r\n  const text = count ? `${tagname} (${count})` : tagname;\r\n\r\n  return (\r\n    <span\r\n      onClick={() =>\r\n        dispatch({ type: \"TOGGLE_TAG\", tag: { name, count, types, modifier } })\r\n      }\r\n      onKeyDown={e =>\r\n        e.keyCode === 32 &&\r\n        dispatch({ type: \"TOGGLE_TAG\", tag: { name, count, types, modifier } })\r\n      }\r\n    >\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias({ name, count, dispatch }) {\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} dispatch={dispatch} />\r\n    </div>\r\n  );\r\n}\r\n\r\nTagText.propTypes = {\r\n  name: string.isRequired,\r\n  count: number,\r\n  modifier: string,\r\n  types: arrayOf(string),\r\n  activeTags: arrayOf(object),\r\n  onClick: func\r\n};\r\n\r\nTagText.defaultProps = {\r\n  modifier: \"+\",\r\n  types: [],\r\n  activeTags: [],\r\n  onClick: () => {}\r\n};\r\n\r\nexport default Tag;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TagWrapper } from \"../components/tag/Tag\";\r\nimport { accentColor, backgroundColor2 } from \"../misc/style\";\r\n\r\nexport const StyledIcon = styled.i`\r\n  ${({ color, size }) => `\r\n    color: ${color};\r\n    width: ${size}px;\r\n    height: ${size}px;\r\n\r\n    ${TagWrapper}:hover & {\r\n      color: ${accentColor};\r\n    }\r\n\r\n    ${TagWrapper}:active & ,  ${TagWrapper}:focus & {\r\n      color: ${backgroundColor2};\r\n    }\r\n  `}\r\n`;\r\n\r\nconst IconWrapper = styled.span`\r\n  line-height: 16px;\r\n  ${({ left }) => (left ? \"margin-right: 5px;\" : \"\")}\r\n  ${({ right }) => (right ? \"margin-left: 5px;\" : \"\")}\r\n`;\r\n\r\nconst Icon = ({ className, icon, color, size, onClick, left, right }) => (\r\n  <IconWrapper onClick={onClick} left={left} right={right}>\r\n    <StyledIcon\r\n      className={`fas ${icon} ${className}`}\r\n      color={color}\r\n      size={size}\r\n    />\r\n  </IconWrapper>\r\n);\r\n\r\nIcon.defaultProps = {\r\n  color: \"black\",\r\n  size: 14\r\n};\r\n\r\nexport function CharacterIcon(props) {\r\n  return <Icon icon=\"fa-user\" {...props} />;\r\n}\r\n\r\nexport function ArtistIcon(props) {\r\n  return <Icon icon=\"fa-pen\" {...props} />;\r\n}\r\n\r\nexport function CopyrightIcon(props) {\r\n  return <Icon icon=\"fa-copyright\" {...props} />;\r\n}\r\n\r\nexport function PlusIcon(props) {\r\n  return <Icon icon=\"fa-plus-circle\" {...props} />;\r\n}\r\n\r\nexport function MinusIcon(props) {\r\n  return <Icon icon=\"fa-minus-circle\" {...props} />;\r\n}\r\n\r\nexport function CloseIcon(props) {\r\n  return <Icon icon=\"fa-times\" {...props} />;\r\n}\r\n\r\nexport function ExpandIcon(props) {\r\n  return <Icon icon=\"fa-expand\" {...props} />;\r\n}\r\n\r\nexport function ArrowIcon(props) {\r\n  return <Icon icon=\"fa-caret-down\" {...props} />;\r\n}\r\n\r\nexport function ExternalLinkIcon(props) {\r\n  return <Icon icon=\"fa-external-link-alt\" {...props} />;\r\n}\r\n\r\nexport function SourceIcon(props) {\r\n  return <Icon icon=\"fa-hashtag\" {...props} />;\r\n}\r\n\r\nexport function RatingIcon(props) {\r\n  return <Icon icon=\"fa-registered\" {...props} />;\r\n}\r\n\r\nexport function HeartIcon(props) {\r\n  return <Icon icon=\"fa-heart\" {...props} />;\r\n}\r\n\r\nexport function PlayIcon(props) {\r\n  return <Icon icon=\"fa-play\" {...props} />;\r\n}\r\n\r\nexport function PauseIcon(props) {\r\n  return <Icon icon=\"fa-pause\" {...props} />;\r\n}\r\n","import React from \"react\";\r\nimport { array, string } from \"prop-types\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\n\r\nfunction TypeIcon({ types, className, onClick }) {\r\n  const interestingType = types.find(t => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon className={className} onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon className={className} onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon className={className} onClick={onClick} left />;\r\n    default:\r\n      return <div className={className}></div>;\r\n  }\r\n}\r\n\r\nTypeIcon.propTypes = {\r\n  types: array,\r\n  className: string\r\n};\r\n\r\nTypeIcon.defaultProps = {\r\n  types: []\r\n};\r\n\r\nexport default TypeIcon;\r\n","export default function format(numberString) {\r\n  const number = Number(numberString);\r\n\r\n  if (number >= 1e6) {\r\n    return `${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n}\r\n","import React from \"react\";\r\nimport { array, object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport format from \"../../misc/numberFormatting\";\r\nimport { prettifyTagname } from \"../tag/tagUtils\";\r\nimport { accentColor, borderWidth } from \"../../misc/style\";\r\nimport { TagSelectorWrapper } from \"./TagSelector\";\r\nimport TagInput from \"./TagInput\";\r\n\r\nfunction sizeAndPosition({ inputRef }) {\r\n  return inputRef\r\n    ? `\r\n      position: absolute;\r\n      top: ${inputRef.offsetTop + inputRef.clientHeight - 2}px;\r\n      left: ${inputRef.offsetLeft}px;\r\n      width: ${inputRef.clientWidth}px;`\r\n    : \"\";\r\n}\r\n\r\nexport const ListWrapper = styled.div`\r\n  ${sizeAndPosition};\r\n  display: none;\r\n  background: white;\r\n  box-sizing: border-box;\r\n  border: ${borderWidth} ${accentColor} solid;\r\n  border-radius: 0 0 3px 3px;\r\n  color: black;\r\n  z-index: 1;\r\n`;\r\n\r\nfunction DropdownList({ inputRef, entries, onClick }) {\r\n  return entries && entries.length > 0 ? (\r\n    <ListWrapper inputRef={inputRef}>\r\n      {entries.map(entry => (\r\n        <Entry\r\n          key={entry.name}\r\n          {...entry}\r\n          onClick={() => onClick(entry)}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  ) : null;\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  height: 28px;\r\n\r\n  > * {\r\n    margin: auto;\r\n  }\r\n\r\n  &:not(:last-child) {\r\n    border-bottom: 1px grey solid;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TypeWrapper = styled.span`\r\n  flex: 0 0 48px;\r\n  text-align: center;\r\n`;\r\n\r\nfunction Entry({ name, posts, types, onClick }) {\r\n  return (\r\n    <EntryWrapper\r\n      onClick={onClick}\r\n      onKeyDown={e => e.keyCode === 32 && onClick(e)}\r\n      tabIndex=\"0\"\r\n    >\r\n      <TypeWrapper>\r\n        <TypeIcon types={types} />\r\n      </TypeWrapper>\r\n\r\n      <span style={{ flexGrow: 1 }}>{prettifyTagname(name)}</span>\r\n      <span style={{ paddingRight: 5 }}>{format(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n}\r\n\r\nDropdownList.propTypes = {\r\n  inputRef: object,\r\n  entries: array\r\n};\r\n\r\nexport default DropdownList;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { func } from \"prop-types\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport Button, { AddButton, ModifierButton } from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList, { ListWrapper } from \"./DropdownList\";\r\nimport { borderRadius } from \"../../misc/style\";\r\nimport { normalizeTagname } from \"../tag/tagUtils\";\r\n\r\nexport const TagSelectorWrapper = styled.div`\r\n  display: flex;\r\n  background: white;\r\n  ${({ closed }) =>\r\n    closed\r\n      ? `border-radius: ${borderRadius};`\r\n      : `\r\n        border-radius: ${borderRadius} ${borderRadius} 0 0;\r\n\r\n        > ${AddButton} {\r\n          border-radius: 0 ${borderRadius} 0 0;\r\n        }\r\n\r\n        > ${ModifierButton} {\r\n          border-radius: ${borderRadius} 0 0 0;\r\n        }\r\n      `}\r\n\r\n  :focus-within {\r\n    ${ListWrapper} {\r\n      display: block;\r\n    }\r\n  }\r\n`;\r\n\r\nfunction TagSelector({ dispatch }) {\r\n  const [inputRef, setInputRef] = useState();\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const addTag = useCallback(\r\n    suggestion => {\r\n      dispatch({\r\n        type: \"ADD_TAG\",\r\n        tag: prepare({\r\n          name: suggestion.name,\r\n          modifier: modifier,\r\n          count: suggestion.posts,\r\n          types: suggestion.types\r\n        })\r\n      });\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (value && value !== \"\")\r\n        api.getTags(normalizeTagname(value)).then(newSuggestions => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 400);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [value]);\r\n\r\n  return (\r\n    <TagSelectorWrapper ref={setInputRef} closed={suggestions.length === 0}>\r\n      <Button\r\n        type=\"modifier\"\r\n        onClick={() => setModifier(modifier === \"+\" ? \"-\" : \"+\")}\r\n      >\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button\r\n        type=\"add\"\r\n        onClick={() => {\r\n          if (value && value.trim() !== \"\") {\r\n            const suggestion = suggestions.find(s => s.name === value) || {};\r\n            addTag({ ...suggestion, name: value });\r\n          }\r\n        }}\r\n      >\r\n        Add\r\n      </Button>\r\n      <DropdownList\r\n        inputRef={inputRef}\r\n        entries={suggestions}\r\n        onClick={entry => {\r\n          addTag(entry);\r\n        }}\r\n      ></DropdownList>\r\n    </TagSelectorWrapper>\r\n  );\r\n}\r\n\r\nTagSelector.propTypes = {\r\n  onSubmitTag: func\r\n};\r\n\r\nexport default TagSelector;\r\n","import React from \"react\";\r\nimport { bool, func, node } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport ReactToggle from \"react-toggle\";\r\nimport \"./Toggle.css\";\r\nimport { gutter } from \"../../misc/style\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n`;\r\n\r\nconst Label = styled.span`\r\n  margin-left: ${gutter};\r\n`;\r\n\r\nexport default function Toggle({ children, initial, onChange }) {\r\n  return (\r\n    <ToggleWrapper>\r\n      <ReactToggle\r\n        defaultChecked={initial}\r\n        icons={{\r\n          checked: null,\r\n          unchecked: null\r\n        }}\r\n        onChange={onChange}\r\n      />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n\r\nToggle.propTypes = {\r\n  children: node.isRequired,\r\n  initial: bool,\r\n  onChange: func.isRequired\r\n};\r\n\r\nToggle.defaultProps = {\r\n  initial: false\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { shape, bool, number, func } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Toggle from \"../common/Toggle\";\r\nimport { accentColor, gutter } from \"../../misc/style\";\r\n\r\nconst OptionsWrapper = styled.div`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  color: ${accentColor};\r\n  max-height: 16px;\r\n  width: ${({ value }) => 0.57 * String(value).length}em;\r\n  text-align: right;\r\n  font-size: 14px;\r\n  margin: -1px 0.2em 0 0.2em;\r\n\r\n  ::-webkit-inner-spin-button,\r\n  ::-webkit-outer-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n  }\r\n  -moz-appearance: textfield;\r\n`;\r\n\r\nexport default function Options({ options, dispatch }) {\r\n  const [localRated, setLocalRated] = useState(1);\r\n\r\n  return (\r\n    <OptionsWrapper>\r\n      <Toggle\r\n        initial={options.infinite}\r\n        onChange={() =>\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"infinite\",\r\n            value: !options.infinite\r\n          })\r\n        }\r\n      >\r\n        Infinite Scrolling\r\n      </Toggle>\r\n      <Toggle\r\n        initial={Boolean(options.rated)}\r\n        onChange={() => {\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"rated\",\r\n            value: options.rated ? undefined : localRated\r\n          });\r\n        }}\r\n      >\r\n        {options.rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            Above\r\n            <StyledInput\r\n              type=\"number\"\r\n              value={localRated}\r\n              onChange={event => setLocalRated(Number(event.target.value))}\r\n              onBlur={event =>\r\n                dispatch({\r\n                  type: \"SET_OPTION\",\r\n                  key: \"rated\",\r\n                  value: Number(event.target.value)\r\n                })\r\n              }\r\n            />\r\n            likes\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </Toggle>\r\n\r\n      <Toggle\r\n        initial={options.originals}\r\n        onChange={() =>\r\n          dispatch({\r\n            type: \"SET_OPTION\",\r\n            key: \"originals\",\r\n            value: !options.originals\r\n          })\r\n        }\r\n      >\r\n        Load Original Sizes\r\n      </Toggle>\r\n    </OptionsWrapper>\r\n  );\r\n}\r\n\r\nOptions.propTypes = {\r\n  options: shape({\r\n    infinite: bool,\r\n    rated: number,\r\n    originals: bool\r\n  }).isRequired,\r\n  dispatch: func.isRequired\r\n};\r\n","import React from \"react\";\r\nimport { arrayOf, shape, string } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Tag from \"../tag/Tag\";\r\nimport { spacing } from \"../../misc/style\";\r\n\r\nexport const TagListWrapper = styled.div`\r\n  display: inline-flex;\r\n  flex-wrap: wrap;\r\n  margin: ${({ padding }) => `calc(${padding} - ${spacing})`};\r\n`;\r\n\r\nexport function TagList({ tags, activeTags, loadAliases, dispatch, padding }) {\r\n  return (\r\n    <div>\r\n      <TagListWrapper padding={padding}>\r\n        {tags.map(tag => (\r\n          <Tag\r\n            key={\"t_\" + tag.name}\r\n            {...tag}\r\n            activeTags={activeTags}\r\n            loadAliases={loadAliases}\r\n            dispatch={dispatch}\r\n          />\r\n        ))}\r\n      </TagListWrapper>\r\n    </div>\r\n  );\r\n}\r\n\r\nTagList.propTypes = {\r\n  tags: arrayOf(\r\n    shape({\r\n      name: string\r\n    })\r\n  ).isRequired,\r\n  activeTags: arrayOf(\r\n    shape({\r\n      name: string\r\n    })\r\n  )\r\n};\r\n\r\nTagList.defaultProps = {\r\n  activeTags: [],\r\n  onItemClick: () => {},\r\n  onItemItemClick: () => {},\r\n  padding: \"0px\"\r\n};\r\n\r\nexport default TagList;\r\n","import React, { Component } from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport Options from \"../components/features/Options\";\r\nimport TagList from \"../components/tag/TagList\";\r\n\r\nclass Search extends Component {\r\n  render() {\r\n    return (\r\n      <>\r\n        <Title>Help</Title>\r\n        <Surface>\r\n          <Title type=\"small\">Searching for Tags</Title>\r\n          <Line />\r\n          <TagSelector dispatch={() => {}} />\r\n          <Line />\r\n          <p>\r\n            You can use the Tag Selector to look for tags you like.The Tag\r\n            Selector has 4 parts.\r\n            <ol>\r\n              <li>\r\n                The modifier (left) determines wether posts must match a tag or\r\n                not. Putting \"-\" will hide all posts with this tag\r\n              </li>\r\n              <li>\r\n                The Search Box (center) allows you to search for tags. As soon\r\n                as you start typing the Tag Selector will show you relevant tags\r\n                to choose from (4).\r\n              </li>\r\n              <li>\r\n                The Add Button (right) Allows you to add any tag to the current\r\n                filter. Usefull when using wildcards.\r\n              </li>\r\n              <li>\r\n                The Tag Dropdown (left) automatically shows tags that start with\r\n                your input. It also includes The number of posts tagged, to\r\n                allow you to weigh tags against each other.\r\n              </li>\r\n            </ol>\r\n          </p>\r\n        </Surface>\r\n        <Surface>\r\n          <Title type=\"small\">Options</Title>\r\n          <Line />\r\n          <Options options={{}} dispatch={() => {}} />\r\n          <Line />\r\n          <p>\r\n            Options allow you to customize your experience in various ways.\r\n            There are 3 options available\r\n            <ol>\r\n              <li>\r\n                Infinite Scrolling automatically loads new posts when you get\r\n                close to the bottom of the page.\r\n              </li>\r\n              <li>\r\n                Only show Rated posts filters out posts below the specified\r\n                amount of posts.\r\n              </li>\r\n              <li>\r\n                Load original sizes always loads the highest quality of an\r\n                image. This can easily cause extreme data consumption. Don't use\r\n                with mobile data.\r\n              </li>\r\n            </ol>\r\n          </p>\r\n        </Surface>\r\n        <Surface>\r\n          <Title type=\"small\">Tags</Title>\r\n          <Line />\r\n          <TagList\r\n            tags={[\r\n              { name: \"Tag 1\" },\r\n              { name: \"Tag 2\", types: [\"character\"] },\r\n              {\r\n                name: \"Tag 3\",\r\n                modifier: \"-\",\r\n                types: [\"copyright\"],\r\n                count: 1020\r\n              }\r\n            ]}\r\n            activeTags={[{ name: \"Tag 2\" }, { name: \"Tag 3\" }]}\r\n          />\r\n          <Line />\r\n          <p>\r\n            This whole application is based on tags. Every Post has multiple\r\n            tags. Usually you can enable/disable a tag just by tapping it. If a\r\n            tag is red it means its active. The icons next to the name show what\r\n            type of tag it is. Not every tag has a type. The number on the right\r\n            shows how many posts there are with that tag.\r\n          </p>\r\n        </Surface>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Search;\r\n","import React, { useCallback } from \"react\";\r\nimport { object, array, func } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport TagList from \"../tag/TagList\";\r\nimport Options from \"./Options\";\r\nimport Button from \"../common/Button\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport { layer, borderRadius, shadow, gutter } from \"../../misc/style\";\r\nimport Title from \"../common/Title\";\r\nimport Surface from \"../common/Surface\";\r\n\r\nconst ConfigWrapper = styled.section`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nfunction Config({ options, tags, dispatch }) {\r\n  const search = useCallback(() => {\r\n    api.getPosts(tags, 0, options.rated).then(res => {\r\n      dispatch({\r\n        type: \"SET_POSTS\",\r\n        posts: res.posts.map(prepare),\r\n        count: Number(res.count)\r\n      });\r\n    });\r\n  }, [dispatch, options.rated, tags]);\r\n\r\n  return (\r\n    <ConfigWrapper>\r\n      <Title>\r\n        <label htmlFor=\"tag-input\">Search</label>\r\n      </Title>\r\n      <Surface>\r\n        <TagSelector dispatch={dispatch} />\r\n\r\n        {tags.length > 0 && (\r\n          <TagList\r\n            tags={tags}\r\n            activeTags={tags}\r\n            dispatch={dispatch}\r\n            loadAliases\r\n          />\r\n        )}\r\n        <Options options={options} dispatch={dispatch} />\r\n        <Button type={\"block\"} onClick={search}>\r\n          Search\r\n        </Button>\r\n      </Surface>\r\n    </ConfigWrapper>\r\n  );\r\n}\r\n\r\nConfig.propTypes = {\r\n  options: object,\r\n  tags: array,\r\n  dispatch: func\r\n};\r\n\r\nexport default Config;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n`;\r\n\r\nexport default function Image({ src, onClick }) {\r\n  return (\r\n    <FlexImage\r\n      src={src}\r\n      alt={src}\r\n      onClick={onClick}\r\n      onKeyDown={e => e.keyCode === 32 && onClick(e)}\r\n    />\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nlet hasMoved = false;\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n`;\r\n\r\nexport default function Video({ src, thumbnail_src, onClick }) {\r\n  const touchEnd = useCallback(\r\n    e => {\r\n      !hasMoved && onClick();\r\n      hasMoved = false;\r\n    },\r\n    [onClick]\r\n  );\r\n\r\n  const touchMove = useCallback(() => {\r\n    hasMoved = true;\r\n  }, []);\r\n\r\n  return (\r\n    <FlexVideo\r\n      controls\r\n      loop\r\n      src={src}\r\n      alt={src}\r\n      poster={thumbnail_src}\r\n      preload=\"metadata\"\r\n      onTouchMove={touchMove}\r\n      onTouchEnd={touchEnd}\r\n      onKeyDown={e => e.keyCode === 32 && onClick(e)}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, CloseIcon } from \"../../icons/Icons\";\r\nimport Image from \"./Image\";\r\nimport Video from \"./Video\";\r\n\r\nexport default function Media({\r\n  type,\r\n  src,\r\n  thumbnail_src,\r\n  isFullscreen,\r\n  onFullscreen,\r\n  onClick\r\n}) {\r\n  return (\r\n    <div style={{ display: \"contents\" }}>\r\n      <Button type={\"topLeft\"} onClick={onFullscreen} label=\"Toggle Fullscreen\">\r\n        {isFullscreen ? (\r\n          <CloseIcon color=\"white\" />\r\n        ) : (\r\n          <ExpandIcon color=\"white\" />\r\n        )}\r\n      </Button>\r\n      {type === \"video\" ? (\r\n        <Video src={src} poster={thumbnail_src} onClick={onClick} />\r\n      ) : (\r\n        <Image src={src} alt={src} onClick={onClick} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { number, string, array, func } from \"prop-types\";\r\nimport TagList, { TagListWrapper } from \"../tag/TagList\";\r\nimport {\r\n  HeartIcon,\r\n  ExternalLinkIcon,\r\n  SourceIcon,\r\n  RatingIcon\r\n} from \"../../icons/Icons\";\r\nimport { spacing, layer, shadow, gutter } from \"../../misc/style\";\r\n\r\nconst DetailsWrapper = styled.div`\r\n  > ${TagListWrapper} {\r\n    padding: ${spacing};\r\n  }\r\n\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Bar = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  background: ${layer};\r\n  padding: ${spacing};\r\n  ${shadow};\r\n\r\n  > span,\r\n  > a {\r\n    margin: ${spacing};\r\n    line-height: 1rem;\r\n    height: 1rem;\r\n  }\r\n`;\r\n\r\nfunction Details({ rating, score, source, tags, activeTags, dispatch }) {\r\n  return (\r\n    <DetailsWrapper>\r\n      <Bar>\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList\r\n        tags={tags}\r\n        activeTags={activeTags}\r\n        dispatch={dispatch}\r\n        padding={gutter}\r\n      />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n\r\nDetails.propTypes = {\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: array,\r\n  activeTags: array,\r\n  dispatch: func\r\n};\r\n\r\nexport default Details;\r\n\r\nconst Rating = ({ value }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {value[0].toUpperCase()}\r\n  </span>\r\n);\r\n\r\nconst Score = ({ value }) => (\r\n  <span>\r\n    {value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n\r\nfunction Source({ value }) {\r\n  return value.startsWith(\"http\") ? (\r\n    <a\r\n      href={value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      Source\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {value}\r\n    </span>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { arrayOf, func, number, object, string } from \"prop-types\";\r\nimport Media from \"./Media\";\r\nimport Details from \"./Details\";\r\nimport { borderRadius, layer, bigSpacing, shadow } from \"../../misc/style\";\r\n\r\nconst PostWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: ${layer};\r\n  ${shadow};\r\n  border-radius: ${borderRadius};\r\n  overflow: hidden;\r\n  margin-bottom: ${bigSpacing};\r\n  border-box: border-box;\r\n`;\r\n\r\nexport function getCorrectSource(loadOriginal, big_src, small_src, id) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post({\r\n  id,\r\n  media_type,\r\n  small_src,\r\n  big_src,\r\n  thumbnail_src,\r\n  rating,\r\n  score,\r\n  source,\r\n  tags,\r\n  loadOriginal,\r\n  activeTags,\r\n  dispatch\r\n}) {\r\n  const media_src = getCorrectSource(loadOriginal, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  return (\r\n    <PostWrapper>\r\n      <Media\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        isFullscreen={false}\r\n        onFullscreen={() => dispatch({ type: \"FOCUS_POST\", id: id })}\r\n        onClick={() => setCollapsed(!collapsed)}\r\n      />\r\n      {!collapsed && (\r\n        <Details\r\n          rating={rating}\r\n          score={score}\r\n          source={source}\r\n          tags={tags}\r\n          activeTags={activeTags}\r\n          dispatch={dispatch}\r\n        />\r\n      )}\r\n    </PostWrapper>\r\n  );\r\n}\r\n\r\nPost.propTypes = {\r\n  id: number,\r\n  media_type: string,\r\n  media_src: string,\r\n  rating: string,\r\n  score: number,\r\n  source: string,\r\n  tags: arrayOf(object),\r\n  onTagClick: func\r\n};\r\n","import React from \"react\";\r\nimport { arrayOf, object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Post from \"./Post\";\r\n\r\nconst PostListWrapper = styled.div``;\r\n\r\nfunction PostList({ posts, activeTags, loadOriginal, dispatch }) {\r\n  return (\r\n    <PostListWrapper>\r\n      {posts.map(post => {\r\n        return (\r\n          <Post\r\n            key={`p_${post.id}`}\r\n            {...post}\r\n            loadOriginal={loadOriginal}\r\n            activeTags={activeTags}\r\n            dispatch={dispatch}\r\n          />\r\n        );\r\n      })}\r\n    </PostListWrapper>\r\n  );\r\n}\r\n\r\nPostList.propTypes = {\r\n  posts: arrayOf(object)\r\n};\r\n\r\nexport default PostList;\r\n","import React, { useCallback } from \"react\";\r\nimport { object, func, array } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport api from \"../../misc/api\";\r\nimport prepare from \"../../misc/prepare\";\r\nimport format from \"../../misc/numberFormatting\";\r\nimport PostList from \"../post/PostList\";\r\nimport Button from \"../common/Button\";\r\nimport Title from \"../common/Title\";\r\nimport { gutter } from \"../../misc/style\";\r\n\r\nconst ResultsWrapper = styled.section`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nlet scrollLock = true;\r\n\r\nfunction hasReachedEndOfPage() {\r\n  return (\r\n    window.innerHeight + document.documentElement.scrollTop >=\r\n    document.documentElement.scrollHeight - window.innerHeight\r\n  );\r\n}\r\n\r\nfunction Results({ options, dispatch, tags, results }) {\r\n  const loadMore = useCallback(() => {\r\n    api.getPosts(tags, results.page + 1, options.rated).then(res => {\r\n      dispatch({ type: \"ADD_POSTS\", posts: res.posts.map(prepare) });\r\n      scrollLock = true;\r\n    });\r\n  }, [dispatch, options.rated, results.page, tags]);\r\n\r\n  window.onscroll = useCallback(() => {\r\n    if (options.infinite && scrollLock && hasReachedEndOfPage()) {\r\n      scrollLock = false;\r\n      loadMore();\r\n    }\r\n  }, [loadMore, options.infinite]);\r\n\r\n  return (\r\n    <ResultsWrapper className=\"results\">\r\n      <Title>{format(results.count)} results</Title>\r\n      <PostList\r\n        posts={results.posts}\r\n        activeTags={tags}\r\n        loadOriginal={options.originals}\r\n        dispatch={dispatch}\r\n      />\r\n      {!options.infinite && (\r\n        <Button type={\"block\"} onClick={loadMore}>\r\n          Load More\r\n        </Button>\r\n      )}\r\n    </ResultsWrapper>\r\n  );\r\n}\r\n\r\nResults.propTypes = {\r\n  options: object,\r\n  dispatch: func,\r\n  tags: array,\r\n  results: object\r\n};\r\n\r\nexport default Results;\r\n","import React from \"react\";\r\nimport Config from \"../components/features/Config\";\r\nimport Results from \"../components/features/Results\";\r\n\r\nexport default function Search({ tags, options, results, dispatch }) {\r\n  return (\r\n    <>\r\n      <Config options={options} tags={tags} dispatch={dispatch} />\r\n      {results.posts.length > 0 && (\r\n        <Results\r\n          options={options}\r\n          dispatch={dispatch}\r\n          tags={tags}\r\n          results={results}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { object } from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport Media from \"../components/post/Media\";\r\nimport { MinusIcon, PlusIcon } from \"../icons/Icons\";\r\nimport { backgroundColor } from \"../misc/style\";\r\n\r\nconst ReaderWrapper = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  right: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: scroll;\r\n  background-color: ${backgroundColor};\r\n`;\r\nconst Overlay = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n`;\r\n\r\nconst HiddenImage = styled.img`\r\n  position: fixed;\r\n  left: 100%;\r\n  right: 100%;\r\n`;\r\n\r\nexport default function Reader({ focusedPost, posts, dispatch }) {\r\n  const postIndex = posts.findIndex(p => p.id === focusedPost);\r\n  const { big_src, media_type, thumbnail_src } = posts[postIndex];\r\n  const prevSrc = posts[postIndex > 0 ? postIndex - 1 : postIndex].big_src;\r\n  const nextSrc =\r\n    posts[postIndex < posts.length - 1 ? postIndex + 1 : postIndex].big_src;\r\n\r\n  const prev = useCallback(\r\n    () =>\r\n      postIndex > 0 &&\r\n      dispatch({ type: \"FOCUS_POST\", id: posts[postIndex - 1].id }),\r\n    [postIndex, dispatch, posts]\r\n  );\r\n\r\n  const next = useCallback(\r\n    () =>\r\n      postIndex < posts.length - 1 &&\r\n      dispatch({ type: \"FOCUS_POST\", id: posts[postIndex + 1].id }),\r\n    [postIndex, dispatch, posts]\r\n  );\r\n\r\n  return (\r\n    <ReaderWrapper>\r\n      <Media\r\n        type={media_type}\r\n        src={big_src}\r\n        thumbnail_src={thumbnail_src}\r\n        isFullscreen={true}\r\n        onFullscreen={() => dispatch({ type: \"UNFOCUS_POST\" })}\r\n        onClick={() => {}}\r\n      />\r\n      <Overlay>\r\n        <MinusIcon onClick={prev} color=\"white\" />\r\n        <PlusIcon onClick={next} color=\"white\" />\r\n      </Overlay>\r\n      <HiddenImage src={prevSrc} />\r\n      <HiddenImage src={nextSrc} />\r\n    </ReaderWrapper>\r\n  );\r\n}\r\n\r\nReader.propTypes = {\r\n  post: object\r\n};\r\n","import React from \"react\";\r\nimport { accentColor } from \"../misc/style\";\r\n\r\nfunction R34Icon({ size }) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={size}\r\n      height={size}\r\n      viewBox=\"0 0 12.7 12.7\"\r\n    >\r\n      <g transform=\"translate(0,-284.3)\">\r\n        <circle\r\n          id=\"path18\"\r\n          cx=\"6.3499999\"\r\n          cy=\"290.65002\"\r\n          fill=\"none\"\r\n          stroke={accentColor}\r\n          strokeWidth=\"0.50848764\"\r\n          strokeMiterlimit=\"4\"\r\n          strokeDasharray=\"none\"\r\n          strokeOpacity=\"1\"\r\n          r=\"6.0957561\"\r\n        />\r\n        <text\r\n          fontStyle=\"normal\"\r\n          fontWeight=\"normal\"\r\n          fontSize=\"8.3113203px\"\r\n          fontFamily=\"sansSerif\"\r\n          letterSpacing=\"0px\"\r\n          wordSpacing=\"0px\"\r\n          fill={accentColor}\r\n          fillOpacity=\"1\"\r\n          x=\"2.1363549\"\r\n          y=\"289.02704\"\r\n          id=\"text4533\"\r\n          transform=\"scale(0.98538224,1.0148346)\"\r\n        >\r\n          <tspan\r\n            id=\"tspan4531\"\r\n            x=\"2.1363549\"\r\n            y=\"289.02704\"\r\n            fontStyle=\"normal\"\r\n            fontVariant=\"normal\"\r\n            fontWeight=\"300\"\r\n            fontStretch=\"normal\"\r\n            fontFamily=\"Calibri\"\r\n            fill={accentColor}\r\n            fillOpacity=\"1\"\r\n          >\r\n            34\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default R34Icon;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Button from \"../common/Button\";\r\nimport {\r\n  layer,\r\n  backgroundColor2,\r\n  bigSpacing,\r\n  shadow,\r\n  gutter\r\n} from \"../../misc/style\";\r\nimport Title from \"../common/Title\";\r\nimport R34Icon from \"../../icons/R34Icon\";\r\n\r\nconst HeaderWrapper = styled.header`\r\n  > *:not(:last-child) {\r\n    margin-bottom: ${gutter};\r\n  }\r\n`;\r\n\r\nconst Divider = styled.div`\r\n  width: 1px;\r\n  height: 32px;\r\n  margin: 0 ${gutter};\r\n  background: ${backgroundColor2};\r\n`;\r\n\r\nconst TitleBar = styled.div`\r\n  background: ${layer};\r\n  ${shadow};\r\n  padding: ${gutter} 0;\r\n  margin-bottom: ${bigSpacing};\r\n`;\r\n\r\nconst MenuBar = styled.nav`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nfunction Header({ activeMenu, dispatch }) {\r\n  return (\r\n    <HeaderWrapper>\r\n      <TitleBar>\r\n        <Title size=\"large\">\r\n          <R34Icon size={32} />\r\n          <Divider />\r\n          <span style={{ marginTop: 2 }}>\r\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\r\n          </span>\r\n        </Title>\r\n      </TitleBar>\r\n\r\n      <MenuBar>\r\n        <Button\r\n          type=\"menu\"\r\n          active={activeMenu === \"search\"}\r\n          onClick={() => dispatch({ type: \"SET_ACTIVE_MENU\", menu: \"search\" })}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          type=\"menu\"\r\n          active={activeMenu === \"help\"}\r\n          onClick={() => dispatch({ type: \"SET_ACTIVE_MENU\", menu: \"help\" })}\r\n        >\r\n          Help\r\n        </Button>\r\n        <Button\r\n          type=\"menu\"\r\n          active={activeMenu === \"settings\"}\r\n          onClick={() =>\r\n            dispatch({ type: \"SET_ACTIVE_MENU\", menu: \"settings\" })\r\n          }\r\n        >\r\n          Settings\r\n        </Button>\r\n      </MenuBar>\r\n    </HeaderWrapper>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {};\r\n\r\nexport default Header;\r\n","import { useReducer, useEffect } from \"react\";\r\nimport produce from \"immer\";\r\nimport useLocalStorage from \"./useLocalStorage\";\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"ADD_TAG\":\r\n      return addTag(state, action.tag);\r\n    case \"REMOVE_TAG\":\r\n      return removeTag(state, action.tag);\r\n    case \"TOGGLE_TAG\":\r\n      return toggleTag(state, action.tag);\r\n    case \"ADD_POSTS\":\r\n      return addPosts(state, action.posts);\r\n    case \"SET_POSTS\":\r\n      return setPosts(state, action.posts, action.count);\r\n    case \"SET_OPTION\":\r\n      return setOption(state, action.key, action.value);\r\n    case \"FOCUS_POST\":\r\n      return setFocusedPost(state, action.id);\r\n    case \"UNFOCUS_POST\":\r\n      return setFocusedPost(state, undefined);\r\n    case \"SET_ACTIVE_MENU\":\r\n      return setActiveMenu(state, action.menu);\r\n    case \"RESET\":\r\n      return reset(state);\r\n    default:\r\n      throw new Error(`Unrecognized Action: ${action.type}`);\r\n  }\r\n}\r\n\r\nfunction findTag(tags, tagToFind) {\r\n  return tags.findIndex(tag => tag.name === tagToFind.name);\r\n}\r\n\r\nconst addTag = (state, newTag) =>\r\n  produce(state, draft => {\r\n    const tagIndex = findTag(state.tags, newTag);\r\n\r\n    draft.tags = [...state.tags];\r\n\r\n    if (tagIndex !== -1) {\r\n      draft.tags[tagIndex] = newTag;\r\n    } else {\r\n      draft.tags = [...draft.tags, newTag];\r\n    }\r\n  });\r\n\r\nconst removeTag = (state, tagToRemove) =>\r\n  produce(state, draft => {\r\n    const tagIndex = findTag(state.tags, tagToRemove);\r\n\r\n    if (tagIndex !== -1) {\r\n      draft.tags = [...state.tags];\r\n      draft.tags.splice(tagIndex, 1);\r\n    }\r\n  });\r\n\r\nconst toggleTag = (state, tagToToggle) =>\r\n  findTag(state.tags, tagToToggle) !== -1\r\n    ? removeTag(state, tagToToggle)\r\n    : addTag(state, tagToToggle);\r\n\r\nconst addPosts = (state, posts) =>\r\n  produce(state, draft => {\r\n    draft.results.posts = [...state.results.posts, ...posts];\r\n    draft.results.page = state.results.page + 1;\r\n  });\r\n\r\nconst setPosts = (state, posts, postCount) =>\r\n  produce(state, draft => {\r\n    draft.results.posts = [...posts];\r\n    draft.results.count = postCount;\r\n    draft.results.page = 0;\r\n  });\r\n\r\nconst setOption = (state, key, value) =>\r\n  produce(state, draft => {\r\n    draft.options[key] = value;\r\n  });\r\n\r\nconst setFocusedPost = (state, id) =>\r\n  produce(state, draft => {\r\n    draft.context.focusedPost = id;\r\n  });\r\n\r\nconst setActiveMenu = (state, menu) =>\r\n  produce(state, draft => {\r\n    draft.context.activeMenu = menu;\r\n  });\r\n\r\nconst reset = state =>\r\n  produce(state, draft => {\r\n    Object.assign(draft, initialState);\r\n  });\r\n\r\nconst initialState = {\r\n  results: {\r\n    posts: [],\r\n    page: 0,\r\n    count: undefined\r\n  },\r\n  context: {\r\n    focusedPost: undefined,\r\n    activeMenu: \"search\"\r\n  },\r\n  tags: [],\r\n  options: {\r\n    infinite: true,\r\n    rated: undefined,\r\n    originals: false\r\n  }\r\n};\r\n\r\n/**\r\n * Creates and manages state\r\n * @return {[{results: {posts: Array, page: Number, count: Number}, tags: Array, context: {focusedPost: String, activeMenu: String}, options: {originals: Boolean, infinite: Boolean, rated: Boolean}}, dispatch]}\r\n */\r\nexport default function useAppState() {\r\n  const [cache, setCache] = useLocalStorage(initialState);\r\n  const [state, dispatch] = useReducer(reducer, cache);\r\n\r\n  useEffect(() => {\r\n    setCache(state);\r\n  }, [setCache, state]);\r\n\r\n  return [state, dispatch];\r\n}\r\n","export default function useLocalStorage(initialState) {\r\n  const stateString = localStorage.getItem(\"state\");\r\n  const state =\r\n    stateString !== null && stateString !== \"undefined\"\r\n      ? JSON.parse(stateString)\r\n      : initialState;\r\n  const setState = newState =>\r\n    localStorage.setItem(\"state\", JSON.stringify(newState));\r\n\r\n  return [state, setState];\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { gutter } from \"../../misc/style\";\r\nimport Button from \"../common/Button\";\r\n\r\nconst FotterWrapper = styled.footer`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  justify-content: space-around;\r\n  padding: ${gutter};\r\n`;\r\n\r\nfunction Footer() {\r\n  return (\r\n    <FotterWrapper>\r\n      <Button type=\"invisible\">\r\n        <a href=\"https://github.com/kurozenzen/r34-react\">Github</a>\r\n      </Button>\r\n      <Button type=\"invisible\">\r\n        <a href=\"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md\">\r\n          Report a bug\r\n        </a>\r\n      </Button>\r\n      <Button type=\"invisible\">\r\n        <a href=\"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md\">\r\n          Feature request\r\n        </a>\r\n      </Button>\r\n    </FotterWrapper>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport { BlockButton } from \"../components/common/Button\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\n\r\nexport default function Settings({ state, dispatch }) {\r\n  return (\r\n    <>\r\n      <Title>Settings</Title>\r\n      <Surface>\r\n        <Title>General</Title>\r\n        <p>nothing yet</p>\r\n        <Line />\r\n        <Title>Developer</Title>\r\n        <BlockButton onClick={() => dispatch({ type: \"RESET\" })}>\r\n          Reset Application\r\n        </BlockButton>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\nimport Help from \"./pages/Help\";\nimport styled from \"styled-components\";\nimport Search from \"./pages/Search\";\nimport Reader from \"./pages/Reader\";\nimport Header from \"./components/features/Header\";\nimport useAppState from \"./hooks/useAppState\";\nimport Footer from \"./components/features/Footer\";\nimport {\n  backgroundColor,\n  accentColor,\n  backgroundColor2,\n  gutter\n} from \"./misc/style\";\nimport Settings from \"./pages/Settings\";\nimport useSwiping from \"./hooks/useSwiping\";\n\nconst Main = styled.main`\n  flex-grow: 1;\n  align-self: strech;\n  display: flex;\n  flex-direction: column;\n  padding: 0 16px;\n\n  > *:not(:last-child) {\n    margin-bottom: ${gutter};\n  }\n`;\n\nconst AppWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: strech;\n  min-height: 100%;\n  background: ${backgroundColor};\n  color: ${backgroundColor2};\n\n  font-size: 14px;\n\n  a {\n    color: ${accentColor};\n    text-decoration: none;\n  }\n\n  > *:not(:last-child) {\n    margin-bottom: ${gutter};\n  }\n`;\n\nfunction getActivePage(activeMenu, state, dispatch) {\n  switch (activeMenu) {\n    case \"reader\":\n      return <Reader state={state} dispatch={dispatch} />;\n    case \"help\":\n      return <Help state={state} dispatch={dispatch} />;\n    case \"settings\":\n      return <Settings state={state} dispatch={dispatch} />;\n    case \"search\":\n    default:\n      return (\n        <Search\n          tags={state.tags}\n          options={state.options}\n          results={state.results}\n          dispatch={dispatch}\n        />\n      );\n  }\n}\n\nexport default function App() {\n  const [state, dispatch] = useAppState();\n\n  const activePage = getActivePage(state.context.activeMenu, state, dispatch);\n\n  return (\n    <AppWrapper>\n      <Header activeMenu={state.context.activeMenu} dispatch={dispatch} />\n      <Main>{activePage}</Main>\n      <Footer />\n    </AppWrapper>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"app-root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}