{"version":3,"sources":["redux/actions.ts","redux/reducers/misc.ts","data/types.ts","redux/reducers/preferences.ts","redux/reducers/results.ts","redux/reducers/tags.ts","redux/reducers/index.ts","analytics/events.ts","redux/selectors.ts","redux/middleware/eventLogging.ts","misc/api.ts","data/Post.ts","data/Tag.ts","misc/prepare.ts","redux/middleware/apiRequests.ts","redux/store.ts","icons/R34Icon.tsx","components/common/Button.tsx","components/common/Title.tsx","components/features/Header.tsx","components/features/Footer.tsx","components/common/Surface.tsx","components/tagSelector/TagInput.tsx","components/tag/tagUtils.ts","misc/formatting.ts","misc/useToggle.ts","components/tag/Tag.tsx","icons/Icons.tsx","data/constants.ts","icons/TypeIcon.tsx","components/tagSelector/DropdownList.tsx","components/tagSelector/TagSelector.tsx","components/common/Toggle.tsx","components/common/LabeledToggle.tsx","components/features/Options.tsx","components/tag/TagList.tsx","pages/Help.tsx","pages/Settings.tsx","components/features/SearchButton.tsx","components/features/ActiveTags.tsx","components/features/Config.tsx","components/post/widgets/Rating.tsx","components/post/widgets/Score.tsx","components/post/widgets/Source.tsx","components/post/Details.tsx","data/utils.ts","components/player/Overlay.tsx","components/player/Video.tsx","components/player/utils.ts","components/player/Gif.tsx","components/player/Picture.tsx","components/player/Player.tsx","components/post/Post.tsx","components/post/DynamicList.tsx","components/features/Results.tsx","pages/Search.tsx","components/features/CookieConfirmation.tsx","AppContent.tsx","misc/theme.ts","App.tsx","index.tsx"],"names":["setActiveMenu","menu","type","addTag","tag","setOption","key","value","initialMiscState","activeMenu","initialPreferencesState","infinite","rated","ratedTreshold","originals","cookies","state","produce","draft","initialResultsState","posts","pageNumber","count","initialTagsState","active","aliases","combineReducers","tags","action","newTag","name","tagToRemove","removeTag","forTag","addAliases","results","window","addPosts","postCount","Number","setPosts","preferences","misc","selectActiveTags","selectPosts","selectCount","selectPageNumber","selectPreferences","selectOriginals","selectCookies","selectActiveMenu","selectHasResults","Object","keys","length","selectOutOfResults","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","analytics","store","activeApi","fetch","catch","getTags","searchTerm","res","json","getPosts","minScore","buildPostUrl","getAliases","tagName","page","tagString","values","map","modifier","encodeURIComponent","join","url","PostDataClass","constructor","id","score","rating","source","media_type","media_src","file_url","thumbnail_src","width","height","creator_id","creator_url","status","parent_id","has_children","has_comments","comments_url","has_notes","created_at","change","small_src","big_src","this","TagDataClass","types","preparePost","post","sample_url","preview_url","t","Boolean","persistConfig","storage","blacklist","persistedReducer","persistReducer","rootReducer","createStore","composeWithDevTools","applyMiddleware","next","getState","firebase","initializeApp","payload","logEvent","console","log","activeTags","page_number","active_tags","sort","searchEvent","api","then","dispatch","isOutOfResults","persistor","persistStore","R34Icon","props","theme","useTheme","xmlns","size","viewBox","transform","cx","cy","fill","stroke","colors","accentColor","strokeWidth","strokeMiterlimit","strokeDasharray","strokeOpacity","r","fontStyle","fontWeight","fontSize","fontFamily","letterSpacing","wordSpacing","fillOpacity","x","y","fontVariant","fontStretch","BasicButton","styled","button","InvisibleButton","css","shadow","drop","MenuButton","backgroundColor2","ActiveMenuButton","TopLeftButton","BottomLeftButton","CenterButton","RedButton","backgroundColor","dimensions","borderWidth","BlockButton","borderRadius","AddButton","ModifierButton","Button","children","onClick","disabled","label","TypedButton","getButtonByType","aria-label","h2","BigTitle","h1","HeaderWrapper","header","gutter","Divider","div","TitleBar","layer","box","bigSpacing","MenuBar","nav","Header","useSelector","useDispatch","style","marginTop","href","FotterWrapper","footer","spacing","CenteredA","a","Footer","Line","Input","input","TagInput","setValue","onChange","event","target","placeholder","prettifyTagname","tagname","replace","formatCount","numberString","number","toFixed","useToggle","initialValue","useState","toggleValue","useCallback","resetValue","TagWrapper","collapsed","fg","bg","switchingColors","IconWrapper","span","left","right","TagText","text","onKeyDown","e","keyCode","Alias","className","Tag","loadAliases","toggleCollapsed","resetCollapsed","useEffect","newAliases","b","filtered","filter","alias","isActive","showAliases","onMouseLeave","TypeIcon","ArrowIcon","StyledIcon","i","color","Icon","icon","CharacterIcon","attrs","ArtistIcon","CopyrightIcon","ExpandIcon","memo","ExternalLinkIcon","SourceIcon","RatingIcon","HeartIcon","PlayIcon","PauseIcon","NO_OP","find","match","ListWrapper","tagSelector","offsetTop","clientHeight","offsetLeft","clientWidth","sizeAndPosition","tagSelectorRef","DropdownList","entries","entry","Entry","EntryWrapper","TypeWrapper","flexGrow","paddingRight","TagSelectorWrapper","closed","TagSelector","setModifier","suggestions","setSuggestions","setTagSelectorRef","activateTag","suggestion","dirtyTag","prepareTag","handle","setTimeout","toLowerCase","newSuggestions","clearTimeout","onModifierClick","onAddClick","trim","s","ref","Wrapper","Thumb","Toggle","onToggle","ToggleWrapper","Label","LabeledToggle","OptionsWrapper","StyledInput","String","Options","ratedInputValue","setRatedInputValue","display","onBlur","TagListWrapper","padding","TagList","Help","Title","Surface","Settings","SearchButton","search","ActiveTags","ConfigWrapper","section","Config","htmlFor","toUpperCase","startsWith","rel","sourceString","includes","semiSanitized","substring","indexOf","formatSource","fold","keyframes","DetailsWrapper","Bar","Details","tagsForRendering","useMemo","listToMap","keyProp","reduce","result","current","Rating","Score","Source","fade","isVisible","ProgressBar","Overlay","onFullscreen","togglePlay","isPaused","isPlayable","currentTime","duration","toggleVisible","FlexVideo","video","Video","src","onLoad","videoRef","setVideoRef","Date","now","setTime","intervalId","setIntervalId","play","setInterval","pause","clearInterval","requestFullscreen","stopPropagation","paused","controls","loop","poster","preload","undefined","FlexImage","img","Gif","setPaused","usedSource","alt","loading","Picture","PlayerWrapper","Player","toggleDetails","media","MediaComponent","getMediaType","getMedia","PostWrapper","Post","virtualRef","loadOriginal","getCorrectSource","setCollapsed","cache","CellMeasurerCache","fixedWidth","DynamicList","isLoading","setLoading","loadMore","outOfResults","rowCount","rowRenderer","index","parent","columnIndex","rowIndex","measure","registerChild","isRowLoaded","loadMoreRows","params","Promise","resolve","onRowsRendered","disableHeight","deferredMeasurementCache","overscanRowCount","rowHeight","innerHeight","gap","ResultsWrapper","Results","Search","hasResults","CookieWrapper","CookieConfirmation","Main","main","AppWrapper","AppContent","activePage","getActivePage","appMargin","hoverAccent","timings","transistionTime","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2caa0a99.chunk.js","sourcesContent":["import { MenuType, PreferenceKey } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport PostDataClass from \"../data/Post\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const RESET = \"R34_RESET\";\r\nexport const SET_ACTIVE_MENU = \"R34_SET_ACTIVE_MENU\";\r\nexport const ADD_TAG = \"R34_ADD_TAG\";\r\nexport const REMOVE_TAG = \"R34_REMOVE_TAG\";\r\nexport const ADD_ALIASES = \"R34_ADD_ALIASES\";\r\nexport const ADD_POSTS = \"R34_ADD_POSTS\";\r\nexport const SET_POSTS = \"R34_SET_POSTS\";\r\nexport const SET_OPTION = \"R34_SET_OPTION\";\r\nexport const GET_RESULTS = \"R34_GET_RESULTS\";\r\nexport const GET_MORE_RESULTS = \"R34_GET_MORE_RESULTS\";\r\nexport const ALLOW_COOKIES = \"R34_ALLOW_COOKIES\";\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\ninterface ResetAction {\r\n  type: typeof RESET;\r\n}\r\n\r\ninterface SetActiveMenuAction {\r\n  type: typeof SET_ACTIVE_MENU;\r\n  menu: MenuType;\r\n}\r\n\r\ninterface AddTagAction {\r\n  type: typeof ADD_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface RemoveTagAction {\r\n  type: typeof REMOVE_TAG;\r\n  tag: TagDataClass;\r\n}\r\n\r\ninterface AddAliasesAction {\r\n  type: typeof ADD_ALIASES;\r\n  aliases: TagDataClass[];\r\n  forTag: string;\r\n}\r\n\r\ninterface AddPostsAction {\r\n  type: typeof ADD_POSTS;\r\n  posts: PostDataClass[];\r\n}\r\n\r\ninterface SetPostsAction {\r\n  type: typeof SET_POSTS;\r\n  posts: PostDataClass[];\r\n  count: string;\r\n}\r\n\r\ninterface SetOptionAction {\r\n  type: typeof SET_OPTION;\r\n  key: PreferenceKey;\r\n  value: any;\r\n}\r\n\r\ninterface GetResultsAction {\r\n  type: typeof GET_RESULTS;\r\n}\r\n\r\ninterface GetMoreResultsAction {\r\n  type: typeof GET_MORE_RESULTS;\r\n}\r\n\r\ninterface AllowCookiesAction {\r\n  type: typeof ALLOW_COOKIES;\r\n  value: boolean;\r\n}\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport const reset = () => ({\r\n  type: RESET,\r\n});\r\n\r\nexport const setActiveMenu = (menu: MenuType) => ({\r\n  type: SET_ACTIVE_MENU,\r\n  menu,\r\n});\r\n\r\nexport const addTag = (tag: TagDataClass) => ({\r\n  type: ADD_TAG,\r\n  tag,\r\n});\r\n\r\nexport const removeTag = (tag: TagDataClass) => ({\r\n  type: REMOVE_TAG,\r\n  tag,\r\n});\r\n\r\nexport const addAliases = (aliases: TagDataClass[], forTag: string) => ({\r\n  type: ADD_ALIASES,\r\n  aliases,\r\n  forTag,\r\n});\r\n\r\nexport const addPosts = (posts: PostDataClass[]) => ({\r\n  type: ADD_POSTS,\r\n  posts,\r\n});\r\n\r\nexport const setPosts = (posts: PostDataClass[], count: string) => ({\r\n  type: SET_POSTS,\r\n  posts,\r\n  count,\r\n});\r\n\r\nexport const setOption = (key: PreferenceKey, value: any) => ({\r\n  type: SET_OPTION,\r\n  key,\r\n  value,\r\n});\r\n\r\nexport const getResults = () => ({\r\n  type: GET_RESULTS,\r\n});\r\n\r\nexport const getMoreResults = () => ({\r\n  type: GET_MORE_RESULTS,\r\n});\r\n\r\nexport const allowCookiesAction = () => ({\r\n  type: ALLOW_COOKIES,\r\n  value: true,\r\n});\r\n\r\n/////////////////////////////////////////////////////////\r\n\r\nexport type AppAction =\r\n  | ResetAction\r\n  | SetActiveMenuAction\r\n  | AddTagAction\r\n  | RemoveTagAction\r\n  | AddAliasesAction\r\n  | AddPostsAction\r\n  | SetPostsAction\r\n  | SetOptionAction\r\n  | GetResultsAction\r\n  | GetMoreResultsAction\r\n  | AllowCookiesAction;\r\n","import produce from \"immer\";\r\nimport { MenuType } from \"../../data/types\";\r\nimport { SET_ACTIVE_MENU, AppAction } from \"../actions\";\r\n\r\nexport interface MiscState {\r\n  activeMenu: MenuType;\r\n}\r\n\r\nexport const initialMiscState: MiscState = {\r\n  activeMenu: \"search\",\r\n};\r\n\r\nconst setActiveMenu = (state: MiscState, menu: MenuType) =>\r\n  produce(state, (draft) => {\r\n    draft.activeMenu = menu;\r\n  });\r\n\r\nexport default (\r\n  state: MiscState = initialMiscState,\r\n  action: AppAction\r\n): MiscState => {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_MENU:\r\n      return setActiveMenu(state, action.menu);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const GENERAL = \"general\";\r\nexport const CHARACTER = \"character\";\r\nexport const AMBIGUOUS = \"ambiguous\";\r\nexport const ARTIST = \"artist\";\r\nexport const COPYRIGHT = \"copyright\";\r\nexport type TagType =\r\n  | typeof GENERAL\r\n  | typeof CHARACTER\r\n  | typeof AMBIGUOUS\r\n  | typeof ARTIST\r\n  | typeof COPYRIGHT;\r\n\r\nexport const PLUS = \"+\";\r\nexport const MINUS = \"-\";\r\nexport type Modifier = typeof PLUS | typeof MINUS;\r\n\r\nexport const VIDEO = \"video\";\r\nexport const IMAGE = \"image\";\r\nexport type PostType = typeof VIDEO | typeof IMAGE;\r\n\r\nexport const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport type MediaType = typeof VIDEO | typeof PICTURE | typeof GIF;\r\n\r\nexport const SEARCH = \"search\";\r\nexport const HELP = \"help\";\r\nexport const SETTINGS = \"settings\";\r\nexport type MenuType = typeof SEARCH | typeof HELP | typeof SETTINGS;\r\n\r\nexport const INVISIBLE = \"invisible\";\r\nexport const BLOCK = \"block\";\r\nexport const TOPLEFT = \"topLeft\";\r\nexport const BOTTOMLEFT = \"bottomLeft\";\r\nexport const CENTER = \"center\";\r\nexport const MODIFIER = \"modifier\";\r\nexport const ADD = \"add\";\r\nexport const MENU = \"menu\";\r\nexport const RED = \"red\";\r\nexport type ButtonType =\r\n  | typeof INVISIBLE\r\n  | typeof BLOCK\r\n  | typeof TOPLEFT\r\n  | typeof BOTTOMLEFT\r\n  | typeof CENTER\r\n  | typeof MODIFIER\r\n  | typeof ADD\r\n  | typeof MENU\r\n  | typeof RED;\r\n\r\nexport const SAFE = \"safe\";\r\nexport const QUESTIONABLE = \"questionable\";\r\nexport const EXPLICIT = \"explicit\";\r\nexport type RatingType = typeof SAFE | typeof QUESTIONABLE | typeof EXPLICIT;\r\n\r\nexport const INFINITE = \"infinite\";\r\nexport const RATED = \"rated\";\r\nexport const RATEDTRESHOLD = \"ratedTreshold\";\r\nexport const ORIGINALS = \"originals\";\r\nexport const COOKIES = \"cookies\";\r\n\r\nexport type PreferenceKey =\r\n  | typeof INFINITE\r\n  | typeof RATED\r\n  | typeof RATEDTRESHOLD\r\n  | typeof ORIGINALS\r\n  | typeof COOKIES;\r\n\r\nexport interface SimpleMap<V> {\r\n  [key: string]: V;\r\n}\r\n\r\nexport interface SimpleList<V> {\r\n  [key: number]: V;\r\n}\r\n","import produce from \"immer\";\r\nimport {\r\n  PreferenceKey,\r\n  INFINITE,\r\n  RATED,\r\n  RATEDTRESHOLD,\r\n  ORIGINALS,\r\n  COOKIES,\r\n} from \"../../data/types\";\r\nimport { AppAction, SET_OPTION, ALLOW_COOKIES } from \"../actions\";\r\n\r\nexport interface PreferencesState {\r\n  infinite: boolean;\r\n  rated: boolean;\r\n  ratedTreshold: number;\r\n  originals: boolean;\r\n  cookies: boolean;\r\n}\r\n\r\nexport const initialPreferencesState: PreferencesState = {\r\n  infinite: true,\r\n  rated: false,\r\n  ratedTreshold: 1,\r\n  originals: false,\r\n  cookies: false,\r\n};\r\n\r\nconst setOption = (state: PreferencesState, key: PreferenceKey, value: any) =>\r\n  produce(state, (draft) => {\r\n    switch (key) {\r\n      case INFINITE:\r\n        draft.infinite = value;\r\n        break;\r\n      case RATED:\r\n        draft.rated = value;\r\n        break;\r\n      case RATEDTRESHOLD:\r\n        draft.ratedTreshold = value;\r\n        break;\r\n      case ORIGINALS:\r\n        draft.originals = value;\r\n        break;\r\n      case COOKIES:\r\n        draft.cookies = value;\r\n        break;\r\n    }\r\n  });\r\n\r\nexport default (\r\n  state: PreferencesState = initialPreferencesState,\r\n  action: AppAction\r\n): PreferencesState => {\r\n  switch (action.type) {\r\n    case SET_OPTION:\r\n      return setOption(state, action.key, action.value);\r\n    case ALLOW_COOKIES:\r\n      return setOption(state, COOKIES, action.value);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport PostDataClass from \"../../data/Post\";\r\nimport { SET_POSTS, ADD_POSTS, AppAction } from \"../actions\";\r\n\r\nexport interface ResultsState {\r\n  posts: PostDataClass[];\r\n  pageNumber: number;\r\n  count: number;\r\n}\r\n\r\nexport const initialResultsState: ResultsState = {\r\n  posts: [],\r\n  pageNumber: 0,\r\n  count: 0,\r\n};\r\n\r\nconst addPosts = (state: ResultsState, posts: PostDataClass[]) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = [...state.posts, ...posts];\r\n    draft.pageNumber = state.pageNumber + 1;\r\n\r\n    //@ts-expect-error\r\n    window.posts = draft.posts;\r\n  });\r\n\r\nconst setPosts = (\r\n  state: ResultsState,\r\n  posts: PostDataClass[],\r\n  postCount: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.posts = posts;\r\n    draft.count = Number(postCount);\r\n    draft.pageNumber = 0;\r\n\r\n    //@ts-expect-error\r\n    window.posts = draft.posts;\r\n  });\r\n\r\nexport default (\r\n  state: ResultsState = initialResultsState,\r\n  action: AppAction\r\n): ResultsState => {\r\n  switch (action.type) {\r\n    case ADD_POSTS:\r\n      return addPosts(state, action.posts);\r\n    case SET_POSTS:\r\n      return setPosts(state, action.posts, action.count);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import produce from \"immer\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ADD_TAG, AppAction, REMOVE_TAG, ADD_ALIASES } from \"../actions\";\r\n\r\nexport interface TagsState {\r\n  active: SimpleMap<TagDataClass>;\r\n  aliases: SimpleMap<TagDataClass[]>;\r\n}\r\n\r\nexport const initialTagsState: TagsState = {\r\n  active: {},\r\n  aliases: {},\r\n};\r\n\r\nconst addTag = (state: TagsState, newTag: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    draft.active[newTag.name] = { ...state.active[newTag.name], ...newTag };\r\n  });\r\n\r\nconst addAliases = (\r\n  state: TagsState,\r\n  aliases: TagDataClass[],\r\n  forTag: string\r\n) =>\r\n  produce(state, (draft) => {\r\n    draft.aliases[forTag] = aliases;\r\n  });\r\n\r\nconst removeTag = (state: TagsState, tagToRemove: TagDataClass) =>\r\n  produce(state, (draft) => {\r\n    delete draft.active[tagToRemove.name];\r\n    delete draft.aliases[tagToRemove.name];\r\n  });\r\n\r\nexport default (\r\n  state: TagsState = initialTagsState,\r\n  action: AppAction\r\n): TagsState => {\r\n  switch (action.type) {\r\n    case ADD_TAG:\r\n      return addTag(state, action.tag);\r\n    case REMOVE_TAG:\r\n      return removeTag(state, action.tag);\r\n    case ADD_ALIASES:\r\n      return addAliases(state, action.aliases, action.forTag);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport misc from \"./misc\";\r\nimport preferences from \"./preferences\";\r\nimport results from \"./results\";\r\nimport tags from \"./tags\";\r\n\r\nexport default combineReducers({ tags, results, preferences, misc });\r\n","import { Modifier, SimpleMap } from \"../data/types\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { PreferencesState } from \"../redux/reducers/preferences\";\r\n\r\nconst SEARCH = \"r34_search\";\r\nconst ADD_TAG = \"r34_add_tag\";\r\n\r\ninterface SearchEvent {\r\n  id: typeof SEARCH;\r\n  payload: {\r\n    tags: string[];\r\n  };\r\n}\r\n\r\ninterface TagActivateEvent {\r\n  id: typeof ADD_TAG;\r\n  payload: {\r\n    name: string;\r\n    modifier: Modifier | undefined;\r\n  };\r\n}\r\n\r\nexport const searchEvent = (\r\n  activeTags: SimpleMap<TagDataClass>,\r\n  page_number: number,\r\n  preferences: PreferencesState\r\n) => ({\r\n  id: SEARCH,\r\n  payload: {\r\n    active_tags: Object.values(activeTags)\r\n      .map((tag) => `${tag.modifier}${tag.name}`)\r\n      .sort(),\r\n    page_number,\r\n    preferences,\r\n  },\r\n});\r\n\r\nexport const addTagEvent = (tag: TagDataClass) => ({\r\n  id: ADD_TAG,\r\n  payload: {\r\n    name: tag.name,\r\n    modifier: tag.modifier,\r\n  },\r\n});\r\n\r\nexport type EventType = SearchEvent | TagActivateEvent;\r\n","import { TagsState } from \"./reducers/tags\";\r\nimport { MiscState } from \"./reducers/misc\";\r\nimport { ResultsState } from \"./reducers/results\";\r\nimport { PreferencesState } from \"./reducers/preferences\";\r\n\r\ninterface RootState {\r\n  misc: MiscState;\r\n  results: ResultsState;\r\n  preferences: PreferencesState;\r\n  tags: TagsState;\r\n}\r\nexport const selectActiveTags = (state: RootState) => state.tags.active;\r\nexport const selectResults = (state: RootState) => state.results;\r\nexport const selectPosts = (state: RootState) => state.results.posts;\r\nexport const selectCount = (state: RootState) => state.results.count;\r\nexport const selectPageNumber = (state: RootState) => state.results.pageNumber;\r\nexport const selectPreferences = (state: RootState) => state.preferences;\r\nexport const selectInfinite = (state: RootState) => state.preferences.infinite;\r\nexport const selectOriginals = (state: RootState) =>\r\n  state.preferences.originals;\r\nexport const selectRated = (state: RootState) => state.preferences.rated;\r\nexport const selectRatedThreshold = (state: RootState) =>\r\n  state.preferences.ratedTreshold;\r\nexport const selectCookies = (state: RootState) => state.preferences.cookies;\r\nexport const selectActiveMenu = (state: RootState) => state.misc.activeMenu;\r\n\r\nexport const selectAliases = (state: RootState) =>\r\n  Object.values(state.tags.aliases).flat();\r\nexport const selectHasResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length !== 0;\r\nexport const selectOutOfResults = (state: RootState) =>\r\n  Object.keys(state.results.posts).length === state.results.count;\r\n\r\nexport const selectAliasesByTagName = (tagName: string) => (state: RootState) =>\r\n  state.tags.aliases[tagName];\r\n","import { ADD_TAG, AppAction, SET_POSTS, ADD_POSTS } from \"../actions\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport { addTagEvent, searchEvent } from \"../../analytics/events\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectPageNumber,\r\n  selectCookies,\r\n} from \"../selectors\";\r\nimport { MiddlewareAPI, Dispatch } from \"redux\";\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyBHdepwE7M4Byu2lFtX2s__9COcMdvXu7Q\",\r\n  authDomain: \"r34-react.firebaseapp.com\",\r\n  databaseURL: \"https://r34-react.firebaseio.com\",\r\n  projectId: \"r34-react\",\r\n  storageBucket: \"r34-react.appspot.com\",\r\n  messagingSenderId: \"844749417844\",\r\n  appId: \"1:844749417844:web:11fa1fda0e14f1ac2dd021\",\r\n  measurementId: \"G-27J3QXZ8YR\",\r\n};\r\n\r\nlet firebaseApp: firebase.app.App;\r\nlet analytics: firebase.analytics.Analytics;\r\n\r\nexport default (store: MiddlewareAPI<any>) => (next: Dispatch<AppAction>) => (\r\n  action: AppAction\r\n) => {\r\n  const cookies = selectCookies(store.getState());\r\n\r\n  if (cookies) {\r\n    if (!firebaseApp) {\r\n      firebaseApp = firebase.initializeApp(config);\r\n      analytics = firebaseApp.analytics();\r\n    }\r\n\r\n    if (action.type === ADD_TAG) {\r\n      const { id, payload } = addTagEvent(action.tag);\r\n      analytics.logEvent<typeof id>(id, payload);\r\n      console.log(\"EVENT:\", id, payload);\r\n    }\r\n\r\n    if (action.type === ADD_POSTS || action.type === SET_POSTS) {\r\n      const activeTags = selectActiveTags(store.getState());\r\n      const pageNumber = selectPageNumber(store.getState());\r\n      const preferences = selectPreferences(store.getState());\r\n      const { id, payload } = searchEvent(\r\n        activeTags,\r\n        action.type === SET_POSTS ? 0 : pageNumber + 1,\r\n        preferences\r\n      );\r\n      analytics.logEvent<typeof id>(id, payload);\r\n      console.log(\"EVENT:\", id, payload);\r\n    }\r\n  }\r\n\r\n  next(action);\r\n};\r\n","import TagDataClass from \"../data/Tag\";\r\nimport { SimpleMap } from \"../data/types\";\r\n\r\nexport const pageSize = 20;\r\nconst apiUrl1 = \"https://r34-json.herokuapp.com\";\r\nconst apiUrl2 = \"https://r34-api-clone.herokuapp.com\";\r\n\r\nlet activeApi = apiUrl1;\r\n\r\n// Failover to apiUrl2\r\nfetch(activeApi).catch(() => (activeApi = apiUrl2));\r\n\r\nexport default {\r\n  async getTags(searchTerm: string) {\r\n    const res = await fetch(\r\n      `${activeApi}/tags?limit=${pageSize}&name=${searchTerm}*&order_by=posts`\r\n    );\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getPosts(tags: SimpleMap<TagDataClass>, pageNumber = 0, minScore = 0) {\r\n    const res = await fetch(buildPostUrl(pageNumber, tags, minScore));\r\n\r\n    return await res.json();\r\n  },\r\n\r\n  async getAliases(tagName: string) {\r\n    const res = await fetch(`${activeApi}/alias/${tagName}`);\r\n\r\n    return await res.json();\r\n  },\r\n};\r\n\r\nfunction buildPostUrl(\r\n  page: number,\r\n  tags: SimpleMap<TagDataClass>,\r\n  minScore: number\r\n) {\r\n  const tagString = Object.values(tags)\r\n    .map(\r\n      (tag) =>\r\n        `${tag.modifier === \"-\" ? \"-\" : \"\"}${encodeURIComponent(tag.name)}`\r\n    )\r\n    .join(\"+\");\r\n\r\n  let url = `${activeApi}/posts?pid=${page}&limit=${pageSize}&tags=${tagString}`;\r\n\r\n  if (minScore > 0) {\r\n    url += `+${encodeURIComponent(\"score:>=\" + minScore)}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n","import { RatingType, PostType } from \"./types\";\r\nimport TagDataClass from \"./Tag\";\r\n\r\nexport default class PostDataClass {\r\n  id: number;\r\n\r\n  score: number;\r\n  rating: RatingType;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n\r\n  media_type: PostType;\r\n\r\n  thumbnail_src: string;\r\n  small_src: string;\r\n  big_src: string;\r\n\r\n  width: number;\r\n  height: number;\r\n\r\n  creator_id: number;\r\n  creator_url: string;\r\n\r\n  status: string;\r\n  parent_id: number;\r\n  has_children: boolean;\r\n  has_comments: boolean;\r\n  comments_url: string;\r\n  has_notes: boolean;\r\n  created_at: string;\r\n  change: string;\r\n\r\n  constructor(\r\n    id: number,\r\n    score: number,\r\n    rating: string,\r\n    source: string,\r\n    tags: TagDataClass[],\r\n    media_type: string,\r\n    media_src: any,\r\n    file_url: any,\r\n    thumbnail_src: string,\r\n    width: number,\r\n    height: number,\r\n    creator_id: number,\r\n    creator_url: string,\r\n    status: string,\r\n    parent_id: number,\r\n    has_children: boolean,\r\n    has_comments: boolean,\r\n    comments_url: string,\r\n    has_notes: boolean,\r\n    created_at: string,\r\n    change: string\r\n  ) {\r\n    this.id = id;\r\n\r\n    this.score = score;\r\n    this.rating = rating as RatingType;\r\n    this.source = source;\r\n    this.tags = tags;\r\n\r\n    this.media_type = media_type as PostType;\r\n    this.small_src = media_src;\r\n    this.big_src = file_url;\r\n    this.thumbnail_src = thumbnail_src;\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.creator_id = creator_id;\r\n    this.creator_url = creator_url;\r\n\r\n    this.status = status;\r\n    this.parent_id = parent_id;\r\n    this.has_children = has_children;\r\n    this.has_comments = has_comments;\r\n    this.comments_url = comments_url;\r\n    this.has_notes = has_notes;\r\n    this.created_at = created_at;\r\n    this.change = change;\r\n  }\r\n}\r\n","import { TagType, Modifier } from \"./types\";\r\n\r\nexport default class TagDataClass {\r\n  name: string;\r\n  count?: number | null;\r\n  types?: TagType[];\r\n  modifier?: Modifier;\r\n\r\n  constructor(\r\n    name: string,\r\n    types: TagType[] = [],\r\n    count: number | null = null,\r\n    modifier: Modifier = \"+\"\r\n  ) {\r\n    this.name = name;\r\n    this.types = types;\r\n    this.count = count;\r\n    this.modifier = modifier;\r\n  }\r\n}\r\n","import PostDataClass from \"../data/Post\";\r\nimport TagDataClass from \"../data/Tag\";\r\nimport { TagType, Modifier, RatingType } from \"../data/types\";\r\n\r\ninterface DirtyTag {\r\n  name: string;\r\n  types: string[];\r\n  count: string;\r\n  modifier: string;\r\n}\r\n\r\ninterface DirtyPost {\r\n  id: string;\r\n  type: string;\r\n  score: string;\r\n  rating: string;\r\n  source: string;\r\n  tags: string[];\r\n  file_url: string;\r\n  width: string;\r\n  height: string;\r\n  creator_id: string;\r\n  creator_url: string;\r\n  sample_url: string;\r\n  preview_url: string;\r\n  status: string;\r\n  parent_id: string;\r\n  has_children: string;\r\n  has_comments: string;\r\n  comments_url: string;\r\n  has_notes: string;\r\n  created_at: string;\r\n  change: string;\r\n}\r\n\r\nexport function prepareTag(dirtyTag: DirtyTag) {\r\n  const { name, types, count, modifier } = dirtyTag;\r\n\r\n  return new TagDataClass(\r\n    name,\r\n    types as TagType[],\r\n    Number(count),\r\n    modifier as Modifier\r\n  );\r\n}\r\n\r\nexport function preparePost(post: DirtyPost) {\r\n  const {\r\n    id,\r\n    type,\r\n    score,\r\n    rating,\r\n    source,\r\n    tags,\r\n    file_url,\r\n    width,\r\n    height,\r\n    creator_id,\r\n    creator_url,\r\n    sample_url,\r\n    preview_url,\r\n    status,\r\n    parent_id,\r\n    has_children,\r\n    has_comments,\r\n    comments_url,\r\n    has_notes,\r\n    created_at,\r\n    change,\r\n  } = post;\r\n  return new PostDataClass(\r\n    Number(id),\r\n    Number(score),\r\n    rating as RatingType,\r\n    source,\r\n    tags ? tags.map((t) => new TagDataClass(t)) : [],\r\n    type,\r\n    sample_url,\r\n    file_url,\r\n    preview_url,\r\n    Number(width),\r\n    Number(height),\r\n    Number(creator_id),\r\n    creator_url,\r\n    status,\r\n    Number(parent_id),\r\n    Boolean(has_children),\r\n    Boolean(has_comments),\r\n    comments_url,\r\n    Boolean(has_notes),\r\n    created_at,\r\n    change\r\n  );\r\n}\r\n","import { MiddlewareAPI } from \"redux\";\r\nimport { Dispatch } from \"react\";\r\nimport {\r\n  AppAction,\r\n  GET_RESULTS,\r\n  GET_MORE_RESULTS,\r\n  addPosts,\r\n  setPosts,\r\n} from \"../actions\";\r\nimport api from \"../../misc/api\";\r\nimport { preparePost } from \"../../misc/prepare\";\r\nimport {\r\n  selectActiveTags,\r\n  selectPreferences,\r\n  selectPageNumber,\r\n  selectOutOfResults,\r\n} from \"../selectors\";\r\n\r\nexport default (store: MiddlewareAPI<any>) => (next: Dispatch<AppAction>) => (\r\n  action: AppAction\r\n) => {\r\n  if (action.type === GET_RESULTS) {\r\n    const activeTags = selectActiveTags(store.getState());\r\n    const { rated, ratedTreshold } = selectPreferences(store.getState());\r\n    api.getPosts(activeTags, 0, rated ? ratedTreshold : 0).then((res) => {\r\n      store.dispatch(setPosts(res.posts.map(preparePost), res.count));\r\n    });\r\n  }\r\n\r\n  const isOutOfResults = selectOutOfResults(store.getState());\r\n  if (action.type === GET_MORE_RESULTS && !isOutOfResults) {\r\n    const activeTags = selectActiveTags(store.getState());\r\n    const pageNumber = selectPageNumber(store.getState());\r\n    const { rated, ratedTreshold } = selectPreferences(store.getState());\r\n\r\n    api\r\n      .getPosts(activeTags, pageNumber + 1, rated ? ratedTreshold : 0)\r\n      .then((res) => {\r\n        store.dispatch(addPosts(res.posts.map(preparePost)));\r\n      });\r\n  }\r\n\r\n  next(action);\r\n};\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { persistStore, persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport rootReducer from \"./reducers\";\r\nimport eventLogging from \"./middleware/eventLogging\";\r\nimport apiRequests from \"./middleware/apiRequests\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nconst persistConfig = {\r\n  key: \"appstate\",\r\n  storage,\r\n  blacklist: [\"results\"],\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = createStore(\r\n  persistedReducer,\r\n  composeWithDevTools(applyMiddleware(eventLogging, apiRequests))\r\n);\r\nexport const persistor = persistStore(store);\r\n","import React from \"react\";\r\nimport { ThemeType } from \"../misc/theme\";\r\nimport { useTheme } from \"styled-components\";\r\n\r\nexport default function R34Icon(props: { size: number }) {\r\n  const theme = useTheme() as ThemeType;\r\n\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width={props.size}\r\n      height={props.size}\r\n      viewBox=\"0 0 12.7 12.7\"\r\n    >\r\n      <g transform=\"translate(0,-284.3)\">\r\n        <circle\r\n          id=\"path18\"\r\n          cx=\"6.3499999\"\r\n          cy=\"290.65002\"\r\n          fill=\"none\"\r\n          stroke={theme.colors.accentColor}\r\n          strokeWidth=\"0.50848764\"\r\n          strokeMiterlimit=\"4\"\r\n          strokeDasharray=\"none\"\r\n          strokeOpacity=\"1\"\r\n          r=\"6.0957561\"\r\n        />\r\n        <text\r\n          fontStyle=\"normal\"\r\n          fontWeight=\"normal\"\r\n          fontSize=\"8.3113203px\"\r\n          fontFamily=\"sansSerif\"\r\n          letterSpacing=\"0px\"\r\n          wordSpacing=\"0px\"\r\n          fill={theme.colors.accentColor}\r\n          fillOpacity=\"1\"\r\n          x=\"2.1363549\"\r\n          y=\"289.02704\"\r\n          id=\"text4533\"\r\n          transform=\"scale(0.98538224,1.0148346)\"\r\n        >\r\n          <tspan\r\n            id=\"tspan4531\"\r\n            x=\"2.1363549\"\r\n            y=\"289.02704\"\r\n            fontStyle=\"normal\"\r\n            fontVariant=\"normal\"\r\n            fontWeight=\"300\"\r\n            fontStretch=\"normal\"\r\n            fontFamily=\"Calibri\"\r\n            fill={theme.colors.accentColor}\r\n            fillOpacity=\"1\"\r\n          >\r\n            34\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport {\r\n  ButtonType,\r\n  TOPLEFT,\r\n  BLOCK,\r\n  INVISIBLE,\r\n  BOTTOMLEFT,\r\n  CENTER,\r\n  MODIFIER,\r\n  ADD,\r\n  MENU,\r\n} from \"../../data/types\";\r\n\r\nconst BasicButton = styled.button`\r\n  font-size: 14px;\r\n\r\n  :focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst InvisibleButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    border: none;\r\n    border-radius: 1000px;\r\n    padding: 5px;\r\n    filter: ${props.theme.shadow.drop};\r\n    \r\n    svg {\r\n      transition: all 0.2s ease-in-out;\r\n    }\r\n\r\n    :hover {\r\n      svg {\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n  `\r\n);\r\n\r\nconst MenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst ActiveMenuButton = styled(InvisibleButton)(\r\n  (props) => css`\r\n    color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\nconst TopLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst BottomLeftButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  margin: 10px;\r\n`;\r\n\r\nconst CenterButton = styled(InvisibleButton)`\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n`;\r\n\r\nconst RedButton = styled(BasicButton)(\r\n  (props) => css`\r\n    height: 32px;\r\n    font-size: 14px;\r\n    color: ${props.theme.colors.accentColor};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n\r\n    transition: border-color 0.4s ease-in-out;\r\n    transition: color 0.4s ease-in-out;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    :hover {\r\n      background-color: ${props.theme.colors.accentColor};\r\n      color: ${props.theme.colors.backgroundColor};\r\n    }\r\n\r\n    :active,\r\n    :focus {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n\r\n      border-color: ${props.theme.colors.backgroundColor2};\r\n      cursor: pointer;\r\n    }\r\n  `\r\n);\r\n\r\nexport const BlockButton = styled(RedButton)(\r\n  (props) => css`\r\n    width: 100%;\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n  `\r\n);\r\n\r\nexport const AddButton = styled(RedButton)(\r\n  (props) => css`\r\n    border-left-width: 0;\r\n    border-radius: 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius} 0;\r\n  `\r\n);\r\n\r\nexport const ModifierButton = styled(BasicButton)(\r\n  (props) => css`\r\n    background-color: transparent;\r\n    min-width: 48px;\r\n    border: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-right-width: 0;\r\n    border-radius: ${props.theme.dimensions.borderRadius} 0 0\r\n      ${props.theme.dimensions.borderRadius};\r\n    font-weight: bold;\r\n  `\r\n);\r\n\r\nconst getButtonByType = (type: ButtonType, active: boolean) => {\r\n  switch (type) {\r\n    case INVISIBLE:\r\n      return InvisibleButton;\r\n    case BLOCK:\r\n      return BlockButton;\r\n    case TOPLEFT:\r\n      return TopLeftButton;\r\n    case BOTTOMLEFT:\r\n      return BottomLeftButton;\r\n    case CENTER:\r\n      return CenterButton;\r\n    case MODIFIER:\r\n      return ModifierButton;\r\n    case ADD:\r\n      return AddButton;\r\n    case MENU:\r\n      return active ? ActiveMenuButton : MenuButton;\r\n    default:\r\n      return RedButton;\r\n  }\r\n};\r\n\r\ninterface ButtonProps {\r\n  type: ButtonType;\r\n  children: JSX.Element | string;\r\n  onClick: MouseEventHandler;\r\n  active?: boolean;\r\n  disabled?: boolean;\r\n  label: string;\r\n}\r\n\r\nfunction Button(props: ButtonProps) {\r\n  const {\r\n    type,\r\n    children,\r\n    onClick,\r\n    active = false,\r\n    disabled = false,\r\n    label,\r\n  } = props;\r\n  const TypedButton = getButtonByType(type, active);\r\n\r\n  return (\r\n    <TypedButton onClick={onClick} disabled={disabled} aria-label={label}>\r\n      {children}\r\n    </TypedButton>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import styled from \"styled-components\";\r\n\r\nexport default styled.h2`\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\nexport const BigTitle = styled.h1`\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  font-weight: lighter;\r\n  text-align: center;\r\n  margin: 0;\r\n`;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { HELP, MENU, SEARCH, SETTINGS } from \"../../data/types\";\r\nimport R34Icon from \"../../icons/R34Icon\";\r\nimport { setActiveMenu } from \"../../redux/actions\";\r\nimport { selectActiveMenu } from \"../../redux/selectors\";\r\nimport Button from \"../common/Button\";\r\nimport { BigTitle } from \"../common/Title\";\r\n\r\nconst HeaderWrapper = styled.header(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 32px;\r\n    margin: 0 ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst TitleBar = styled.div(\r\n  (props) => css`\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n    margin-bottom: ${props.theme.dimensions.bigSpacing};\r\n  `\r\n);\r\n\r\nconst MenuBar = styled.nav`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default function Header() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <HeaderWrapper>\r\n      <TitleBar>\r\n        <BigTitle>\r\n          <R34Icon size={32} />\r\n          <Divider />\r\n          <span style={{ marginTop: 2 }}>\r\n            Browse <a href=\"https://rule34.xxx\">Rule34</a>\r\n          </span>\r\n        </BigTitle>\r\n      </TitleBar>\r\n\r\n      <MenuBar>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SEARCH}\r\n          onClick={() => dispatch(setActiveMenu(SEARCH))}\r\n          label={SEARCH}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === HELP}\r\n          onClick={() => dispatch(setActiveMenu(HELP))}\r\n          label={HELP}\r\n        >\r\n          Help\r\n        </Button>\r\n        <Button\r\n          type={MENU}\r\n          active={activeMenu === SETTINGS}\r\n          onClick={() => dispatch(setActiveMenu(SETTINGS))}\r\n          label={SETTINGS}\r\n        >\r\n          Settings\r\n        </Button>\r\n      </MenuBar>\r\n    </HeaderWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst FotterWrapper = styled.footer(\r\n  (props) => css`\r\n    display: grid;\r\n    grid-template-columns: 1fr 1px 1fr 1px 1fr;\r\n    justify-content: space-around;\r\n    padding: ${props.theme.dimensions.spacing};\r\n  `\r\n);\r\n\r\nconst Divider = styled.div(\r\n  (props) => css`\r\n    width: 1px;\r\n    height: 20px;\r\n    background: ${props.theme.colors.backgroundColor2};\r\n  `\r\n);\r\n\r\nconst CenteredA = styled.a`\r\n  text-align: center;\r\n`;\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <FotterWrapper>\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=bug_report.md\">\r\n        Report a bug\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react\">\r\n        Github\r\n      </CenteredA>\r\n      <Divider />\r\n      <CenteredA href=\"https://github.com/kurozenzen/r34-react/issues/new?template=feature_request.md\">\r\n        Feature request\r\n      </CenteredA>\r\n    </FotterWrapper>\r\n  );\r\n}\r\n","import styled, { css } from \"styled-components\";\r\n\r\nexport default styled.div(\r\n  (props) => css`\r\n    padding: ${props.theme.dimensions.gutter};\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport const Line = styled.div(\r\n  (props) => css`\r\n    width: 100%;\r\n    height: 1px;\r\n    background: ${props.theme.misc.layer};\r\n  `\r\n);\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\n\r\nconst Input = styled.input(\r\n  (props) => css`\r\n    width: 100%;\r\n    border: none;\r\n    outline: none;\r\n    background: none;\r\n    font-size: 14px;\r\n    border-top: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n    border-bottom: ${props.theme.colors.accentColor}\r\n      ${props.theme.dimensions.borderWidth} solid;\r\n  `\r\n);\r\n\r\ninterface TagInputProps {\r\n  value: string;\r\n  setValue: (newValue: string) => void;\r\n}\r\n\r\nexport default function TagInput(props: TagInputProps) {\r\n  const { value, setValue } = props;\r\n  return (\r\n    <Input\r\n      id=\"tag-input\"\r\n      value={value}\r\n      onChange={(event) => setValue(event.target.value)}\r\n      placeholder=\"Search for tags\"\r\n      aria-label=\"Search\"\r\n    />\r\n  );\r\n}\r\n","export function prettifyTagname(tagname: string) {\r\n  return tagname.replace(/_/g, \" \");\r\n}\r\n\r\nexport function normalizeTagname(tagname: string) {\r\n  return tagname.toLowerCase().replace(/ /g, \"_\");\r\n}\r\n","export const formatCount = (numberString: number) => {\r\n  const number = numberString;\r\n\r\n  if (number >= 1e6) {\r\n    return `${(number / 1e6).toFixed(0)}M`;\r\n  }\r\n\r\n  if (number >= 1e3) {\r\n    return `${(number / 1e3).toFixed(0)}K`;\r\n  }\r\n\r\n  return number;\r\n};\r\n\r\n/**\r\n * @param {String} sourceString\r\n */\r\nexport const formatSource = (sourceString: string) => {\r\n  if (\r\n    sourceString.includes(\"http:\") ||\r\n    sourceString.includes(\"https:\") ||\r\n    sourceString.includes(\"www.\") ||\r\n    sourceString.includes(\".com\")\r\n  ) {\r\n    let semiSanitized = sourceString\r\n      .replace(/https?:\\/\\//, \"\")\r\n      .replace(/ww[w\\d]\\./, \"\")\r\n      .replace(\".com\", \"\")\r\n      .replace(\".org\", \"\")\r\n      .replace(\".net\", \"\");\r\n\r\n    return semiSanitized.substring(0, semiSanitized.indexOf(\"/\"));\r\n  } else {\r\n    return sourceString;\r\n  }\r\n};\r\n","import { useCallback, useState } from \"react\";\r\n\r\nexport default function useToggle(\r\n  initialValue = false\r\n): [boolean, () => void, () => void] {\r\n  const [value, setValue] = useState<boolean>(initialValue);\r\n  const toggleValue = useCallback(() => setValue(!value), [value]);\r\n  const resetValue = useCallback(() => setValue(initialValue), [initialValue]);\r\n\r\n  return [value, toggleValue, resetValue];\r\n}\r\n","import React, { useEffect, MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport \"./Tag.css\";\r\nimport api from \"../../misc/api\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { ArrowIcon } from \"../../icons/Icons\";\r\nimport { prettifyTagname } from \"./tagUtils\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectActiveTags,\r\n  selectAliasesByTagName,\r\n} from \"../../redux/selectors\";\r\nimport { addAliases, removeTag, addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\nimport useToggle from \"../../misc/useToggle\";\r\n\r\nconst dropdownBorderRadius = (collapsed: boolean, theme: ThemeType) =>\r\n  collapsed\r\n    ? theme.dimensions.borderRadius\r\n    : `${theme.dimensions.borderRadius} ${theme.dimensions.borderRadius} 0 0`;\r\n\r\nconst switchingColors = (active: boolean, theme: ThemeType) => {\r\n  const fg = active ? theme.colors.backgroundColor : theme.colors.accentColor;\r\n  const bg = active ? theme.colors.accentColor : theme.colors.backgroundColor;\r\n\r\n  return css`\r\n    color: ${fg};\r\n    background-color: ${bg};\r\n    border: ${theme.colors.accentColor} ${theme.dimensions.borderWidth} solid;\r\n    transition: background-color 0.4s ease-in-out;\r\n\r\n    cursor: pointer;\r\n\r\n    :hover,\r\n    :focus,\r\n    :active {\r\n      border-color: ${theme.colors.backgroundColor2};\r\n      color: ${theme.colors.backgroundColor2};\r\n\r\n      i {\r\n        color: ${theme.colors.backgroundColor2};\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nexport const TagWrapper = styled.div(\r\n  (props: {\r\n    active: boolean;\r\n    collapsed: boolean;\r\n    onMouseLeave: MouseEventHandler;\r\n    theme: ThemeType;\r\n  }) =>\r\n    css`\r\n      display: inline-block;\r\n      padding: 0.25rem;\r\n      border-radius: ${dropdownBorderRadius(props.collapsed, props.theme)};\r\n      font-size: 14px;\r\n      line-height: 1.2;\r\n      vertical-align: baseline;\r\n      margin: ${props.theme.dimensions.spacing};\r\n      ${switchingColors(props.active, props.theme)}\r\n    `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left?: boolean; right?: boolean }) => css`\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface TagProps extends TagDataClass {\r\n  loadAliases: boolean;\r\n}\r\n\r\ntype TagLike = {\r\n  name: string;\r\n  posts: number;\r\n};\r\n\r\nfunction Tag(props: TagProps) {\r\n  const { name, count, modifier, types, loadAliases } = props;\r\n  const activeTags = useSelector(selectActiveTags);\r\n  const aliases = useSelector(selectAliasesByTagName(name));\r\n  const [collapsed, toggleCollapsed, resetCollapsed] = useToggle(true);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (loadAliases && activeTags[name])\r\n      api.getAliases(name).then((newAliases: TagLike[]) => {\r\n        newAliases.sort((a, b) => b.posts - a.posts);\r\n        const filtered = newAliases\r\n          .filter((alias) => !activeTags[alias.name])\r\n          .map((alias) => new TagDataClass(alias.name, [], alias.posts));\r\n        dispatch(addAliases(filtered, name));\r\n      });\r\n  }, [loadAliases, name, activeTags, dispatch]);\r\n\r\n  const isActive = Boolean(activeTags[name]);\r\n  const showAliases = loadAliases && aliases && aliases.length > 0;\r\n\r\n  return (\r\n    <TagWrapper\r\n      active={isActive}\r\n      collapsed={collapsed}\r\n      onMouseLeave={resetCollapsed}\r\n    >\r\n      <TypeIcon types={types} left />\r\n      <TagText name={name} count={count} modifier={modifier} types={types} />\r\n      {showAliases && (\r\n        <>\r\n          <IconWrapper right onClick={toggleCollapsed}>\r\n            <ArrowIcon />\r\n          </IconWrapper>\r\n          <div className={\"dropdown-list\" + (!collapsed ? \" visible\" : \"\")}>\r\n            {aliases.map(({ name, count }) => (\r\n              <Alias key={\"t_\" + name} name={name} count={count} />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </TagWrapper>\r\n  );\r\n}\r\n\r\nfunction TagText(props: TagDataClass) {\r\n  const { name, count, modifier, types } = props;\r\n  const dispatch = useDispatch();\r\n  const tagname = prettifyTagname(name);\r\n  const text = count ? `${tagname} (${formatCount(count)})` : tagname;\r\n  const activeTags = useSelector(selectActiveTags);\r\n\r\n  const onClick = () =>\r\n    activeTags[name]\r\n      ? dispatch(removeTag(new TagDataClass(name, types, count)))\r\n      : dispatch(addTag(new TagDataClass(name, types, count)));\r\n\r\n  return (\r\n    <span onClick={onClick} onKeyDown={(e) => e.keyCode === 32 && onClick()}>\r\n      {modifier === \"-\" ? <s>{text}</s> : text}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction Alias(props: TagDataClass) {\r\n  const { name, count } = props;\r\n  return (\r\n    <div className=\"alias\">\r\n      <TagText name={name} count={count} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tag;\r\n","import React, { MouseEventHandler, memo } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { TagWrapper } from \"../components/tag/Tag\";\r\nimport { ThemeType } from \"../misc/theme\";\r\n\r\nexport const StyledIcon = styled.i(\r\n  (props) => css`\r\n    ${(props: { color: string; size: number; theme: ThemeType }) => `\r\n    color: ${props.color};\r\n    min-width: ${props.size}px;\r\n    height: ${props.size}px;\r\n\r\n    ${TagWrapper}:hover & {\r\n      color: ${props.theme.colors.accentColor};\r\n    }\r\n\r\n    ${TagWrapper}:active & ,  ${TagWrapper}:focus & {\r\n      color: ${props.theme.colors.backgroundColor2};\r\n    }\r\n  `}\r\n  `\r\n);\r\n\r\nconst IconWrapper = styled.span(\r\n  (props: { left: boolean; right: boolean }) => css`\r\n    line-height: 16px;\r\n    ${props.left ? \"margin-right: 5px;\" : \"\"}\r\n    ${props.right ? \"margin-left: 5px;\" : \"\"}\r\n  `\r\n);\r\n\r\ninterface IconProps {\r\n  icon: string;\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nconst Icon = (props: IconProps) => {\r\n  const {\r\n    icon,\r\n    className = \"\",\r\n    color = \"black\",\r\n    size = 14,\r\n    onClick = () => {},\r\n    left = false,\r\n    right = false,\r\n  } = props;\r\n  return (\r\n    <IconWrapper onClick={onClick} left={left} right={right}>\r\n      <StyledIcon\r\n        className={`fas ${icon} ${className}`}\r\n        color={color}\r\n        size={size}\r\n      />\r\n    </IconWrapper>\r\n  );\r\n};\r\n\r\nexport const CharacterIcon = styled(Icon).attrs({\r\n  icon: \"fa-user\",\r\n})``;\r\n\r\nexport const ArtistIcon = styled(Icon).attrs({\r\n  icon: \"fa-pen\",\r\n})``;\r\n\r\nexport const CopyrightIcon = styled(Icon).attrs({\r\n  icon: \"fa-copyright\",\r\n})``;\r\n\r\nexport const PlusIcon = styled(Icon).attrs({\r\n  icon: \"fa-plus-circle\",\r\n})``;\r\n\r\nexport const MinusIcon = styled(Icon).attrs({\r\n  icon: \"fa-minus-circle\",\r\n})``;\r\n\r\nexport const CloseIcon = styled(Icon).attrs({\r\n  icon: \"fa-times\",\r\n})``;\r\n\r\nexport const ExpandIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-expand\",\r\n  })``\r\n);\r\n\r\nexport const ArrowIcon = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ExternalLinkIcon = styled(Icon).attrs({\r\n  icon: \"fa-external-link-alt\",\r\n})``;\r\n\r\nexport const SourceIcon = styled(Icon).attrs({\r\n  icon: \"fa-hashtag\",\r\n})``;\r\n\r\nexport const RatingIcon = styled(Icon).attrs({\r\n  icon: \"fa-registered\",\r\n})``;\r\n\r\nexport const HeartIcon = styled(Icon).attrs({\r\n  icon: \"fa-heart\",\r\n})``;\r\n\r\nexport const PlayIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-play\",\r\n  })``\r\n);\r\n\r\nexport const PauseIcon = memo(\r\n  styled(Icon).attrs({\r\n    icon: \"fa-pause\",\r\n  })``\r\n);\r\n\r\nexport const ArrowUp = styled(Icon).attrs({\r\n  icon: \"fa-caret-down\",\r\n})``;\r\n\r\nexport const ArrowDown = styled(Icon).attrs({\r\n  icon: \"fa-caret-up\",\r\n})``;\r\n","export const PICTURE = \"picture\";\r\nexport const GIF = \"gif\";\r\nexport const VIDEO = \"video\";\r\n\r\nexport const NO_OP = () => {};\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport { CharacterIcon, CopyrightIcon, ArtistIcon } from \"./Icons\";\r\nimport { NO_OP } from \"../data/constants\";\r\n\r\ninterface TypeIconProps {\r\n  types?: string[];\r\n  className?: string;\r\n  color?: string;\r\n  size?: number;\r\n  onClick?: MouseEventHandler;\r\n  left?: boolean;\r\n  right?: boolean;\r\n}\r\n\r\nexport default function TypeIcon(props: TypeIconProps) {\r\n  const { types = [], className = \"\", onClick = NO_OP } = props;\r\n  const interestingType = types.find((t) => !t.match(/^[general|ambiguous]$/));\r\n\r\n  switch (interestingType) {\r\n    case \"character\":\r\n      return <CharacterIcon className={className} onClick={onClick} left />;\r\n    case \"copyright\":\r\n      return <CopyrightIcon className={className} onClick={onClick} left />;\r\n    case \"artist\":\r\n      return <ArtistIcon className={className} onClick={onClick} left />;\r\n    default:\r\n      return <div className={className}></div>;\r\n  }\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TypeIcon from \"../../icons/TypeIcon\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { prettifyTagname } from \"../tag/tagUtils\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { TagType } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nfunction sizeAndPosition(tagSelector: HTMLDivElement | null) {\r\n  if (tagSelector) {\r\n    const { offsetTop, clientHeight, offsetLeft, clientWidth } = tagSelector;\r\n\r\n    return `\r\n      position: absolute;\r\n      top: ${offsetTop + clientHeight - 2}px;\r\n      left: ${offsetLeft}px;\r\n      width: ${clientWidth}px;`;\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nexport const ListWrapper = styled.div(\r\n  (props: { tagSelectorRef: HTMLDivElement | null; theme: ThemeType }) => css`\r\n    ${sizeAndPosition(props.tagSelectorRef)};\r\n    background: white;\r\n    box-sizing: border-box;\r\n    border: ${props.theme.dimensions.borderWidth}\r\n      ${props.theme.colors.accentColor} solid;\r\n    border-radius: 0 0 3px 3px;\r\n    color: black;\r\n    z-index: 1;\r\n  `\r\n);\r\n\r\ninterface DropdownListProps {\r\n  tagSelectorRef: HTMLDivElement | null;\r\n  entries: {\r\n    name: string;\r\n    posts: number;\r\n    types: TagType[];\r\n  }[];\r\n  onClick: (entry: TagDataClass) => void;\r\n}\r\n\r\nexport default function DropdownList(props: DropdownListProps) {\r\n  const { tagSelectorRef, entries, onClick } = props;\r\n\r\n  return entries && entries.length > 0 ? (\r\n    <ListWrapper tagSelectorRef={tagSelectorRef}>\r\n      {entries.map((entry) => (\r\n        <Entry\r\n          key={entry.name}\r\n          onClick={() => onClick(entry)}\r\n          {...entry}\r\n        ></Entry>\r\n      ))}\r\n    </ListWrapper>\r\n  ) : null;\r\n}\r\n\r\nconst EntryWrapper = styled.div`\r\n  display: flex;\r\n  height: 28px;\r\n\r\n  > * {\r\n    margin: auto;\r\n  }\r\n\r\n  &:not(:last-child) {\r\n    border-bottom: 1px grey solid;\r\n  }\r\n\r\n  :focus {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst TypeWrapper = styled.span`\r\n  flex: 0 0 48px;\r\n  text-align: center;\r\n`;\r\n\r\ninterface EntryProps {\r\n  name: string;\r\n  posts: number;\r\n  types: TagType[];\r\n  onClick: MouseEventHandler;\r\n}\r\n\r\nconst Entry = (props: EntryProps) => {\r\n  const { name, posts, types, onClick } = props;\r\n\r\n  return (\r\n    <EntryWrapper onClick={onClick}>\r\n      <TypeWrapper>\r\n        <TypeIcon types={types} />\r\n      </TypeWrapper>\r\n\r\n      <span style={{ flexGrow: 1 }}>{prettifyTagname(name)}</span>\r\n      <span style={{ paddingRight: 5 }}>{formatCount(posts)} posts</span>\r\n    </EntryWrapper>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport api from \"../../misc/api\";\r\nimport { prepareTag } from \"../../misc/prepare\";\r\nimport Button, { AddButton, ModifierButton } from \"../common/Button\";\r\nimport TagInput from \"./TagInput\";\r\nimport DropdownList from \"./DropdownList\";\r\nimport { normalizeTagname } from \"../tag/tagUtils\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addTag } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagSelectorWrapper = styled.div(\r\n  (props: {\r\n    closed: boolean;\r\n    ref: (ref: HTMLInputElement) => void;\r\n    theme: ThemeType;\r\n  }) => css`\r\n    display: flex;\r\n    background: white;\r\n    ${props.closed\r\n      ? `border-radius: ${props.theme.dimensions.borderRadius};`\r\n      : `\r\n        border-radius: ${props.theme.dimensions.borderRadius} ${props.theme.dimensions.borderRadius} 0 0;\r\n\r\n        > ${AddButton} {\r\n          border-radius: 0 ${props.theme.dimensions.borderRadius} 0 0;\r\n        }\r\n\r\n        > ${ModifierButton} {\r\n          border-radius: ${props.theme.dimensions.borderRadius} 0 0 0;\r\n        }\r\n      `}\r\n  `\r\n);\r\n\r\nexport default function TagSelector() {\r\n  const dispatch = useDispatch();\r\n  const [value, setValue] = useState(\"\");\r\n  const [modifier, setModifier] = useState(\"+\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const [tagSelectorRef, setTagSelectorRef] = useState<HTMLDivElement | null>(\r\n    null\r\n  );\r\n\r\n  const activateTag = useCallback(\r\n    (suggestion) => {\r\n      dispatch(\r\n        addTag(\r\n          prepareTag({\r\n            name: suggestion.name,\r\n            modifier: modifier,\r\n            count: suggestion.posts,\r\n            types: suggestion.types,\r\n          })\r\n        )\r\n      );\r\n\r\n      setValue(\"\");\r\n      setSuggestions([]);\r\n    },\r\n    [dispatch, modifier]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handle = setTimeout(() => {\r\n      if (value && value !== \"\")\r\n        api.getTags(normalizeTagname(value)).then((newSuggestions) => {\r\n          setSuggestions(newSuggestions);\r\n        });\r\n    }, 400);\r\n\r\n    return () => clearTimeout(handle);\r\n  }, [value]);\r\n\r\n  const onModifierClick = useCallback(\r\n    () => setModifier(modifier === \"+\" ? \"-\" : \"+\"),\r\n    [modifier, setModifier]\r\n  );\r\n\r\n  const onAddClick = useCallback(() => {\r\n    if (value && value.trim() !== \"\") {\r\n      const suggestion =\r\n        suggestions.find((s: { name: string }) => s.name === value) || {};\r\n      activateTag({ ...suggestion, name: value });\r\n    }\r\n  }, [value, activateTag, suggestions]);\r\n\r\n  return (\r\n    <TagSelectorWrapper\r\n      ref={setTagSelectorRef}\r\n      closed={suggestions.length === 0}\r\n    >\r\n      <Button type=\"modifier\" onClick={onModifierClick} label=\"Tag Modifier\">\r\n        {modifier}\r\n      </Button>\r\n      <TagInput value={value} setValue={setValue} />\r\n      <Button type=\"add\" onClick={onAddClick} label=\"Add Tag\">\r\n        Add\r\n      </Button>\r\n      {suggestions.length > 0 && (\r\n        <DropdownList\r\n          tagSelectorRef={tagSelectorRef}\r\n          entries={suggestions}\r\n          onClick={(entry) => activateTag(entry)}\r\n        />\r\n      )}\r\n    </TagSelectorWrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nconst Wrapper = styled.div(\r\n  (props) => css`\r\n    border-radius: 30px;\r\n    width: 50px;\r\n    border: ${props.theme.dimensions.borderWidth} solid\r\n      ${props.theme.colors.accentColor};\r\n    background-color: ${props.theme.colors.backgroundColor};\r\n    transition: transform 0.4s ease-in-out;\r\n  `\r\n);\r\n\r\nconst Thumb = styled.div(\r\n  (props: { value: boolean; theme: ThemeType }) => css`\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: ${props.value\r\n      ? props.theme.colors.accentColor\r\n      : props.theme.colors.backgroundColor2};\r\n    border-radius: 50%;\r\n    transition: all 0.2s ease-in-out;\r\n    transform: translate(${props.value ? \"30px\" : \"0px\"});\r\n  `\r\n);\r\n\r\ninterface ToggleProps {\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function Toggle(props: ToggleProps) {\r\n  const { value, onToggle } = props;\r\n\r\n  return (\r\n    <Wrapper onClick={onToggle}>\r\n      <Thumb value={value} />\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Toggle from \"./Toggle\";\r\n\r\nconst ToggleWrapper = styled.label`\r\n  display: flex;\r\n`;\r\n\r\nconst Label = styled.span(\r\n  (props) => css`\r\n    margin: auto;\r\n    margin-left: ${props.theme.dimensions.gutter};\r\n  `\r\n);\r\n\r\ninterface LabeledToggleProps {\r\n  children: JSX.Element | string;\r\n  value: boolean;\r\n  onToggle: MouseEventHandler;\r\n}\r\n\r\nexport default function LabeledToggle(props: LabeledToggleProps) {\r\n  const { children, value, onToggle } = props;\r\n\r\n  return (\r\n    <ToggleWrapper>\r\n      <Toggle value={value} onToggle={onToggle} />\r\n      <Label>{children}</Label>\r\n    </ToggleWrapper>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport LabeledToggle from \"../common/LabeledToggle\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectPreferences } from \"../../redux/selectors\";\r\nimport { setOption } from \"../../redux/actions\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\nimport { INFINITE, RATED, RATEDTRESHOLD, ORIGINALS } from \"../../data/types\";\r\n\r\nconst OptionsWrapper = styled.div(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst StyledInput = styled.input(\r\n  (props: { value: number; theme: ThemeType }) => css`\r\n    background: none;\r\n    border: none;\r\n    outline: none;\r\n    color: ${props.theme.colors.accentColor};\r\n    max-height: 16px;\r\n    width: ${0.57 * String(props.value).length}em;\r\n    text-align: right;\r\n    font-size: 14px;\r\n    margin: -1px 0.2em 0 0.2em;\r\n\r\n    ::-webkit-inner-spin-button,\r\n    ::-webkit-outer-spin-button {\r\n      -webkit-appearance: none;\r\n      margin: 0;\r\n    }\r\n    -moz-appearance: textfield;\r\n  `\r\n);\r\n\r\nexport default function Options() {\r\n  const dispatch = useDispatch();\r\n  const { infinite, rated, ratedTreshold, originals } = useSelector(\r\n    selectPreferences\r\n  );\r\n\r\n  const [ratedInputValue, setRatedInputValue] = useState(ratedTreshold);\r\n\r\n  return (\r\n    <OptionsWrapper>\r\n      <LabeledToggle\r\n        value={infinite}\r\n        onToggle={() => dispatch(setOption(INFINITE, !infinite))}\r\n      >\r\n        Infinite Scroll\r\n      </LabeledToggle>\r\n      <LabeledToggle\r\n        value={rated}\r\n        onToggle={() => dispatch(setOption(RATED, !rated))}\r\n      >\r\n        {rated ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            Above\r\n            <StyledInput\r\n              type=\"number\"\r\n              value={ratedInputValue}\r\n              onChange={(event) =>\r\n                setRatedInputValue(Number(event.target.value))\r\n              }\r\n              onBlur={() => dispatch(setOption(RATEDTRESHOLD, ratedInputValue))}\r\n            />\r\n            likes\r\n          </div>\r\n        ) : (\r\n          \"Only show Rated Posts\"\r\n        )}\r\n      </LabeledToggle>\r\n\r\n      <LabeledToggle\r\n        value={originals}\r\n        onToggle={() => dispatch(setOption(ORIGINALS, !originals))}\r\n      >\r\n        Load Original Sizes\r\n      </LabeledToggle>\r\n    </OptionsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport Tag from \"./Tag\";\r\nimport { SimpleMap } from \"../../data/types\";\r\nimport { ThemeType } from \"../../misc/theme\";\r\n\r\nexport const TagListWrapper = styled.div(\r\n  (props: { padding: boolean; theme: ThemeType }) => css`\r\n    display: inline-flex;\r\n    flex-wrap: wrap;\r\n    margin: calc(\r\n      ${props.padding ? props.theme.dimensions.gutter : \"0px\"} -\r\n        ${props.theme.dimensions.spacing}\r\n    );\r\n  `\r\n);\r\n\r\ninterface TagListProps {\r\n  tags: SimpleMap<TagDataClass>;\r\n  loadAliases?: boolean;\r\n  padding?: boolean;\r\n}\r\n\r\nexport default function TagList(props: TagListProps) {\r\n  const { tags, loadAliases = false, padding = false } = props;\r\n\r\n  return (\r\n    <div>\r\n      <TagListWrapper padding={padding}>\r\n        {Object.entries(tags).map(([key, tag]) => (\r\n          <Tag key={key} {...tag} loadAliases={loadAliases} />\r\n        ))}\r\n      </TagListWrapper>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Title from \"../components/common/Title\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport TagSelector from \"../components/tagSelector/TagSelector\";\r\nimport Options from \"../components/features/Options\";\r\nimport TagList from \"../components/tag/TagList\";\r\n\r\nexport default function Help() {\r\n  return (\r\n    <>\r\n      <Title>Help</Title>\r\n      <Surface>\r\n        <Title>Searching for Tags</Title>\r\n        <Line />\r\n        <TagSelector />\r\n        <Line />\r\n        <p>\r\n          You can use the Tag Selector to look for tags you like.The Tag\r\n          Selector has 4 parts.\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            The modifier (left) determines wether posts must match a tag or not.\r\n            Putting \"-\" will hide all posts with this tag\r\n          </li>\r\n          <li>\r\n            The Search Box (center) allows you to search for tags. As soon as\r\n            you start typing the Tag Selector will show you relevant tags to\r\n            choose from (4).\r\n          </li>\r\n          <li>\r\n            The Add Button (right) Allows you to add any tag to the current\r\n            filter. Usefull when using wildcards.\r\n          </li>\r\n          <li>\r\n            The Tag Dropdown (left) automatically shows tags that start with\r\n            your input. It also includes The number of posts tagged, to allow\r\n            you to weigh tags against each other.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Options</Title>\r\n        <Line />\r\n        <Options />\r\n        <Line />\r\n        <p>\r\n          Options allow you to customize your experience in various ways. There\r\n          are 3 options available\r\n        </p>\r\n        <ol>\r\n          <li>\r\n            Infinite Scrolling automatically loads new posts when you get close\r\n            to the bottom of the page.\r\n          </li>\r\n          <li>\r\n            Only show Rated posts filters out posts below the specified amount\r\n            of posts.\r\n          </li>\r\n          <li>\r\n            Load original sizes always loads the highest quality of an image.\r\n            This can easily cause extreme data consumption. Don't use with\r\n            mobile data.\r\n          </li>\r\n        </ol>\r\n      </Surface>\r\n      <Surface>\r\n        <Title>Tags</Title>\r\n        <Line />\r\n        <TagList\r\n          tags={{\r\n            \"Tag 1\": { name: \"Tag 1\" },\r\n            \"Tag 2\": { name: \"Tag 2\", types: [\"character\"] },\r\n            \"Tag 3\": {\r\n              name: \"Tag 3\",\r\n              modifier: \"-\",\r\n              types: [\"copyright\"],\r\n              count: 1020,\r\n            },\r\n          }}\r\n        />\r\n        <Line />\r\n        <p>\r\n          This whole application is based on tags. Every Post has multiple tags.\r\n          Usually you can enable/disable a tag just by tapping it. If a tag is\r\n          red it means its active. The icons next to the name show what type of\r\n          tag it is. Not every tag has a type. The number on the right shows how\r\n          many posts there are with that tag.\r\n        </p>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BlockButton } from \"../components/common/Button\";\r\nimport Surface, { Line } from \"../components/common/Surface\";\r\nimport Title from \"../components/common/Title\";\r\nimport { reset } from \"../redux/actions\";\r\n\r\nexport default function Settings() {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <>\r\n      <Title>Settings</Title>\r\n      <Surface>\r\n        <Title>General</Title>\r\n        <p>nothing yet</p>\r\n        <Line />\r\n        <Title>Developer</Title>\r\n        <BlockButton onClick={() => dispatch(reset())}>\r\n          Reset Application\r\n        </BlockButton>\r\n      </Surface>\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { BLOCK } from \"../../data/types\";\r\nimport { getResults } from \"../../redux/actions\";\r\nimport Button from \"../common/Button\";\r\n\r\nexport default function SearchButton() {\r\n  const dispatch = useDispatch();\r\n  const search = useCallback(() => dispatch(getResults()), [dispatch]);\r\n\r\n  return (\r\n    <Button type={BLOCK} onClick={search} label=\"Search\">\r\n      Search\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveTags } from \"../../redux/selectors\";\r\nimport TagList from \"../tag/TagList\";\r\n\r\nexport default function ActiveTags() {\r\n  const activeTags = useSelector(selectActiveTags);\r\n\r\n  return Object.keys(activeTags).length > 0 ? (\r\n    <TagList tags={activeTags} loadAliases />\r\n  ) : null;\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport TagSelector from \"../tagSelector/TagSelector\";\r\nimport Options from \"./Options\";\r\nimport Title from \"../common/Title\";\r\nimport Surface from \"../common/Surface\";\r\nimport SearchButton from \"./SearchButton\";\r\nimport ActiveTags from \"./ActiveTags\";\r\n\r\nconst ConfigWrapper = styled.section(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function Config() {\r\n  return (\r\n    <ConfigWrapper>\r\n      <Title>\r\n        <label htmlFor=\"tag-input\">Search</label>\r\n      </Title>\r\n      <Surface>\r\n        <TagSelector />\r\n        <ActiveTags />\r\n        <Options />\r\n        <SearchButton />\r\n      </Surface>\r\n    </ConfigWrapper>\r\n  );\r\n}\r\n","import { RatingType } from \"../../../data/types\";\r\nimport React from \"react\";\r\nimport { RatingIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: RatingType }) => (\r\n  <span>\r\n    <RatingIcon color=\"white\" left />\r\n    {props.value[0].toUpperCase()}\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { HeartIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: number }) => (\r\n  <span>\r\n    {props.value}\r\n    <HeartIcon color=\"white\" right />\r\n  </span>\r\n);\r\n","import React from \"react\";\r\nimport { formatSource } from \"../../../misc/formatting\";\r\nimport { ExternalLinkIcon, SourceIcon } from \"../../../icons/Icons\";\r\n\r\nexport default (props: { value: string }) =>\r\n  props.value.startsWith(\"http\") ? (\r\n    <a\r\n      href={props.value}\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      className=\"source\"\r\n    >\r\n      <ExternalLinkIcon color=\"red\" left />\r\n      {formatSource(props.value)}\r\n    </a>\r\n  ) : (\r\n    <span>\r\n      <SourceIcon color=\"white\" left />\r\n      {props.value}\r\n    </span>\r\n  );\r\n","import React, { useMemo } from \"react\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport TagList, { TagListWrapper } from \"../tag/TagList\";\r\nimport { RatingType } from \"../../data/types\";\r\nimport TagDataClass from \"../../data/Tag\";\r\nimport { listToMap } from \"../../data/utils\";\r\nimport Rating from \"./widgets/Rating\";\r\nimport Score from \"./widgets/Score\";\r\nimport Source from \"./widgets/Source\";\r\n\r\nconst fold = keyframes`\r\n  from {\r\n    max-height: 0px;\r\n  }\r\n\r\n  to {\r\n    max-height: 1500px;\r\n  }\r\n`;\r\n\r\nconst DetailsWrapper = styled.div(\r\n  (props) => css`\r\n    > ${TagListWrapper} {\r\n      padding: ${props.theme.dimensions.spacing};\r\n    }\r\n    max-height: unset;\r\n    /* animation: ${fold} 0.4s ease-in; */\r\n  `\r\n);\r\n\r\nconst Bar = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    background: ${props.theme.misc.layer};\r\n    padding: ${props.theme.dimensions.spacing};\r\n    border-radius: 0 0 ${props.theme.dimensions.borderRadius}\r\n      ${props.theme.dimensions.borderRadius};\r\n    ${props.theme.shadow.box};\r\n\r\n    > span,\r\n    > a {\r\n      margin: ${props.theme.dimensions.spacing};\r\n      line-height: 1rem;\r\n      height: 1rem;\r\n    }\r\n  `\r\n);\r\n\r\ninterface DetailsProps {\r\n  rating: RatingType;\r\n  score: number;\r\n  source: string;\r\n  tags: TagDataClass[];\r\n}\r\n\r\nexport default function Details(props: DetailsProps) {\r\n  const { rating, score, source, tags } = props;\r\n  const tagsForRendering = useMemo(() => listToMap(tags, \"name\"), [tags]);\r\n\r\n  return (\r\n    <DetailsWrapper>\r\n      <Bar>\r\n        {rating && <Rating value={rating} />}\r\n        {score && <Score value={score} />}\r\n        {source && <Source value={source} />}\r\n      </Bar>\r\n      <TagList tags={tagsForRendering} padding loadAliases={false} />\r\n    </DetailsWrapper>\r\n  );\r\n}\r\n","import { SimpleMap } from \"./types\";\r\n\r\nexport const listToMap = <T>(list: T[], keyProp: string): SimpleMap<T> => {\r\n  return list.reduce((result: SimpleMap<T>, current: any) => {\r\n    result[current[keyProp]] = current;\r\n    return result;\r\n  }, {});\r\n};\r\n","import React, { MouseEventHandler } from \"react\";\r\nimport Button from \"../common/Button\";\r\nimport { ExpandIcon, PlayIcon, PauseIcon } from \"../../icons/Icons\";\r\nimport styled, { css, keyframes } from \"styled-components\";\r\nimport { NO_OP } from \"../../data/constants\";\r\nimport useToggle from \"../../misc/useToggle\";\r\n\r\nconst fade = keyframes`\r\n  from {\r\n    opacity: 1;\r\n  }\r\n\r\n  to {\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div(\r\n  (props: { isVisible: boolean }) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    ${!props.isVisible\r\n      ? css`\r\n          opacity: 0;\r\n          animation: ${fade} 0.4s ease-in-out;\r\n        `\r\n      : \"\"};\r\n  `\r\n);\r\n\r\nconst ProgressBar = styled.div(\r\n  (props) => css`\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    height: 5px;\r\n    background-color: ${props.theme.colors.accentColor};\r\n  `\r\n);\r\n\r\ninterface OverlayProps {\r\n  onFullscreen?: MouseEventHandler;\r\n  togglePlay?: MouseEventHandler;\r\n  isPaused?: boolean;\r\n  isPlayable: boolean;\r\n  currentTime?: number;\r\n  duration?: number;\r\n}\r\n\r\nfunction Overlay(props: OverlayProps) {\r\n  const {\r\n    onFullscreen = NO_OP,\r\n    togglePlay = NO_OP,\r\n    isPaused = true,\r\n    isPlayable = false,\r\n    currentTime = 0,\r\n    duration = null,\r\n  } = props;\r\n\r\n  const [isVisible, toggleVisible] = useToggle();\r\n\r\n  return (\r\n    <Wrapper isVisible={isPaused || isVisible} onClick={toggleVisible}>\r\n      {onFullscreen && (\r\n        <Button type=\"topLeft\" onClick={onFullscreen} label=\"Open Fullscreen\">\r\n          <ExpandIcon color=\"white\" />\r\n        </Button>\r\n      )}\r\n\r\n      {isPlayable && (\r\n        <>\r\n          <Button type=\"center\" onClick={togglePlay} label=\"Play/Pause\">\r\n            {isPaused ? (\r\n              <PlayIcon color=\"white\" size={50} />\r\n            ) : (\r\n              <PauseIcon color=\"white\" size={50} />\r\n            )}\r\n          </Button>\r\n          {!!duration && !!currentTime && (\r\n            <ProgressBar\r\n              style={{ width: `${(currentTime / duration) * 100}%` }}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default Overlay;\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\nimport { openFullscreen } from \"./utils\";\r\n\r\nconst FlexVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface VideoProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport default function Video(props: VideoProps) {\r\n  const { src, thumbnail_src, onLoad } = props;\r\n\r\n  const [videoRef, setVideoRef] = useState<HTMLVideoElement | null>(null);\r\n\r\n  const [, setTime] = useState(Date.now());\r\n  const [intervalId, setIntervalId] = useState<NodeJS.Timeout | null>(null);\r\n\r\n  const play = useCallback(() => {\r\n    videoRef && videoRef.play();\r\n\r\n    // ~30 fps\r\n    const id = setInterval(() => {\r\n      setTime(Date.now());\r\n    }, 34);\r\n\r\n    setIntervalId(id);\r\n  }, [videoRef]);\r\n\r\n  const pause = useCallback(() => {\r\n    videoRef && videoRef.pause();\r\n    clearInterval(intervalId as NodeJS.Timeout);\r\n    setIntervalId(null);\r\n  }, [videoRef, intervalId]);\r\n\r\n  const onFullscreen = useCallback(() => videoRef && openFullscreen(videoRef), [\r\n    videoRef,\r\n  ]);\r\n\r\n  const togglePlay = useCallback(\r\n    (event) => {\r\n      event.stopPropagation();\r\n      videoRef && (videoRef.paused ? play() : pause());\r\n    },\r\n    [videoRef, play, pause]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <FlexVideo\r\n        controls={false}\r\n        loop\r\n        src={src}\r\n        poster={thumbnail_src}\r\n        preload=\"metadata\"\r\n        ref={setVideoRef}\r\n        onLoad={onLoad}\r\n      />\r\n      <Overlay\r\n        isPaused={videoRef ? videoRef.paused : true}\r\n        currentTime={videoRef ? videoRef.currentTime : undefined}\r\n        duration={videoRef ? videoRef.duration : undefined}\r\n        onFullscreen={onFullscreen}\r\n        togglePlay={togglePlay}\r\n        isPlayable\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { PostType, VIDEO, GIF, PICTURE } from \"../../data/types\";\r\n\r\nexport const openFullscreen = (elem: HTMLVideoElement) => {\r\n  elem.requestFullscreen();\r\n};\r\n\r\nexport const getMediaType = (type: PostType, src: string) => {\r\n  if (type === VIDEO) {\r\n    return VIDEO;\r\n  }\r\n\r\n  // can't use .endsWith because of queryString\r\n  if (src.includes(\".gif\")) {\r\n    return GIF;\r\n  }\r\n\r\n  return PICTURE;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface GifProps {\r\n  src: string;\r\n  thumbnail_src: string;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport default function Gif(props: GifProps) {\r\n  const { src, thumbnail_src, onLoad } = props;\r\n\r\n  const [isPaused, setPaused] = useState(true);\r\n  const usedSource = isPaused ? thumbnail_src : src;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage\r\n        src={usedSource}\r\n        alt={usedSource}\r\n        loading=\"lazy\"\r\n        onLoad={onLoad}\r\n      />\r\n      <Overlay\r\n        isPlayable\r\n        isPaused={isPaused}\r\n        togglePlay={(event) => {\r\n          event.stopPropagation();\r\n          setPaused(!isPaused);\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Overlay from \"./Overlay\";\r\n\r\nconst FlexImage = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  max-height: 100vh;\r\n  display: block;\r\n  object-fit: contain;\r\n`;\r\n\r\ninterface PictureProps {\r\n  src: string;\r\n  onLoad: () => void;\r\n}\r\n\r\nexport default function Picture(props: PictureProps) {\r\n  const { src, onLoad } = props;\r\n\r\n  return (\r\n    <>\r\n      <FlexImage src={src} alt={src} onLoad={onLoad} loading=\"lazy\" />\r\n      <Overlay isPlayable={false} />\r\n    </>\r\n  );\r\n}\r\n","import React, { MouseEventHandler, useMemo } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Video from \"./Video\";\r\nimport Gif from \"./Gif\";\r\nimport Picture from \"./Picture\";\r\nimport { VIDEO, GIF } from \"../../data/constants\";\r\nimport { getMediaType } from \"./utils\";\r\nimport { PostType } from \"../../data/types\";\r\n\r\nconst PlayerWrapper = styled.div`\r\n  display: inline-block;\r\n  position: relative;\r\n`;\r\n\r\ninterface PlayerProps {\r\n  type: PostType;\r\n  src: string;\r\n  thumbnail_src: string;\r\n  toggleDetails: MouseEventHandler;\r\n  onLoad: () => void;\r\n}\r\n\r\nconst getMedia = (type: PostType, src: string) => {\r\n  switch (getMediaType(type, src)) {\r\n    case VIDEO:\r\n      return Video;\r\n    case GIF:\r\n      return Gif;\r\n    default:\r\n      return Picture;\r\n  }\r\n};\r\n\r\nexport default function Player(props: PlayerProps) {\r\n  const { toggleDetails, type, src, thumbnail_src, onLoad } = props;\r\n\r\n  const media = useMemo(() => {\r\n    const MediaComponent = getMedia(type, src);\r\n    return (\r\n      <MediaComponent src={src} thumbnail_src={thumbnail_src} onLoad={onLoad} />\r\n    );\r\n  }, [type, src, thumbnail_src, onLoad]);\r\n\r\n  return <PlayerWrapper onClick={toggleDetails}>{media}</PlayerWrapper>;\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Details from \"./Details\";\r\nimport Player from \"../player/Player\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectOriginals } from \"../../redux/selectors\";\r\nimport PostDataClass from \"../../data/Post\";\r\n\r\nconst PostWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: ${props.theme.misc.layer};\r\n    ${props.theme.shadow.box};\r\n    border-radius: ${props.theme.dimensions.borderRadius};\r\n    overflow: hidden;\r\n    padding-bottom: ${props.theme.dimensions.bigSpacing};\r\n    box-sizing: border-box;\r\n  `\r\n);\r\n\r\nexport function getCorrectSource(\r\n  loadOriginal: boolean,\r\n  big_src: string,\r\n  small_src: string,\r\n  id: number\r\n) {\r\n  let src;\r\n  if (loadOriginal) {\r\n    src = big_src;\r\n  } else {\r\n    src = `${small_src}?${id}`;\r\n    if (src.includes(\"//images\")) {\r\n      src = src.replace(\"//images\", \"/images\");\r\n    }\r\n  }\r\n\r\n  return src;\r\n}\r\n\r\nexport default function Post(\r\n  props: PostDataClass & { style: any; onLoad: () => void; virtualRef: any }\r\n) {\r\n  const {\r\n    id,\r\n    media_type,\r\n    small_src,\r\n    big_src,\r\n    thumbnail_src,\r\n    rating,\r\n    score,\r\n    source,\r\n    tags,\r\n    style,\r\n    onLoad,\r\n    virtualRef,\r\n  } = props;\r\n  const originals = useSelector(selectOriginals);\r\n  const media_src = getCorrectSource(originals, big_src, small_src, id);\r\n  const [collapsed, setCollapsed] = useState(true);\r\n\r\n  const toggleDetails = useCallback(() => {\r\n    setCollapsed(!collapsed);\r\n    setTimeout(onLoad, 100);\r\n  }, [collapsed, onLoad]);\r\n\r\n  return (\r\n    <PostWrapper style={style} ref={virtualRef}>\r\n      <Player\r\n        onLoad={onLoad}\r\n        type={media_type}\r\n        src={media_src}\r\n        thumbnail_src={thumbnail_src}\r\n        toggleDetails={toggleDetails}\r\n      />\r\n      {!collapsed && (\r\n        <Details rating={rating} score={score} source={source} tags={tags} />\r\n      )}\r\n    </PostWrapper>\r\n  );\r\n}\r\n","import React, { useCallback, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  List,\r\n  CellMeasurerCache,\r\n  CellMeasurer,\r\n  InfiniteLoader,\r\n  IndexRange,\r\n  WindowScroller,\r\n  AutoSizer,\r\n} from \"react-virtualized\";\r\nimport \"react-virtualized/styles.css\";\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  selectCount,\r\n  selectOutOfResults,\r\n  selectPosts,\r\n} from \"../../redux/selectors\";\r\nimport Post from \"./Post\";\r\nimport { resolve } from \"path\";\r\n\r\nconst cache = new CellMeasurerCache({\r\n  fixedWidth: true,\r\n});\r\n\r\nexport default function DynamicList({\r\n  isLoading,\r\n  setLoading,\r\n  loadMore,\r\n}: {\r\n  isLoading: boolean;\r\n  setLoading: (value: boolean) => void;\r\n  loadMore: () => void;\r\n}) {\r\n  const posts = useSelector(selectPosts);\r\n  const count = useSelector(selectCount);\r\n  const outOfResults = useSelector(selectOutOfResults);\r\n\r\n  // If there are more items to be loaded then add an extra row to hold a loading indicator.\r\n  const rowCount = posts.length;\r\n\r\n  // Only load 1 page of items at a time.\r\n  // Pass an empty callback to InfiniteLoader in case it asks us to load more than once.\r\n  const loadMoreRows = (params: IndexRange) => {\r\n    console.log(\"LOADING MORE\");\r\n    if (isLoading || outOfResults) {\r\n      return Promise.resolve(0);\r\n    }\r\n\r\n    loadMore();\r\n\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        resolve(1);\r\n      }, 1000);\r\n    });\r\n  };\r\n\r\n  // Every row is loaded except for our loading indicator row.\r\n  const isRowLoaded = ({ index }: { index: number }) => {\r\n    console.log(\"CHECK: \" + index);\r\n    return index < posts.length - 1;\r\n  };\r\n\r\n  const rowRenderer = useCallback(\r\n    ({\r\n      index,\r\n      key,\r\n      parent,\r\n      style,\r\n    }: {\r\n      index: number;\r\n      key: any;\r\n      parent: any;\r\n      style: any;\r\n    }) => {\r\n      return (\r\n        <CellMeasurer\r\n          cache={cache}\r\n          columnIndex={0}\r\n          key={key}\r\n          rowIndex={index}\r\n          parent={parent}\r\n        >\r\n          {({ measure, registerChild }) => (\r\n            <Post\r\n              style={style}\r\n              virtualRef={registerChild}\r\n              onLoad={measure}\r\n              {...posts[index]}\r\n            />\r\n          )}\r\n        </CellMeasurer>\r\n      );\r\n    },\r\n    [posts]\r\n  );\r\n\r\n  return (\r\n    <InfiniteLoader\r\n      isRowLoaded={isRowLoaded}\r\n      loadMoreRows={loadMoreRows}\r\n      rowCount={rowCount}\r\n    >\r\n      {({ onRowsRendered, registerChild }) => (\r\n        <AutoSizer disableHeight>\r\n          {({ width }) => (\r\n            <List\r\n              ref={registerChild}\r\n              onRowsRendered={onRowsRendered}\r\n              rowRenderer={rowRenderer}\r\n              deferredMeasurementCache={cache}\r\n              overscanRowCount={0}\r\n              rowCount={100}\r\n              rowHeight={cache.rowHeight}\r\n              width={width}\r\n              height={window.innerHeight}\r\n              style={{ gap: 5 }}\r\n            />\r\n          )}\r\n        </AutoSizer>\r\n      )}\r\n    </InfiniteLoader>\r\n  );\r\n}\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { formatCount } from \"../../misc/formatting\";\r\nimport { getMoreResults } from \"../../redux/actions\";\r\nimport { selectCount, selectPosts } from \"../../redux/selectors\";\r\nimport Title from \"../common/Title\";\r\nimport DynamicList from \"../post/DynamicList\";\r\nimport PostList from \"../post/PostList\";\r\nimport LoadMore from \"./LoadMore\";\r\n\r\nconst ResultsWrapper = styled.section(\r\n  (props) => css`\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function Results() {\r\n  const posts = useSelector(selectPosts);\r\n  const count = useSelector(selectCount);\r\n  const [isLoading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const loadMore = useCallback(() => dispatch(getMoreResults()), [dispatch]);\r\n\r\n  return (\r\n    <ResultsWrapper className=\"results\">\r\n      <Title>{formatCount(count)} results</Title>\r\n      <DynamicList\r\n        isLoading={isLoading}\r\n        setLoading={setLoading}\r\n        loadMore={loadMore}\r\n      />\r\n    </ResultsWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Config from \"../components/features/Config\";\r\nimport Results from \"../components/features/Results\";\r\nimport { selectHasResults } from \"../redux/selectors\";\r\n\r\nexport default function Search() {\r\n  const hasResults = useSelector(selectHasResults);\r\n\r\n  return (\r\n    <>\r\n      <Config />\r\n      {hasResults && <Results />}\r\n    </>\r\n  );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport Button from \"../common/Button\";\r\nimport { RED } from \"../../data/types\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { allowCookiesAction } from \"../../redux/actions\";\r\n\r\nconst CookieWrapper = styled.div(\r\n  (props) => css`\r\n    position: fixed;\r\n    display: flex;\r\n    bottom: 0;\r\n    bottom: left;\r\n    width: 100%;\r\n    color: ${props.theme.colors.text};\r\n    background: ${props.theme.colors.backgroundColor};\r\n    justify-content: space-between;\r\n    padding: ${props.theme.dimensions.gutter} 0;\r\n\r\n    span {\r\n      margin: auto 0;\r\n      margin-left: ${props.theme.dimensions.gutter};\r\n    }\r\n\r\n    button {\r\n      margin-right: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nexport default function CookieConfirmation() {\r\n  const dispatch = useDispatch();\r\n\r\n  const onClick = useCallback(() => {\r\n    dispatch(allowCookiesAction());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <CookieWrapper>\r\n      <span>This website uses cookies.</span>\r\n      <Button type={RED} onClick={onClick} label=\"Allow Cookies\">\r\n        Cool\r\n      </Button>\r\n    </CookieWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Header from \"./components/features/Header\";\r\nimport Footer from \"./components/features/Footer\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { MenuType } from \"./data/types\";\r\nimport Help from \"./pages/Help\";\r\nimport Settings from \"./pages/Settings\";\r\nimport Search from \"./pages/Search\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectActiveMenu, selectCookies } from \"./redux/selectors\";\r\nimport CookieConfirmation from \"./components/features/CookieConfirmation\";\r\n\r\nconst Main = styled.main(\r\n  (props) => css`\r\n    flex-grow: 1;\r\n    align-self: strech;\r\n    display: flex;\r\n    flex-direction: column;\r\n    box-sizing: border-box;\r\n    padding: 0 16px;\r\n    width: 100%;\r\n    max-width: 1000px;\r\n    margin: auto;\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nconst AppWrapper = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: strech;\r\n    min-height: 100%;\r\n    background: ${props.theme.colors.backgroundColor};\r\n    color: ${props.theme.colors.backgroundColor2};\r\n\r\n    font-size: 14px;\r\n\r\n    a {\r\n      color: ${props.theme.colors.accentColor};\r\n      text-decoration: none;\r\n    }\r\n\r\n    > *:not(:last-child) {\r\n      margin-bottom: ${props.theme.dimensions.gutter};\r\n    }\r\n  `\r\n);\r\n\r\nfunction getActivePage(activeMenu: MenuType) {\r\n  switch (activeMenu) {\r\n    case \"help\":\r\n      return <Help />;\r\n    case \"settings\":\r\n      return <Settings />;\r\n    case \"search\":\r\n    default:\r\n      return <Search />;\r\n  }\r\n}\r\n\r\nexport default function AppContent() {\r\n  const activeMenu = useSelector(selectActiveMenu);\r\n  const activePage = getActivePage(activeMenu);\r\n  const cookies = useSelector(selectCookies);\r\n\r\n  return (\r\n    <AppWrapper>\r\n      <Header />\r\n      <Main>{activePage}</Main>\r\n      <Footer />\r\n      {!cookies && <CookieConfirmation />}\r\n    </AppWrapper>\r\n  );\r\n}\r\n","const theme = {\r\n  dimensions: {\r\n    borderRadius: \"3px\",\r\n    borderWidth: \"2px\",\r\n\r\n    spacing: \"4px\",\r\n    bigSpacing: \"8px\",\r\n    appMargin: \"16px\",\r\n    gutter: \"8px\",\r\n  },\r\n  colors: {\r\n    accentColor: \"crimson\",\r\n    hoverAccent: \"crimson\",\r\n    backgroundColor: \"#121212\",\r\n    backgroundColor2: \"#fff\",\r\n  },\r\n  shadow: {\r\n    box: \"box-shadow: 0 0 8px #000\",\r\n    drop: \"drop-shadow(0 0 4px #000)\",\r\n  },\r\n  timings: {\r\n    transistionTime: \"0.2s\",\r\n  },\r\n  misc: {\r\n    layer:\r\n      \"#ffffff11; :hover { background: #ffffff16;} transition: background-color 0.2s ease-in-out\",\r\n  },\r\n};\r\n\r\nexport default theme;\r\n\r\nexport type ThemeType = typeof theme;\r\n","import React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store, persistor } from \"./redux/store\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport AppContent from \"./AppContent\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport theme from \"./misc/theme\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <ThemeProvider theme={theme}>\r\n          <AppContent />\r\n        </ThemeProvider>\r\n      </PersistGate>\r\n    </Provider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"app-root\"));\r\n"],"sourceRoot":""}