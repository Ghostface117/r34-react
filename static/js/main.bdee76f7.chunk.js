(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(73)},33:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},60:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),o=n.n(c),i=(n(33),n(6)),s=n(8),l=n(11),u=n(9),m=n(12),h=n(16),f=n(2),p=n(10),d=n(24),g=n.n(d);n(41);var b=function(e){var t=e.text,n=e.initial,a=e.onChange;return r.a.createElement("label",{className:"toggle-wrapper"},r.a.createElement(g.a,{defaultChecked:n||!1,icons:{checked:null,unchecked:null},onChange:a}),r.a.createElement("span",{className:"toggle-text"},t))};n(43);var v=function(e){var t=e.name,n=e.count,a=e.modifier,c=e.types,o=e.active,i=e.onClick;return r.a.createElement("span",{className:"badge badge-tag"+(o?" active":" ")+("-"===a?" exclude":" "),onClick:function(){return i({name:t,count:n,types:c,modifier:a})}},n?"".concat(t," (").concat(n,")"):t)};function E(e){var t=e.tags,n=e.activeTags,a=e.onItemClick;return r.a.createElement("div",{className:"tag-list"},t.map(function(e){return r.a.createElement(v,Object.assign({key:"t_"+e.name},e,{active:O(e,n),onClick:a}))}))}var j=E;function O(e,t){return t.some(function(t){return t.name===e.name})}n(45);var N=function(e){var t=e.id,n=e.media_type,c=e.media_src,o=e.rating,i=e.score,s=e.source,l=e.tags,u=e.activeTags,m=e.onTagClick,h=Object(a.useState)(!0),p=Object(f.a)(h,2),d=p[0],g=p[1];return r.a.createElement("li",{id:t,className:"list-group-item post gray"},r.a.createElement(w,{type:n,src:c,onClick:function(){return g(!d)}}),r.a.createElement("div",{className:"details collapse"+(d?"":".show")},r.a.createElement("div",{className:"d-flex justify-content-between info-bar"},r.a.createElement(k,{value:o}),r.a.createElement(y,{value:i}),r.a.createElement(C,{value:s})),r.a.createElement("div",{className:"pl-1"},r.a.createElement(E,{tags:l,activeTags:u,onItemClick:m}))))};function w(e){var t=e.type,n=e.src,a=e.onClick,c=!1;switch(t){case"image":return r.a.createElement("img",{src:n,alt:n,className:"img-fluid",onClick:a});case"video":return r.a.createElement("video",{controls:!0,loop:!0,src:n,alt:n,className:"img-fluid",onClick:a,onTouchMove:function(){c=!0},onTouchEnd:function(e){c||a(e),c=!1}});default:return null}}function k(e){var t=e.value;return r.a.createElement("span",{className:"rating"},t[0].toUpperCase())}function y(e){var t=e.value;return r.a.createElement("span",{className:"score"},t)}function C(e){var t=e.value;return t?t.startsWith("http")?r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"source"},"Source"):r.a.createElement("span",{className:"source"},t):null}var _=function(e){var t=e.posts,n=e.activeTags,a=e.onTagClick;return r.a.createElement("ul",{className:"list-group list-group-flush post-list"},t.map(function(e){return r.a.createElement(N,Object.assign({key:"p_".concat(e.id)},e,{activeTags:n,onTagClick:a}))}))},x=n(15),S=n.n(x),T=n(18),R=20,I="https://custom-r34-api.herokuapp.com",z=I;fetch(I).then(function(){return z=I}).catch(function(){return z="https://r34-api-clone.herokuapp.com"});var H={getTags:function(){var e=Object(T.a)(S.a.mark(function e(t){var n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z+"/tags?limit="+R+"&name="+t+"*&order_by=posts");case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getPosts:function(){var e=Object(T.a)(S.a.mark(function e(t){var n,a,r,c=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,a=c.length>2&&void 0!==c[2]?c[2]:0,e.next=4,fetch(P(n,t,a));case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()};function P(e,t,n){var a=z+"/posts";return a+="?pid="+e,a+="&limit="+R,a+="&tags="+t.map(function(e){return(e.modifier?e.modifier:"")+encodeURIComponent(e.name)}).join("+"),a+=encodeURIComponent("+score:>="+n)}var q=n(25),B=n.n(q),G=(n(60),function e(t,n,a,r,c,o,s,l,u,m,h,f,p,d,g,b,v,E,j,O){Object(i.a)(this,e),this.id=t,this.score=n,this.rating=a,this.source=r,this.tags=c,this.media_type=o,this.media_src=s,this.file_url=l,this.width=u,this.height=m,this.creator_id=h,this.creator_url=f,this.status=p,this.parent_id=d,this.has_children=g,this.has_comments=b,this.comments_url=v,this.has_notes=E,this.created_at=j,this.change=O}),U=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"+";Object(i.a)(this,e),this.name=t,this.types=n,this.count=a,this.modifier=r},W=function(e){return e.name?function(e){var t=e.name,n=e.types,a=e.count,r=e.modifier;return new U(t,n,Number(a),r)}(e):function(e){var t=e.id,n=e.type,a=e.score,r=e.rating,c=e.source,o=e.tags,i=e.file_url,s=e.width,l=e.height,u=e.creator_id,m=e.creator_url,h=e.sample_url,f=e.status,p=e.parent_id,d=e.has_children,g=e.has_comments,b=e.comments_url,v=e.has_notes,E=e.created_at,j=e.change;return new G(Number(t),Number(a),r,c,o.map(function(e){return new U(e)}),n,h,i,Number(s),Number(l),u,m,f,p,d,g,b,v,E,j)}(e)};var J=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(f.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)("+"),l=Object(f.a)(s,2),u=l[0],m=l[1],h=Object(a.useState)([]),p=Object(f.a)(h,2),d=p[0],g=p[1],b=Object(a.useState)([]),v=Object(f.a)(b,2),E=v[0],j=v[1];Object(a.useEffect)(function(){d&&d.length>0&&j(d.filter(function(){return!0}))},[d]);var O={placeholder:"Search for tags",value:o,onChange:function(e,t){var n=t.newValue;return i(n)}};return r.a.createElement("form",{onSubmit:function(e){var n=E.find(function(e){return e.name===o})||{};t(W({name:o,count:n.posts,types:n.types,modifier:u})),i(""),e.preventDefault()},className:"d-flex input-group tag-selector"},r.a.createElement("div",{className:"input-group-prepend left-append"},r.a.createElement("select",{className:"form-control select-modifier",value:u,onChange:function(e){return m(e.target.value)}},r.a.createElement("option",null,"+"),r.a.createElement("option",null,"-"))),r.a.createElement(B.a,{suggestions:d,onSuggestionsFetchRequested:function(e){var t,n=e.value;H.getTags((t=n,t.toLowerCase().replace(" ","_"))).then(function(e){g(e)})},onSuggestionsClearRequested:function(){return g([])},getSuggestionValue:function(e){return e.name},renderSuggestion:function(e){var t=e.name,n=e.posts;return r.a.createElement("span",null,"".concat(t," (").concat(n,")"))},inputProps:O}),r.a.createElement("div",{className:"input-group-append right-append"},r.a.createElement("input",{type:"submit",value:"Add",className:"btn btn-red btn-add-tag"})))},L=!0;var M=Object(p.e)(function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),s=Object(f.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(1),p=Object(f.a)(m,2),d=p[0],g=p[1],v=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],c=function(e){n.find(function(t){return t.name===e.name})&&o(e),r([].concat(Object(h.a)(n),[e]))},o=function(e){r(n.filter(function(t){return t.name!==e.name}))};return[n,function(e){n.find(function(t){return t.name===e.name})?o(e):c(e)},c,o]}(),E=Object(f.a)(v,4),O=E[0],N=E[1],w=E[2],k=E[3],y=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1];return[n,r,function(e){return r([].concat(Object(h.a)(e),Object(h.a)(e)))}]}(),C=Object(f.a)(y,3),x=C[0],S=C[1],T=C[2],R=function(){H.getPosts(O,d+1,l?1:void 0).then(function(e){T(e.map(W)),g(d+1),L=!0})};return window.onscroll=function(){c&&L&&window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-window.innerHeight&&(L=!1,R())},r.a.createElement("main",null,r.a.createElement("section",{className:"search"},r.a.createElement("h3",{className:"centered"},"Search"),r.a.createElement(J,{onSubmit:w,className:"centered"}),O.length>0?r.a.createElement("label",null,"Tags:",r.a.createElement(j,{tags:O,activeTags:O,onItemClick:k})):r.a.createElement("div",{className:"mb-1"}),r.a.createElement(b,{text:"Infinite Scroll",initial:c,onChange:function(){return o(!c)}}),r.a.createElement(b,{text:"Only show Rated",initial:l,onChange:function(){return u(!l)}}),r.a.createElement("button",{className:"btn btn-block btn-red",onClick:function(){H.getPosts(O,1,l?1:void 0).then(function(e){S(e.map(W)),g(1)})}},"Search")),x.length>0?r.a.createElement("section",{className:"results"},r.a.createElement("h3",{className:"centered"},"Results"),r.a.createElement(_,{posts:x,activeTags:O,onTagClick:N}),r.a.createElement("button",{className:"btn btn-block btn-red",onClick:R},"Load More")):null)}),V=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("main",null,r.a.createElement("p",null,"Helpful things")))}}]),t}(a.Component),A=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("h1",null,"404 - not found")),r.a.createElement("main",null,r.a.createElement("p",null,"Go away")))}}]),t}(a.Component),D=n(14),F=(n(69),n(71),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{basename:"/r34-react"},r.a.createElement("header",{className:"centered"},r.a.createElement("h1",{className:"centered"},"Browse ",r.a.createElement("a",{href:"https://rule34.xxx"},"Rule34")),r.a.createElement("div",{className:"container d-flex justify-content-center menu-bar"},r.a.createElement(D.b,{to:"/",className:"menu-item"},"Search"),r.a.createElement(D.b,{to:"/help",className:"menu-item"},"Help"))),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:M}),r.a.createElement(p.a,{exact:!0,path:"/help",component:V}),r.a.createElement(p.a,{component:A})),r.a.createElement("div",{className:"spacer"}),r.a.createElement("footer",null,r.a.createElement("small",null,r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/kurozenzen/r34"},"Github Repository"))),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,"Please, if you notice ",r.a.createElement("a",{href:"https://github.com/kurozenzen/r34/issues/new?template=bug_report.md"}," something isn't right"),", or you ",r.a.createElement("a",{href:"https://github.com/kurozenzen/r34/issues/new?template=feature_request.md"},"want a feature")," to be implemented take the time to let me know.")),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",null,"Hosted with Github Pages.")))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(F,null),document.getElementById("app-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.bdee76f7.chunk.js.map